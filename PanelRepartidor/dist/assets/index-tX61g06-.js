function A1(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Pd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qs(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var o=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:function(){return t[s]}})}),n}var ic={exports:{}},Ts={},sc={exports:{}},we={};var sm;function R1(){if(sm)return we;sm=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function w(b){return b===null||typeof b!="object"?null:(b=y&&b[y]||b["@@iterator"],typeof b=="function"?b:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function S(b,M,G){this.props=b,this.context=M,this.refs=C,this.updater=G||_}S.prototype.isReactComponent={},S.prototype.setState=function(b,M){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,M,"setState")},S.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function T(){}T.prototype=S.prototype;function N(b,M,G){this.props=b,this.context=M,this.refs=C,this.updater=G||_}var P=N.prototype=new T;P.constructor=N,E(P,S.prototype),P.isPureReactComponent=!0;var L=Array.isArray,I=Object.prototype.hasOwnProperty,U={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function F(b,M,G){var J,Q={},te=null,Y=null;if(M!=null)for(J in M.ref!==void 0&&(Y=M.ref),M.key!==void 0&&(te=""+M.key),M)I.call(M,J)&&!z.hasOwnProperty(J)&&(Q[J]=M[J]);var re=arguments.length-2;if(re===1)Q.children=G;else if(1<re){for(var he=Array(re),be=0;be<re;be++)he[be]=arguments[be+2];Q.children=he}if(b&&b.defaultProps)for(J in re=b.defaultProps,re)Q[J]===void 0&&(Q[J]=re[J]);return{$$typeof:t,type:b,key:te,ref:Y,props:Q,_owner:U.current}}function X(b,M){return{$$typeof:t,type:b.type,key:M,ref:b.ref,props:b.props,_owner:b._owner}}function ee(b){return typeof b=="object"&&b!==null&&b.$$typeof===t}function Pe(b){var M={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(G){return M[G]})}var ye=/\/+/g;function je(b,M){return typeof b=="object"&&b!==null&&b.key!=null?Pe(""+b.key):M.toString(36)}function _e(b,M,G,J,Q){var te=typeof b;(te==="undefined"||te==="boolean")&&(b=null);var Y=!1;if(b===null)Y=!0;else switch(te){case"string":case"number":Y=!0;break;case"object":switch(b.$$typeof){case t:case e:Y=!0}}if(Y)return Y=b,Q=Q(Y),b=J===""?"."+je(Y,0):J,L(Q)?(G="",b!=null&&(G=b.replace(ye,"$&/")+"/"),_e(Q,M,G,"",function(be){return be})):Q!=null&&(ee(Q)&&(Q=X(Q,G+(!Q.key||Y&&Y.key===Q.key?"":(""+Q.key).replace(ye,"$&/")+"/")+b)),M.push(Q)),1;if(Y=0,J=J===""?".":J+":",L(b))for(var re=0;re<b.length;re++){te=b[re];var he=J+je(te,re);Y+=_e(te,M,G,he,Q)}else if(he=w(b),typeof he=="function")for(b=he.call(b),re=0;!(te=b.next()).done;)te=te.value,he=J+je(te,re++),Y+=_e(te,M,G,he,Q);else if(te==="object")throw M=String(b),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return Y}function Be(b,M,G){if(b==null)return b;var J=[],Q=0;return _e(b,J,"","",function(te){return M.call(G,te,Q++)}),J}function it(b){if(b._status===-1){var M=b._result;M=M(),M.then(function(G){(b._status===0||b._status===-1)&&(b._status=1,b._result=G)},function(G){(b._status===0||b._status===-1)&&(b._status=2,b._result=G)}),b._status===-1&&(b._status=0,b._result=M)}if(b._status===1)return b._result.default;throw b._result}var ge={current:null},K={transition:null},ue={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:K,ReactCurrentOwner:U};function j(){throw Error("act(...) is not supported in production builds of React.")}return we.Children={map:Be,forEach:function(b,M,G){Be(b,function(){M.apply(this,arguments)},G)},count:function(b){var M=0;return Be(b,function(){M++}),M},toArray:function(b){return Be(b,function(M){return M})||[]},only:function(b){if(!ee(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},we.Component=S,we.Fragment=n,we.Profiler=o,we.PureComponent=N,we.StrictMode=s,we.Suspense=h,we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,we.act=j,we.cloneElement=function(b,M,G){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var J=E({},b.props),Q=b.key,te=b.ref,Y=b._owner;if(M!=null){if(M.ref!==void 0&&(te=M.ref,Y=U.current),M.key!==void 0&&(Q=""+M.key),b.type&&b.type.defaultProps)var re=b.type.defaultProps;for(he in M)I.call(M,he)&&!z.hasOwnProperty(he)&&(J[he]=M[he]===void 0&&re!==void 0?re[he]:M[he])}var he=arguments.length-2;if(he===1)J.children=G;else if(1<he){re=Array(he);for(var be=0;be<he;be++)re[be]=arguments[be+2];J.children=re}return{$$typeof:t,type:b.type,key:Q,ref:te,props:J,_owner:Y}},we.createContext=function(b){return b={$$typeof:u,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},we.createElement=F,we.createFactory=function(b){var M=F.bind(null,b);return M.type=b,M},we.createRef=function(){return{current:null}},we.forwardRef=function(b){return{$$typeof:d,render:b}},we.isValidElement=ee,we.lazy=function(b){return{$$typeof:g,_payload:{_status:-1,_result:b},_init:it}},we.memo=function(b,M){return{$$typeof:p,type:b,compare:M===void 0?null:M}},we.startTransition=function(b){var M=K.transition;K.transition={};try{b()}finally{K.transition=M}},we.unstable_act=j,we.useCallback=function(b,M){return ge.current.useCallback(b,M)},we.useContext=function(b){return ge.current.useContext(b)},we.useDebugValue=function(){},we.useDeferredValue=function(b){return ge.current.useDeferredValue(b)},we.useEffect=function(b,M){return ge.current.useEffect(b,M)},we.useId=function(){return ge.current.useId()},we.useImperativeHandle=function(b,M,G){return ge.current.useImperativeHandle(b,M,G)},we.useInsertionEffect=function(b,M){return ge.current.useInsertionEffect(b,M)},we.useLayoutEffect=function(b,M){return ge.current.useLayoutEffect(b,M)},we.useMemo=function(b,M){return ge.current.useMemo(b,M)},we.useReducer=function(b,M,G){return ge.current.useReducer(b,M,G)},we.useRef=function(b){return ge.current.useRef(b)},we.useState=function(b){return ge.current.useState(b)},we.useSyncExternalStore=function(b,M,G){return ge.current.useSyncExternalStore(b,M,G)},we.useTransition=function(){return ge.current.useTransition()},we.version="18.3.1",we}var om;function jd(){return om||(om=1,sc.exports=R1()),sc.exports}var am;function N1(){if(am)return Ts;am=1;var t=jd(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,h,p){var g,y={},w=null,_=null;p!==void 0&&(w=""+p),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(_=h.ref);for(g in h)s.call(h,g)&&!l.hasOwnProperty(g)&&(y[g]=h[g]);if(d&&d.defaultProps)for(g in h=d.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:d,key:w,ref:_,props:y,_owner:o.current}}return Ts.Fragment=n,Ts.jsx=u,Ts.jsxs=u,Ts}var lm;function O1(){return lm||(lm=1,ic.exports=N1()),ic.exports}var v=O1(),V=jd();const I1=Pd(V);var ga={},oc={exports:{}},Rt={},ac={exports:{}},lc={};var um;function D1(){return um||(um=1,(function(t){function e(K,ue){var j=K.length;K.push(ue);e:for(;0<j;){var b=j-1>>>1,M=K[b];if(0<o(M,ue))K[b]=ue,K[j]=M,j=b;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var ue=K[0],j=K.pop();if(j!==ue){K[0]=j;e:for(var b=0,M=K.length,G=M>>>1;b<G;){var J=2*(b+1)-1,Q=K[J],te=J+1,Y=K[te];if(0>o(Q,j))te<M&&0>o(Y,Q)?(K[b]=Y,K[te]=j,b=te):(K[b]=Q,K[J]=j,b=J);else if(te<M&&0>o(Y,j))K[b]=Y,K[te]=j,b=te;else break e}}return ue}function o(K,ue){var j=K.sortIndex-ue.sortIndex;return j!==0?j:K.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var h=[],p=[],g=1,y=null,w=3,_=!1,E=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(K){for(var ue=n(p);ue!==null;){if(ue.callback===null)s(p);else if(ue.startTime<=K)s(p),ue.sortIndex=ue.expirationTime,e(h,ue);else break;ue=n(p)}}function L(K){if(C=!1,P(K),!E)if(n(h)!==null)E=!0,it(I);else{var ue=n(p);ue!==null&&ge(L,ue.startTime-K)}}function I(K,ue){E=!1,C&&(C=!1,T(F),F=-1),_=!0;var j=w;try{for(P(ue),y=n(h);y!==null&&(!(y.expirationTime>ue)||K&&!Pe());){var b=y.callback;if(typeof b=="function"){y.callback=null,w=y.priorityLevel;var M=b(y.expirationTime<=ue);ue=t.unstable_now(),typeof M=="function"?y.callback=M:y===n(h)&&s(h),P(ue)}else s(h);y=n(h)}if(y!==null)var G=!0;else{var J=n(p);J!==null&&ge(L,J.startTime-ue),G=!1}return G}finally{y=null,w=j,_=!1}}var U=!1,z=null,F=-1,X=5,ee=-1;function Pe(){return!(t.unstable_now()-ee<X)}function ye(){if(z!==null){var K=t.unstable_now();ee=K;var ue=!0;try{ue=z(!0,K)}finally{ue?je():(U=!1,z=null)}}else U=!1}var je;if(typeof N=="function")je=function(){N(ye)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Be=_e.port2;_e.port1.onmessage=ye,je=function(){Be.postMessage(null)}}else je=function(){S(ye,0)};function it(K){z=K,U||(U=!0,je())}function ge(K,ue){F=S(function(){K(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){E||_||(E=!0,it(I))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(K){switch(w){case 1:case 2:case 3:var ue=3;break;default:ue=w}var j=w;w=ue;try{return K()}finally{w=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,ue){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var j=w;w=K;try{return ue()}finally{w=j}},t.unstable_scheduleCallback=function(K,ue,j){var b=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?b+j:b):j=b,K){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=j+M,K={id:g++,callback:ue,priorityLevel:K,startTime:j,expirationTime:M,sortIndex:-1},j>b?(K.sortIndex=j,e(p,K),n(h)===null&&K===n(p)&&(C?(T(F),F=-1):C=!0,ge(L,j-b))):(K.sortIndex=M,e(h,K),E||_||(E=!0,it(I))),K},t.unstable_shouldYield=Pe,t.unstable_wrapCallback=function(K){var ue=w;return function(){var j=w;w=ue;try{return K.apply(this,arguments)}finally{w=j}}}})(lc)),lc}var cm;function M1(){return cm||(cm=1,ac.exports=D1()),ac.exports}var dm;function L1(){if(dm)return Rt;dm=1;var t=jd(),e=M1();function n(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){u(r,i),u(r+"Capture",i)}function u(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function w(r){return h.call(y,r)?!0:h.call(g,r)?!1:p.test(r)?y[r]=!0:(g[r]=!0,!1)}function _(r,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function E(r,i,a,c){if(i===null||typeof i>"u"||_(r,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function C(r,i,a,c,f,m,x){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=m,this.removeEmptyString=x}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){S[r]=new C(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];S[i]=new C(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){S[r]=new C(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){S[r]=new C(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){S[r]=new C(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){S[r]=new C(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){S[r]=new C(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){S[r]=new C(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){S[r]=new C(r,5,!1,r.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function N(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(T,N);S[i]=new C(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(T,N);S[i]=new C(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(T,N);S[i]=new C(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){S[r]=new C(r,1,!1,r.toLowerCase(),null,!1,!1)}),S.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){S[r]=new C(r,1,!1,r.toLowerCase(),null,!0,!0)});function P(r,i,a,c){var f=S.hasOwnProperty(i)?S[i]:null;(f!==null?f.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(E(i,a,f,c)&&(a=null),c||f===null?w(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,c=f.attributeNamespace,a===null?r.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?r.setAttributeNS(c,i,a):r.setAttribute(i,a))))}var L=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),U=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),Pe=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),Be=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),K=Symbol.iterator;function ue(r){return r===null||typeof r!="object"?null:(r=K&&r[K]||r["@@iterator"],typeof r=="function"?r:null)}var j=Object.assign,b;function M(r){if(b===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);b=i&&i[1]||""}return`
`+b+r}var G=!1;function J(r,i){if(!r||G)return"";G=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var c=$}Reflect.construct(r,[],i)}else{try{i.call()}catch($){c=$}r.call(i.prototype)}else{try{throw Error()}catch($){c=$}r()}}catch($){if($&&c&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),m=c.stack.split(`
`),x=f.length-1,k=m.length-1;1<=x&&0<=k&&f[x]!==m[k];)k--;for(;1<=x&&0<=k;x--,k--)if(f[x]!==m[k]){if(x!==1||k!==1)do if(x--,k--,0>k||f[x]!==m[k]){var A=`
`+f[x].replace(" at new "," at ");return r.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",r.displayName)),A}while(1<=x&&0<=k);break}}}finally{G=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?M(r):""}function Q(r){switch(r.tag){case 5:return M(r.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return r=J(r.type,!1),r;case 11:return r=J(r.type.render,!1),r;case 1:return r=J(r.type,!0),r;default:return""}}function te(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case U:return"Portal";case X:return"Profiler";case F:return"StrictMode";case je:return"Suspense";case _e:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Pe:return(r.displayName||"Context")+".Consumer";case ee:return(r._context.displayName||"Context")+".Provider";case ye:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Be:return i=r.displayName||null,i!==null?i:te(r.type)||"Memo";case it:i=r._payload,r=r._init;try{return te(r(i))}catch{}}return null}function Y(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(i);case 8:return i===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function re(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function he(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function be(r){var i=he(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),c=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(x){c=""+x,m.call(this,x)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function ke(r){r._valueTracker||(r._valueTracker=be(r))}function Oe(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return r&&(c=he(r)?r.checked?"true":"false":r.value),r=c,r!==a?(i.setValue(r),!0):!1}function ze(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function xe(r,i){var a=i.checked;return j({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function lt(r,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=re(i.value!=null?i.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function kt(r,i){i=i.checked,i!=null&&P(r,"checked",i,!1)}function bt(r,i){kt(r,i);var a=re(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?Qt(r,i.type,a):i.hasOwnProperty("defaultValue")&&Qt(r,i.type,re(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function Vt(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Qt(r,i,a){(i!=="number"||ze(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var pt=Array.isArray;function Lr(r,i,a,c){if(r=r.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=i.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&c&&(r[a].defaultSelected=!0)}else{for(a=""+re(a),i=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function Ui(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return j({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function so(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(n(92));if(pt(a)){if(1<a.length)throw Error(n(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:re(a)}}function Vi(r,i){var a=re(i.value),c=re(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function oo(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Fi(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bi(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Fi(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Bn,zi=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,f){MSApp.execUnsafeLocalFunction(function(){return r(i,a,c,f)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Bn=Bn||document.createElement("div"),Bn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Bn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function $r(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var br={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ml=["Webkit","ms","Moz","O"];Object.keys(br).forEach(function(r){ml.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),br[i]=br[r]})});function ao(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||br.hasOwnProperty(r)&&br[r]?(""+i).trim():i+"px"}function xh(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=ao(a,i[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,f):r[a]=f}}var Dw=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gl(r,i){if(i){if(Dw[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function vl(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yl=null;function wl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var xl=null,zn=null,Wn=null;function bh(r){if(r=ds(r)){if(typeof xl!="function")throw Error(n(280));var i=r.stateNode;i&&(i=Ro(i),xl(r.stateNode,r.type,i))}}function _h(r){zn?Wn?Wn.push(r):Wn=[r]:zn=r}function Eh(){if(zn){var r=zn,i=Wn;if(Wn=zn=null,bh(r),i)for(r=0;r<i.length;r++)bh(i[r])}}function Sh(r,i){return r(i)}function kh(){}var bl=!1;function Th(r,i,a){if(bl)return r(i,a);bl=!0;try{return Sh(r,i,a)}finally{bl=!1,(zn!==null||Wn!==null)&&(kh(),Eh())}}function Wi(r,i){var a=r.stateNode;if(a===null)return null;var c=Ro(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(n(231,i,typeof a));return a}var _l=!1;if(d)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){_l=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{_l=!1}function Mw(r,i,a,c,f,m,x,k,A){var $=Array.prototype.slice.call(arguments,3);try{i.apply(a,$)}catch(W){this.onError(W)}}var qi=!1,lo=null,uo=!1,El=null,Lw={onError:function(r){qi=!0,lo=r}};function $w(r,i,a,c,f,m,x,k,A){qi=!1,lo=null,Mw.apply(Lw,arguments)}function Uw(r,i,a,c,f,m,x,k,A){if($w.apply(this,arguments),qi){if(qi){var $=lo;qi=!1,lo=null}else throw Error(n(198));uo||(uo=!0,El=$)}}function pn(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function Ch(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Ph(r){if(pn(r)!==r)throw Error(n(188))}function Vw(r){var i=r.alternate;if(!i){if(i=pn(r),i===null)throw Error(n(188));return i!==r?null:r}for(var a=r,c=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return Ph(f),r;if(m===c)return Ph(f),i;m=m.sibling}throw Error(n(188))}if(a.return!==c.return)a=f,c=m;else{for(var x=!1,k=f.child;k;){if(k===a){x=!0,a=f,c=m;break}if(k===c){x=!0,c=f,a=m;break}k=k.sibling}if(!x){for(k=m.child;k;){if(k===a){x=!0,a=m,c=f;break}if(k===c){x=!0,c=m,a=f;break}k=k.sibling}if(!x)throw Error(n(189))}}if(a.alternate!==c)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?r:i}function jh(r){return r=Vw(r),r!==null?Ah(r):null}function Ah(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Ah(r);if(i!==null)return i;r=r.sibling}return null}var Rh=e.unstable_scheduleCallback,Nh=e.unstable_cancelCallback,Fw=e.unstable_shouldYield,Bw=e.unstable_requestPaint,Ke=e.unstable_now,zw=e.unstable_getCurrentPriorityLevel,Sl=e.unstable_ImmediatePriority,Oh=e.unstable_UserBlockingPriority,co=e.unstable_NormalPriority,Ww=e.unstable_LowPriority,Ih=e.unstable_IdlePriority,ho=null,dr=null;function Hw(r){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(ho,r,void 0,(r.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Gw,qw=Math.log,Kw=Math.LN2;function Gw(r){return r>>>=0,r===0?32:31-(qw(r)/Kw|0)|0}var fo=64,po=4194304;function Ki(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function mo(r,i){var a=r.pendingLanes;if(a===0)return 0;var c=0,f=r.suspendedLanes,m=r.pingedLanes,x=a&268435455;if(x!==0){var k=x&~f;k!==0?c=Ki(k):(m&=x,m!==0&&(c=Ki(m)))}else x=a&~f,x!==0?c=Ki(x):m!==0&&(c=Ki(m));if(c===0)return 0;if(i!==0&&i!==c&&(i&f)===0&&(f=c&-c,m=i&-i,f>=m||f===16&&(m&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=c;0<i;)a=31-Xt(i),f=1<<a,c|=r[a],i&=~f;return c}function Jw(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yw(r,i){for(var a=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes;0<m;){var x=31-Xt(m),k=1<<x,A=f[x];A===-1?((k&a)===0||(k&c)!==0)&&(f[x]=Jw(k,i)):A<=i&&(r.expiredLanes|=k),m&=~k}}function kl(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Dh(){var r=fo;return fo<<=1,(fo&4194240)===0&&(fo=64),r}function Tl(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function Gi(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Xt(i),r[i]=a}function Qw(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-Xt(a),m=1<<f;i[f]=0,c[f]=-1,r[f]=-1,a&=~m}}function Cl(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var c=31-Xt(a),f=1<<c;f&i|r[c]&i&&(r[c]|=i),a&=~f}}var Ce=0;function Mh(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Lh,Pl,$h,Uh,Vh,jl=!1,go=[],Ur=null,Vr=null,Fr=null,Ji=new Map,Yi=new Map,Br=[],Xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fh(r,i){switch(r){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Ji.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yi.delete(i.pointerId)}}function Qi(r,i,a,c,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},i!==null&&(i=ds(i),i!==null&&Pl(i)),r):(r.eventSystemFlags|=c,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function Zw(r,i,a,c,f){switch(i){case"focusin":return Ur=Qi(Ur,r,i,a,c,f),!0;case"dragenter":return Vr=Qi(Vr,r,i,a,c,f),!0;case"mouseover":return Fr=Qi(Fr,r,i,a,c,f),!0;case"pointerover":var m=f.pointerId;return Ji.set(m,Qi(Ji.get(m)||null,r,i,a,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Yi.set(m,Qi(Yi.get(m)||null,r,i,a,c,f)),!0}return!1}function Bh(r){var i=mn(r.target);if(i!==null){var a=pn(i);if(a!==null){if(i=a.tag,i===13){if(i=Ch(a),i!==null){r.blockedOn=i,Vh(r.priority,function(){$h(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function vo(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=Rl(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);yl=c,a.target.dispatchEvent(c),yl=null}else return i=ds(a),i!==null&&Pl(i),r.blockedOn=a,!1;i.shift()}return!0}function zh(r,i,a){vo(r)&&a.delete(i)}function ex(){jl=!1,Ur!==null&&vo(Ur)&&(Ur=null),Vr!==null&&vo(Vr)&&(Vr=null),Fr!==null&&vo(Fr)&&(Fr=null),Ji.forEach(zh),Yi.forEach(zh)}function Xi(r,i){r.blockedOn===i&&(r.blockedOn=null,jl||(jl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ex)))}function Zi(r){function i(f){return Xi(f,r)}if(0<go.length){Xi(go[0],r);for(var a=1;a<go.length;a++){var c=go[a];c.blockedOn===r&&(c.blockedOn=null)}}for(Ur!==null&&Xi(Ur,r),Vr!==null&&Xi(Vr,r),Fr!==null&&Xi(Fr,r),Ji.forEach(i),Yi.forEach(i),a=0;a<Br.length;a++)c=Br[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<Br.length&&(a=Br[0],a.blockedOn===null);)Bh(a),a.blockedOn===null&&Br.shift()}var Hn=L.ReactCurrentBatchConfig,yo=!0;function tx(r,i,a,c){var f=Ce,m=Hn.transition;Hn.transition=null;try{Ce=1,Al(r,i,a,c)}finally{Ce=f,Hn.transition=m}}function rx(r,i,a,c){var f=Ce,m=Hn.transition;Hn.transition=null;try{Ce=4,Al(r,i,a,c)}finally{Ce=f,Hn.transition=m}}function Al(r,i,a,c){if(yo){var f=Rl(r,i,a,c);if(f===null)Gl(r,i,c,wo,a),Fh(r,c);else if(Zw(f,r,i,a,c))c.stopPropagation();else if(Fh(r,c),i&4&&-1<Xw.indexOf(r)){for(;f!==null;){var m=ds(f);if(m!==null&&Lh(m),m=Rl(r,i,a,c),m===null&&Gl(r,i,c,wo,a),m===f)break;f=m}f!==null&&c.stopPropagation()}else Gl(r,i,c,null,a)}}var wo=null;function Rl(r,i,a,c){if(wo=null,r=wl(c),r=mn(r),r!==null)if(i=pn(r),i===null)r=null;else if(a=i.tag,a===13){if(r=Ch(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return wo=r,null}function Wh(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zw()){case Sl:return 1;case Oh:return 4;case co:case Ww:return 16;case Ih:return 536870912;default:return 16}default:return 16}}var zr=null,Nl=null,xo=null;function Hh(){if(xo)return xo;var r,i=Nl,a=i.length,c,f="value"in zr?zr.value:zr.textContent,m=f.length;for(r=0;r<a&&i[r]===f[r];r++);var x=a-r;for(c=1;c<=x&&i[a-c]===f[m-c];c++);return xo=f.slice(r,1<c?1-c:void 0)}function bo(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function _o(){return!0}function qh(){return!1}function Dt(r){function i(a,c,f,m,x){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(a=r[k],this[k]=a?a(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?_o:qh,this.isPropagationStopped=qh,this}return j(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_o)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_o)},persist:function(){},isPersistent:_o}),i}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=Dt(qn),es=j({},qn,{view:0,detail:0}),nx=Dt(es),Il,Dl,ts,Eo=j({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ll,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ts&&(ts&&r.type==="mousemove"?(Il=r.screenX-ts.screenX,Dl=r.screenY-ts.screenY):Dl=Il=0,ts=r),Il)},movementY:function(r){return"movementY"in r?r.movementY:Dl}}),Kh=Dt(Eo),ix=j({},Eo,{dataTransfer:0}),sx=Dt(ix),ox=j({},es,{relatedTarget:0}),Ml=Dt(ox),ax=j({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),lx=Dt(ax),ux=j({},qn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),cx=Dt(ux),dx=j({},qn,{data:0}),Gh=Dt(dx),hx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},px={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mx(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=px[r])?!!i[r]:!1}function Ll(){return mx}var gx=j({},es,{key:function(r){if(r.key){var i=hx[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=bo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?fx[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ll,charCode:function(r){return r.type==="keypress"?bo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?bo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),vx=Dt(gx),yx=j({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jh=Dt(yx),wx=j({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ll}),xx=Dt(wx),bx=j({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),_x=Dt(bx),Ex=j({},Eo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Sx=Dt(Ex),kx=[9,13,27,32],$l=d&&"CompositionEvent"in window,rs=null;d&&"documentMode"in document&&(rs=document.documentMode);var Tx=d&&"TextEvent"in window&&!rs,Yh=d&&(!$l||rs&&8<rs&&11>=rs),Qh=" ",Xh=!1;function Zh(r,i){switch(r){case"keyup":return kx.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ef(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Kn=!1;function Cx(r,i){switch(r){case"compositionend":return ef(i);case"keypress":return i.which!==32?null:(Xh=!0,Qh);case"textInput":return r=i.data,r===Qh&&Xh?null:r;default:return null}}function Px(r,i){if(Kn)return r==="compositionend"||!$l&&Zh(r,i)?(r=Hh(),xo=Nl=zr=null,Kn=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Yh&&i.locale!=="ko"?null:i.data;default:return null}}var jx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!jx[r.type]:i==="textarea"}function rf(r,i,a,c){_h(c),i=Po(i,"onChange"),0<i.length&&(a=new Ol("onChange","change",null,a,c),r.push({event:a,listeners:i}))}var ns=null,is=null;function Ax(r){bf(r,0)}function So(r){var i=Xn(r);if(Oe(i))return r}function Rx(r,i){if(r==="change")return i}var nf=!1;if(d){var Ul;if(d){var Vl="oninput"in document;if(!Vl){var sf=document.createElement("div");sf.setAttribute("oninput","return;"),Vl=typeof sf.oninput=="function"}Ul=Vl}else Ul=!1;nf=Ul&&(!document.documentMode||9<document.documentMode)}function of(){ns&&(ns.detachEvent("onpropertychange",af),is=ns=null)}function af(r){if(r.propertyName==="value"&&So(is)){var i=[];rf(i,is,r,wl(r)),Th(Ax,i)}}function Nx(r,i,a){r==="focusin"?(of(),ns=i,is=a,ns.attachEvent("onpropertychange",af)):r==="focusout"&&of()}function Ox(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return So(is)}function Ix(r,i){if(r==="click")return So(i)}function Dx(r,i){if(r==="input"||r==="change")return So(i)}function Mx(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Zt=typeof Object.is=="function"?Object.is:Mx;function ss(r,i){if(Zt(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!h.call(i,f)||!Zt(r[f],i[f]))return!1}return!0}function lf(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function uf(r,i){var a=lf(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=i&&c>=i)return{node:a,offset:i-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=lf(a)}}function cf(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?cf(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function df(){for(var r=window,i=ze();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=ze(r.document)}return i}function Fl(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function Lx(r){var i=df(),a=r.focusedElem,c=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&cf(a.ownerDocument.documentElement,a)){if(c!==null&&Fl(a)){if(i=c.start,r=c.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,m=Math.min(c.start,f);c=c.end===void 0?m:Math.min(c.end,f),!r.extend&&m>c&&(f=c,c=m,m=f),f=uf(a,m);var x=uf(a,c);f&&x&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==x.node||r.focusOffset!==x.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),r.removeAllRanges(),m>c?(r.addRange(i),r.extend(x.node,x.offset)):(i.setEnd(x.node,x.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var $x=d&&"documentMode"in document&&11>=document.documentMode,Gn=null,Bl=null,os=null,zl=!1;function hf(r,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zl||Gn==null||Gn!==ze(c)||(c=Gn,"selectionStart"in c&&Fl(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),os&&ss(os,c)||(os=c,c=Po(Bl,"onSelect"),0<c.length&&(i=new Ol("onSelect","select",null,i,a),r.push({event:i,listeners:c}),i.target=Gn)))}function ko(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var Jn={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionend:ko("Transition","TransitionEnd")},Wl={},ff={};d&&(ff=document.createElement("div").style,"AnimationEvent"in window||(delete Jn.animationend.animation,delete Jn.animationiteration.animation,delete Jn.animationstart.animation),"TransitionEvent"in window||delete Jn.transitionend.transition);function To(r){if(Wl[r])return Wl[r];if(!Jn[r])return r;var i=Jn[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in ff)return Wl[r]=i[a];return r}var pf=To("animationend"),mf=To("animationiteration"),gf=To("animationstart"),vf=To("transitionend"),yf=new Map,wf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(r,i){yf.set(r,i),l(i,[r])}for(var Hl=0;Hl<wf.length;Hl++){var ql=wf[Hl],Ux=ql.toLowerCase(),Vx=ql[0].toUpperCase()+ql.slice(1);Wr(Ux,"on"+Vx)}Wr(pf,"onAnimationEnd"),Wr(mf,"onAnimationIteration"),Wr(gf,"onAnimationStart"),Wr("dblclick","onDoubleClick"),Wr("focusin","onFocus"),Wr("focusout","onBlur"),Wr(vf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fx=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function xf(r,i,a){var c=r.type||"unknown-event";r.currentTarget=a,Uw(c,i,void 0,r),r.currentTarget=null}function bf(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],f=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var x=c.length-1;0<=x;x--){var k=c[x],A=k.instance,$=k.currentTarget;if(k=k.listener,A!==m&&f.isPropagationStopped())break e;xf(f,k,$),m=A}else for(x=0;x<c.length;x++){if(k=c[x],A=k.instance,$=k.currentTarget,k=k.listener,A!==m&&f.isPropagationStopped())break e;xf(f,k,$),m=A}}}if(uo)throw r=El,uo=!1,El=null,r}function Ie(r,i){var a=i[eu];a===void 0&&(a=i[eu]=new Set);var c=r+"__bubble";a.has(c)||(_f(i,r,2,!1),a.add(c))}function Kl(r,i,a){var c=0;i&&(c|=4),_f(a,r,c,i)}var Co="_reactListening"+Math.random().toString(36).slice(2);function ls(r){if(!r[Co]){r[Co]=!0,s.forEach(function(a){a!=="selectionchange"&&(Fx.has(a)||Kl(a,!1,r),Kl(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Co]||(i[Co]=!0,Kl("selectionchange",!1,i))}}function _f(r,i,a,c){switch(Wh(i)){case 1:var f=tx;break;case 4:f=rx;break;default:f=Al}a=f.bind(null,i,a,r),f=void 0,!_l||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(i,a,{capture:!0,passive:f}):r.addEventListener(i,a,!0):f!==void 0?r.addEventListener(i,a,{passive:f}):r.addEventListener(i,a,!1)}function Gl(r,i,a,c,f){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var k=c.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(x===4)for(x=c.return;x!==null;){var A=x.tag;if((A===3||A===4)&&(A=x.stateNode.containerInfo,A===f||A.nodeType===8&&A.parentNode===f))return;x=x.return}for(;k!==null;){if(x=mn(k),x===null)return;if(A=x.tag,A===5||A===6){c=m=x;continue e}k=k.parentNode}}c=c.return}Th(function(){var $=m,W=wl(a),H=[];e:{var B=yf.get(r);if(B!==void 0){var Z=Ol,se=r;switch(r){case"keypress":if(bo(a)===0)break e;case"keydown":case"keyup":Z=vx;break;case"focusin":se="focus",Z=Ml;break;case"focusout":se="blur",Z=Ml;break;case"beforeblur":case"afterblur":Z=Ml;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Kh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=sx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=xx;break;case pf:case mf:case gf:Z=lx;break;case vf:Z=_x;break;case"scroll":Z=nx;break;case"wheel":Z=Sx;break;case"copy":case"cut":case"paste":Z=cx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Jh}var oe=(i&4)!==0,Ge=!oe&&r==="scroll",O=oe?B!==null?B+"Capture":null:B;oe=[];for(var R=$,D;R!==null;){D=R;var q=D.stateNode;if(D.tag===5&&q!==null&&(D=q,O!==null&&(q=Wi(R,O),q!=null&&oe.push(us(R,q,D)))),Ge)break;R=R.return}0<oe.length&&(B=new Z(B,se,null,a,W),H.push({event:B,listeners:oe}))}}if((i&7)===0){e:{if(B=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",B&&a!==yl&&(se=a.relatedTarget||a.fromElement)&&(mn(se)||se[_r]))break e;if((Z||B)&&(B=W.window===W?W:(B=W.ownerDocument)?B.defaultView||B.parentWindow:window,Z?(se=a.relatedTarget||a.toElement,Z=$,se=se?mn(se):null,se!==null&&(Ge=pn(se),se!==Ge||se.tag!==5&&se.tag!==6)&&(se=null)):(Z=null,se=$),Z!==se)){if(oe=Kh,q="onMouseLeave",O="onMouseEnter",R="mouse",(r==="pointerout"||r==="pointerover")&&(oe=Jh,q="onPointerLeave",O="onPointerEnter",R="pointer"),Ge=Z==null?B:Xn(Z),D=se==null?B:Xn(se),B=new oe(q,R+"leave",Z,a,W),B.target=Ge,B.relatedTarget=D,q=null,mn(W)===$&&(oe=new oe(O,R+"enter",se,a,W),oe.target=D,oe.relatedTarget=Ge,q=oe),Ge=q,Z&&se)t:{for(oe=Z,O=se,R=0,D=oe;D;D=Yn(D))R++;for(D=0,q=O;q;q=Yn(q))D++;for(;0<R-D;)oe=Yn(oe),R--;for(;0<D-R;)O=Yn(O),D--;for(;R--;){if(oe===O||O!==null&&oe===O.alternate)break t;oe=Yn(oe),O=Yn(O)}oe=null}else oe=null;Z!==null&&Ef(H,B,Z,oe,!1),se!==null&&Ge!==null&&Ef(H,Ge,se,oe,!0)}}e:{if(B=$?Xn($):window,Z=B.nodeName&&B.nodeName.toLowerCase(),Z==="select"||Z==="input"&&B.type==="file")var ae=Rx;else if(tf(B))if(nf)ae=Dx;else{ae=Ox;var ce=Nx}else(Z=B.nodeName)&&Z.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(ae=Ix);if(ae&&(ae=ae(r,$))){rf(H,ae,a,W);break e}ce&&ce(r,B,$),r==="focusout"&&(ce=B._wrapperState)&&ce.controlled&&B.type==="number"&&Qt(B,"number",B.value)}switch(ce=$?Xn($):window,r){case"focusin":(tf(ce)||ce.contentEditable==="true")&&(Gn=ce,Bl=$,os=null);break;case"focusout":os=Bl=Gn=null;break;case"mousedown":zl=!0;break;case"contextmenu":case"mouseup":case"dragend":zl=!1,hf(H,a,W);break;case"selectionchange":if($x)break;case"keydown":case"keyup":hf(H,a,W)}var de;if($l)e:{switch(r){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else Kn?Zh(r,a)&&(me="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(me="onCompositionStart");me&&(Yh&&a.locale!=="ko"&&(Kn||me!=="onCompositionStart"?me==="onCompositionEnd"&&Kn&&(de=Hh()):(zr=W,Nl="value"in zr?zr.value:zr.textContent,Kn=!0)),ce=Po($,me),0<ce.length&&(me=new Gh(me,r,null,a,W),H.push({event:me,listeners:ce}),de?me.data=de:(de=ef(a),de!==null&&(me.data=de)))),(de=Tx?Cx(r,a):Px(r,a))&&($=Po($,"onBeforeInput"),0<$.length&&(W=new Gh("onBeforeInput","beforeinput",null,a,W),H.push({event:W,listeners:$}),W.data=de))}bf(H,i)})}function us(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Po(r,i){for(var a=i+"Capture",c=[];r!==null;){var f=r,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=Wi(r,a),m!=null&&c.unshift(us(r,m,f)),m=Wi(r,i),m!=null&&c.push(us(r,m,f))),r=r.return}return c}function Yn(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Ef(r,i,a,c,f){for(var m=i._reactName,x=[];a!==null&&a!==c;){var k=a,A=k.alternate,$=k.stateNode;if(A!==null&&A===c)break;k.tag===5&&$!==null&&(k=$,f?(A=Wi(a,m),A!=null&&x.unshift(us(a,A,k))):f||(A=Wi(a,m),A!=null&&x.push(us(a,A,k)))),a=a.return}x.length!==0&&r.push({event:i,listeners:x})}var Bx=/\r\n?/g,zx=/\u0000|\uFFFD/g;function Sf(r){return(typeof r=="string"?r:""+r).replace(Bx,`
`).replace(zx,"")}function jo(r,i,a){if(i=Sf(i),Sf(r)!==i&&a)throw Error(n(425))}function Ao(){}var Jl=null,Yl=null;function Ql(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Xl=typeof setTimeout=="function"?setTimeout:void 0,Wx=typeof clearTimeout=="function"?clearTimeout:void 0,kf=typeof Promise=="function"?Promise:void 0,Hx=typeof queueMicrotask=="function"?queueMicrotask:typeof kf<"u"?function(r){return kf.resolve(null).then(r).catch(qx)}:Xl;function qx(r){setTimeout(function(){throw r})}function Zl(r,i){var a=i,c=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){r.removeChild(f),Zi(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Zi(i)}function Hr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Tf(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var Qn=Math.random().toString(36).slice(2),hr="__reactFiber$"+Qn,cs="__reactProps$"+Qn,_r="__reactContainer$"+Qn,eu="__reactEvents$"+Qn,Kx="__reactListeners$"+Qn,Gx="__reactHandles$"+Qn;function mn(r){var i=r[hr];if(i)return i;for(var a=r.parentNode;a;){if(i=a[_r]||a[hr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=Tf(r);r!==null;){if(a=r[hr])return a;r=Tf(r)}return i}r=a,a=r.parentNode}return null}function ds(r){return r=r[hr]||r[_r],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Xn(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Ro(r){return r[cs]||null}var tu=[],Zn=-1;function qr(r){return{current:r}}function De(r){0>Zn||(r.current=tu[Zn],tu[Zn]=null,Zn--)}function Ae(r,i){Zn++,tu[Zn]=r.current,r.current=i}var Kr={},mt=qr(Kr),Tt=qr(!1),gn=Kr;function ei(r,i){var a=r.type.contextTypes;if(!a)return Kr;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in a)f[m]=i[m];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=f),f}function Ct(r){return r=r.childContextTypes,r!=null}function No(){De(Tt),De(mt)}function Cf(r,i,a){if(mt.current!==Kr)throw Error(n(168));Ae(mt,i),Ae(Tt,a)}function Pf(r,i,a){var c=r.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in i))throw Error(n(108,Y(r)||"Unknown",f));return j({},a,c)}function Oo(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Kr,gn=mt.current,Ae(mt,r),Ae(Tt,Tt.current),!0}function jf(r,i,a){var c=r.stateNode;if(!c)throw Error(n(169));a?(r=Pf(r,i,gn),c.__reactInternalMemoizedMergedChildContext=r,De(Tt),De(mt),Ae(mt,r)):De(Tt),Ae(Tt,a)}var Er=null,Io=!1,ru=!1;function Af(r){Er===null?Er=[r]:Er.push(r)}function Jx(r){Io=!0,Af(r)}function Gr(){if(!ru&&Er!==null){ru=!0;var r=0,i=Ce;try{var a=Er;for(Ce=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}Er=null,Io=!1}catch(f){throw Er!==null&&(Er=Er.slice(r+1)),Rh(Sl,Gr),f}finally{Ce=i,ru=!1}}return null}var ti=[],ri=0,Do=null,Mo=0,Ft=[],Bt=0,vn=null,Sr=1,kr="";function yn(r,i){ti[ri++]=Mo,ti[ri++]=Do,Do=r,Mo=i}function Rf(r,i,a){Ft[Bt++]=Sr,Ft[Bt++]=kr,Ft[Bt++]=vn,vn=r;var c=Sr;r=kr;var f=32-Xt(c)-1;c&=~(1<<f),a+=1;var m=32-Xt(i)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,Sr=1<<32-Xt(i)+f|a<<f|c,kr=m+r}else Sr=1<<m|a<<f|c,kr=r}function nu(r){r.return!==null&&(yn(r,1),Rf(r,1,0))}function iu(r){for(;r===Do;)Do=ti[--ri],ti[ri]=null,Mo=ti[--ri],ti[ri]=null;for(;r===vn;)vn=Ft[--Bt],Ft[Bt]=null,kr=Ft[--Bt],Ft[Bt]=null,Sr=Ft[--Bt],Ft[Bt]=null}var Mt=null,Lt=null,Me=!1,er=null;function Nf(r,i){var a=qt(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function Of(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Mt=r,Lt=Hr(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Mt=r,Lt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=vn!==null?{id:Sr,overflow:kr}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=qt(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,Mt=r,Lt=null,!0):!1;default:return!1}}function su(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ou(r){if(Me){var i=Lt;if(i){var a=i;if(!Of(r,i)){if(su(r))throw Error(n(418));i=Hr(a.nextSibling);var c=Mt;i&&Of(r,i)?Nf(c,a):(r.flags=r.flags&-4097|2,Me=!1,Mt=r)}}else{if(su(r))throw Error(n(418));r.flags=r.flags&-4097|2,Me=!1,Mt=r}}}function If(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Mt=r}function Lo(r){if(r!==Mt)return!1;if(!Me)return If(r),Me=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Ql(r.type,r.memoizedProps)),i&&(i=Lt)){if(su(r))throw Df(),Error(n(418));for(;i;)Nf(r,i),i=Hr(i.nextSibling)}if(If(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){Lt=Hr(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}Lt=null}}else Lt=Mt?Hr(r.stateNode.nextSibling):null;return!0}function Df(){for(var r=Lt;r;)r=Hr(r.nextSibling)}function ni(){Lt=Mt=null,Me=!1}function au(r){er===null?er=[r]:er.push(r)}var Yx=L.ReactCurrentBatchConfig;function hs(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(n(309));var c=a.stateNode}if(!c)throw Error(n(147,r));var f=c,m=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(x){var k=f.refs;x===null?delete k[m]:k[m]=x},i._stringRef=m,i)}if(typeof r!="string")throw Error(n(284));if(!a._owner)throw Error(n(290,r))}return r}function $o(r,i){throw r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Mf(r){var i=r._init;return i(r._payload)}function Lf(r){function i(O,R){if(r){var D=O.deletions;D===null?(O.deletions=[R],O.flags|=16):D.push(R)}}function a(O,R){if(!r)return null;for(;R!==null;)i(O,R),R=R.sibling;return null}function c(O,R){for(O=new Map;R!==null;)R.key!==null?O.set(R.key,R):O.set(R.index,R),R=R.sibling;return O}function f(O,R){return O=rn(O,R),O.index=0,O.sibling=null,O}function m(O,R,D){return O.index=D,r?(D=O.alternate,D!==null?(D=D.index,D<R?(O.flags|=2,R):D):(O.flags|=2,R)):(O.flags|=1048576,R)}function x(O){return r&&O.alternate===null&&(O.flags|=2),O}function k(O,R,D,q){return R===null||R.tag!==6?(R=Xu(D,O.mode,q),R.return=O,R):(R=f(R,D),R.return=O,R)}function A(O,R,D,q){var ae=D.type;return ae===z?W(O,R,D.props.children,q,D.key):R!==null&&(R.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===it&&Mf(ae)===R.type)?(q=f(R,D.props),q.ref=hs(O,R,D),q.return=O,q):(q=la(D.type,D.key,D.props,null,O.mode,q),q.ref=hs(O,R,D),q.return=O,q)}function $(O,R,D,q){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=Zu(D,O.mode,q),R.return=O,R):(R=f(R,D.children||[]),R.return=O,R)}function W(O,R,D,q,ae){return R===null||R.tag!==7?(R=Tn(D,O.mode,q,ae),R.return=O,R):(R=f(R,D),R.return=O,R)}function H(O,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Xu(""+R,O.mode,D),R.return=O,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case I:return D=la(R.type,R.key,R.props,null,O.mode,D),D.ref=hs(O,null,R),D.return=O,D;case U:return R=Zu(R,O.mode,D),R.return=O,R;case it:var q=R._init;return H(O,q(R._payload),D)}if(pt(R)||ue(R))return R=Tn(R,O.mode,D,null),R.return=O,R;$o(O,R)}return null}function B(O,R,D,q){var ae=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return ae!==null?null:k(O,R,""+D,q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case I:return D.key===ae?A(O,R,D,q):null;case U:return D.key===ae?$(O,R,D,q):null;case it:return ae=D._init,B(O,R,ae(D._payload),q)}if(pt(D)||ue(D))return ae!==null?null:W(O,R,D,q,null);$o(O,D)}return null}function Z(O,R,D,q,ae){if(typeof q=="string"&&q!==""||typeof q=="number")return O=O.get(D)||null,k(R,O,""+q,ae);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return O=O.get(q.key===null?D:q.key)||null,A(R,O,q,ae);case U:return O=O.get(q.key===null?D:q.key)||null,$(R,O,q,ae);case it:var ce=q._init;return Z(O,R,D,ce(q._payload),ae)}if(pt(q)||ue(q))return O=O.get(D)||null,W(R,O,q,ae,null);$o(R,q)}return null}function se(O,R,D,q){for(var ae=null,ce=null,de=R,me=R=0,at=null;de!==null&&me<D.length;me++){de.index>me?(at=de,de=null):at=de.sibling;var Se=B(O,de,D[me],q);if(Se===null){de===null&&(de=at);break}r&&de&&Se.alternate===null&&i(O,de),R=m(Se,R,me),ce===null?ae=Se:ce.sibling=Se,ce=Se,de=at}if(me===D.length)return a(O,de),Me&&yn(O,me),ae;if(de===null){for(;me<D.length;me++)de=H(O,D[me],q),de!==null&&(R=m(de,R,me),ce===null?ae=de:ce.sibling=de,ce=de);return Me&&yn(O,me),ae}for(de=c(O,de);me<D.length;me++)at=Z(de,O,me,D[me],q),at!==null&&(r&&at.alternate!==null&&de.delete(at.key===null?me:at.key),R=m(at,R,me),ce===null?ae=at:ce.sibling=at,ce=at);return r&&de.forEach(function(nn){return i(O,nn)}),Me&&yn(O,me),ae}function oe(O,R,D,q){var ae=ue(D);if(typeof ae!="function")throw Error(n(150));if(D=ae.call(D),D==null)throw Error(n(151));for(var ce=ae=null,de=R,me=R=0,at=null,Se=D.next();de!==null&&!Se.done;me++,Se=D.next()){de.index>me?(at=de,de=null):at=de.sibling;var nn=B(O,de,Se.value,q);if(nn===null){de===null&&(de=at);break}r&&de&&nn.alternate===null&&i(O,de),R=m(nn,R,me),ce===null?ae=nn:ce.sibling=nn,ce=nn,de=at}if(Se.done)return a(O,de),Me&&yn(O,me),ae;if(de===null){for(;!Se.done;me++,Se=D.next())Se=H(O,Se.value,q),Se!==null&&(R=m(Se,R,me),ce===null?ae=Se:ce.sibling=Se,ce=Se);return Me&&yn(O,me),ae}for(de=c(O,de);!Se.done;me++,Se=D.next())Se=Z(de,O,me,Se.value,q),Se!==null&&(r&&Se.alternate!==null&&de.delete(Se.key===null?me:Se.key),R=m(Se,R,me),ce===null?ae=Se:ce.sibling=Se,ce=Se);return r&&de.forEach(function(j1){return i(O,j1)}),Me&&yn(O,me),ae}function Ge(O,R,D,q){if(typeof D=="object"&&D!==null&&D.type===z&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case I:e:{for(var ae=D.key,ce=R;ce!==null;){if(ce.key===ae){if(ae=D.type,ae===z){if(ce.tag===7){a(O,ce.sibling),R=f(ce,D.props.children),R.return=O,O=R;break e}}else if(ce.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===it&&Mf(ae)===ce.type){a(O,ce.sibling),R=f(ce,D.props),R.ref=hs(O,ce,D),R.return=O,O=R;break e}a(O,ce);break}else i(O,ce);ce=ce.sibling}D.type===z?(R=Tn(D.props.children,O.mode,q,D.key),R.return=O,O=R):(q=la(D.type,D.key,D.props,null,O.mode,q),q.ref=hs(O,R,D),q.return=O,O=q)}return x(O);case U:e:{for(ce=D.key;R!==null;){if(R.key===ce)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){a(O,R.sibling),R=f(R,D.children||[]),R.return=O,O=R;break e}else{a(O,R);break}else i(O,R);R=R.sibling}R=Zu(D,O.mode,q),R.return=O,O=R}return x(O);case it:return ce=D._init,Ge(O,R,ce(D._payload),q)}if(pt(D))return se(O,R,D,q);if(ue(D))return oe(O,R,D,q);$o(O,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,R!==null&&R.tag===6?(a(O,R.sibling),R=f(R,D),R.return=O,O=R):(a(O,R),R=Xu(D,O.mode,q),R.return=O,O=R),x(O)):a(O,R)}return Ge}var ii=Lf(!0),$f=Lf(!1),Uo=qr(null),Vo=null,si=null,lu=null;function uu(){lu=si=Vo=null}function cu(r){var i=Uo.current;De(Uo),r._currentValue=i}function du(r,i,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),r===a)break;r=r.return}}function oi(r,i){Vo=r,lu=si=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Pt=!0),r.firstContext=null)}function zt(r){var i=r._currentValue;if(lu!==r)if(r={context:r,memoizedValue:i,next:null},si===null){if(Vo===null)throw Error(n(308));si=r,Vo.dependencies={lanes:0,firstContext:r}}else si=si.next=r;return i}var wn=null;function hu(r){wn===null?wn=[r]:wn.push(r)}function Uf(r,i,a,c){var f=i.interleaved;return f===null?(a.next=a,hu(i)):(a.next=f.next,f.next=a),i.interleaved=a,Tr(r,c)}function Tr(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Jr=!1;function fu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Cr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Yr(r,i,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Ee&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,Tr(r,a)}return f=c.interleaved,f===null?(i.next=i,hu(c)):(i.next=f.next,f.next=i),c.interleaved=i,Tr(r,a)}function Fo(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=r.pendingLanes,a|=c,i.lanes=a,Cl(r,a)}}function Ff(r,i){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?f=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function Bo(r,i,a,c){var f=r.updateQueue;Jr=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var A=k,$=A.next;A.next=null,x===null?m=$:x.next=$,x=A;var W=r.alternate;W!==null&&(W=W.updateQueue,k=W.lastBaseUpdate,k!==x&&(k===null?W.firstBaseUpdate=$:k.next=$,W.lastBaseUpdate=A))}if(m!==null){var H=f.baseState;x=0,W=$=A=null,k=m;do{var B=k.lane,Z=k.eventTime;if((c&B)===B){W!==null&&(W=W.next={eventTime:Z,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var se=r,oe=k;switch(B=i,Z=a,oe.tag){case 1:if(se=oe.payload,typeof se=="function"){H=se.call(Z,H,B);break e}H=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=oe.payload,B=typeof se=="function"?se.call(Z,H,B):se,B==null)break e;H=j({},H,B);break e;case 2:Jr=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,B=f.effects,B===null?f.effects=[k]:B.push(k))}else Z={eventTime:Z,lane:B,tag:k.tag,payload:k.payload,callback:k.callback,next:null},W===null?($=W=Z,A=H):W=W.next=Z,x|=B;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;B=k,k=B.next,B.next=null,f.lastBaseUpdate=B,f.shared.pending=null}}while(!0);if(W===null&&(A=H),f.baseState=A,f.firstBaseUpdate=$,f.lastBaseUpdate=W,i=f.shared.interleaved,i!==null){f=i;do x|=f.lane,f=f.next;while(f!==i)}else m===null&&(f.shared.lanes=0);_n|=x,r.lanes=x,r.memoizedState=H}}function Bf(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var c=r[i],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(n(191,f));f.call(c)}}}var fs={},fr=qr(fs),ps=qr(fs),ms=qr(fs);function xn(r){if(r===fs)throw Error(n(174));return r}function pu(r,i){switch(Ae(ms,i),Ae(ps,r),Ae(fr,fs),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Bi(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Bi(i,r)}De(fr),Ae(fr,i)}function ai(){De(fr),De(ps),De(ms)}function zf(r){xn(ms.current);var i=xn(fr.current),a=Bi(i,r.type);i!==a&&(Ae(ps,r),Ae(fr,a))}function mu(r){ps.current===r&&(De(fr),De(ps))}var Ue=qr(0);function zo(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var gu=[];function vu(){for(var r=0;r<gu.length;r++)gu[r]._workInProgressVersionPrimary=null;gu.length=0}var Wo=L.ReactCurrentDispatcher,yu=L.ReactCurrentBatchConfig,bn=0,Ve=null,et=null,st=null,Ho=!1,gs=!1,vs=0,Qx=0;function gt(){throw Error(n(321))}function wu(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!Zt(r[a],i[a]))return!1;return!0}function xu(r,i,a,c,f,m){if(bn=m,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Wo.current=r===null||r.memoizedState===null?t1:r1,r=a(c,f),gs){m=0;do{if(gs=!1,vs=0,25<=m)throw Error(n(301));m+=1,st=et=null,i.updateQueue=null,Wo.current=n1,r=a(c,f)}while(gs)}if(Wo.current=Go,i=et!==null&&et.next!==null,bn=0,st=et=Ve=null,Ho=!1,i)throw Error(n(300));return r}function bu(){var r=vs!==0;return vs=0,r}function pr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ve.memoizedState=st=r:st=st.next=r,st}function Wt(){if(et===null){var r=Ve.alternate;r=r!==null?r.memoizedState:null}else r=et.next;var i=st===null?Ve.memoizedState:st.next;if(i!==null)st=i,et=r;else{if(r===null)throw Error(n(310));et=r,r={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},st===null?Ve.memoizedState=st=r:st=st.next=r}return st}function ys(r,i){return typeof i=="function"?i(r):i}function _u(r){var i=Wt(),a=i.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=r;var c=et,f=c.baseQueue,m=a.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}c.baseQueue=f=m,a.pending=null}if(f!==null){m=f.next,c=c.baseState;var k=x=null,A=null,$=m;do{var W=$.lane;if((bn&W)===W)A!==null&&(A=A.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:r(c,$.action);else{var H={lane:W,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};A===null?(k=A=H,x=c):A=A.next=H,Ve.lanes|=W,_n|=W}$=$.next}while($!==null&&$!==m);A===null?x=c:A.next=k,Zt(c,i.memoizedState)||(Pt=!0),i.memoizedState=c,i.baseState=x,i.baseQueue=A,a.lastRenderedState=c}if(r=a.interleaved,r!==null){f=r;do m=f.lane,Ve.lanes|=m,_n|=m,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Eu(r){var i=Wt(),a=i.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=r;var c=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do m=r(m,x.action),x=x.next;while(x!==f);Zt(m,i.memoizedState)||(Pt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function Wf(){}function Hf(r,i){var a=Ve,c=Wt(),f=i(),m=!Zt(c.memoizedState,f);if(m&&(c.memoizedState=f,Pt=!0),c=c.queue,Su(Gf.bind(null,a,c,r),[r]),c.getSnapshot!==i||m||st!==null&&st.memoizedState.tag&1){if(a.flags|=2048,ws(9,Kf.bind(null,a,c,f,i),void 0,null),ot===null)throw Error(n(349));(bn&30)!==0||qf(a,i,f)}return f}function qf(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=Ve.updateQueue,i===null?(i={lastEffect:null,stores:null},Ve.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function Kf(r,i,a,c){i.value=a,i.getSnapshot=c,Jf(i)&&Yf(r)}function Gf(r,i,a){return a(function(){Jf(i)&&Yf(r)})}function Jf(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!Zt(r,a)}catch{return!0}}function Yf(r){var i=Tr(r,1);i!==null&&ir(i,r,1,-1)}function Qf(r){var i=pr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:r},i.queue=r,r=r.dispatch=e1.bind(null,Ve,r),[i.memoizedState,r]}function ws(r,i,a,c){return r={tag:r,create:i,destroy:a,deps:c,next:null},i=Ve.updateQueue,i===null?(i={lastEffect:null,stores:null},Ve.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,i.lastEffect=r)),r}function Xf(){return Wt().memoizedState}function qo(r,i,a,c){var f=pr();Ve.flags|=r,f.memoizedState=ws(1|i,a,void 0,c===void 0?null:c)}function Ko(r,i,a,c){var f=Wt();c=c===void 0?null:c;var m=void 0;if(et!==null){var x=et.memoizedState;if(m=x.destroy,c!==null&&wu(c,x.deps)){f.memoizedState=ws(i,a,m,c);return}}Ve.flags|=r,f.memoizedState=ws(1|i,a,m,c)}function Zf(r,i){return qo(8390656,8,r,i)}function Su(r,i){return Ko(2048,8,r,i)}function ep(r,i){return Ko(4,2,r,i)}function tp(r,i){return Ko(4,4,r,i)}function rp(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function np(r,i,a){return a=a!=null?a.concat([r]):null,Ko(4,4,rp.bind(null,i,r),a)}function ku(){}function ip(r,i){var a=Wt();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&wu(i,c[1])?c[0]:(a.memoizedState=[r,i],r)}function sp(r,i){var a=Wt();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&wu(i,c[1])?c[0]:(r=r(),a.memoizedState=[r,i],r)}function op(r,i,a){return(bn&21)===0?(r.baseState&&(r.baseState=!1,Pt=!0),r.memoizedState=a):(Zt(a,i)||(a=Dh(),Ve.lanes|=a,_n|=a,r.baseState=!0),i)}function Xx(r,i){var a=Ce;Ce=a!==0&&4>a?a:4,r(!0);var c=yu.transition;yu.transition={};try{r(!1),i()}finally{Ce=a,yu.transition=c}}function ap(){return Wt().memoizedState}function Zx(r,i,a){var c=en(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},lp(r))up(i,a);else if(a=Uf(r,i,a,c),a!==null){var f=Et();ir(a,r,c,f),cp(a,i,c)}}function e1(r,i,a){var c=en(r),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(lp(r))up(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var x=i.lastRenderedState,k=m(x,a);if(f.hasEagerState=!0,f.eagerState=k,Zt(k,x)){var A=i.interleaved;A===null?(f.next=f,hu(i)):(f.next=A.next,A.next=f),i.interleaved=f;return}}catch{}a=Uf(r,i,f,c),a!==null&&(f=Et(),ir(a,r,c,f),cp(a,i,c))}}function lp(r){var i=r.alternate;return r===Ve||i!==null&&i===Ve}function up(r,i){gs=Ho=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function cp(r,i,a){if((a&4194240)!==0){var c=i.lanes;c&=r.pendingLanes,a|=c,i.lanes=a,Cl(r,a)}}var Go={readContext:zt,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},t1={readContext:zt,useCallback:function(r,i){return pr().memoizedState=[r,i===void 0?null:i],r},useContext:zt,useEffect:Zf,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,qo(4194308,4,rp.bind(null,i,r),a)},useLayoutEffect:function(r,i){return qo(4194308,4,r,i)},useInsertionEffect:function(r,i){return qo(4,2,r,i)},useMemo:function(r,i){var a=pr();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var c=pr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},c.queue=r,r=r.dispatch=Zx.bind(null,Ve,r),[c.memoizedState,r]},useRef:function(r){var i=pr();return r={current:r},i.memoizedState=r},useState:Qf,useDebugValue:ku,useDeferredValue:function(r){return pr().memoizedState=r},useTransition:function(){var r=Qf(!1),i=r[0];return r=Xx.bind(null,r[1]),pr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var c=Ve,f=pr();if(Me){if(a===void 0)throw Error(n(407));a=a()}else{if(a=i(),ot===null)throw Error(n(349));(bn&30)!==0||qf(c,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,Zf(Gf.bind(null,c,m,r),[r]),c.flags|=2048,ws(9,Kf.bind(null,c,m,a,i),void 0,null),a},useId:function(){var r=pr(),i=ot.identifierPrefix;if(Me){var a=kr,c=Sr;a=(c&~(1<<32-Xt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=vs++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Qx++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},r1={readContext:zt,useCallback:ip,useContext:zt,useEffect:Su,useImperativeHandle:np,useInsertionEffect:ep,useLayoutEffect:tp,useMemo:sp,useReducer:_u,useRef:Xf,useState:function(){return _u(ys)},useDebugValue:ku,useDeferredValue:function(r){var i=Wt();return op(i,et.memoizedState,r)},useTransition:function(){var r=_u(ys)[0],i=Wt().memoizedState;return[r,i]},useMutableSource:Wf,useSyncExternalStore:Hf,useId:ap,unstable_isNewReconciler:!1},n1={readContext:zt,useCallback:ip,useContext:zt,useEffect:Su,useImperativeHandle:np,useInsertionEffect:ep,useLayoutEffect:tp,useMemo:sp,useReducer:Eu,useRef:Xf,useState:function(){return Eu(ys)},useDebugValue:ku,useDeferredValue:function(r){var i=Wt();return et===null?i.memoizedState=r:op(i,et.memoizedState,r)},useTransition:function(){var r=Eu(ys)[0],i=Wt().memoizedState;return[r,i]},useMutableSource:Wf,useSyncExternalStore:Hf,useId:ap,unstable_isNewReconciler:!1};function tr(r,i){if(r&&r.defaultProps){i=j({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function Tu(r,i,a,c){i=r.memoizedState,a=a(c,i),a=a==null?i:j({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Jo={isMounted:function(r){return(r=r._reactInternals)?pn(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var c=Et(),f=en(r),m=Cr(c,f);m.payload=i,a!=null&&(m.callback=a),i=Yr(r,m,f),i!==null&&(ir(i,r,f,c),Fo(i,r,f))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var c=Et(),f=en(r),m=Cr(c,f);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=Yr(r,m,f),i!==null&&(ir(i,r,f,c),Fo(i,r,f))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=Et(),c=en(r),f=Cr(a,c);f.tag=2,i!=null&&(f.callback=i),i=Yr(r,f,c),i!==null&&(ir(i,r,c,a),Fo(i,r,c))}};function dp(r,i,a,c,f,m,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,m,x):i.prototype&&i.prototype.isPureReactComponent?!ss(a,c)||!ss(f,m):!0}function hp(r,i,a){var c=!1,f=Kr,m=i.contextType;return typeof m=="object"&&m!==null?m=zt(m):(f=Ct(i)?gn:mt.current,c=i.contextTypes,m=(c=c!=null)?ei(r,f):Kr),i=new i(a,m),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Jo,r.stateNode=i,i._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=m),i}function fp(r,i,a,c){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==r&&Jo.enqueueReplaceState(i,i.state,null)}function Cu(r,i,a,c){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},fu(r);var m=i.contextType;typeof m=="object"&&m!==null?f.context=zt(m):(m=Ct(i)?gn:mt.current,f.context=ei(r,m)),f.state=r.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Tu(r,i,m,a),f.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&Jo.enqueueReplaceState(f,f.state,null),Bo(r,a,f,c),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function li(r,i){try{var a="",c=i;do a+=Q(c),c=c.return;while(c);var f=a}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:i,stack:f,digest:null}}function Pu(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function ju(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var i1=typeof WeakMap=="function"?WeakMap:Map;function pp(r,i,a){a=Cr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){ra||(ra=!0,Wu=c),ju(r,i)},a}function mp(r,i,a){a=Cr(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var f=i.value;a.payload=function(){return c(f)},a.callback=function(){ju(r,i)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){ju(r,i),typeof c!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var x=i.stack;this.componentDidCatch(i.value,{componentStack:x!==null?x:""})}),a}function gp(r,i,a){var c=r.pingCache;if(c===null){c=r.pingCache=new i1;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(f.add(a),r=y1.bind(null,r,i,a),i.then(r,r))}function vp(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function yp(r,i,a,c,f){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Cr(-1,1),i.tag=2,Yr(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var s1=L.ReactCurrentOwner,Pt=!1;function _t(r,i,a,c){i.child=r===null?$f(i,null,a,c):ii(i,r.child,a,c)}function wp(r,i,a,c,f){a=a.render;var m=i.ref;return oi(i,f),c=xu(r,i,a,c,m,f),a=bu(),r!==null&&!Pt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~f,Pr(r,i,f)):(Me&&a&&nu(i),i.flags|=1,_t(r,i,c,f),i.child)}function xp(r,i,a,c,f){if(r===null){var m=a.type;return typeof m=="function"&&!Qu(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,bp(r,i,m,c,f)):(r=la(a.type,null,c,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,(r.lanes&f)===0){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:ss,a(x,c)&&r.ref===i.ref)return Pr(r,i,f)}return i.flags|=1,r=rn(m,c),r.ref=i.ref,r.return=i,i.child=r}function bp(r,i,a,c,f){if(r!==null){var m=r.memoizedProps;if(ss(m,c)&&r.ref===i.ref)if(Pt=!1,i.pendingProps=c=m,(r.lanes&f)!==0)(r.flags&131072)!==0&&(Pt=!0);else return i.lanes=r.lanes,Pr(r,i,f)}return Au(r,i,a,c,f)}function _p(r,i,a){var c=i.pendingProps,f=c.children,m=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(ci,$t),$t|=a;else{if((a&1073741824)===0)return r=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Ae(ci,$t),$t|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Ae(ci,$t),$t|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,Ae(ci,$t),$t|=c;return _t(r,i,f,a),i.child}function Ep(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Au(r,i,a,c,f){var m=Ct(a)?gn:mt.current;return m=ei(i,m),oi(i,f),a=xu(r,i,a,c,m,f),c=bu(),r!==null&&!Pt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~f,Pr(r,i,f)):(Me&&c&&nu(i),i.flags|=1,_t(r,i,a,f),i.child)}function Sp(r,i,a,c,f){if(Ct(a)){var m=!0;Oo(i)}else m=!1;if(oi(i,f),i.stateNode===null)Qo(r,i),hp(i,a,c),Cu(i,a,c,f),c=!0;else if(r===null){var x=i.stateNode,k=i.memoizedProps;x.props=k;var A=x.context,$=a.contextType;typeof $=="object"&&$!==null?$=zt($):($=Ct(a)?gn:mt.current,$=ei(i,$));var W=a.getDerivedStateFromProps,H=typeof W=="function"||typeof x.getSnapshotBeforeUpdate=="function";H||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==c||A!==$)&&fp(i,x,c,$),Jr=!1;var B=i.memoizedState;x.state=B,Bo(i,c,x,f),A=i.memoizedState,k!==c||B!==A||Tt.current||Jr?(typeof W=="function"&&(Tu(i,a,W,c),A=i.memoizedState),(k=Jr||dp(i,a,k,c,B,A,$))?(H||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=A),x.props=c,x.state=A,x.context=$,c=k):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{x=i.stateNode,Vf(r,i),k=i.memoizedProps,$=i.type===i.elementType?k:tr(i.type,k),x.props=$,H=i.pendingProps,B=x.context,A=a.contextType,typeof A=="object"&&A!==null?A=zt(A):(A=Ct(a)?gn:mt.current,A=ei(i,A));var Z=a.getDerivedStateFromProps;(W=typeof Z=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==H||B!==A)&&fp(i,x,c,A),Jr=!1,B=i.memoizedState,x.state=B,Bo(i,c,x,f);var se=i.memoizedState;k!==H||B!==se||Tt.current||Jr?(typeof Z=="function"&&(Tu(i,a,Z,c),se=i.memoizedState),($=Jr||dp(i,a,$,c,B,se,A)||!1)?(W||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,se,A),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,se,A)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||k===r.memoizedProps&&B===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&B===r.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=se),x.props=c,x.state=se,x.context=A,c=$):(typeof x.componentDidUpdate!="function"||k===r.memoizedProps&&B===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&B===r.memoizedState||(i.flags|=1024),c=!1)}return Ru(r,i,a,c,m,f)}function Ru(r,i,a,c,f,m){Ep(r,i);var x=(i.flags&128)!==0;if(!c&&!x)return f&&jf(i,a,!1),Pr(r,i,m);c=i.stateNode,s1.current=i;var k=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,r!==null&&x?(i.child=ii(i,r.child,null,m),i.child=ii(i,null,k,m)):_t(r,i,k,m),i.memoizedState=c.state,f&&jf(i,a,!0),i.child}function kp(r){var i=r.stateNode;i.pendingContext?Cf(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Cf(r,i.context,!1),pu(r,i.containerInfo)}function Tp(r,i,a,c,f){return ni(),au(f),i.flags|=256,_t(r,i,a,c),i.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function Ou(r){return{baseLanes:r,cachePool:null,transitions:null}}function Cp(r,i,a){var c=i.pendingProps,f=Ue.current,m=!1,x=(i.flags&128)!==0,k;if((k=x)||(k=r!==null&&r.memoizedState===null?!1:(f&2)!==0),k?(m=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ae(Ue,f&1),r===null)return ou(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(x=c.children,r=c.fallback,m?(c=i.mode,m=i.child,x={mode:"hidden",children:x},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=x):m=ua(x,c,0,null),r=Tn(r,c,a,null),m.return=i,r.return=i,m.sibling=r,i.child=m,i.child.memoizedState=Ou(a),i.memoizedState=Nu,r):Iu(i,x));if(f=r.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return o1(r,i,x,c,k,f,a);if(m){m=c.fallback,x=i.mode,f=r.child,k=f.sibling;var A={mode:"hidden",children:c.children};return(x&1)===0&&i.child!==f?(c=i.child,c.childLanes=0,c.pendingProps=A,i.deletions=null):(c=rn(f,A),c.subtreeFlags=f.subtreeFlags&14680064),k!==null?m=rn(k,m):(m=Tn(m,x,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,x=r.child.memoizedState,x=x===null?Ou(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},m.memoizedState=x,m.childLanes=r.childLanes&~a,i.memoizedState=Nu,c}return m=r.child,r=m.sibling,c=rn(m,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=c,i.memoizedState=null,c}function Iu(r,i){return i=ua({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Yo(r,i,a,c){return c!==null&&au(c),ii(i,r.child,null,a),r=Iu(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function o1(r,i,a,c,f,m,x){if(a)return i.flags&256?(i.flags&=-257,c=Pu(Error(n(422))),Yo(r,i,x,c)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(m=c.fallback,f=i.mode,c=ua({mode:"visible",children:c.children},f,0,null),m=Tn(m,f,x,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,(i.mode&1)!==0&&ii(i,r.child,null,x),i.child.memoizedState=Ou(x),i.memoizedState=Nu,m);if((i.mode&1)===0)return Yo(r,i,x,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var k=c.dgst;return c=k,m=Error(n(419)),c=Pu(m,c,void 0),Yo(r,i,x,c)}if(k=(x&r.childLanes)!==0,Pt||k){if(c=ot,c!==null){switch(x&-x){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|x))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,Tr(r,f),ir(c,r,f,-1))}return Yu(),c=Pu(Error(n(421))),Yo(r,i,x,c)}return f.data==="$?"?(i.flags|=128,i.child=r.child,i=w1.bind(null,r),f._reactRetry=i,null):(r=m.treeContext,Lt=Hr(f.nextSibling),Mt=i,Me=!0,er=null,r!==null&&(Ft[Bt++]=Sr,Ft[Bt++]=kr,Ft[Bt++]=vn,Sr=r.id,kr=r.overflow,vn=i),i=Iu(i,c.children),i.flags|=4096,i)}function Pp(r,i,a){r.lanes|=i;var c=r.alternate;c!==null&&(c.lanes|=i),du(r.return,i,a)}function Du(r,i,a,c,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=f)}function jp(r,i,a){var c=i.pendingProps,f=c.revealOrder,m=c.tail;if(_t(r,i,c.children,a),c=Ue.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Pp(r,a,i);else if(r.tag===19)Pp(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(Ae(Ue,c),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)r=a.alternate,r!==null&&zo(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Du(i,!1,f,a,m);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&zo(r)===null){i.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Du(i,!0,a,null,m);break;case"together":Du(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Qo(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Pr(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),_n|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,a=rn(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=rn(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function a1(r,i,a){switch(i.tag){case 3:kp(i),ni();break;case 5:zf(i);break;case 1:Ct(i.type)&&Oo(i);break;case 4:pu(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,f=i.memoizedProps.value;Ae(Uo,c._currentValue),c._currentValue=f;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ae(Ue,Ue.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Cp(r,i,a):(Ae(Ue,Ue.current&1),r=Pr(r,i,a),r!==null?r.sibling:null);Ae(Ue,Ue.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(r.flags&128)!==0){if(c)return jp(r,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ae(Ue,Ue.current),c)break;return null;case 22:case 23:return i.lanes=0,_p(r,i,a)}return Pr(r,i,a)}var Ap,Mu,Rp,Np;Ap=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Mu=function(){},Rp=function(r,i,a,c){var f=r.memoizedProps;if(f!==c){r=i.stateNode,xn(fr.current);var m=null;switch(a){case"input":f=xe(r,f),c=xe(r,c),m=[];break;case"select":f=j({},f,{value:void 0}),c=j({},c,{value:void 0}),m=[];break;case"textarea":f=Ui(r,f),c=Ui(r,c),m=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=Ao)}gl(a,c);var x;a=null;for($ in f)if(!c.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var k=f[$];for(x in k)k.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?m||(m=[]):(m=m||[]).push($,null));for($ in c){var A=c[$];if(k=f?.[$],c.hasOwnProperty($)&&A!==k&&(A!=null||k!=null))if($==="style")if(k){for(x in k)!k.hasOwnProperty(x)||A&&A.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in A)A.hasOwnProperty(x)&&k[x]!==A[x]&&(a||(a={}),a[x]=A[x])}else a||(m||(m=[]),m.push($,a)),a=A;else $==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,k=k?k.__html:void 0,A!=null&&k!==A&&(m=m||[]).push($,A)):$==="children"?typeof A!="string"&&typeof A!="number"||(m=m||[]).push($,""+A):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(A!=null&&$==="onScroll"&&Ie("scroll",r),m||k===A||(m=[])):(m=m||[]).push($,A))}a&&(m=m||[]).push("style",a);var $=m;(i.updateQueue=$)&&(i.flags|=4)}},Np=function(r,i,a,c){a!==c&&(i.flags|=4)};function xs(r,i){if(!Me)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function vt(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(i)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=a,i}function l1(r,i,a){var c=i.pendingProps;switch(iu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(i),null;case 1:return Ct(i.type)&&No(),vt(i),null;case 3:return c=i.stateNode,ai(),De(Tt),De(mt),vu(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Lo(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,er!==null&&(Ku(er),er=null))),Mu(r,i),vt(i),null;case 5:mu(i);var f=xn(ms.current);if(a=i.type,r!==null&&i.stateNode!=null)Rp(r,i,a,c,f),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(n(166));return vt(i),null}if(r=xn(fr.current),Lo(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[hr]=i,c[cs]=m,r=(i.mode&1)!==0,a){case"dialog":Ie("cancel",c),Ie("close",c);break;case"iframe":case"object":case"embed":Ie("load",c);break;case"video":case"audio":for(f=0;f<as.length;f++)Ie(as[f],c);break;case"source":Ie("error",c);break;case"img":case"image":case"link":Ie("error",c),Ie("load",c);break;case"details":Ie("toggle",c);break;case"input":lt(c,m),Ie("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Ie("invalid",c);break;case"textarea":so(c,m),Ie("invalid",c)}gl(a,m),f=null;for(var x in m)if(m.hasOwnProperty(x)){var k=m[x];x==="children"?typeof k=="string"?c.textContent!==k&&(m.suppressHydrationWarning!==!0&&jo(c.textContent,k,r),f=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(m.suppressHydrationWarning!==!0&&jo(c.textContent,k,r),f=["children",""+k]):o.hasOwnProperty(x)&&k!=null&&x==="onScroll"&&Ie("scroll",c)}switch(a){case"input":ke(c),Vt(c,m,!0);break;case"textarea":ke(c),oo(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Ao)}c=f,i.updateQueue=c,c!==null&&(i.flags|=4)}else{x=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Fi(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=x.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=x.createElement(a,{is:c.is}):(r=x.createElement(a),a==="select"&&(x=r,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):r=x.createElementNS(r,a),r[hr]=i,r[cs]=c,Ap(r,i,!1,!1),i.stateNode=r;e:{switch(x=vl(a,c),a){case"dialog":Ie("cancel",r),Ie("close",r),f=c;break;case"iframe":case"object":case"embed":Ie("load",r),f=c;break;case"video":case"audio":for(f=0;f<as.length;f++)Ie(as[f],r);f=c;break;case"source":Ie("error",r),f=c;break;case"img":case"image":case"link":Ie("error",r),Ie("load",r),f=c;break;case"details":Ie("toggle",r),f=c;break;case"input":lt(r,c),f=xe(r,c),Ie("invalid",r);break;case"option":f=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},f=j({},c,{value:void 0}),Ie("invalid",r);break;case"textarea":so(r,c),f=Ui(r,c),Ie("invalid",r);break;default:f=c}gl(a,f),k=f;for(m in k)if(k.hasOwnProperty(m)){var A=k[m];m==="style"?xh(r,A):m==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&zi(r,A)):m==="children"?typeof A=="string"?(a!=="textarea"||A!=="")&&$r(r,A):typeof A=="number"&&$r(r,""+A):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?A!=null&&m==="onScroll"&&Ie("scroll",r):A!=null&&P(r,m,A,x))}switch(a){case"input":ke(r),Vt(r,c,!1);break;case"textarea":ke(r),oo(r);break;case"option":c.value!=null&&r.setAttribute("value",""+re(c.value));break;case"select":r.multiple=!!c.multiple,m=c.value,m!=null?Lr(r,!!c.multiple,m,!1):c.defaultValue!=null&&Lr(r,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Ao)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return vt(i),null;case 6:if(r&&i.stateNode!=null)Np(r,i,r.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(n(166));if(a=xn(ms.current),xn(fr.current),Lo(i)){if(c=i.stateNode,a=i.memoizedProps,c[hr]=i,(m=c.nodeValue!==a)&&(r=Mt,r!==null))switch(r.tag){case 3:jo(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&jo(c.nodeValue,a,(r.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[hr]=i,i.stateNode=c}return vt(i),null;case 13:if(De(Ue),c=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Me&&Lt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Df(),ni(),i.flags|=98560,m=!1;else if(m=Lo(i),c!==null&&c.dehydrated!==null){if(r===null){if(!m)throw Error(n(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[hr]=i}else ni(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;vt(i),m=!1}else er!==null&&(Ku(er),er=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Ue.current&1)!==0?tt===0&&(tt=3):Yu())),i.updateQueue!==null&&(i.flags|=4),vt(i),null);case 4:return ai(),Mu(r,i),r===null&&ls(i.stateNode.containerInfo),vt(i),null;case 10:return cu(i.type._context),vt(i),null;case 17:return Ct(i.type)&&No(),vt(i),null;case 19:if(De(Ue),m=i.memoizedState,m===null)return vt(i),null;if(c=(i.flags&128)!==0,x=m.rendering,x===null)if(c)xs(m,!1);else{if(tt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(x=zo(r),x!==null){for(i.flags|=128,xs(m,!1),c=x.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,r=c,m.flags&=14680066,x=m.alternate,x===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=x.childLanes,m.lanes=x.lanes,m.child=x.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=x.memoizedProps,m.memoizedState=x.memoizedState,m.updateQueue=x.updateQueue,m.type=x.type,r=x.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ae(Ue,Ue.current&1|2),i.child}r=r.sibling}m.tail!==null&&Ke()>di&&(i.flags|=128,c=!0,xs(m,!1),i.lanes=4194304)}else{if(!c)if(r=zo(x),r!==null){if(i.flags|=128,c=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),xs(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!Me)return vt(i),null}else 2*Ke()-m.renderingStartTime>di&&a!==1073741824&&(i.flags|=128,c=!0,xs(m,!1),i.lanes=4194304);m.isBackwards?(x.sibling=i.child,i.child=x):(a=m.last,a!==null?a.sibling=x:i.child=x,m.last=x)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Ke(),i.sibling=null,a=Ue.current,Ae(Ue,c?a&1|2:a&1),i):(vt(i),null);case 22:case 23:return Ju(),c=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?($t&1073741824)!==0&&(vt(i),i.subtreeFlags&6&&(i.flags|=8192)):vt(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function u1(r,i){switch(iu(i),i.tag){case 1:return Ct(i.type)&&No(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return ai(),De(Tt),De(mt),vu(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return mu(i),null;case 13:if(De(Ue),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));ni()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return De(Ue),null;case 4:return ai(),null;case 10:return cu(i.type._context),null;case 22:case 23:return Ju(),null;case 24:return null;default:return null}}var Xo=!1,yt=!1,c1=typeof WeakSet=="function"?WeakSet:Set,ne=null;function ui(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){We(r,i,c)}else a.current=null}function Lu(r,i,a){try{a()}catch(c){We(r,i,c)}}var Op=!1;function d1(r,i){if(Jl=yo,r=df(),Fl(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,k=-1,A=-1,$=0,W=0,H=r,B=null;t:for(;;){for(var Z;H!==a||f!==0&&H.nodeType!==3||(k=x+f),H!==m||c!==0&&H.nodeType!==3||(A=x+c),H.nodeType===3&&(x+=H.nodeValue.length),(Z=H.firstChild)!==null;)B=H,H=Z;for(;;){if(H===r)break t;if(B===a&&++$===f&&(k=x),B===m&&++W===c&&(A=x),(Z=H.nextSibling)!==null)break;H=B,B=H.parentNode}H=Z}a=k===-1||A===-1?null:{start:k,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yl={focusedElem:r,selectionRange:a},yo=!1,ne=i;ne!==null;)if(i=ne,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,ne=r;else for(;ne!==null;){i=ne;try{var se=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(se!==null){var oe=se.memoizedProps,Ge=se.memoizedState,O=i.stateNode,R=O.getSnapshotBeforeUpdate(i.elementType===i.type?oe:tr(i.type,oe),Ge);O.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var D=i.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(q){We(i,i.return,q)}if(r=i.sibling,r!==null){r.return=i.return,ne=r;break}ne=i.return}return se=Op,Op=!1,se}function bs(r,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&r)===r){var m=f.destroy;f.destroy=void 0,m!==void 0&&Lu(i,a,m)}f=f.next}while(f!==c)}}function Zo(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function $u(r){var i=r.ref;if(i!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof i=="function"?i(r):i.current=r}}function Ip(r){var i=r.alternate;i!==null&&(r.alternate=null,Ip(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[hr],delete i[cs],delete i[eu],delete i[Kx],delete i[Gx])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Dp(r){return r.tag===5||r.tag===3||r.tag===4}function Mp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Dp(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Uu(r,i,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ao));else if(c!==4&&(r=r.child,r!==null))for(Uu(r,i,a),r=r.sibling;r!==null;)Uu(r,i,a),r=r.sibling}function Vu(r,i,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(Vu(r,i,a),r=r.sibling;r!==null;)Vu(r,i,a),r=r.sibling}var ut=null,rr=!1;function Qr(r,i,a){for(a=a.child;a!==null;)Lp(r,i,a),a=a.sibling}function Lp(r,i,a){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(ho,a)}catch{}switch(a.tag){case 5:yt||ui(a,i);case 6:var c=ut,f=rr;ut=null,Qr(r,i,a),ut=c,rr=f,ut!==null&&(rr?(r=ut,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):ut.removeChild(a.stateNode));break;case 18:ut!==null&&(rr?(r=ut,a=a.stateNode,r.nodeType===8?Zl(r.parentNode,a):r.nodeType===1&&Zl(r,a),Zi(r)):Zl(ut,a.stateNode));break;case 4:c=ut,f=rr,ut=a.stateNode.containerInfo,rr=!0,Qr(r,i,a),ut=c,rr=f;break;case 0:case 11:case 14:case 15:if(!yt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var m=f,x=m.destroy;m=m.tag,x!==void 0&&((m&2)!==0||(m&4)!==0)&&Lu(a,i,x),f=f.next}while(f!==c)}Qr(r,i,a);break;case 1:if(!yt&&(ui(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(k){We(a,i,k)}Qr(r,i,a);break;case 21:Qr(r,i,a);break;case 22:a.mode&1?(yt=(c=yt)||a.memoizedState!==null,Qr(r,i,a),yt=c):Qr(r,i,a);break;default:Qr(r,i,a)}}function $p(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new c1),i.forEach(function(c){var f=x1.bind(null,r,c);a.has(c)||(a.add(c),c.then(f,f))})}}function nr(r,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var m=r,x=i,k=x;e:for(;k!==null;){switch(k.tag){case 5:ut=k.stateNode,rr=!1;break e;case 3:ut=k.stateNode.containerInfo,rr=!0;break e;case 4:ut=k.stateNode.containerInfo,rr=!0;break e}k=k.return}if(ut===null)throw Error(n(160));Lp(m,x,f),ut=null,rr=!1;var A=f.alternate;A!==null&&(A.return=null),f.return=null}catch($){We(f,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Up(i,r),i=i.sibling}function Up(r,i){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(nr(i,r),mr(r),c&4){try{bs(3,r,r.return),Zo(3,r)}catch(oe){We(r,r.return,oe)}try{bs(5,r,r.return)}catch(oe){We(r,r.return,oe)}}break;case 1:nr(i,r),mr(r),c&512&&a!==null&&ui(a,a.return);break;case 5:if(nr(i,r),mr(r),c&512&&a!==null&&ui(a,a.return),r.flags&32){var f=r.stateNode;try{$r(f,"")}catch(oe){We(r,r.return,oe)}}if(c&4&&(f=r.stateNode,f!=null)){var m=r.memoizedProps,x=a!==null?a.memoizedProps:m,k=r.type,A=r.updateQueue;if(r.updateQueue=null,A!==null)try{k==="input"&&m.type==="radio"&&m.name!=null&&kt(f,m),vl(k,x);var $=vl(k,m);for(x=0;x<A.length;x+=2){var W=A[x],H=A[x+1];W==="style"?xh(f,H):W==="dangerouslySetInnerHTML"?zi(f,H):W==="children"?$r(f,H):P(f,W,H,$)}switch(k){case"input":bt(f,m);break;case"textarea":Vi(f,m);break;case"select":var B=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var Z=m.value;Z!=null?Lr(f,!!m.multiple,Z,!1):B!==!!m.multiple&&(m.defaultValue!=null?Lr(f,!!m.multiple,m.defaultValue,!0):Lr(f,!!m.multiple,m.multiple?[]:"",!1))}f[cs]=m}catch(oe){We(r,r.return,oe)}}break;case 6:if(nr(i,r),mr(r),c&4){if(r.stateNode===null)throw Error(n(162));f=r.stateNode,m=r.memoizedProps;try{f.nodeValue=m}catch(oe){We(r,r.return,oe)}}break;case 3:if(nr(i,r),mr(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Zi(i.containerInfo)}catch(oe){We(r,r.return,oe)}break;case 4:nr(i,r),mr(r);break;case 13:nr(i,r),mr(r),f=r.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(zu=Ke())),c&4&&$p(r);break;case 22:if(W=a!==null&&a.memoizedState!==null,r.mode&1?(yt=($=yt)||W,nr(i,r),yt=$):nr(i,r),mr(r),c&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!W&&(r.mode&1)!==0)for(ne=r,W=r.child;W!==null;){for(H=ne=W;ne!==null;){switch(B=ne,Z=B.child,B.tag){case 0:case 11:case 14:case 15:bs(4,B,B.return);break;case 1:ui(B,B.return);var se=B.stateNode;if(typeof se.componentWillUnmount=="function"){c=B,a=B.return;try{i=c,se.props=i.memoizedProps,se.state=i.memoizedState,se.componentWillUnmount()}catch(oe){We(c,a,oe)}}break;case 5:ui(B,B.return);break;case 22:if(B.memoizedState!==null){Bp(H);continue}}Z!==null?(Z.return=B,ne=Z):Bp(H)}W=W.sibling}e:for(W=null,H=r;;){if(H.tag===5){if(W===null){W=H;try{f=H.stateNode,$?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(k=H.stateNode,A=H.memoizedProps.style,x=A!=null&&A.hasOwnProperty("display")?A.display:null,k.style.display=ao("display",x))}catch(oe){We(r,r.return,oe)}}}else if(H.tag===6){if(W===null)try{H.stateNode.nodeValue=$?"":H.memoizedProps}catch(oe){We(r,r.return,oe)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===r)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===r)break e;for(;H.sibling===null;){if(H.return===null||H.return===r)break e;W===H&&(W=null),H=H.return}W===H&&(W=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:nr(i,r),mr(r),c&4&&$p(r);break;case 21:break;default:nr(i,r),mr(r)}}function mr(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(Dp(a)){var c=a;break e}a=a.return}throw Error(n(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&($r(f,""),c.flags&=-33);var m=Mp(r);Vu(r,m,f);break;case 3:case 4:var x=c.stateNode.containerInfo,k=Mp(r);Uu(r,k,x);break;default:throw Error(n(161))}}catch(A){We(r,r.return,A)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function h1(r,i,a){ne=r,Vp(r)}function Vp(r,i,a){for(var c=(r.mode&1)!==0;ne!==null;){var f=ne,m=f.child;if(f.tag===22&&c){var x=f.memoizedState!==null||Xo;if(!x){var k=f.alternate,A=k!==null&&k.memoizedState!==null||yt;k=Xo;var $=yt;if(Xo=x,(yt=A)&&!$)for(ne=f;ne!==null;)x=ne,A=x.child,x.tag===22&&x.memoizedState!==null?zp(f):A!==null?(A.return=x,ne=A):zp(f);for(;m!==null;)ne=m,Vp(m),m=m.sibling;ne=f,Xo=k,yt=$}Fp(r)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,ne=m):Fp(r)}}function Fp(r){for(;ne!==null;){var i=ne;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:yt||Zo(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!yt)if(a===null)c.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:tr(i.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&Bf(i,m,c);break;case 3:var x=i.updateQueue;if(x!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Bf(i,x,a)}break;case 5:var k=i.stateNode;if(a===null&&i.flags&4){a=k;var A=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&a.focus();break;case"img":A.src&&(a.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var W=$.memoizedState;if(W!==null){var H=W.dehydrated;H!==null&&Zi(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}yt||i.flags&512&&$u(i)}catch(B){We(i,i.return,B)}}if(i===r){ne=null;break}if(a=i.sibling,a!==null){a.return=i.return,ne=a;break}ne=i.return}}function Bp(r){for(;ne!==null;){var i=ne;if(i===r){ne=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ne=a;break}ne=i.return}}function zp(r){for(;ne!==null;){var i=ne;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Zo(4,i)}catch(A){We(i,a,A)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var f=i.return;try{c.componentDidMount()}catch(A){We(i,f,A)}}var m=i.return;try{$u(i)}catch(A){We(i,m,A)}break;case 5:var x=i.return;try{$u(i)}catch(A){We(i,x,A)}}}catch(A){We(i,i.return,A)}if(i===r){ne=null;break}var k=i.sibling;if(k!==null){k.return=i.return,ne=k;break}ne=i.return}}var f1=Math.ceil,ea=L.ReactCurrentDispatcher,Fu=L.ReactCurrentOwner,Ht=L.ReactCurrentBatchConfig,Ee=0,ot=null,Ye=null,ct=0,$t=0,ci=qr(0),tt=0,_s=null,_n=0,ta=0,Bu=0,Es=null,jt=null,zu=0,di=1/0,jr=null,ra=!1,Wu=null,Xr=null,na=!1,Zr=null,ia=0,Ss=0,Hu=null,sa=-1,oa=0;function Et(){return(Ee&6)!==0?Ke():sa!==-1?sa:sa=Ke()}function en(r){return(r.mode&1)===0?1:(Ee&2)!==0&&ct!==0?ct&-ct:Yx.transition!==null?(oa===0&&(oa=Dh()),oa):(r=Ce,r!==0||(r=window.event,r=r===void 0?16:Wh(r.type)),r)}function ir(r,i,a,c){if(50<Ss)throw Ss=0,Hu=null,Error(n(185));Gi(r,a,c),((Ee&2)===0||r!==ot)&&(r===ot&&((Ee&2)===0&&(ta|=a),tt===4&&tn(r,ct)),At(r,c),a===1&&Ee===0&&(i.mode&1)===0&&(di=Ke()+500,Io&&Gr()))}function At(r,i){var a=r.callbackNode;Yw(r,i);var c=mo(r,r===ot?ct:0);if(c===0)a!==null&&Nh(a),r.callbackNode=null,r.callbackPriority=0;else if(i=c&-c,r.callbackPriority!==i){if(a!=null&&Nh(a),i===1)r.tag===0?Jx(Hp.bind(null,r)):Af(Hp.bind(null,r)),Hx(function(){(Ee&6)===0&&Gr()}),a=null;else{switch(Mh(c)){case 1:a=Sl;break;case 4:a=Oh;break;case 16:a=co;break;case 536870912:a=Ih;break;default:a=co}a=Zp(a,Wp.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function Wp(r,i){if(sa=-1,oa=0,(Ee&6)!==0)throw Error(n(327));var a=r.callbackNode;if(hi()&&r.callbackNode!==a)return null;var c=mo(r,r===ot?ct:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||i)i=aa(r,c);else{i=c;var f=Ee;Ee|=2;var m=Kp();(ot!==r||ct!==i)&&(jr=null,di=Ke()+500,Sn(r,i));do try{g1();break}catch(k){qp(r,k)}while(!0);uu(),ea.current=m,Ee=f,Ye!==null?i=0:(ot=null,ct=0,i=tt)}if(i!==0){if(i===2&&(f=kl(r),f!==0&&(c=f,i=qu(r,f))),i===1)throw a=_s,Sn(r,0),tn(r,c),At(r,Ke()),a;if(i===6)tn(r,c);else{if(f=r.current.alternate,(c&30)===0&&!p1(f)&&(i=aa(r,c),i===2&&(m=kl(r),m!==0&&(c=m,i=qu(r,m))),i===1))throw a=_s,Sn(r,0),tn(r,c),At(r,Ke()),a;switch(r.finishedWork=f,r.finishedLanes=c,i){case 0:case 1:throw Error(n(345));case 2:kn(r,jt,jr);break;case 3:if(tn(r,c),(c&130023424)===c&&(i=zu+500-Ke(),10<i)){if(mo(r,0)!==0)break;if(f=r.suspendedLanes,(f&c)!==c){Et(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Xl(kn.bind(null,r,jt,jr),i);break}kn(r,jt,jr);break;case 4:if(tn(r,c),(c&4194240)===c)break;for(i=r.eventTimes,f=-1;0<c;){var x=31-Xt(c);m=1<<x,x=i[x],x>f&&(f=x),c&=~m}if(c=f,c=Ke()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*f1(c/1960))-c,10<c){r.timeoutHandle=Xl(kn.bind(null,r,jt,jr),c);break}kn(r,jt,jr);break;case 5:kn(r,jt,jr);break;default:throw Error(n(329))}}}return At(r,Ke()),r.callbackNode===a?Wp.bind(null,r):null}function qu(r,i){var a=Es;return r.current.memoizedState.isDehydrated&&(Sn(r,i).flags|=256),r=aa(r,i),r!==2&&(i=jt,jt=a,i!==null&&Ku(i)),r}function Ku(r){jt===null?jt=r:jt.push.apply(jt,r)}function p1(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],m=f.getSnapshot;f=f.value;try{if(!Zt(m(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function tn(r,i){for(i&=~Bu,i&=~ta,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-Xt(i),c=1<<a;r[a]=-1,i&=~c}}function Hp(r){if((Ee&6)!==0)throw Error(n(327));hi();var i=mo(r,0);if((i&1)===0)return At(r,Ke()),null;var a=aa(r,i);if(r.tag!==0&&a===2){var c=kl(r);c!==0&&(i=c,a=qu(r,c))}if(a===1)throw a=_s,Sn(r,0),tn(r,i),At(r,Ke()),a;if(a===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,kn(r,jt,jr),At(r,Ke()),null}function Gu(r,i){var a=Ee;Ee|=1;try{return r(i)}finally{Ee=a,Ee===0&&(di=Ke()+500,Io&&Gr())}}function En(r){Zr!==null&&Zr.tag===0&&(Ee&6)===0&&hi();var i=Ee;Ee|=1;var a=Ht.transition,c=Ce;try{if(Ht.transition=null,Ce=1,r)return r()}finally{Ce=c,Ht.transition=a,Ee=i,(Ee&6)===0&&Gr()}}function Ju(){$t=ci.current,De(ci)}function Sn(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Wx(a)),Ye!==null)for(a=Ye.return;a!==null;){var c=a;switch(iu(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&No();break;case 3:ai(),De(Tt),De(mt),vu();break;case 5:mu(c);break;case 4:ai();break;case 13:De(Ue);break;case 19:De(Ue);break;case 10:cu(c.type._context);break;case 22:case 23:Ju()}a=a.return}if(ot=r,Ye=r=rn(r.current,null),ct=$t=i,tt=0,_s=null,Bu=ta=_n=0,jt=Es=null,wn!==null){for(i=0;i<wn.length;i++)if(a=wn[i],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,m=a.pending;if(m!==null){var x=m.next;m.next=f,c.next=x}a.pending=c}wn=null}return r}function qp(r,i){do{var a=Ye;try{if(uu(),Wo.current=Go,Ho){for(var c=Ve.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Ho=!1}if(bn=0,st=et=Ve=null,gs=!1,vs=0,Fu.current=null,a===null||a.return===null){tt=1,_s=i,Ye=null;break}e:{var m=r,x=a.return,k=a,A=i;if(i=ct,k.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var $=A,W=k,H=W.tag;if((W.mode&1)===0&&(H===0||H===11||H===15)){var B=W.alternate;B?(W.updateQueue=B.updateQueue,W.memoizedState=B.memoizedState,W.lanes=B.lanes):(W.updateQueue=null,W.memoizedState=null)}var Z=vp(x);if(Z!==null){Z.flags&=-257,yp(Z,x,k,m,i),Z.mode&1&&gp(m,$,i),i=Z,A=$;var se=i.updateQueue;if(se===null){var oe=new Set;oe.add(A),i.updateQueue=oe}else se.add(A);break e}else{if((i&1)===0){gp(m,$,i),Yu();break e}A=Error(n(426))}}else if(Me&&k.mode&1){var Ge=vp(x);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),yp(Ge,x,k,m,i),au(li(A,k));break e}}m=A=li(A,k),tt!==4&&(tt=2),Es===null?Es=[m]:Es.push(m),m=x;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var O=pp(m,A,i);Ff(m,O);break e;case 1:k=A;var R=m.type,D=m.stateNode;if((m.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Xr===null||!Xr.has(D)))){m.flags|=65536,i&=-i,m.lanes|=i;var q=mp(m,k,i);Ff(m,q);break e}}m=m.return}while(m!==null)}Jp(a)}catch(ae){i=ae,Ye===a&&a!==null&&(Ye=a=a.return);continue}break}while(!0)}function Kp(){var r=ea.current;return ea.current=Go,r===null?Go:r}function Yu(){(tt===0||tt===3||tt===2)&&(tt=4),ot===null||(_n&268435455)===0&&(ta&268435455)===0||tn(ot,ct)}function aa(r,i){var a=Ee;Ee|=2;var c=Kp();(ot!==r||ct!==i)&&(jr=null,Sn(r,i));do try{m1();break}catch(f){qp(r,f)}while(!0);if(uu(),Ee=a,ea.current=c,Ye!==null)throw Error(n(261));return ot=null,ct=0,tt}function m1(){for(;Ye!==null;)Gp(Ye)}function g1(){for(;Ye!==null&&!Fw();)Gp(Ye)}function Gp(r){var i=Xp(r.alternate,r,$t);r.memoizedProps=r.pendingProps,i===null?Jp(r):Ye=i,Fu.current=null}function Jp(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=l1(a,i,$t),a!==null){Ye=a;return}}else{if(a=u1(a,i),a!==null){a.flags&=32767,Ye=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{tt=6,Ye=null;return}}if(i=i.sibling,i!==null){Ye=i;return}Ye=i=r}while(i!==null);tt===0&&(tt=5)}function kn(r,i,a){var c=Ce,f=Ht.transition;try{Ht.transition=null,Ce=1,v1(r,i,a,c)}finally{Ht.transition=f,Ce=c}return null}function v1(r,i,a,c){do hi();while(Zr!==null);if((Ee&6)!==0)throw Error(n(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var m=a.lanes|a.childLanes;if(Qw(r,m),r===ot&&(Ye=ot=null,ct=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||na||(na=!0,Zp(co,function(){return hi(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Ht.transition,Ht.transition=null;var x=Ce;Ce=1;var k=Ee;Ee|=4,Fu.current=null,d1(r,a),Up(a,r),Lx(Yl),yo=!!Jl,Yl=Jl=null,r.current=a,h1(a),Bw(),Ee=k,Ce=x,Ht.transition=m}else r.current=a;if(na&&(na=!1,Zr=r,ia=f),m=r.pendingLanes,m===0&&(Xr=null),Hw(a.stateNode),At(r,Ke()),i!==null)for(c=r.onRecoverableError,a=0;a<i.length;a++)f=i[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(ra)throw ra=!1,r=Wu,Wu=null,r;return(ia&1)!==0&&r.tag!==0&&hi(),m=r.pendingLanes,(m&1)!==0?r===Hu?Ss++:(Ss=0,Hu=r):Ss=0,Gr(),null}function hi(){if(Zr!==null){var r=Mh(ia),i=Ht.transition,a=Ce;try{if(Ht.transition=null,Ce=16>r?16:r,Zr===null)var c=!1;else{if(r=Zr,Zr=null,ia=0,(Ee&6)!==0)throw Error(n(331));var f=Ee;for(Ee|=4,ne=r.current;ne!==null;){var m=ne,x=m.child;if((ne.flags&16)!==0){var k=m.deletions;if(k!==null){for(var A=0;A<k.length;A++){var $=k[A];for(ne=$;ne!==null;){var W=ne;switch(W.tag){case 0:case 11:case 15:bs(8,W,m)}var H=W.child;if(H!==null)H.return=W,ne=H;else for(;ne!==null;){W=ne;var B=W.sibling,Z=W.return;if(Ip(W),W===$){ne=null;break}if(B!==null){B.return=Z,ne=B;break}ne=Z}}}var se=m.alternate;if(se!==null){var oe=se.child;if(oe!==null){se.child=null;do{var Ge=oe.sibling;oe.sibling=null,oe=Ge}while(oe!==null)}}ne=m}}if((m.subtreeFlags&2064)!==0&&x!==null)x.return=m,ne=x;else e:for(;ne!==null;){if(m=ne,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:bs(9,m,m.return)}var O=m.sibling;if(O!==null){O.return=m.return,ne=O;break e}ne=m.return}}var R=r.current;for(ne=R;ne!==null;){x=ne;var D=x.child;if((x.subtreeFlags&2064)!==0&&D!==null)D.return=x,ne=D;else e:for(x=R;ne!==null;){if(k=ne,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Zo(9,k)}}catch(ae){We(k,k.return,ae)}if(k===x){ne=null;break e}var q=k.sibling;if(q!==null){q.return=k.return,ne=q;break e}ne=k.return}}if(Ee=f,Gr(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(ho,r)}catch{}c=!0}return c}finally{Ce=a,Ht.transition=i}}return!1}function Yp(r,i,a){i=li(a,i),i=pp(r,i,1),r=Yr(r,i,1),i=Et(),r!==null&&(Gi(r,1,i),At(r,i))}function We(r,i,a){if(r.tag===3)Yp(r,r,a);else for(;i!==null;){if(i.tag===3){Yp(i,r,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Xr===null||!Xr.has(c))){r=li(a,r),r=mp(i,r,1),i=Yr(i,r,1),r=Et(),i!==null&&(Gi(i,1,r),At(i,r));break}}i=i.return}}function y1(r,i,a){var c=r.pingCache;c!==null&&c.delete(i),i=Et(),r.pingedLanes|=r.suspendedLanes&a,ot===r&&(ct&a)===a&&(tt===4||tt===3&&(ct&130023424)===ct&&500>Ke()-zu?Sn(r,0):Bu|=a),At(r,i)}function Qp(r,i){i===0&&((r.mode&1)===0?i=1:(i=po,po<<=1,(po&130023424)===0&&(po=4194304)));var a=Et();r=Tr(r,i),r!==null&&(Gi(r,i,a),At(r,a))}function w1(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),Qp(r,a)}function x1(r,i){var a=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(i),Qp(r,a)}var Xp;Xp=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||Tt.current)Pt=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return Pt=!1,a1(r,i,a);Pt=(r.flags&131072)!==0}else Pt=!1,Me&&(i.flags&1048576)!==0&&Rf(i,Mo,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Qo(r,i),r=i.pendingProps;var f=ei(i,mt.current);oi(i,a),f=xu(null,i,c,r,f,a);var m=bu();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ct(c)?(m=!0,Oo(i)):m=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,fu(i),f.updater=Jo,i.stateNode=f,f._reactInternals=i,Cu(i,c,r,a),i=Ru(null,i,c,!0,m,a)):(i.tag=0,Me&&m&&nu(i),_t(null,i,f,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Qo(r,i),r=i.pendingProps,f=c._init,c=f(c._payload),i.type=c,f=i.tag=_1(c),r=tr(c,r),f){case 0:i=Au(null,i,c,r,a);break e;case 1:i=Sp(null,i,c,r,a);break e;case 11:i=wp(null,i,c,r,a);break e;case 14:i=xp(null,i,c,tr(c.type,r),a);break e}throw Error(n(306,c,""))}return i;case 0:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:tr(c,f),Au(r,i,c,f,a);case 1:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:tr(c,f),Sp(r,i,c,f,a);case 3:e:{if(kp(i),r===null)throw Error(n(387));c=i.pendingProps,m=i.memoizedState,f=m.element,Vf(r,i),Bo(i,c,null,a);var x=i.memoizedState;if(c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){f=li(Error(n(423)),i),i=Tp(r,i,c,a,f);break e}else if(c!==f){f=li(Error(n(424)),i),i=Tp(r,i,c,a,f);break e}else for(Lt=Hr(i.stateNode.containerInfo.firstChild),Mt=i,Me=!0,er=null,a=$f(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ni(),c===f){i=Pr(r,i,a);break e}_t(r,i,c,a)}i=i.child}return i;case 5:return zf(i),r===null&&ou(i),c=i.type,f=i.pendingProps,m=r!==null?r.memoizedProps:null,x=f.children,Ql(c,f)?x=null:m!==null&&Ql(c,m)&&(i.flags|=32),Ep(r,i),_t(r,i,x,a),i.child;case 6:return r===null&&ou(i),null;case 13:return Cp(r,i,a);case 4:return pu(i,i.stateNode.containerInfo),c=i.pendingProps,r===null?i.child=ii(i,null,c,a):_t(r,i,c,a),i.child;case 11:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:tr(c,f),wp(r,i,c,f,a);case 7:return _t(r,i,i.pendingProps,a),i.child;case 8:return _t(r,i,i.pendingProps.children,a),i.child;case 12:return _t(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,f=i.pendingProps,m=i.memoizedProps,x=f.value,Ae(Uo,c._currentValue),c._currentValue=x,m!==null)if(Zt(m.value,x)){if(m.children===f.children&&!Tt.current){i=Pr(r,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var k=m.dependencies;if(k!==null){x=m.child;for(var A=k.firstContext;A!==null;){if(A.context===c){if(m.tag===1){A=Cr(-1,a&-a),A.tag=2;var $=m.updateQueue;if($!==null){$=$.shared;var W=$.pending;W===null?A.next=A:(A.next=W.next,W.next=A),$.pending=A}}m.lanes|=a,A=m.alternate,A!==null&&(A.lanes|=a),du(m.return,a,i),k.lanes|=a;break}A=A.next}}else if(m.tag===10)x=m.type===i.type?null:m.child;else if(m.tag===18){if(x=m.return,x===null)throw Error(n(341));x.lanes|=a,k=x.alternate,k!==null&&(k.lanes|=a),du(x,a,i),x=m.sibling}else x=m.child;if(x!==null)x.return=m;else for(x=m;x!==null;){if(x===i){x=null;break}if(m=x.sibling,m!==null){m.return=x.return,x=m;break}x=x.return}m=x}_t(r,i,f.children,a),i=i.child}return i;case 9:return f=i.type,c=i.pendingProps.children,oi(i,a),f=zt(f),c=c(f),i.flags|=1,_t(r,i,c,a),i.child;case 14:return c=i.type,f=tr(c,i.pendingProps),f=tr(c.type,f),xp(r,i,c,f,a);case 15:return bp(r,i,i.type,i.pendingProps,a);case 17:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:tr(c,f),Qo(r,i),i.tag=1,Ct(c)?(r=!0,Oo(i)):r=!1,oi(i,a),hp(i,c,f),Cu(i,c,f,a),Ru(null,i,c,!0,r,a);case 19:return jp(r,i,a);case 22:return _p(r,i,a)}throw Error(n(156,i.tag))};function Zp(r,i){return Rh(r,i)}function b1(r,i,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(r,i,a,c){return new b1(r,i,a,c)}function Qu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function _1(r){if(typeof r=="function")return Qu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===ye)return 11;if(r===Be)return 14}return 2}function rn(r,i){var a=r.alternate;return a===null?(a=qt(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function la(r,i,a,c,f,m){var x=2;if(c=r,typeof r=="function")Qu(r)&&(x=1);else if(typeof r=="string")x=5;else e:switch(r){case z:return Tn(a.children,f,m,i);case F:x=8,f|=8;break;case X:return r=qt(12,a,i,f|2),r.elementType=X,r.lanes=m,r;case je:return r=qt(13,a,i,f),r.elementType=je,r.lanes=m,r;case _e:return r=qt(19,a,i,f),r.elementType=_e,r.lanes=m,r;case ge:return ua(a,f,m,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ee:x=10;break e;case Pe:x=9;break e;case ye:x=11;break e;case Be:x=14;break e;case it:x=16,c=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return i=qt(x,a,i,f),i.elementType=r,i.type=c,i.lanes=m,i}function Tn(r,i,a,c){return r=qt(7,r,c,i),r.lanes=a,r}function ua(r,i,a,c){return r=qt(22,r,c,i),r.elementType=ge,r.lanes=a,r.stateNode={isHidden:!1},r}function Xu(r,i,a){return r=qt(6,r,null,i),r.lanes=a,r}function Zu(r,i,a){return i=qt(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function E1(r,i,a,c,f){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tl(0),this.expirationTimes=Tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tl(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function ec(r,i,a,c,f,m,x,k,A){return r=new E1(r,i,a,k,A),i===1?(i=1,m===!0&&(i|=8)):i=0,m=qt(3,null,null,i),r.current=m,m.stateNode=r,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},fu(m),r}function S1(r,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:c==null?null:""+c,children:r,containerInfo:i,implementation:a}}function em(r){if(!r)return Kr;r=r._reactInternals;e:{if(pn(r)!==r||r.tag!==1)throw Error(n(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ct(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(r.tag===1){var a=r.type;if(Ct(a))return Pf(r,a,i)}return i}function tm(r,i,a,c,f,m,x,k,A){return r=ec(a,c,!0,r,f,m,x,k,A),r.context=em(null),a=r.current,c=Et(),f=en(a),m=Cr(c,f),m.callback=i??null,Yr(a,m,f),r.current.lanes=f,Gi(r,f,c),At(r,c),r}function ca(r,i,a,c){var f=i.current,m=Et(),x=en(f);return a=em(a),i.context===null?i.context=a:i.pendingContext=a,i=Cr(m,x),i.payload={element:r},c=c===void 0?null:c,c!==null&&(i.callback=c),r=Yr(f,i,x),r!==null&&(ir(r,f,x,m),Fo(r,f,x)),x}function da(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function rm(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function tc(r,i){rm(r,i),(r=r.alternate)&&rm(r,i)}function k1(){return null}var nm=typeof reportError=="function"?reportError:function(r){console.error(r)};function rc(r){this._internalRoot=r}ha.prototype.render=rc.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));ca(r,i,null,null)},ha.prototype.unmount=rc.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;En(function(){ca(null,r,null,null)}),i[_r]=null}};function ha(r){this._internalRoot=r}ha.prototype.unstable_scheduleHydration=function(r){if(r){var i=Uh();r={blockedOn:null,target:r,priority:i};for(var a=0;a<Br.length&&i!==0&&i<Br[a].priority;a++);Br.splice(a,0,r),a===0&&Bh(r)}};function nc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function fa(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function im(){}function T1(r,i,a,c,f){if(f){if(typeof c=="function"){var m=c;c=function(){var $=da(x);m.call($)}}var x=tm(i,c,r,0,null,!1,!1,"",im);return r._reactRootContainer=x,r[_r]=x.current,ls(r.nodeType===8?r.parentNode:r),En(),x}for(;f=r.lastChild;)r.removeChild(f);if(typeof c=="function"){var k=c;c=function(){var $=da(A);k.call($)}}var A=ec(r,0,!1,null,null,!1,!1,"",im);return r._reactRootContainer=A,r[_r]=A.current,ls(r.nodeType===8?r.parentNode:r),En(function(){ca(i,A,a,c)}),A}function pa(r,i,a,c,f){var m=a._reactRootContainer;if(m){var x=m;if(typeof f=="function"){var k=f;f=function(){var A=da(x);k.call(A)}}ca(i,x,r,f)}else x=T1(a,i,r,f,c);return da(x)}Lh=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ki(i.pendingLanes);a!==0&&(Cl(i,a|1),At(i,Ke()),(Ee&6)===0&&(di=Ke()+500,Gr()))}break;case 13:En(function(){var c=Tr(r,1);if(c!==null){var f=Et();ir(c,r,1,f)}}),tc(r,1)}},Pl=function(r){if(r.tag===13){var i=Tr(r,134217728);if(i!==null){var a=Et();ir(i,r,134217728,a)}tc(r,134217728)}},$h=function(r){if(r.tag===13){var i=en(r),a=Tr(r,i);if(a!==null){var c=Et();ir(a,r,i,c)}tc(r,i)}},Uh=function(){return Ce},Vh=function(r,i){var a=Ce;try{return Ce=r,i()}finally{Ce=a}},xl=function(r,i,a){switch(i){case"input":if(bt(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==r&&c.form===r.form){var f=Ro(c);if(!f)throw Error(n(90));Oe(c),bt(c,f)}}}break;case"textarea":Vi(r,a);break;case"select":i=a.value,i!=null&&Lr(r,!!a.multiple,i,!1)}},Sh=Gu,kh=En;var C1={usingClientEntryPoint:!1,Events:[ds,Xn,Ro,_h,Eh,Gu]},ks={findFiberByHostInstance:mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P1={bundleType:ks.bundleType,version:ks.version,rendererPackageName:ks.rendererPackageName,rendererConfig:ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=jh(r),r===null?null:r.stateNode},findFiberByHostInstance:ks.findFiberByHostInstance||k1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ma.isDisabled&&ma.supportsFiber)try{ho=ma.inject(P1),dr=ma}catch{}}return Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C1,Rt.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nc(i))throw Error(n(200));return S1(r,i,null,a)},Rt.createRoot=function(r,i){if(!nc(r))throw Error(n(299));var a=!1,c="",f=nm;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=ec(r,1,!1,null,null,a,!1,c,f),r[_r]=i.current,ls(r.nodeType===8?r.parentNode:r),new rc(i)},Rt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=jh(i),r=r===null?null:r.stateNode,r},Rt.flushSync=function(r){return En(r)},Rt.hydrate=function(r,i,a){if(!fa(i))throw Error(n(200));return pa(null,r,i,!0,a)},Rt.hydrateRoot=function(r,i,a){if(!nc(r))throw Error(n(405));var c=a!=null&&a.hydratedSources||null,f=!1,m="",x=nm;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),i=tm(i,null,r,1,a??null,f,!1,m,x),r[_r]=i.current,ls(r),c)for(r=0;r<c.length;r++)a=c[r],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new ha(i)},Rt.render=function(r,i,a){if(!fa(i))throw Error(n(200));return pa(null,r,i,!1,a)},Rt.unmountComponentAtNode=function(r){if(!fa(r))throw Error(n(40));return r._reactRootContainer?(En(function(){pa(null,null,r,!1,function(){r._reactRootContainer=null,r[_r]=null})}),!0):!1},Rt.unstable_batchedUpdates=Gu,Rt.unstable_renderSubtreeIntoContainer=function(r,i,a,c){if(!fa(a))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return pa(r,i,a,!1,c)},Rt.version="18.3.1-next-f1338f8080-20240426",Rt}var hm;function $1(){if(hm)return oc.exports;hm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),oc.exports=L1(),oc.exports}var fm;function U1(){if(fm)return ga;fm=1;var t=$1();return ga.createRoot=t.createRoot,ga.hydrateRoot=t.hydrateRoot,ga}var V1=U1();const F1=Pd(V1);let B1={data:""},z1=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||B1},W1=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,H1=/\/\*[^]*?\*\/|  +/g,pm=/\n+/g,an=(t,e)=>{let n="",s="",o="";for(let l in t){let u=t[l];l[0]=="@"?l[1]=="i"?n=l+" "+u+";":s+=l[1]=="f"?an(u,l):l+"{"+an(u,l[1]=="k"?"":e)+"}":typeof u=="object"?s+=an(u,e?e.replace(/([^,])+/g,d=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,d):d?d+" "+h:h)):l):u!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=an.p?an.p(l,u):l+":"+u+";")}return n+(e&&o?e+"{"+o+"}":o)+s},Ar={},cg=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+cg(t[n]);return e}return t},q1=(t,e,n,s,o)=>{let l=cg(t),u=Ar[l]||(Ar[l]=(h=>{let p=0,g=11;for(;p<h.length;)g=101*g+h.charCodeAt(p++)>>>0;return"go"+g})(l));if(!Ar[u]){let h=l!==t?t:(p=>{let g,y,w=[{}];for(;g=W1.exec(p.replace(H1,""));)g[4]?w.shift():g[3]?(y=g[3].replace(pm," ").trim(),w.unshift(w[0][y]=w[0][y]||{})):w[0][g[1]]=g[2].replace(pm," ").trim();return w[0]})(t);Ar[u]=an(o?{["@keyframes "+u]:h}:h,n?"":"."+u)}let d=n&&Ar.g?Ar.g:null;return n&&(Ar.g=Ar[u]),((h,p,g,y)=>{y?p.data=p.data.replace(y,h):p.data.indexOf(h)===-1&&(p.data=g?h+p.data:p.data+h)})(Ar[u],e,s,d),u},K1=(t,e,n)=>t.reduce((s,o,l)=>{let u=e[l];if(u&&u.call){let d=u(n),h=d&&d.props&&d.props.className||/^go/.test(d)&&d;u=h?"."+h:d&&typeof d=="object"?d.props?"":an(d,""):d===!1?"":d}return s+o+(u??"")},"");function ol(t){let e=this||{},n=t.call?t(e.p):t;return q1(n.unshift?n.raw?K1(n,[].slice.call(arguments,1),e.p):n.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):n,z1(e.target),e.g,e.o,e.k)}let dg,Dc,Mc;ol.bind({g:1});let Or=ol.bind({k:1});function G1(t,e,n,s){an.p=e,dg=t,Dc=n,Mc=s}function hn(t,e){let n=this||{};return function(){let s=arguments;function o(l,u){let d=Object.assign({},l),h=d.className||o.className;n.p=Object.assign({theme:Dc&&Dc()},d),n.o=/ *go\d+/.test(h),d.className=ol.apply(n,s)+(h?" "+h:"");let p=t;return t[0]&&(p=d.as||t,delete d.as),Mc&&p[0]&&Mc(d),dg(p,d)}return o}}var J1=t=>typeof t=="function",Ua=(t,e)=>J1(t)?t(e):t,Y1=(()=>{let t=0;return()=>(++t).toString()})(),hg=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Q1=20,Ad="default",fg=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(u=>u.id===e.toast.id?{...u,...e.toast}:u)};case 2:let{toast:s}=e;return fg(t,{type:t.toasts.find(u=>u.id===s.id)?1:0,toast:s});case 3:let{toastId:o}=e;return{...t,toasts:t.toasts.map(u=>u.id===o||o===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(u=>u.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+l}))}}},Aa=[],pg={toasts:[],pausedAt:void 0,settings:{toastLimit:Q1}},yr={},mg=(t,e=Ad)=>{yr[e]=fg(yr[e]||pg,t),Aa.forEach(([n,s])=>{n===e&&s(yr[e])})},gg=t=>Object.keys(yr).forEach(e=>mg(t,e)),X1=t=>Object.keys(yr).find(e=>yr[e].toasts.some(n=>n.id===t)),al=(t=Ad)=>e=>{mg(e,t)},Z1={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},eb=(t={},e=Ad)=>{let[n,s]=V.useState(yr[e]||pg),o=V.useRef(yr[e]);V.useEffect(()=>(o.current!==yr[e]&&s(yr[e]),Aa.push([e,s]),()=>{let u=Aa.findIndex(([d])=>d===e);u>-1&&Aa.splice(u,1)}),[e]);let l=n.toasts.map(u=>{var d,h,p;return{...t,...t[u.type],...u,removeDelay:u.removeDelay||((d=t[u.type])==null?void 0:d.removeDelay)||t?.removeDelay,duration:u.duration||((h=t[u.type])==null?void 0:h.duration)||t?.duration||Z1[u.type],style:{...t.style,...(p=t[u.type])==null?void 0:p.style,...u.style}}});return{...n,toasts:l}},tb=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||Y1()}),Xs=t=>(e,n)=>{let s=tb(e,t,n);return al(s.toasterId||X1(s.id))({type:2,toast:s}),s.id},nt=(t,e)=>Xs("blank")(t,e);nt.error=Xs("error");nt.success=Xs("success");nt.loading=Xs("loading");nt.custom=Xs("custom");nt.dismiss=(t,e)=>{let n={type:3,toastId:t};e?al(e)(n):gg(n)};nt.dismissAll=t=>nt.dismiss(void 0,t);nt.remove=(t,e)=>{let n={type:4,toastId:t};e?al(e)(n):gg(n)};nt.removeAll=t=>nt.remove(void 0,t);nt.promise=(t,e,n)=>{let s=nt.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(o=>{let l=e.success?Ua(e.success,o):void 0;return l?nt.success(l,{id:s,...n,...n?.success}):nt.dismiss(s),o}).catch(o=>{let l=e.error?Ua(e.error,o):void 0;l?nt.error(l,{id:s,...n,...n?.error}):nt.dismiss(s)}),t};var rb=1e3,nb=(t,e="default")=>{let{toasts:n,pausedAt:s}=eb(t,e),o=V.useRef(new Map).current,l=V.useCallback((y,w=rb)=>{if(o.has(y))return;let _=setTimeout(()=>{o.delete(y),u({type:4,toastId:y})},w);o.set(y,_)},[]);V.useEffect(()=>{if(s)return;let y=Date.now(),w=n.map(_=>{if(_.duration===1/0)return;let E=(_.duration||0)+_.pauseDuration-(y-_.createdAt);if(E<0){_.visible&&nt.dismiss(_.id);return}return setTimeout(()=>nt.dismiss(_.id,e),E)});return()=>{w.forEach(_=>_&&clearTimeout(_))}},[n,s,e]);let u=V.useCallback(al(e),[e]),d=V.useCallback(()=>{u({type:5,time:Date.now()})},[u]),h=V.useCallback((y,w)=>{u({type:1,toast:{id:y,height:w}})},[u]),p=V.useCallback(()=>{s&&u({type:6,time:Date.now()})},[s,u]),g=V.useCallback((y,w)=>{let{reverseOrder:_=!1,gutter:E=8,defaultPosition:C}=w||{},S=n.filter(P=>(P.position||C)===(y.position||C)&&P.height),T=S.findIndex(P=>P.id===y.id),N=S.filter((P,L)=>L<T&&P.visible).length;return S.filter(P=>P.visible).slice(..._?[N+1]:[0,N]).reduce((P,L)=>P+(L.height||0)+E,0)},[n]);return V.useEffect(()=>{n.forEach(y=>{if(y.dismissed)l(y.id,y.removeDelay);else{let w=o.get(y.id);w&&(clearTimeout(w),o.delete(y.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:h,startPause:d,endPause:p,calculateOffset:g}}},ib=Or`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,sb=Or`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ob=Or`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ab=hn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ib} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${sb} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ob} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,lb=Or`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ub=hn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${lb} 1s linear infinite;
`,cb=Or`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,db=Or`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,hb=hn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${cb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${db} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,fb=hn("div")`
  position: absolute;
`,pb=hn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,mb=Or`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,gb=hn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${mb} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,vb=({toast:t})=>{let{icon:e,type:n,iconTheme:s}=t;return e!==void 0?typeof e=="string"?V.createElement(gb,null,e):e:n==="blank"?null:V.createElement(pb,null,V.createElement(ub,{...s}),n!=="loading"&&V.createElement(fb,null,n==="error"?V.createElement(ab,{...s}):V.createElement(hb,{...s})))},yb=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,wb=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,xb="0%{opacity:0;} 100%{opacity:1;}",bb="0%{opacity:1;} 100%{opacity:0;}",_b=hn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Eb=hn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Sb=(t,e)=>{let n=t.includes("top")?1:-1,[s,o]=hg()?[xb,bb]:[yb(n),wb(n)];return{animation:e?`${Or(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Or(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},kb=V.memo(({toast:t,position:e,style:n,children:s})=>{let o=t.height?Sb(t.position||e||"top-center",t.visible):{opacity:0},l=V.createElement(vb,{toast:t}),u=V.createElement(Eb,{...t.ariaProps},Ua(t.message,t));return V.createElement(_b,{className:t.className,style:{...o,...n,...t.style}},typeof s=="function"?s({icon:l,message:u}):V.createElement(V.Fragment,null,l,u))});G1(V.createElement);var Tb=({id:t,className:e,style:n,onHeightUpdate:s,children:o})=>{let l=V.useCallback(u=>{if(u){let d=()=>{let h=u.getBoundingClientRect().height;s(t,h)};d(),new MutationObserver(d).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return V.createElement("div",{ref:l,className:e,style:n},o)},Cb=(t,e)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},o=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:hg()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...o}},Pb=ol`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,va=16,jb=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:s,children:o,toasterId:l,containerStyle:u,containerClassName:d})=>{let{toasts:h,handlers:p}=nb(n,l);return V.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:va,left:va,right:va,bottom:va,pointerEvents:"none",...u},className:d,onMouseEnter:p.startPause,onMouseLeave:p.endPause},h.map(g=>{let y=g.position||e,w=p.calculateOffset(g,{reverseOrder:t,gutter:s,defaultPosition:e}),_=Cb(y,w);return V.createElement(Tb,{id:g.id,key:g.id,onHeightUpdate:p.updateHeight,className:g.visible?Pb:"",style:_},g.type==="custom"?Ua(g.message,g):o?o(g):V.createElement(kb,{toast:g,position:y}))}))},qe=nt;const vg=V.createContext({});function Ab(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const Rd=typeof window<"u",Rb=Rd?V.useLayoutEffect:V.useEffect,Nd=V.createContext(null);function Od(t,e){t.indexOf(e)===-1&&t.push(e)}function Id(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ir=(t,e,n)=>n>e?e:n<t?t:n;let Dd=()=>{};const Dr={},yg=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function wg(t){return typeof t=="object"&&t!==null}const xg=t=>/^0[^.\s]+$/u.test(t);function Md(t){let e;return()=>(e===void 0&&(e=t()),e)}const Yt=t=>t,Nb=(t,e)=>n=>e(t(n)),Zs=(...t)=>t.reduce(Nb),Us=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class Ld{constructor(){this.subscriptions=[]}add(e){return Od(this.subscriptions,e),()=>Id(this.subscriptions,e)}notify(e,n,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,s);else for(let l=0;l<o;l++){const u=this.subscriptions[l];u&&u(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wr=t=>t*1e3,Jt=t=>t/1e3;function bg(t,e){return e?t*(1e3/e):0}const _g=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Ob=1e-7,Ib=12;function Db(t,e,n,s,o){let l,u,d=0;do u=e+(n-e)/2,l=_g(u,s,o)-t,l>0?n=u:e=u;while(Math.abs(l)>Ob&&++d<Ib);return u}function eo(t,e,n,s){if(t===e&&n===s)return Yt;const o=l=>Db(l,0,1,t,n);return l=>l===0||l===1?l:_g(o(l),e,s)}const Eg=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Sg=t=>e=>1-t(1-e),kg=eo(.33,1.53,.69,.99),$d=Sg(kg),Tg=Eg($d),Cg=t=>(t*=2)<1?.5*$d(t):.5*(2-Math.pow(2,-10*(t-1))),Ud=t=>1-Math.sin(Math.acos(t)),Pg=Sg(Ud),jg=Eg(Ud),Mb=eo(.42,0,1,1),Lb=eo(0,0,.58,1),Ag=eo(.42,0,.58,1),$b=t=>Array.isArray(t)&&typeof t[0]!="number",Rg=t=>Array.isArray(t)&&typeof t[0]=="number",Ub={linear:Yt,easeIn:Mb,easeInOut:Ag,easeOut:Lb,circIn:Ud,circInOut:jg,circOut:Pg,backIn:$d,backInOut:Tg,backOut:kg,anticipate:Cg},Vb=t=>typeof t=="string",mm=t=>{if(Rg(t)){Dd(t.length===4);const[e,n,s,o]=t;return eo(e,n,s,o)}else if(Vb(t))return Ub[t];return t},ya=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Fb(t,e){let n=new Set,s=new Set,o=!1,l=!1;const u=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(g){u.has(g)&&(p.schedule(g),t()),g(d)}const p={schedule:(g,y=!1,w=!1)=>{const E=w&&o?n:s;return y&&u.add(g),E.has(g)||E.add(g),g},cancel:g=>{s.delete(g),u.delete(g)},process:g=>{if(d=g,o){l=!0;return}o=!0,[n,s]=[s,n],n.forEach(h),n.clear(),o=!1,l&&(l=!1,p.process(g))}};return p}const Bb=40;function Ng(t,e){let n=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,u=ya.reduce((P,L)=>(P[L]=Fb(l),P),{}),{setup:d,read:h,resolveKeyframes:p,preUpdate:g,update:y,preRender:w,render:_,postRender:E}=u,C=()=>{const P=Dr.useManualTiming?o.timestamp:performance.now();n=!1,Dr.useManualTiming||(o.delta=s?1e3/60:Math.max(Math.min(P-o.timestamp,Bb),1)),o.timestamp=P,o.isProcessing=!0,d.process(o),h.process(o),p.process(o),g.process(o),y.process(o),w.process(o),_.process(o),E.process(o),o.isProcessing=!1,n&&e&&(s=!1,t(C))},S=()=>{n=!0,s=!0,o.isProcessing||t(C)};return{schedule:ya.reduce((P,L)=>{const I=u[L];return P[L]=(U,z=!1,F=!1)=>(n||S(),I.schedule(U,z,F)),P},{}),cancel:P=>{for(let L=0;L<ya.length;L++)u[ya[L]].cancel(P)},state:o,steps:u}}const{schedule:$e,cancel:cn,state:ft,steps:uc}=Ng(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yt,!0);let Ra;function zb(){Ra=void 0}const It={now:()=>(Ra===void 0&&It.set(ft.isProcessing||Dr.useManualTiming?ft.timestamp:performance.now()),Ra),set:t=>{Ra=t,queueMicrotask(zb)}},Og=t=>e=>typeof e=="string"&&e.startsWith(t),Ig=Og("--"),Wb=Og("var(--"),Vd=t=>Wb(t)?Hb.test(t.split("/*")[0].trim()):!1,Hb=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ii={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vs={...Ii,transform:t=>Ir(0,1,t)},wa={...Ii,default:1},Ds=t=>Math.round(t*1e5)/1e5,Fd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function qb(t){return t==null}const Kb=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Bd=(t,e)=>n=>!!(typeof n=="string"&&Kb.test(n)&&n.startsWith(t)||e&&!qb(n)&&Object.prototype.hasOwnProperty.call(n,e)),Dg=(t,e,n)=>s=>{if(typeof s!="string")return s;const[o,l,u,d]=s.match(Fd);return{[t]:parseFloat(o),[e]:parseFloat(l),[n]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},Gb=t=>Ir(0,255,t),cc={...Ii,transform:t=>Math.round(Gb(t))},Mn={test:Bd("rgb","red"),parse:Dg("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+cc.transform(t)+", "+cc.transform(e)+", "+cc.transform(n)+", "+Ds(Vs.transform(s))+")"};function Jb(t){let e="",n="",s="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,s+=s,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const Lc={test:Bd("#"),parse:Jb,transform:Mn.transform},to=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),on=to("deg"),xr=to("%"),pe=to("px"),Yb=to("vh"),Qb=to("vw"),gm={...xr,parse:t=>xr.parse(t)/100,transform:t=>xr.transform(t*100)},bi={test:Bd("hsl","hue"),parse:Dg("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+xr.transform(Ds(e))+", "+xr.transform(Ds(n))+", "+Ds(Vs.transform(s))+")"},Ze={test:t=>Mn.test(t)||Lc.test(t)||bi.test(t),parse:t=>Mn.test(t)?Mn.parse(t):bi.test(t)?bi.parse(t):Lc.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Mn.transform(t):bi.transform(t),getAnimatableNone:t=>{const e=Ze.parse(t);return e.alpha=0,Ze.transform(e)}},Xb=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Zb(t){return isNaN(t)&&typeof t=="string"&&(t.match(Fd)?.length||0)+(t.match(Xb)?.length||0)>0}const Mg="number",Lg="color",e_="var",t_="var(",vm="${}",r_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fs(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},o=[];let l=0;const d=e.replace(r_,h=>(Ze.test(h)?(s.color.push(l),o.push(Lg),n.push(Ze.parse(h))):h.startsWith(t_)?(s.var.push(l),o.push(e_),n.push(h)):(s.number.push(l),o.push(Mg),n.push(parseFloat(h))),++l,vm)).split(vm);return{values:n,split:d,indexes:s,types:o}}function $g(t){return Fs(t).values}function Ug(t){const{split:e,types:n}=Fs(t),s=e.length;return o=>{let l="";for(let u=0;u<s;u++)if(l+=e[u],o[u]!==void 0){const d=n[u];d===Mg?l+=Ds(o[u]):d===Lg?l+=Ze.transform(o[u]):l+=o[u]}return l}}const n_=t=>typeof t=="number"?0:Ze.test(t)?Ze.getAnimatableNone(t):t;function i_(t){const e=$g(t);return Ug(t)(e.map(n_))}const dn={test:Zb,parse:$g,createTransformer:Ug,getAnimatableNone:i_};function dc(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function s_({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let o=0,l=0,u=0;if(!e)o=l=u=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;o=dc(h,d,t+1/3),l=dc(h,d,t),u=dc(h,d,t-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:s}}function Va(t,e){return n=>n>0?e:t}const Fe=(t,e,n)=>t+(e-t)*n,hc=(t,e,n)=>{const s=t*t,o=n*(e*e-s)+s;return o<0?0:Math.sqrt(o)},o_=[Lc,Mn,bi],a_=t=>o_.find(e=>e.test(t));function ym(t){const e=a_(t);if(!e)return!1;let n=e.parse(t);return e===bi&&(n=s_(n)),n}const wm=(t,e)=>{const n=ym(t),s=ym(e);if(!n||!s)return Va(t,e);const o={...n};return l=>(o.red=hc(n.red,s.red,l),o.green=hc(n.green,s.green,l),o.blue=hc(n.blue,s.blue,l),o.alpha=Fe(n.alpha,s.alpha,l),Mn.transform(o))},$c=new Set(["none","hidden"]);function l_(t,e){return $c.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function u_(t,e){return n=>Fe(t,e,n)}function zd(t){return typeof t=="number"?u_:typeof t=="string"?Vd(t)?Va:Ze.test(t)?wm:h_:Array.isArray(t)?Vg:typeof t=="object"?Ze.test(t)?wm:c_:Va}function Vg(t,e){const n=[...t],s=n.length,o=t.map((l,u)=>zd(l)(l,e[u]));return l=>{for(let u=0;u<s;u++)n[u]=o[u](l);return n}}function c_(t,e){const n={...t,...e},s={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(s[o]=zd(t[o])(t[o],e[o]));return o=>{for(const l in s)n[l]=s[l](o);return n}}function d_(t,e){const n=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],u=t.indexes[l][s[l]],d=t.values[u]??0;n[o]=d,s[l]++}return n}const h_=(t,e)=>{const n=dn.createTransformer(e),s=Fs(t),o=Fs(e);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?$c.has(t)&&!o.values.length||$c.has(e)&&!s.values.length?l_(t,e):Zs(Vg(d_(s,o),o.values),n):Va(t,e)};function Fg(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Fe(t,e,n):zd(t)(t,e)}const f_=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>$e.update(e,n),stop:()=>cn(e),now:()=>ft.isProcessing?ft.timestamp:It.now()}},Bg=(t,e,n=10)=>{let s="";const o=Math.max(Math.round(e/n),2);for(let l=0;l<o;l++)s+=Math.round(t(l/(o-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Fa=2e4;function Wd(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Fa;)e+=n,s=t.next(e);return e>=Fa?1/0:e}function p_(t,e=100,n){const s=n({...t,keyframes:[0,e]}),o=Math.min(Wd(s),Fa);return{type:"keyframes",ease:l=>s.next(o*l).value/e,duration:Jt(o)}}const m_=5;function zg(t,e,n){const s=Math.max(e-m_,0);return bg(n-t(s),e-s)}const He={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fc=.001;function g_({duration:t=He.duration,bounce:e=He.bounce,velocity:n=He.velocity,mass:s=He.mass}){let o,l,u=1-e;u=Ir(He.minDamping,He.maxDamping,u),t=Ir(He.minDuration,He.maxDuration,Jt(t)),u<1?(o=p=>{const g=p*u,y=g*t,w=g-n,_=Uc(p,u),E=Math.exp(-y);return fc-w/_*E},l=p=>{const y=p*u*t,w=y*n+n,_=Math.pow(u,2)*Math.pow(p,2)*t,E=Math.exp(-y),C=Uc(Math.pow(p,2),u);return(-o(p)+fc>0?-1:1)*((w-_)*E)/C}):(o=p=>{const g=Math.exp(-p*t),y=(p-n)*t+1;return-fc+g*y},l=p=>{const g=Math.exp(-p*t),y=(n-p)*(t*t);return g*y});const d=5/t,h=y_(o,l,d);if(t=wr(t),isNaN(h))return{stiffness:He.stiffness,damping:He.damping,duration:t};{const p=Math.pow(h,2)*s;return{stiffness:p,damping:u*2*Math.sqrt(s*p),duration:t}}}const v_=12;function y_(t,e,n){let s=n;for(let o=1;o<v_;o++)s=s-t(s)/e(s);return s}function Uc(t,e){return t*Math.sqrt(1-e*e)}const w_=["duration","bounce"],x_=["stiffness","damping","mass"];function xm(t,e){return e.some(n=>t[n]!==void 0)}function b_(t){let e={velocity:He.velocity,stiffness:He.stiffness,damping:He.damping,mass:He.mass,isResolvedFromDuration:!1,...t};if(!xm(t,x_)&&xm(t,w_))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),o=s*s,l=2*Ir(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:He.mass,stiffness:o,damping:l}}else{const n=g_(t);e={...e,...n,mass:He.mass},e.isResolvedFromDuration=!0}return e}function Ba(t=He.visualDuration,e=He.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:o}=n;const l=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],d={done:!1,value:l},{stiffness:h,damping:p,mass:g,duration:y,velocity:w,isResolvedFromDuration:_}=b_({...n,velocity:-Jt(n.velocity||0)}),E=w||0,C=p/(2*Math.sqrt(h*g)),S=u-l,T=Jt(Math.sqrt(h/g)),N=Math.abs(S)<5;s||(s=N?He.restSpeed.granular:He.restSpeed.default),o||(o=N?He.restDelta.granular:He.restDelta.default);let P;if(C<1){const I=Uc(T,C);P=U=>{const z=Math.exp(-C*T*U);return u-z*((E+C*T*S)/I*Math.sin(I*U)+S*Math.cos(I*U))}}else if(C===1)P=I=>u-Math.exp(-T*I)*(S+(E+T*S)*I);else{const I=T*Math.sqrt(C*C-1);P=U=>{const z=Math.exp(-C*T*U),F=Math.min(I*U,300);return u-z*((E+C*T*S)*Math.sinh(F)+I*S*Math.cosh(F))/I}}const L={calculatedDuration:_&&y||null,next:I=>{const U=P(I);if(_)d.done=I>=y;else{let z=I===0?E:0;C<1&&(z=I===0?wr(E):zg(P,I,U));const F=Math.abs(z)<=s,X=Math.abs(u-U)<=o;d.done=F&&X}return d.value=d.done?u:U,d},toString:()=>{const I=Math.min(Wd(L),Fa),U=Bg(z=>L.next(I*z).value,I,30);return I+"ms "+U},toTransition:()=>{}};return L}Ba.applyToOptions=t=>{const e=p_(t,100,Ba);return t.ease=e.ease,t.duration=wr(e.duration),t.type="keyframes",t};function Vc({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:u,min:d,max:h,restDelta:p=.5,restSpeed:g}){const y=t[0],w={done:!1,value:y},_=F=>d!==void 0&&F<d||h!==void 0&&F>h,E=F=>d===void 0?h:h===void 0||Math.abs(d-F)<Math.abs(h-F)?d:h;let C=n*e;const S=y+C,T=u===void 0?S:u(S);T!==S&&(C=T-y);const N=F=>-C*Math.exp(-F/s),P=F=>T+N(F),L=F=>{const X=N(F),ee=P(F);w.done=Math.abs(X)<=p,w.value=w.done?T:ee};let I,U;const z=F=>{_(w.value)&&(I=F,U=Ba({keyframes:[w.value,E(w.value)],velocity:zg(P,F,w.value),damping:o,stiffness:l,restDelta:p,restSpeed:g}))};return z(0),{calculatedDuration:null,next:F=>{let X=!1;return!U&&I===void 0&&(X=!0,L(F),z(F)),I!==void 0&&F>=I?U.next(F-I):(!X&&L(F),w)}}}function __(t,e,n){const s=[],o=n||Dr.mix||Fg,l=t.length-1;for(let u=0;u<l;u++){let d=o(t[u],t[u+1]);if(e){const h=Array.isArray(e)?e[u]||Yt:e;d=Zs(h,d)}s.push(d)}return s}function E_(t,e,{clamp:n=!0,ease:s,mixer:o}={}){const l=t.length;if(Dd(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=__(e,s,o),h=d.length,p=g=>{if(u&&g<t[0])return e[0];let y=0;if(h>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const w=Us(t[y],t[y+1],g);return d[y](w)};return n?g=>p(Ir(t[0],t[l-1],g)):p}function S_(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const o=Us(0,e,s);t.push(Fe(n,1,o))}}function k_(t){const e=[0];return S_(e,t.length-1),e}function T_(t,e){return t.map(n=>n*e)}function C_(t,e){return t.map(()=>e||Ag).splice(0,t.length-1)}function Ms({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const o=$b(s)?s.map(mm):mm(s),l={done:!1,value:e[0]},u=T_(n&&n.length===e.length?n:k_(e),t),d=E_(u,e,{ease:Array.isArray(o)?o:C_(e,o)});return{calculatedDuration:t,next:h=>(l.value=d(h),l.done=h>=t,l)}}const P_=t=>t!==null;function Hd(t,{repeat:e,repeatType:n="loop"},s,o=1){const l=t.filter(P_),d=o<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!d||s===void 0?l[d]:s}const j_={decay:Vc,inertia:Vc,tween:Ms,keyframes:Ms,spring:Ba};function Wg(t){typeof t.type=="string"&&(t.type=j_[t.type])}class qd{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const A_=t=>t/100;class Kd extends qd{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==It.now()&&this.tick(It.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Wg(e);const{type:n=Ms,repeat:s=0,repeatDelay:o=0,repeatType:l,velocity:u=0}=e;let{keyframes:d}=e;const h=n||Ms;h!==Ms&&typeof d[0]!="number"&&(this.mixKeyframes=Zs(A_,Fg(d[0],d[1])),d=[0,100]);const p=h({...e,keyframes:d});l==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=Wd(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+o,this.totalDuration=this.resolvedDuration*(s+1)-o,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:o,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return s.next(0);const{delay:p=0,keyframes:g,repeat:y,repeatType:w,repeatDelay:_,type:E,onUpdate:C,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-p*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?T<0:T>o;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let P=this.currentTime,L=s;if(y){const F=Math.min(this.currentTime,o)/d;let X=Math.floor(F),ee=F%1;!ee&&F>=1&&(ee=1),ee===1&&X--,X=Math.min(X,y+1),X%2&&(w==="reverse"?(ee=1-ee,_&&(ee-=_/d)):w==="mirror"&&(L=u)),P=Ir(0,1,ee)*d}const I=N?{done:!1,value:g[0]}:L.next(P);l&&(I.value=l(I.value));let{done:U}=I;!N&&h!==null&&(U=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return z&&E!==Vc&&(I.value=Hd(g,this.options,S,this.speed)),C&&C(I.value),z&&this.finish(),I}then(e,n){return this.finished.then(e,n)}get duration(){return Jt(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Jt(e)}get time(){return Jt(this.currentTime)}set time(e){e=wr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(It.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Jt(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=f_,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(It.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function R_(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ln=t=>t*180/Math.PI,Fc=t=>{const e=Ln(Math.atan2(t[1],t[0]));return Bc(e)},N_={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Fc,rotateZ:Fc,skewX:t=>Ln(Math.atan(t[1])),skewY:t=>Ln(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Bc=t=>(t=t%360,t<0&&(t+=360),t),bm=Fc,_m=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Em=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),O_={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:_m,scaleY:Em,scale:t=>(_m(t)+Em(t))/2,rotateX:t=>Bc(Ln(Math.atan2(t[6],t[5]))),rotateY:t=>Bc(Ln(Math.atan2(-t[2],t[0]))),rotateZ:bm,rotate:bm,skewX:t=>Ln(Math.atan(t[4])),skewY:t=>Ln(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function zc(t){return t.includes("scale")?1:0}function Wc(t,e){if(!t||t==="none")return zc(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,o;if(n)s=O_,o=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=N_,o=d}if(!o)return zc(e);const l=s[e],u=o[1].split(",").map(D_);return typeof l=="function"?l(u):u[l]}const I_=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Wc(n,e)};function D_(t){return parseFloat(t.trim())}const Di=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mi=new Set(Di),Sm=t=>t===Ii||t===pe,M_=new Set(["x","y","z"]),L_=Di.filter(t=>!M_.has(t));function $_(t){const e=[];return L_.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Un={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Wc(e,"x"),y:(t,{transform:e})=>Wc(e,"y")};Un.translateX=Un.x;Un.translateY=Un.y;const Vn=new Set;let Hc=!1,qc=!1,Kc=!1;function Hg(){if(qc){const t=Array.from(Vn).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const o=$_(s);o.length&&(n.set(s,o),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const o=n.get(s);o&&o.forEach(([l,u])=>{s.getValue(l)?.set(u)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}qc=!1,Hc=!1,Vn.forEach(t=>t.complete(Kc)),Vn.clear()}function qg(){Vn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(qc=!0)})}function U_(){Kc=!0,qg(),Hg(),Kc=!1}class Gd{constructor(e,n,s,o,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=o,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Vn.add(this),Hc||(Hc=!0,$e.read(qg),$e.resolveKeyframes(Hg))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:o}=this;if(e[0]===null){const l=o?.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const d=s.readValue(n,u);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=u),o&&l===void 0&&o.set(e[0])}R_(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Vn.delete(this)}cancel(){this.state==="scheduled"&&(Vn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const V_=t=>t.startsWith("--");function F_(t,e,n){V_(e)?t.style.setProperty(e,n):t.style[e]=n}const B_=Md(()=>window.ScrollTimeline!==void 0),z_={};function W_(t,e){const n=Md(t);return()=>z_[e]??n()}const Kg=W_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Rs=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,km={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rs([0,.65,.55,1]),circOut:Rs([.55,0,1,.45]),backIn:Rs([.31,.01,.66,-.59]),backOut:Rs([.33,1.53,.69,.99])};function Gg(t,e){if(t)return typeof t=="function"?Kg()?Bg(t,e):"ease-out":Rg(t)?Rs(t):Array.isArray(t)?t.map(n=>Gg(n,e)||km.easeOut):km[t]}function H_(t,e,n,{delay:s=0,duration:o=300,repeat:l=0,repeatType:u="loop",ease:d="easeOut",times:h}={},p=void 0){const g={[e]:n};h&&(g.offset=h);const y=Gg(d,o);Array.isArray(y)&&(g.easing=y);const w={delay:s,duration:o,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return p&&(w.pseudoElement=p),t.animate(g,w)}function Jg(t){return typeof t=="function"&&"applyToOptions"in t}function q_({type:t,...e}){return Jg(t)&&Kg()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class K_ extends qd{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:o,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=e,Dd(typeof e.type!="string");const p=q_(e);this.animation=H_(n,s,o,p,l),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=Hd(o,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(g):F_(n,s,g),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Jt(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Jt(e)}get time(){return Jt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=wr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&B_()?(this.animation.timeline=e,Yt):n(this)}}const Yg={anticipate:Cg,backInOut:Tg,circInOut:jg};function G_(t){return t in Yg}function J_(t){typeof t.ease=="string"&&G_(t.ease)&&(t.ease=Yg[t.ease])}const Tm=10;class Y_ extends K_{constructor(e){J_(e),Wg(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:o,element:l,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new Kd({...u,autoplay:!1}),h=wr(this.finishedTime??this.time);n.setWithVelocity(d.sample(h-Tm).value,d.sample(h).value,Tm),d.stop()}}const Cm=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(dn.test(t)||t==="0")&&!t.startsWith("url("));function Q_(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function X_(t,e,n,s){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],u=Cm(o,e),d=Cm(l,e);return!u||!d?!1:Q_(t)||(n==="spring"||Jg(n))&&s}function Gc(t){t.duration=0,t.type="keyframes"}const Z_=new Set(["opacity","clipPath","filter","transform"]),eE=Md(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function tE(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:o,damping:l,type:u}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=e.owner.getProps();return eE()&&n&&Z_.has(n)&&(n!=="transform"||!p)&&!h&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}const rE=40;class nE extends qd{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:u="loop",keyframes:d,name:h,motionValue:p,element:g,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=It.now();const w={autoplay:e,delay:n,type:s,repeat:o,repeatDelay:l,repeatType:u,name:h,motionValue:p,element:g,...y},_=g?.KeyframeResolver||Gd;this.keyframeResolver=new _(d,(E,C,S)=>this.onKeyframesResolved(E,C,w,!S),h,p,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,o){this.keyframeResolver=void 0;const{name:l,type:u,velocity:d,delay:h,isHandoff:p,onUpdate:g}=s;this.resolvedAt=It.now(),X_(e,l,u,d)||((Dr.instantAnimations||!h)&&g?.(Hd(e,s,n)),e[0]=e[e.length-1],Gc(s),s.repeat=0);const w={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>rE?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},_=!p&&tE(w)?new Y_({...w,element:w.motionValue.owner.current}):new Kd(w);_.finished.then(()=>this.notifyFinished()).catch(Yt),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),U_()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const iE=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sE(t){const e=iE.exec(t);if(!e)return[,];const[,n,s,o]=e;return[`--${n??s}`,o]}function Qg(t,e,n=1){const[s,o]=sE(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const u=l.trim();return yg(u)?parseFloat(u):u}return Vd(o)?Qg(o,e,n+1):o}function Jd(t,e){return t?.[e]??t?.default??t}const Xg=new Set(["width","height","top","left","right","bottom",...Di]),oE={test:t=>t==="auto",parse:t=>t},Zg=t=>e=>e.test(t),ev=[Ii,pe,xr,on,Qb,Yb,oE],Pm=t=>ev.find(Zg(t));function aE(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xg(t):!0}const lE=new Set(["brightness","contrast","saturate","opacity"]);function uE(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(Fd)||[];if(!s)return t;const o=n.replace(s,"");let l=lE.has(e)?1:0;return s!==n&&(l*=100),e+"("+l+o+")"}const cE=/\b([a-z-]*)\(.*?\)/gu,Jc={...dn,getAnimatableNone:t=>{const e=t.match(cE);return e?e.map(uE).join(" "):t}},jm={...Ii,transform:Math.round},dE={rotate:on,rotateX:on,rotateY:on,rotateZ:on,scale:wa,scaleX:wa,scaleY:wa,scaleZ:wa,skew:on,skewX:on,skewY:on,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:Vs,originX:gm,originY:gm,originZ:pe},Yd={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe,...dE,zIndex:jm,fillOpacity:Vs,strokeOpacity:Vs,numOctaves:jm},hE={...Yd,color:Ze,backgroundColor:Ze,outlineColor:Ze,fill:Ze,stroke:Ze,borderColor:Ze,borderTopColor:Ze,borderRightColor:Ze,borderBottomColor:Ze,borderLeftColor:Ze,filter:Jc,WebkitFilter:Jc},tv=t=>hE[t];function rv(t,e){let n=tv(t);return n!==Jc&&(n=dn),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fE=new Set(["auto","none","0"]);function pE(t,e,n){let s=0,o;for(;s<t.length&&!o;){const l=t[s];typeof l=="string"&&!fE.has(l)&&Fs(l).values.length&&(o=t[s]),s++}if(o&&n)for(const l of e)t[l]=rv(n,o)}class mE extends Gd{constructor(e,n,s,o,l){super(e,n,s,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let p=e[h];if(typeof p=="string"&&(p=p.trim(),Vd(p))){const g=Qg(p,n.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!Xg.has(s)||e.length!==2)return;const[o,l]=e,u=Pm(o),d=Pm(l);if(u!==d)if(Sm(u)&&Sm(d))for(let h=0;h<e.length;h++){const p=e[h];typeof p=="string"&&(e[h]=parseFloat(p))}else Un[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let o=0;o<e.length;o++)(e[o]===null||aE(e[o]))&&s.push(o);s.length&&pE(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Un[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(s,o).jump(o,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=Un[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function gE(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const o=n?.[t]??s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const nv=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function vE(t){return wg(t)&&"offsetHeight"in t}const Am=30,yE=t=>!isNaN(parseFloat(t));class wE{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const o=It.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=It.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=yE(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ld);const s=this.events[e].add(n);return e==="change"?()=>{s(),$e.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=It.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Am)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Am);return bg(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ji(t,e){return new wE(t,e)}const{schedule:Qd}=Ng(queueMicrotask,!1),ar={x:!1,y:!1};function iv(){return ar.x||ar.y}function xE(t){return t==="x"||t==="y"?ar[t]?null:(ar[t]=!0,()=>{ar[t]=!1}):ar.x||ar.y?null:(ar.x=ar.y=!0,()=>{ar.x=ar.y=!1})}function sv(t,e){const n=gE(t),s=new AbortController,o={passive:!0,...e,signal:s.signal};return[n,o,()=>s.abort()]}function Rm(t){return!(t.pointerType==="touch"||iv())}function bE(t,e,n={}){const[s,o,l]=sv(t,n),u=d=>{if(!Rm(d))return;const{target:h}=d,p=e(h,d);if(typeof p!="function"||!h)return;const g=y=>{Rm(y)&&(p(y),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,o)};return s.forEach(d=>{d.addEventListener("pointerenter",u,o)}),l}const ov=(t,e)=>e?t===e?!0:ov(t,e.parentElement):!1,Xd=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,_E=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EE(t){return _E.has(t.tagName)||t.tabIndex!==-1}const Na=new WeakSet;function Nm(t){return e=>{e.key==="Enter"&&t(e)}}function pc(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const SE=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=Nm(()=>{if(Na.has(n))return;pc(n,"down");const o=Nm(()=>{pc(n,"up")}),l=()=>pc(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Om(t){return Xd(t)&&!iv()}function kE(t,e,n={}){const[s,o,l]=sv(t,n),u=d=>{const h=d.currentTarget;if(!Om(d))return;Na.add(h);const p=e(h,d),g=(_,E)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",w),Na.has(h)&&Na.delete(h),Om(_)&&typeof p=="function"&&p(_,{success:E})},y=_=>{g(_,h===window||h===document||n.useGlobalTarget||ov(h,_.target))},w=_=>{g(_,!1)};window.addEventListener("pointerup",y,o),window.addEventListener("pointercancel",w,o)};return s.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",u,o),vE(d)&&(d.addEventListener("focus",p=>SE(p,o)),!EE(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function av(t){return wg(t)&&"ownerSVGElement"in t}function TE(t){return av(t)&&t.tagName==="svg"}const xt=t=>!!(t&&t.getVelocity),CE=[...ev,Ze,dn],PE=t=>CE.find(Zg(t)),lv=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function jE(t=!0){const e=V.useContext(Nd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=e,l=V.useId();V.useEffect(()=>{if(t)return o(l)},[t]);const u=V.useCallback(()=>t&&s&&s(l),[l,s,t]);return!n&&s?[!1,u]:[!0]}const uv=V.createContext({strict:!1}),Im={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ai={};for(const t in Im)Ai[t]={isEnabled:e=>Im[t].some(n=>!!e[n])};function AE(t){for(const e in t)Ai[e]={...Ai[e],...t[e]}}const RE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function za(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||RE.has(t)}let cv=t=>!za(t);function NE(t){typeof t=="function"&&(cv=e=>e.startsWith("on")?!za(e):t(e))}try{NE(require("@emotion/is-prop-valid").default)}catch{}function OE(t,e,n){const s={};for(const o in t)o==="values"&&typeof t.values=="object"||(cv(o)||n===!0&&za(o)||!e&&!za(o)||t.draggable&&o.startsWith("onDrag"))&&(s[o]=t[o]);return s}const ll=V.createContext({});function ul(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Bs(t){return typeof t=="string"||Array.isArray(t)}const Zd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eh=["initial",...Zd];function cl(t){return ul(t.animate)||eh.some(e=>Bs(t[e]))}function dv(t){return!!(cl(t)||t.variants)}function IE(t,e){if(cl(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Bs(n)?n:void 0,animate:Bs(s)?s:void 0}}return t.inherit!==!1?e:{}}function DE(t){const{initial:e,animate:n}=IE(t,V.useContext(ll));return V.useMemo(()=>({initial:e,animate:n}),[Dm(e),Dm(n)])}function Dm(t){return Array.isArray(t)?t.join(" "):t}function Mm(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Cs={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const n=Mm(t,e.target.x),s=Mm(t,e.target.y);return`${n}% ${s}%`}},ME={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,o=dn.parse(t);if(o.length>5)return s;const l=dn.createTransformer(t),u=typeof o[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;o[0+u]/=d,o[1+u]/=h;const p=Fe(d,h,.5);return typeof o[2+u]=="number"&&(o[2+u]/=p),typeof o[3+u]=="number"&&(o[3+u]/=p),l(o)}},Yc={borderRadius:{...Cs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cs,borderTopRightRadius:Cs,borderBottomLeftRadius:Cs,borderBottomRightRadius:Cs,boxShadow:ME};function hv(t,{layout:e,layoutId:n}){return Mi.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Yc[t]||t==="opacity")}const LE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$E=Di.length;function UE(t,e,n){let s="",o=!0;for(let l=0;l<$E;l++){const u=Di[l],d=t[u];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(u.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const p=nv(d,Yd[u]);if(!h){o=!1;const g=LE[u]||u;s+=`${g}(${p}) `}n&&(e[u]=p)}}return s=s.trim(),n?s=n(e,o?"":s):o&&(s="none"),s}function th(t,e,n){const{style:s,vars:o,transformOrigin:l}=t;let u=!1,d=!1;for(const h in e){const p=e[h];if(Mi.has(h)){u=!0;continue}else if(Ig(h)){o[h]=p;continue}else{const g=nv(p,Yd[h]);h.startsWith("origin")?(d=!0,l[h]=g):s[h]=g}}if(e.transform||(u||n?s.transform=UE(e,t.transform,n):s.transform&&(s.transform="none")),d){const{originX:h="50%",originY:p="50%",originZ:g=0}=l;s.transformOrigin=`${h} ${p} ${g}`}}const rh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fv(t,e,n){for(const s in e)!xt(e[s])&&!hv(s,n)&&(t[s]=e[s])}function VE({transformTemplate:t},e){return V.useMemo(()=>{const n=rh();return th(n,e,t),Object.assign({},n.vars,n.style)},[e])}function FE(t,e){const n=t.style||{},s={};return fv(s,n,t),Object.assign(s,VE(t,e)),s}function BE(t,e){const n={},s=FE(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const zE={offset:"stroke-dashoffset",array:"stroke-dasharray"},WE={offset:"strokeDashoffset",array:"strokeDasharray"};function HE(t,e,n=1,s=0,o=!0){t.pathLength=1;const l=o?zE:WE;t[l.offset]=pe.transform(-s);const u=pe.transform(e),d=pe.transform(n);t[l.array]=`${u} ${d}`}function pv(t,{attrX:e,attrY:n,attrScale:s,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...d},h,p,g){if(th(t,d,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:w}=t;y.transform&&(w.transform=y.transform,delete y.transform),(w.transform||y.transformOrigin)&&(w.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),w.transform&&(w.transformBox=g?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),s!==void 0&&(y.scale=s),o!==void 0&&HE(y,o,l,u,!1)}const mv=()=>({...rh(),attrs:{}}),gv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function qE(t,e,n,s){const o=V.useMemo(()=>{const l=mv();return pv(l,e,gv(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};fv(l,t.style,t),o.style={...l,...o.style}}return o}const KE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nh(t){return typeof t!="string"||t.includes("-")?!1:!!(KE.indexOf(t)>-1||/[A-Z]/u.test(t))}function GE(t,e,n,{latestValues:s},o,l=!1){const d=(nh(t)?qE:BE)(e,s,o,t),h=OE(e,typeof t=="string",l),p=t!==V.Fragment?{...h,...d,ref:n}:{},{children:g}=e,y=V.useMemo(()=>xt(g)?g.get():g,[g]);return V.createElement(t,{...p,children:y})}function Lm(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function ih(t,e,n,s){if(typeof e=="function"){const[o,l]=Lm(s);e=e(n!==void 0?n:t.custom,o,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,l]=Lm(s);e=e(n!==void 0?n:t.custom,o,l)}return e}function Oa(t){return xt(t)?t.get():t}function JE({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,o){return{latestValues:YE(n,s,o,t),renderState:e()}}function YE(t,e,n,s){const o={},l=s(t,{});for(const w in l)o[w]=Oa(l[w]);let{initial:u,animate:d}=t;const h=cl(t),p=dv(t);e&&p&&!h&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||u===!1;const y=g?d:u;if(y&&typeof y!="boolean"&&!ul(y)){const w=Array.isArray(y)?y:[y];for(let _=0;_<w.length;_++){const E=ih(t,w[_]);if(E){const{transitionEnd:C,transition:S,...T}=E;for(const N in T){let P=T[N];if(Array.isArray(P)){const L=g?P.length-1:0;P=P[L]}P!==null&&(o[N]=P)}for(const N in C)o[N]=C[N]}}}return o}const vv=t=>(e,n)=>{const s=V.useContext(ll),o=V.useContext(Nd),l=()=>JE(t,e,s,o);return n?l():Ab(l)};function sh(t,e,n){const{style:s}=t,o={};for(const l in s)(xt(s[l])||e.style&&xt(e.style[l])||hv(l,t)||n?.getValue(l)?.liveStyle!==void 0)&&(o[l]=s[l]);return o}const QE=vv({scrapeMotionValuesFromProps:sh,createRenderState:rh});function yv(t,e,n){const s=sh(t,e,n);for(const o in t)if(xt(t[o])||xt(e[o])){const l=Di.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[l]=t[o]}return s}const XE=vv({scrapeMotionValuesFromProps:yv,createRenderState:mv}),ZE=Symbol.for("motionComponentSymbol");function _i(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function eS(t,e,n){return V.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):_i(n)&&(n.current=s))},[e])}const oh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tS="framerAppearId",wv="data-"+oh(tS),xv=V.createContext({});function rS(t,e,n,s,o){const{visualElement:l}=V.useContext(ll),u=V.useContext(uv),d=V.useContext(Nd),h=V.useContext(lv).reducedMotion,p=V.useRef(null);s=s||u.renderer,!p.current&&s&&(p.current=s(t,{visualState:e,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const g=p.current,y=V.useContext(xv);g&&!g.projection&&o&&(g.type==="html"||g.type==="svg")&&nS(p.current,n,o,y);const w=V.useRef(!1);V.useInsertionEffect(()=>{g&&w.current&&g.update(n,d)});const _=n[wv],E=V.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return Rb(()=>{g&&(w.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),E.current&&g.animationState&&g.animationState.animateChanges())}),V.useEffect(()=>{g&&(!E.current&&g.animationState&&g.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),E.current=!1),g.enteringChildren=void 0)}),g}function nS(t,e,n,s){const{layoutId:o,layout:l,drag:u,dragConstraints:d,layoutScroll:h,layoutRoot:p,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:bv(t.parent)),t.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!u||d&&_i(d),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:g,layoutScroll:h,layoutRoot:p})}function bv(t){if(t)return t.options.allowProjection!==!1?t.projection:bv(t.parent)}function mc(t,{forwardMotionProps:e=!1}={},n,s){n&&AE(n);const o=nh(t)?XE:QE;function l(d,h){let p;const g={...V.useContext(lv),...d,layoutId:iS(d)},{isStatic:y}=g,w=DE(d),_=o(d,y);if(!y&&Rd){sS();const E=oS(g);p=E.MeasureLayout,w.visualElement=rS(t,_,g,s,E.ProjectionNode)}return v.jsxs(ll.Provider,{value:w,children:[p&&w.visualElement?v.jsx(p,{visualElement:w.visualElement,...g}):null,GE(t,d,eS(_,w.visualElement,h),_,y,e)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=V.forwardRef(l);return u[ZE]=t,u}function iS({layoutId:t}){const e=V.useContext(vg).id;return e&&t!==void 0?e+"-"+t:t}function sS(t,e){V.useContext(uv).strict}function oS(t){const{drag:e,layout:n}=Ai;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function aS(t,e){if(typeof Proxy>"u")return mc;const n=new Map,s=(l,u)=>mc(l,u,t,e),o=(l,u)=>s(l,u);return new Proxy(o,{get:(l,u)=>u==="create"?s:(n.has(u)||n.set(u,mc(u,void 0,t,e)),n.get(u))})}function _v({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function lS({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uS(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function gc(t){return t===void 0||t===1}function Qc({scale:t,scaleX:e,scaleY:n}){return!gc(t)||!gc(e)||!gc(n)}function An(t){return Qc(t)||Ev(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Ev(t){return $m(t.x)||$m(t.y)}function $m(t){return t&&t!=="0%"}function Wa(t,e,n){const s=t-n,o=e*s;return n+o}function Um(t,e,n,s,o){return o!==void 0&&(t=Wa(t,o,s)),Wa(t,n,s)+e}function Xc(t,e=0,n=1,s,o){t.min=Um(t.min,e,n,s,o),t.max=Um(t.max,e,n,s,o)}function Sv(t,{x:e,y:n}){Xc(t.x,e.translate,e.scale,e.originPoint),Xc(t.y,n.translate,n.scale,n.originPoint)}const Vm=.999999999999,Fm=1.0000000000001;function cS(t,e,n,s=!1){const o=n.length;if(!o)return;e.x=e.y=1;let l,u;for(let d=0;d<o;d++){l=n[d],u=l.projectionDelta;const{visualElement:h}=l.options;h&&h.props.style&&h.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Si(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,Sv(t,u)),s&&An(l.latestValues)&&Si(t,l.latestValues))}e.x<Fm&&e.x>Vm&&(e.x=1),e.y<Fm&&e.y>Vm&&(e.y=1)}function Ei(t,e){t.min=t.min+e,t.max=t.max+e}function Bm(t,e,n,s,o=.5){const l=Fe(t.min,t.max,o);Xc(t,e,n,l,s)}function Si(t,e){Bm(t.x,e.x,e.scaleX,e.scale,e.originX),Bm(t.y,e.y,e.scaleY,e.scale,e.originY)}function kv(t,e){return _v(uS(t.getBoundingClientRect(),e))}function dS(t,e,n){const s=kv(t,n),{scroll:o}=e;return o&&(Ei(s.x,o.offset.x),Ei(s.y,o.offset.y)),s}const zm=()=>({translate:0,scale:1,origin:0,originPoint:0}),ki=()=>({x:zm(),y:zm()}),Wm=()=>({min:0,max:0}),rt=()=>({x:Wm(),y:Wm()}),Zc={current:null},Tv={current:!1};function hS(){if(Tv.current=!0,!!Rd)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Zc.current=t.matches;t.addEventListener("change",e),e()}else Zc.current=!1}const fS=new WeakMap;function pS(t,e,n){for(const s in e){const o=e[s],l=n[s];if(xt(o))t.addValue(s,o);else if(xt(l))t.addValue(s,ji(o,{owner:t}));else if(l!==o)if(t.hasValue(s)){const u=t.getValue(s);u.liveStyle===!0?u.jump(o):u.hasAnimated||u.set(o)}else{const u=t.getStaticValue(s);t.addValue(s,ji(u!==void 0?u:o,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Hm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mS{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:o,blockInitialAnimation:l,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Gd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=It.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,$e.render(this.render,!1,!0))};const{latestValues:h,renderState:p}=u;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=cl(n),this.isVariantNode=dv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in y){const _=y[w];h[w]!==void 0&&xt(_)&&_.set(h[w])}}mount(e){this.current=e,fS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),Tv.current||hS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zc.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cn(this.notifyUpdate),cn(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Mi.has(e);s&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&$e.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ai){const n=Ai[e];if(!n)continue;const{isEnabled:s,Feature:o}=n;if(!this.features[e]&&o&&s(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Hm.length;s++){const o=Hm[s];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,u=e[l];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=pS(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=ji(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(yg(s)||xg(s))?s=parseFloat(s):!PE(s)&&dn.test(n)&&(s=rv(e,n)),this.setBaseTarget(e,xt(s)?s.get():s)),xt(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const l=ih(this.props,n,this.presenceContext?.custom);l&&(s=l[e])}if(n&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!xt(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ld),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Qd.render(this.render)}}class Cv extends mS{constructor(){super(...arguments),this.KeyframeResolver=mE}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Pv(t,{style:e,vars:n},s,o){const l=t.style;let u;for(u in e)l[u]=e[u];o?.applyProjectionStyles(l,s);for(u in n)l.setProperty(u,n[u])}function gS(t){return window.getComputedStyle(t)}class vS extends Cv{constructor(){super(...arguments),this.type="html",this.renderInstance=Pv}readValueFromInstance(e,n){if(Mi.has(n))return this.projection?.isProjecting?zc(n):I_(e,n);{const s=gS(e),o=(Ig(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return kv(e,n)}build(e,n,s){th(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return sh(e,n,s)}}const jv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yS(t,e,n,s){Pv(t,e,void 0,s);for(const o in e.attrs)t.setAttribute(jv.has(o)?o:oh(o),e.attrs[o])}class wS extends Cv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=rt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Mi.has(n)){const s=tv(n);return s&&s.default||0}return n=jv.has(n)?n:oh(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return yv(e,n,s)}build(e,n,s){pv(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,o){yS(e,n,s,o)}mount(e){this.isSVGTag=gv(e.tagName),super.mount(e)}}const xS=(t,e)=>nh(t)?new wS(e):new vS(e,{allowProjection:t!==V.Fragment});function Ti(t,e,n){const s=t.getProps();return ih(s,e,n!==void 0?n:s.custom,t)}const ed=t=>Array.isArray(t);function bS(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ji(n))}function _S(t){return ed(t)?t[t.length-1]||0:t}function ES(t,e){const n=Ti(t,e);let{transitionEnd:s={},transition:o={},...l}=n||{};l={...l,...s};for(const u in l){const d=_S(l[u]);bS(t,u,d)}}function SS(t){return!!(xt(t)&&t.add)}function td(t,e){const n=t.getValue("willChange");if(SS(n))return n.add(e);if(!n&&Dr.WillChange){const s=new Dr.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function Av(t){return t.props[wv]}const kS=t=>t!==null;function TS(t,{repeat:e,repeatType:n="loop"},s){const o=t.filter(kS),l=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[l]}const CS={type:"spring",stiffness:500,damping:25,restSpeed:10},PS=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jS={type:"keyframes",duration:.8},AS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RS=(t,{keyframes:e})=>e.length>2?jS:Mi.has(t)?t.startsWith("scale")?PS(e[1]):CS:AS;function NS({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:o,repeat:l,repeatType:u,repeatDelay:d,from:h,elapsed:p,...g}){return!!Object.keys(g).length}const ah=(t,e,n,s={},o,l)=>u=>{const d=Jd(s,t)||{},h=d.delay||s.delay||0;let{elapsed:p=0}=s;p=p-wr(h);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-p,onUpdate:w=>{e.set(w),d.onUpdate&&d.onUpdate(w)},onComplete:()=>{u(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:l?void 0:o};NS(d)||Object.assign(g,RS(t,g)),g.duration&&(g.duration=wr(g.duration)),g.repeatDelay&&(g.repeatDelay=wr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Gc(g),g.delay===0&&(y=!0)),(Dr.instantAnimations||Dr.skipAnimations)&&(y=!0,Gc(g),g.delay=0),g.allowFlatten=!d.type&&!d.ease,y&&!l&&e.get()!==void 0){const w=TS(g.keyframes,d);if(w!==void 0){$e.update(()=>{g.onUpdate(w),g.onComplete()});return}}return d.isSync?new Kd(g):new nE(g)};function OS({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function Rv(t,e,{delay:n=0,transitionOverride:s,type:o}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:u,...d}=e;s&&(l=s);const h=[],p=o&&t.animationState&&t.animationState.getState()[o];for(const g in d){const y=t.getValue(g,t.latestValues[g]??null),w=d[g];if(w===void 0||p&&OS(p,g))continue;const _={delay:n,...Jd(l||{},g)},E=y.get();if(E!==void 0&&!y.isAnimating&&!Array.isArray(w)&&w===E&&!_.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const T=Av(t);if(T){const N=window.MotionHandoffAnimation(T,g,$e);N!==null&&(_.startTime=N,C=!0)}}td(t,g),y.start(ah(g,y,w,t.shouldReduceMotion&&Xg.has(g)?{type:!1}:_,t,C));const S=y.animation;S&&h.push(S)}return u&&Promise.all(h).then(()=>{$e.update(()=>{u&&ES(t,u)})}),h}function Nv(t,e,n,s=0,o=1){const l=Array.from(t).sort((p,g)=>p.sortNodePosition(g)).indexOf(e),u=t.size,d=(u-1)*s;return typeof n=="function"?n(l,u):o===1?l*s:d-l*s}function rd(t,e,n={}){const s=Ti(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const l=s?()=>Promise.all(Rv(t,s,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=o;return IS(t,e,h,p,g,y,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[h,p]=d==="beforeChildren"?[l,u]:[u,l];return h().then(()=>p())}else return Promise.all([l(),u(n.delay)])}function IS(t,e,n=0,s=0,o=0,l=1,u){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push(rd(h,e,{...u,delay:n+(typeof s=="function"?0:s)+Nv(t.variantChildren,h,s,o,l)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function DS(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const o=e.map(l=>rd(t,l,n));s=Promise.all(o)}else if(typeof e=="string")s=rd(t,e,n);else{const o=typeof e=="function"?Ti(t,e,n.custom):e;s=Promise.all(Rv(t,o,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function Ov(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const MS=eh.length;function Iv(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Iv(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<MS;n++){const s=eh[n],o=t.props[s];(Bs(o)||o===!1)&&(e[s]=o)}return e}const LS=[...Zd].reverse(),$S=Zd.length;function US(t){return e=>Promise.all(e.map(({animation:n,options:s})=>DS(t,n,s)))}function VS(t){let e=US(t),n=qm(),s=!0;const o=h=>(p,g)=>{const y=Ti(t,g,h==="exit"?t.presenceContext?.custom:void 0);if(y){const{transition:w,transitionEnd:_,...E}=y;p={...p,...E,..._}}return p};function l(h){e=h(t)}function u(h){const{props:p}=t,g=Iv(t.parent)||{},y=[],w=new Set;let _={},E=1/0;for(let S=0;S<$S;S++){const T=LS[S],N=n[T],P=p[T]!==void 0?p[T]:g[T],L=Bs(P),I=T===h?N.isActive:null;I===!1&&(E=S);let U=P===g[T]&&P!==p[T]&&L;if(U&&s&&t.manuallyAnimateOnMount&&(U=!1),N.protectedKeys={..._},!N.isActive&&I===null||!P&&!N.prevProp||ul(P)||typeof P=="boolean")continue;const z=FS(N.prevProp,P);let F=z||T===h&&N.isActive&&!U&&L||S>E&&L,X=!1;const ee=Array.isArray(P)?P:[P];let Pe=ee.reduce(o(T),{});I===!1&&(Pe={});const{prevResolvedValues:ye={}}=N,je={...ye,...Pe},_e=ge=>{F=!0,w.has(ge)&&(X=!0,w.delete(ge)),N.needsAnimating[ge]=!0;const K=t.getValue(ge);K&&(K.liveStyle=!1)};for(const ge in je){const K=Pe[ge],ue=ye[ge];if(_.hasOwnProperty(ge))continue;let j=!1;ed(K)&&ed(ue)?j=!Ov(K,ue):j=K!==ue,j?K!=null?_e(ge):w.add(ge):K!==void 0&&w.has(ge)?_e(ge):N.protectedKeys[ge]=!0}N.prevProp=P,N.prevResolvedValues=Pe,N.isActive&&(_={..._,...Pe}),s&&t.blockInitialAnimation&&(F=!1);const Be=U&&z;F&&(!Be||X)&&y.push(...ee.map(ge=>{const K={type:T};if(typeof ge=="string"&&s&&!Be&&t.manuallyAnimateOnMount&&t.parent){const{parent:ue}=t,j=Ti(ue,ge);if(ue.enteringChildren&&j){const{delayChildren:b}=j.transition||{};K.delay=Nv(ue.enteringChildren,t,b)}}return{animation:ge,options:K}}))}if(w.size){const S={};if(typeof p.initial!="boolean"){const T=Ti(t,Array.isArray(p.initial)?p.initial[0]:p.initial);T&&T.transition&&(S.transition=T.transition)}w.forEach(T=>{const N=t.getBaseTarget(T),P=t.getValue(T);P&&(P.liveStyle=!0),S[T]=N??null}),y.push({animation:S})}let C=!!y.length;return s&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(C=!1),s=!1,C?e(y):Promise.resolve()}function d(h,p){if(n[h].isActive===p)return Promise.resolve();t.variantChildren?.forEach(y=>y.animationState?.setActive(h,p)),n[h].isActive=p;const g=u(h);for(const y in n)n[y].protectedKeys={};return g}return{animateChanges:u,setActive:d,setAnimateFunction:l,getState:()=>n,reset:()=>{n=qm()}}}function FS(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ov(e,t):!1}function Cn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qm(){return{animate:Cn(!0),whileInView:Cn(),whileHover:Cn(),whileTap:Cn(),whileDrag:Cn(),whileFocus:Cn(),exit:Cn()}}class fn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class BS extends fn{constructor(e){super(e),e.animationState||(e.animationState=VS(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ul(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let zS=0;class WS extends fn{constructor(){super(...arguments),this.id=zS++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const HS={animation:{Feature:BS},exit:{Feature:WS}};function zs(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function ro(t){return{point:{x:t.pageX,y:t.pageY}}}const qS=t=>e=>Xd(e)&&t(e,ro(e));function Ls(t,e,n,s){return zs(t,e,qS(n),s)}const Dv=1e-4,KS=1-Dv,GS=1+Dv,Mv=.01,JS=0-Mv,YS=0+Mv;function St(t){return t.max-t.min}function QS(t,e,n){return Math.abs(t-e)<=n}function Km(t,e,n,s=.5){t.origin=s,t.originPoint=Fe(e.min,e.max,t.origin),t.scale=St(n)/St(e),t.translate=Fe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=KS&&t.scale<=GS||isNaN(t.scale))&&(t.scale=1),(t.translate>=JS&&t.translate<=YS||isNaN(t.translate))&&(t.translate=0)}function $s(t,e,n,s){Km(t.x,e.x,n.x,s?s.originX:void 0),Km(t.y,e.y,n.y,s?s.originY:void 0)}function Gm(t,e,n){t.min=n.min+e.min,t.max=t.min+St(e)}function XS(t,e,n){Gm(t.x,e.x,n.x),Gm(t.y,e.y,n.y)}function Jm(t,e,n){t.min=e.min-n.min,t.max=t.min+St(e)}function Ha(t,e,n){Jm(t.x,e.x,n.x),Jm(t.y,e.y,n.y)}function Kt(t){return[t("x"),t("y")]}const Lv=({current:t})=>t?t.ownerDocument.defaultView:null,Ym=(t,e)=>Math.abs(t-e);function ZS(t,e){const n=Ym(t.x,e.x),s=Ym(t.y,e.y);return Math.sqrt(n**2+s**2)}class $v{constructor(e,n,{transformPagePoint:s,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=yc(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,E=ZS(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!E)return;const{point:C}=w,{timestamp:S}=ft;this.history.push({...C,timestamp:S});const{onStart:T,onMove:N}=this.handlers;_||(T&&T(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,w)},this.handlePointerMove=(w,_)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=vc(_,this.transformPagePoint),$e.update(this.updatePoint,!0)},this.handlePointerUp=(w,_)=>{this.end();const{onEnd:E,onSessionEnd:C,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=yc(w.type==="pointercancel"?this.lastMoveEventInfo:vc(_,this.transformPagePoint),this.history);this.startEvent&&E&&E(w,T),C&&C(w,T)},!Xd(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=u,this.contextWindow=o||window;const d=ro(e),h=vc(d,this.transformPagePoint),{point:p}=h,{timestamp:g}=ft;this.history=[{...p,timestamp:g}];const{onSessionStart:y}=n;y&&y(e,yc(h,this.history)),this.removeListeners=Zs(Ls(this.contextWindow,"pointermove",this.handlePointerMove),Ls(this.contextWindow,"pointerup",this.handlePointerUp),Ls(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cn(this.updatePoint)}}function vc(t,e){return e?{point:e(t.point)}:t}function Qm(t,e){return{x:t.x-e.x,y:t.y-e.y}}function yc({point:t},e){return{point:t,delta:Qm(t,Uv(e)),offset:Qm(t,e2(e)),velocity:t2(e,.1)}}function e2(t){return t[0]}function Uv(t){return t[t.length-1]}function t2(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const o=Uv(t);for(;n>=0&&(s=t[n],!(o.timestamp-s.timestamp>wr(e)));)n--;if(!s)return{x:0,y:0};const l=Jt(o.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const u={x:(o.x-s.x)/l,y:(o.y-s.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function r2(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Fe(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Fe(n,t,s.max):Math.min(t,n)),t}function Xm(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function n2(t,{top:e,left:n,bottom:s,right:o}){return{x:Xm(t.x,n,o),y:Xm(t.y,e,s)}}function Zm(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function i2(t,e){return{x:Zm(t.x,e.x),y:Zm(t.y,e.y)}}function s2(t,e){let n=.5;const s=St(t),o=St(e);return o>s?n=Us(e.min,e.max-s,t.min):s>o&&(n=Us(t.min,t.max-o,e.min)),Ir(0,1,n)}function o2(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const nd=.35;function a2(t=nd){return t===!1?t=0:t===!0&&(t=nd),{x:e0(t,"left","right"),y:e0(t,"top","bottom")}}function e0(t,e,n){return{min:t0(t,e),max:t0(t,n)}}function t0(t,e){return typeof t=="number"?t:t[e]||0}const l2=new WeakMap;class u2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=y=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ro(y).point)},u=(y,w)=>{const{drag:_,dragPropagation:E,onDragStart:C}=this.getProps();if(_&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xE(_),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Kt(T=>{let N=this.getAxisMotionValue(T).get()||0;if(xr.test(N)){const{projection:P}=this.visualElement;if(P&&P.layout){const L=P.layout.layoutBox[T];L&&(N=St(L)*(parseFloat(N)/100))}}this.originPoint[T]=N}),C&&$e.postRender(()=>C(y,w)),td(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},d=(y,w)=>{this.latestPointerEvent=y,this.latestPanInfo=w;const{dragPropagation:_,dragDirectionLock:E,onDirectionLock:C,onDrag:S}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:T}=w;if(E&&this.currentDirection===null){this.currentDirection=c2(T),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",w.point,T),this.updateAxis("y",w.point,T),this.visualElement.render(),S&&S(y,w)},h=(y,w)=>{this.latestPointerEvent=y,this.latestPanInfo=w,this.stop(y,w),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Kt(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new $v(e,{onSessionStart:l,onStart:u,onMove:d,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:s,contextWindow:Lv(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,o=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!s)return;const{velocity:u}=o;this.startAnimation(u);const{onDragEnd:d}=this.getProps();d&&$e.postRender(()=>d(s,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:o}=this.getProps();if(!s||!xa(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=r2(u,this.constraints[e],this.elastic[e])),l.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;e&&_i(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=n2(s.layoutBox,e):this.constraints=!1,this.elastic=a2(n),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Kt(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=o2(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!_i(e))return!1;const s=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=dS(s,o.root,this.visualElement.getTransformPagePoint());let u=i2(o.layout.layoutBox,l);if(n){const d=n(lS(u));this.hasMutatedConstraints=!!d,d&&(u=_v(d))}return u}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},p=Kt(g=>{if(!xa(g,n,this.currentDirection))return;let y=h&&h[g]||{};u&&(y={min:0,max:0});const w=o?200:1e6,_=o?40:1e7,E={type:"inertia",velocity:s?e[g]:0,bounceStiffness:w,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...l,...y};return this.startAxisValueAnimation(g,E)});return Promise.all(p).then(d)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return td(this.visualElement,e),s.start(ah(e,s,0,n,this.visualElement,!1))}stopAnimation(){Kt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Kt(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Kt(n=>{const{drag:s}=this.getProps();if(!xa(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(n);if(o&&o.layout){const{min:u,max:d}=o.layout.layoutBox[n];l.set(e[n]-Fe(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!_i(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Kt(u=>{const d=this.getAxisMotionValue(u);if(d&&this.constraints!==!1){const h=d.get();o[u]=s2({min:h,max:h},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Kt(u=>{if(!xa(u,e,null))return;const d=this.getAxisMotionValue(u),{min:h,max:p}=this.constraints[u];d.set(Fe(h,p,o[u]))})}addListeners(){if(!this.visualElement.current)return;l2.set(this.visualElement,this);const e=this.visualElement.current,n=Ls(e,"pointerdown",h=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();_i(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),$e.read(s);const u=zs(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(Kt(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=h[g].translate,y.set(y.get()+h[g].translate))}),this.visualElement.render())}));return()=>{u(),n(),l(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:u=nd,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:l,dragElastic:u,dragMomentum:d}}}function xa(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function c2(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class d2 extends fn{constructor(e){super(e),this.removeGroupControls=Yt,this.removeListeners=Yt,this.controls=new u2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yt}unmount(){this.removeGroupControls(),this.removeListeners()}}const r0=t=>(e,n)=>{t&&$e.postRender(()=>t(e,n))};class h2 extends fn{constructor(){super(...arguments),this.removePointerDownListener=Yt}onPointerDown(e){this.session=new $v(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Lv(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:r0(e),onStart:r0(n),onMove:s,onEnd:(l,u)=>{delete this.session,o&&$e.postRender(()=>o(l,u))}}}mount(){this.removePointerDownListener=Ls(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ia={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let wc=!1;class f2 extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:l}=e;l&&(n.group&&n.group.add(l),s&&s.register&&o&&s.register(l),wc&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Ia.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:o,isPresent:l}=this.props,{projection:u}=s;return u&&(u.isPresent=l,wc=!0,o||e.layoutDependency!==n||n===void 0||e.isPresent!==l?u.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?u.promote():u.relegate()||$e.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Qd.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=e;wc=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Vv(t){const[e,n]=jE(),s=V.useContext(vg);return v.jsx(f2,{...t,layoutGroup:s,switchLayoutGroup:V.useContext(xv),isPresent:e,safeToRemove:n})}function p2(t,e,n){const s=xt(t)?t:ji(t);return s.start(ah("",s,e,n)),s.animation}const m2=(t,e)=>t.depth-e.depth;class g2{constructor(){this.children=[],this.isDirty=!1}add(e){Od(this.children,e),this.isDirty=!0}remove(e){Id(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(m2),this.isDirty=!1,this.children.forEach(e)}}function v2(t,e){const n=It.now(),s=({timestamp:o})=>{const l=o-n;l>=e&&(cn(s),t(l-e))};return $e.setup(s,!0),()=>cn(s)}const Fv=["TopLeft","TopRight","BottomLeft","BottomRight"],y2=Fv.length,n0=t=>typeof t=="string"?parseFloat(t):t,i0=t=>typeof t=="number"||pe.test(t);function w2(t,e,n,s,o,l){o?(t.opacity=Fe(0,n.opacity??1,x2(s)),t.opacityExit=Fe(e.opacity??1,0,b2(s))):l&&(t.opacity=Fe(e.opacity??1,n.opacity??1,s));for(let u=0;u<y2;u++){const d=`border${Fv[u]}Radius`;let h=s0(e,d),p=s0(n,d);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||i0(h)===i0(p)?(t[d]=Math.max(Fe(n0(h),n0(p),s),0),(xr.test(p)||xr.test(h))&&(t[d]+="%")):t[d]=p}(e.rotate||n.rotate)&&(t.rotate=Fe(e.rotate||0,n.rotate||0,s))}function s0(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const x2=Bv(0,.5,Pg),b2=Bv(.5,.95,Yt);function Bv(t,e,n){return s=>s<t?0:s>e?1:n(Us(t,e,s))}function o0(t,e){t.min=e.min,t.max=e.max}function sr(t,e){o0(t.x,e.x),o0(t.y,e.y)}function a0(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function l0(t,e,n,s,o){return t-=e,t=Wa(t,1/n,s),o!==void 0&&(t=Wa(t,1/o,s)),t}function _2(t,e=0,n=1,s=.5,o,l=t,u=t){if(xr.test(e)&&(e=parseFloat(e),e=Fe(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=Fe(l.min,l.max,s);t===l&&(d-=e),t.min=l0(t.min,e,n,d,o),t.max=l0(t.max,e,n,d,o)}function u0(t,e,[n,s,o],l,u){_2(t,e[n],e[s],e[o],e.scale,l,u)}const E2=["x","scaleX","originX"],S2=["y","scaleY","originY"];function c0(t,e,n,s){u0(t.x,e,E2,n?n.x:void 0,s?s.x:void 0),u0(t.y,e,S2,n?n.y:void 0,s?s.y:void 0)}function d0(t){return t.translate===0&&t.scale===1}function zv(t){return d0(t.x)&&d0(t.y)}function h0(t,e){return t.min===e.min&&t.max===e.max}function k2(t,e){return h0(t.x,e.x)&&h0(t.y,e.y)}function f0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Wv(t,e){return f0(t.x,e.x)&&f0(t.y,e.y)}function p0(t){return St(t.x)/St(t.y)}function m0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class T2{constructor(){this.members=[]}add(e){Od(this.members,e),e.scheduleRender()}remove(e){if(Id(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let s;for(let o=n;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function C2(t,e,n){let s="";const o=t.x.translate/e.x,l=t.y.translate/e.y,u=n?.z||0;if((o||l||u)&&(s=`translate3d(${o}px, ${l}px, ${u}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:y,rotateY:w,skewX:_,skewY:E}=n;p&&(s=`perspective(${p}px) ${s}`),g&&(s+=`rotate(${g}deg) `),y&&(s+=`rotateX(${y}deg) `),w&&(s+=`rotateY(${w}deg) `),_&&(s+=`skewX(${_}deg) `),E&&(s+=`skewY(${E}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(s+=`scale(${d}, ${h})`),s||"none"}const xc=["","X","Y","Z"],P2=1e3;let j2=0;function bc(t,e,n,s){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),s&&(s[t]=0))}function Hv(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Av(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",$e,!(o||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&Hv(s)}function qv({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:o}){return class{constructor(u={},d=e?.()){this.id=j2++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(N2),this.nodes.forEach(M2),this.nodes.forEach(L2),this.nodes.forEach(O2)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new g2)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Ld),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const h=this.eventHandlers.get(u);h&&h.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=av(u)&&!TE(u),this.instance=u;const{layoutId:d,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let g,y=0;const w=()=>this.root.updateBlockedByResize=!1;$e.read(()=>{y=window.innerWidth}),t(u,()=>{const _=window.innerWidth;_!==y&&(y=_,this.root.updateBlockedByResize=!0,g&&g(),g=v2(w,250),Ia.hasAnimatedSinceResize&&(Ia.hasAnimatedSinceResize=!1,this.nodes.forEach(y0)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:w,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||p.getDefaultTransition()||B2,{onLayoutAnimationStart:C,onLayoutAnimationComplete:S}=p.getProps(),T=!this.targetLayout||!Wv(this.targetLayout,_),N=!y&&w;if(this.options.layoutRoot||this.resumeFrom||N||y&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...Jd(E,"layout"),onPlay:C,onComplete:S};(p.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(g,N)}else y||y0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($2),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Hv(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(g0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(v0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(D2),this.nodes.forEach(A2),this.nodes.forEach(R2)):this.nodes.forEach(v0),this.clearAllSnapshots();const d=It.now();ft.delta=Ir(0,1e3/60,d-ft.timestamp),ft.timestamp=d,ft.isProcessing=!0,uc.update.process(ft),uc.preRender.process(ft),uc.render.process(ft),ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(I2),this.sharedNodes.forEach(U2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!St(this.snapshot.measuredBox.x)&&!St(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d&&this.instance){const h=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!zv(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;u&&this.instance&&(d||An(this.latestValues)||g)&&(o(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return u&&(h=this.removeTransform(h)),z2(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return rt();const d=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(W2))){const{scroll:p}=this.root;p&&(Ei(d.x,p.offset.x),Ei(d.y,p.offset.y))}return d}removeElementScroll(u){const d=rt();if(sr(d,u),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&sr(d,u),Ei(d.x,g.offset.x),Ei(d.y,g.offset.y))}return d}applyTransform(u,d=!1){const h=rt();sr(h,u);for(let p=0;p<this.path.length;p++){const g=this.path[p];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Si(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),An(g.latestValues)&&Si(h,g.latestValues)}return An(this.latestValues)&&Si(h,this.latestValues),h}removeTransform(u){const d=rt();sr(d,u);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!An(p.latestValues))continue;Qc(p.latestValues)&&p.updateSnapshot();const g=rt(),y=p.measurePageBox();sr(g,y),c0(d,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return An(this.latestValues)&&c0(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(u||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=ft.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=rt(),this.targetWithTransforms=rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sr(this.target,this.layout.layoutBox),Sv(this.target,this.targetDelta)):sr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Qc(this.parent.latestValues)||Ev(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,d,h){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),Ha(this.relativeTargetOrigin,d,h),sr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===ft.timestamp&&(h=!1),h)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;sr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,w=this.treeScale.y;cS(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=rt());const{target:_}=u;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(a0(this.prevProjectionDelta.x,this.projectionDelta.x),a0(this.prevProjectionDelta.y,this.projectionDelta.y)),$s(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==w||!m0(this.projectionDelta.x,this.prevProjectionDelta.x)||!m0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ki(),this.projectionDelta=ki(),this.projectionDeltaWithTransform=ki()}setAnimationOrigin(u,d=!1){const h=this.snapshot,p=h?h.latestValues:{},g={...this.latestValues},y=ki();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const w=rt(),_=h?h.source:void 0,E=this.layout?this.layout.source:void 0,C=_!==E,S=this.getStack(),T=!S||S.members.length<=1,N=!!(C&&!T&&this.options.crossfade===!0&&!this.path.some(F2));this.animationProgress=0;let P;this.mixTargetDelta=L=>{const I=L/1e3;w0(y.x,u.x,I),w0(y.y,u.y,I),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ha(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),V2(this.relativeTarget,this.relativeTargetOrigin,w,I),P&&k2(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=rt()),sr(P,this.relativeTarget)),C&&(this.animationValues=g,w2(g,p,this.latestValues,I,N,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$e.update(()=>{Ia.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ji(0)),this.currentAnimation=p2(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(P2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:h,layout:p,latestValues:g}=u;if(!(!d||!h||!p)){if(this!==u&&this.layout&&p&&Kv(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||rt();const y=St(this.layout.layoutBox.x);h.x.min=u.target.x.min,h.x.max=h.x.min+y;const w=St(this.layout.layoutBox.y);h.y.min=u.target.y.min,h.y.max=h.y.min+w}sr(d,h),Si(d,g),$s(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new T2),this.sharedNodes.get(u).add(d);const p=d.options.initialPromotionConfig;d.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:h}=u;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const p={};h.z&&bc("z",u,p,this.animationValues);for(let g=0;g<xc.length;g++)bc(`rotate${xc[g]}`,u,p,this.animationValues),bc(`skew${xc[g]}`,u,p,this.animationValues);u.render();for(const g in p)u.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);u.scheduleRender()}applyProjectionStyles(u,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=Oa(d?.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=Oa(d?.pointerEvents)||""),this.hasProjected&&!An(this.latestValues)&&(u.transform=h?h({},""):"none",this.hasProjected=!1);return}u.visibility="";const g=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=C2(this.projectionDeltaWithTransform,this.treeScale,g);h&&(y=h(g,y)),u.transform=y;const{x:w,y:_}=this.projectionDelta;u.transformOrigin=`${w.origin*100}% ${_.origin*100}% 0`,p.animationValues?u.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const E in Yc){if(g[E]===void 0)continue;const{correct:C,applyTo:S,isCSSVariable:T}=Yc[E],N=y==="none"?g[E]:C(g[E],p);if(S){const P=S.length;for(let L=0;L<P;L++)u[S[L]]=N}else T?this.options.visualElement.renderState.vars[E]=N:u[E]=N}this.options.layoutId&&(u.pointerEvents=p===this?Oa(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(g0),this.root.sharedNodes.clear()}}}function A2(t){t.updateLayout()}function R2(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?Kt(g=>{const y=l?e.measuredBox[g]:e.layoutBox[g],w=St(y);y.min=n[g].min,y.max=y.min+w}):Kv(o,e.layoutBox,n)&&Kt(g=>{const y=l?e.measuredBox[g]:e.layoutBox[g],w=St(n[g]);y.max=y.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+w)});const u=ki();$s(u,n,e.layoutBox);const d=ki();l?$s(d,t.applyTransform(s,!0),e.measuredBox):$s(d,n,e.layoutBox);const h=!zv(u);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:w}=g;if(y&&w){const _=rt();Ha(_,e.layoutBox,y.layoutBox);const E=rt();Ha(E,n,w.layoutBox),Wv(_,E)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=_,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function N2(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function O2(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function I2(t){t.clearSnapshot()}function g0(t){t.clearMeasurements()}function v0(t){t.isLayoutDirty=!1}function D2(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function y0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function M2(t){t.resolveTargetDelta()}function L2(t){t.calcProjection()}function $2(t){t.resetSkewAndRotation()}function U2(t){t.removeLeadSnapshot()}function w0(t,e,n){t.translate=Fe(e.translate,0,n),t.scale=Fe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function x0(t,e,n,s){t.min=Fe(e.min,n.min,s),t.max=Fe(e.max,n.max,s)}function V2(t,e,n,s){x0(t.x,e.x,n.x,s),x0(t.y,e.y,n.y,s)}function F2(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const B2={duration:.45,ease:[.4,0,.1,1]},b0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_0=b0("applewebkit/")&&!b0("chrome/")?Math.round:Yt;function E0(t){t.min=_0(t.min),t.max=_0(t.max)}function z2(t){E0(t.x),E0(t.y)}function Kv(t,e,n){return t==="position"||t==="preserve-aspect"&&!QS(p0(e),p0(n),.2)}function W2(t){return t!==t.root&&t.scroll?.wasRoot}const H2=qv({attachResizeListener:(t,e)=>zs(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_c={current:void 0},Gv=qv({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_c.current){const t=new H2({});t.mount(window),t.setOptions({layoutScroll:!0}),_c.current=t}return _c.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),q2={pan:{Feature:h2},drag:{Feature:d2,ProjectionNode:Gv,MeasureLayout:Vv}};function S0(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,l=s[o];l&&$e.postRender(()=>l(e,ro(e)))}class K2 extends fn{mount(){const{current:e}=this.node;e&&(this.unmount=bE(e,(n,s)=>(S0(this.node,s,"Start"),o=>S0(this.node,o,"End"))))}unmount(){}}class G2 extends fn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zs(zs(this.node.current,"focus",()=>this.onFocus()),zs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function k0(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),l=s[o];l&&$e.postRender(()=>l(e,ro(e)))}class J2 extends fn{mount(){const{current:e}=this.node;e&&(this.unmount=kE(e,(n,s)=>(k0(this.node,s,"Start"),(o,{success:l})=>k0(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const id=new WeakMap,Ec=new WeakMap,Y2=t=>{const e=id.get(t.target);e&&e(t)},Q2=t=>{t.forEach(Y2)};function X2({root:t,...e}){const n=t||document;Ec.has(n)||Ec.set(n,{});const s=Ec.get(n),o=JSON.stringify(e);return s[o]||(s[o]=new IntersectionObserver(Q2,{root:t,...e})),s[o]}function Z2(t,e,n){const s=X2(e);return id.set(t,n),s.observe(t),()=>{id.delete(t),s.unobserve(t)}}const ek={some:0,all:1};class tk extends fn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:l}=e,u={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:ek[o]},d=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,l&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),w=p?g:y;w&&w(h)};return Z2(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(rk(e,n))&&this.startObserver()}unmount(){}}function rk({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const nk={inView:{Feature:tk},tap:{Feature:J2},focus:{Feature:G2},hover:{Feature:K2}},ik={layout:{ProjectionNode:Gv,MeasureLayout:Vv}},sk={...HS,...nk,...q2,...ik},Ne=aS(sk,xS);var lh={};(function t(e,n,s,o){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),u=typeof Path2D=="function"&&typeof DOMMatrix=="function",d=(function(){if(!e.OffscreenCanvas)return!1;try{var j=new OffscreenCanvas(1,1),b=j.getContext("2d");b.fillRect(0,0,1,1);var M=j.transferToImageBitmap();b.createPattern(M,"no-repeat")}catch{return!1}return!0})();function h(){}function p(j){var b=n.exports.Promise,M=b!==void 0?b:e.Promise;return typeof M=="function"?new M(j):(j(h,h),null)}var g=(function(j,b){return{transform:function(M){if(j)return M;if(b.has(M))return b.get(M);var G=new OffscreenCanvas(M.width,M.height),J=G.getContext("2d");return J.drawImage(M,0,0),b.set(M,G),G},clear:function(){b.clear()}}})(d,new Map),y=(function(){var j=Math.floor(16.666666666666668),b,M,G={},J=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(b=function(Q){var te=Math.random();return G[te]=requestAnimationFrame(function Y(re){J===re||J+j-1<re?(J=re,delete G[te],Q()):G[te]=requestAnimationFrame(Y)}),te},M=function(Q){G[Q]&&cancelAnimationFrame(G[Q])}):(b=function(Q){return setTimeout(Q,j)},M=function(Q){return clearTimeout(Q)}),{frame:b,cancel:M}})(),w=(function(){var j,b,M={};function G(J){function Q(te,Y){J.postMessage({options:te||{},callback:Y})}J.init=function(Y){var re=Y.transferControlToOffscreen();J.postMessage({canvas:re},[re])},J.fire=function(Y,re,he){if(b)return Q(Y,null),b;var be=Math.random().toString(36).slice(2);return b=p(function(ke){function Oe(ze){ze.data.callback===be&&(delete M[be],J.removeEventListener("message",Oe),b=null,g.clear(),he(),ke())}J.addEventListener("message",Oe),Q(Y,be),M[be]=Oe.bind(null,{data:{callback:be}})}),b},J.reset=function(){J.postMessage({reset:!0});for(var Y in M)M[Y](),delete M[Y]}}return function(){if(j)return j;if(!s&&l){var J=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{j=new Worker(URL.createObjectURL(new Blob([J])))}catch(Q){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",Q),null}G(j)}return j}})(),_={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function E(j,b){return b?b(j):j}function C(j){return j!=null}function S(j,b,M){return E(j&&C(j[b])?j[b]:_[b],M)}function T(j){return j<0?0:Math.floor(j)}function N(j,b){return Math.floor(Math.random()*(b-j))+j}function P(j){return parseInt(j,16)}function L(j){return j.map(I)}function I(j){var b=String(j).replace(/[^0-9a-f]/gi,"");return b.length<6&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]),{r:P(b.substring(0,2)),g:P(b.substring(2,4)),b:P(b.substring(4,6))}}function U(j){var b=S(j,"origin",Object);return b.x=S(b,"x",Number),b.y=S(b,"y",Number),b}function z(j){j.width=document.documentElement.clientWidth,j.height=document.documentElement.clientHeight}function F(j){var b=j.getBoundingClientRect();j.width=b.width,j.height=b.height}function X(j){var b=document.createElement("canvas");return b.style.position="fixed",b.style.top="0px",b.style.left="0px",b.style.pointerEvents="none",b.style.zIndex=j,b}function ee(j,b,M,G,J,Q,te,Y,re){j.save(),j.translate(b,M),j.rotate(Q),j.scale(G,J),j.arc(0,0,1,te,Y,re),j.restore()}function Pe(j){var b=j.angle*(Math.PI/180),M=j.spread*(Math.PI/180);return{x:j.x,y:j.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:j.startVelocity*.5+Math.random()*j.startVelocity,angle2D:-b+(.5*M-Math.random()*M),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:j.color,shape:j.shape,tick:0,totalTicks:j.ticks,decay:j.decay,drift:j.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:j.gravity*3,ovalScalar:.6,scalar:j.scalar,flat:j.flat}}function ye(j,b){b.x+=Math.cos(b.angle2D)*b.velocity+b.drift,b.y+=Math.sin(b.angle2D)*b.velocity+b.gravity,b.velocity*=b.decay,b.flat?(b.wobble=0,b.wobbleX=b.x+10*b.scalar,b.wobbleY=b.y+10*b.scalar,b.tiltSin=0,b.tiltCos=0,b.random=1):(b.wobble+=b.wobbleSpeed,b.wobbleX=b.x+10*b.scalar*Math.cos(b.wobble),b.wobbleY=b.y+10*b.scalar*Math.sin(b.wobble),b.tiltAngle+=.1,b.tiltSin=Math.sin(b.tiltAngle),b.tiltCos=Math.cos(b.tiltAngle),b.random=Math.random()+2);var M=b.tick++/b.totalTicks,G=b.x+b.random*b.tiltCos,J=b.y+b.random*b.tiltSin,Q=b.wobbleX+b.random*b.tiltCos,te=b.wobbleY+b.random*b.tiltSin;if(j.fillStyle="rgba("+b.color.r+", "+b.color.g+", "+b.color.b+", "+(1-M)+")",j.beginPath(),u&&b.shape.type==="path"&&typeof b.shape.path=="string"&&Array.isArray(b.shape.matrix))j.fill(ge(b.shape.path,b.shape.matrix,b.x,b.y,Math.abs(Q-G)*.1,Math.abs(te-J)*.1,Math.PI/10*b.wobble));else if(b.shape.type==="bitmap"){var Y=Math.PI/10*b.wobble,re=Math.abs(Q-G)*.1,he=Math.abs(te-J)*.1,be=b.shape.bitmap.width*b.scalar,ke=b.shape.bitmap.height*b.scalar,Oe=new DOMMatrix([Math.cos(Y)*re,Math.sin(Y)*re,-Math.sin(Y)*he,Math.cos(Y)*he,b.x,b.y]);Oe.multiplySelf(new DOMMatrix(b.shape.matrix));var ze=j.createPattern(g.transform(b.shape.bitmap),"no-repeat");ze.setTransform(Oe),j.globalAlpha=1-M,j.fillStyle=ze,j.fillRect(b.x-be/2,b.y-ke/2,be,ke),j.globalAlpha=1}else if(b.shape==="circle")j.ellipse?j.ellipse(b.x,b.y,Math.abs(Q-G)*b.ovalScalar,Math.abs(te-J)*b.ovalScalar,Math.PI/10*b.wobble,0,2*Math.PI):ee(j,b.x,b.y,Math.abs(Q-G)*b.ovalScalar,Math.abs(te-J)*b.ovalScalar,Math.PI/10*b.wobble,0,2*Math.PI);else if(b.shape==="star")for(var xe=Math.PI/2*3,lt=4*b.scalar,kt=8*b.scalar,bt=b.x,Vt=b.y,Qt=5,pt=Math.PI/Qt;Qt--;)bt=b.x+Math.cos(xe)*kt,Vt=b.y+Math.sin(xe)*kt,j.lineTo(bt,Vt),xe+=pt,bt=b.x+Math.cos(xe)*lt,Vt=b.y+Math.sin(xe)*lt,j.lineTo(bt,Vt),xe+=pt;else j.moveTo(Math.floor(b.x),Math.floor(b.y)),j.lineTo(Math.floor(b.wobbleX),Math.floor(J)),j.lineTo(Math.floor(Q),Math.floor(te)),j.lineTo(Math.floor(G),Math.floor(b.wobbleY));return j.closePath(),j.fill(),b.tick<b.totalTicks}function je(j,b,M,G,J){var Q=b.slice(),te=j.getContext("2d"),Y,re,he=p(function(be){function ke(){Y=re=null,te.clearRect(0,0,G.width,G.height),g.clear(),J(),be()}function Oe(){s&&!(G.width===o.width&&G.height===o.height)&&(G.width=j.width=o.width,G.height=j.height=o.height),!G.width&&!G.height&&(M(j),G.width=j.width,G.height=j.height),te.clearRect(0,0,G.width,G.height),Q=Q.filter(function(ze){return ye(te,ze)}),Q.length?Y=y.frame(Oe):ke()}Y=y.frame(Oe),re=ke});return{addFettis:function(be){return Q=Q.concat(be),he},canvas:j,promise:he,reset:function(){Y&&y.cancel(Y),re&&re()}}}function _e(j,b){var M=!j,G=!!S(b||{},"resize"),J=!1,Q=S(b,"disableForReducedMotion",Boolean),te=l&&!!S(b||{},"useWorker"),Y=te?w():null,re=M?z:F,he=j&&Y?!!j.__confetti_initialized:!1,be=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ke;function Oe(xe,lt,kt){for(var bt=S(xe,"particleCount",T),Vt=S(xe,"angle",Number),Qt=S(xe,"spread",Number),pt=S(xe,"startVelocity",Number),Lr=S(xe,"decay",Number),Ui=S(xe,"gravity",Number),so=S(xe,"drift",Number),Vi=S(xe,"colors",L),oo=S(xe,"ticks",Number),Fi=S(xe,"shapes"),Bi=S(xe,"scalar"),Bn=!!S(xe,"flat"),zi=U(xe),$r=bt,br=[],ml=j.width*zi.x,ao=j.height*zi.y;$r--;)br.push(Pe({x:ml,y:ao,angle:Vt,spread:Qt,startVelocity:pt,color:Vi[$r%Vi.length],shape:Fi[N(0,Fi.length)],ticks:oo,decay:Lr,gravity:Ui,drift:so,scalar:Bi,flat:Bn}));return ke?ke.addFettis(br):(ke=je(j,br,re,lt,kt),ke.promise)}function ze(xe){var lt=Q||S(xe,"disableForReducedMotion",Boolean),kt=S(xe,"zIndex",Number);if(lt&&be)return p(function(pt){pt()});M&&ke?j=ke.canvas:M&&!j&&(j=X(kt),document.body.appendChild(j)),G&&!he&&re(j);var bt={width:j.width,height:j.height};Y&&!he&&Y.init(j),he=!0,Y&&(j.__confetti_initialized=!0);function Vt(){if(Y){var pt={getBoundingClientRect:function(){if(!M)return j.getBoundingClientRect()}};re(pt),Y.postMessage({resize:{width:pt.width,height:pt.height}});return}bt.width=bt.height=null}function Qt(){ke=null,G&&(J=!1,e.removeEventListener("resize",Vt)),M&&j&&(document.body.contains(j)&&document.body.removeChild(j),j=null,he=!1)}return G&&!J&&(J=!0,e.addEventListener("resize",Vt,!1)),Y?Y.fire(xe,bt,Qt):Oe(xe,bt,Qt)}return ze.reset=function(){Y&&Y.reset(),ke&&ke.reset()},ze}var Be;function it(){return Be||(Be=_e(null,{useWorker:!0,resize:!0})),Be}function ge(j,b,M,G,J,Q,te){var Y=new Path2D(j),re=new Path2D;re.addPath(Y,new DOMMatrix(b));var he=new Path2D;return he.addPath(re,new DOMMatrix([Math.cos(te)*J,Math.sin(te)*J,-Math.sin(te)*Q,Math.cos(te)*Q,M,G])),he}function K(j){if(!u)throw new Error("path confetti are not supported in this browser");var b,M;typeof j=="string"?b=j:(b=j.path,M=j.matrix);var G=new Path2D(b),J=document.createElement("canvas"),Q=J.getContext("2d");if(!M){for(var te=1e3,Y=te,re=te,he=0,be=0,ke,Oe,ze=0;ze<te;ze+=2)for(var xe=0;xe<te;xe+=2)Q.isPointInPath(G,ze,xe,"nonzero")&&(Y=Math.min(Y,ze),re=Math.min(re,xe),he=Math.max(he,ze),be=Math.max(be,xe));ke=he-Y,Oe=be-re;var lt=10,kt=Math.min(lt/ke,lt/Oe);M=[kt,0,0,kt,-Math.round(ke/2+Y)*kt,-Math.round(Oe/2+re)*kt]}return{type:"path",path:b,matrix:M}}function ue(j){var b,M=1,G="#000000",J='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof j=="string"?b=j:(b=j.text,M="scalar"in j?j.scalar:M,J="fontFamily"in j?j.fontFamily:J,G="color"in j?j.color:G);var Q=10*M,te=""+Q+"px "+J,Y=new OffscreenCanvas(Q,Q),re=Y.getContext("2d");re.font=te;var he=re.measureText(b),be=Math.ceil(he.actualBoundingBoxRight+he.actualBoundingBoxLeft),ke=Math.ceil(he.actualBoundingBoxAscent+he.actualBoundingBoxDescent),Oe=2,ze=he.actualBoundingBoxLeft+Oe,xe=he.actualBoundingBoxAscent+Oe;be+=Oe+Oe,ke+=Oe+Oe,Y=new OffscreenCanvas(be,ke),re=Y.getContext("2d"),re.font=te,re.fillStyle=G,re.fillText(b,ze,xe);var lt=1/M;return{type:"bitmap",bitmap:Y.transferToImageBitmap(),matrix:[lt,0,0,lt,-be*lt/2,-ke*lt/2]}}n.exports=function(){return it().apply(this,arguments)},n.exports.reset=function(){it().reset()},n.exports.create=_e,n.exports.shapeFromPath=K,n.exports.shapeFromText=ue})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),lh,!1);const qa=lh.exports;lh.exports.create;var ok={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ak=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Te=(t,e)=>{const n=V.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:d="",children:h,...p},g)=>V.createElement("svg",{ref:g,...ok,width:o,height:o,stroke:s,strokeWidth:u?Number(l)*24/Number(o):l,className:["lucide",`lucide-${ak(t)}`,d].join(" "),...p},[...e.map(([y,w])=>V.createElement(y,w)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};const lk=Te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const uk=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const ck=Te("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const Jv=Te("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);const T0=Te("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const C0=Te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const Sc=Te("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);const dk=Te("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Ws=Te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const hk=Te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const fk=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Hs=Te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Yv=Te("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);const Ps=Te("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const pk=Te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const mk=Te("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);const sd=Te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const Qv=Te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const vr=Te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Ka=Te("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);const gk=Te("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);const vk=Te("PackageOpen",[["path",{d:"M20.91 8.84 8.56 2.23a1.93 1.93 0 0 0-1.81 0L3.1 4.13a2.12 2.12 0 0 0-.05 3.69l12.22 6.93a2 2 0 0 0 1.94 0L21 12.51a2.12 2.12 0 0 0-.09-3.67Z",key:"1vy178"}],["path",{d:"m3.09 8.84 12.35-6.61a1.93 1.93 0 0 1 1.81 0l3.65 1.9a2.12 2.12 0 0 1 .1 3.69L8.73 14.75a2 2 0 0 1-1.94 0L3 12.51a2.12 2.12 0 0 1 .09-3.67Z",key:"s3bv25"}],["line",{x1:"12",x2:"12",y1:"22",y2:"13",key:"1o4xyi"}],["path",{d:"M20 13.5v3.37a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13.5",key:"1na2nq"}]]);const Ri=Te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Ga=Te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Xv=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const yk=Te("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);const Fn=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const wk=Te("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);const Zv=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const P0=Te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ve={log:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{console.error(...t)}};function xk(t,e=new Date){const n=e.getTime()-new Date(t).getTime(),s=Math.floor(n/1e3),o=Math.floor(s/60),l=Math.floor(o/60),u=Math.floor(l/24);if(s<60)return`Hace ${s} seg`;if(o<60){const d=s%60;return d===0?`Hace ${o} min`:`Hace ${o} min ${d} seg`}if(l<24){const d=o%60;return d===0?`Hace ${l} h`:`Hace ${l} h ${d} min`}return u<7?`Hace ${u} da${u>1?"s":""}`:new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}function bk(){const[t,e]=V.useState(new Date);return V.useEffect(()=>{const n=setInterval(()=>e(new Date),1e3);return()=>clearInterval(n)},[]),t}function ey(t){return Math.round(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}function _k(t){return{Pendiente:"status-pendiente",Asignado:"status-asignado","En camino al retiro":"status-en-camino-al-retiro","Producto retirado":"status-producto-retirado",Entregado:"status-entregado"}[t]||"status-default"}function Ek(t){return{Pendiente:Hs,Asignado:Ws,"En camino al retiro":yk,"Producto retirado":Ri,Entregado:dk}[t]||Hs}function Sk(t,e,n,s){const l=(n-t)*Math.PI/180,u=(s-e)*Math.PI/180,d=Math.sin(l/2)*Math.sin(l/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2);return 6371*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))}async function kk(t){if(!t||!t.trim())return null;const e="AIzaSyA-ouc0xksBpUhCWgndGyTU7dAumOLDCRw";if(window.google&&window.google.maps&&window.google.maps.Geocoder)try{const n=new window.google.maps.Geocoder;return new Promise(s=>{n.geocode({address:t},(o,l)=>{if(l==="OK"&&o&&o.length>0){const u=o[0].geometry.location;s({lat:u.lat(),lon:u.lng()})}else kc(t,e).then(s)})})}catch{return kc(t,e)}return kc(t,e)}async function kc(t,e){try{const n=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(t)}&key=${e}`);if(!n.ok)throw new Error("Error en geocodificacin");const s=await n.json();if(s.status==="OK"&&s.results&&s.results.length>0){const o=s.results[0].geometry.location;return{lat:parseFloat(o.lat),lon:parseFloat(o.lng)}}return null}catch{return null}}async function ty(){if(typeof window>"u"||!window.Capacitor)return null;try{const t="@capacitor/geolocation",e="@capacitor/core",[n,s]=await Promise.all([import(t),import(e)]);return{Geolocation:n.Geolocation,Capacitor:s.Capacitor}}catch{return null}}async function j0(){const t=await ty();if(t){const{Geolocation:e,Capacitor:n}=t;try{if(n.isNativePlatform()){if((await e.checkPermissions()).location!=="granted"&&(await e.requestPermissions()).location!=="granted")return null;try{const o=await e.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4,maximumAge:0});return{lat:o.coords.latitude,lon:o.coords.longitude}}catch(o){const l=o?.message||"";if(l.includes("cancelled")||l.includes("PHASE_CLIENT_ALREADY_HIDDEN"))return ve.warn(" Usuario cancel el dilogo de permisos de ubicacin"),null;ve.warn(" Error obteniendo ubicacin con Capacitor, intentando Web API:",o?.message)}}}catch(s){const o=s?.message||"";!o.includes("cancelled")&&!o.includes("PHASE_CLIENT_ALREADY_HIDDEN")&&ve.warn(" Error con Capacitor Geolocation, usando Web API:",s?.message)}}return new Promise(e=>{if(!navigator.geolocation){e(null);return}let n=0;const s=2,o=()=>{n++,navigator.geolocation.getCurrentPosition(l=>{e({lat:l.coords.latitude,lon:l.coords.longitude})},l=>{l.code===3&&n<s?setTimeout(()=>{o()},2e3):(ve.warn(" No se pudo obtener ubicacin:",l.code===3?"Timeout":l.message),e(null))},{enableHighAccuracy:!0,timeout:2e4,maximumAge:6e4})};o()})}function ry({children:t,onClose:e,maxWidth:n="2xl"}){return v.jsx("div",{className:"modal-overlay",onClick:e,children:v.jsx("div",{className:`modal-content modal-content-${n}`,onClick:s=>s.stopPropagation(),children:t})})}function ny({onClose:t,onConfirm:e,orderId:n}){const[s,o]=V.useState(""),[l,u]=V.useState(""),d=p=>{if(p.preventDefault(),s.trim().length===0){u("Por favor ingresa el cdigo");return}if(s.trim().length!==6){u("El cdigo debe tener 6 dgitos");return}e(s.trim())||(u("Cdigo incorrecto. Por favor verifica el cdigo e intenta nuevamente."),o(""))},h=p=>{const g=p.replace(/\D/g,"").slice(0,6);o(g),l&&u("")};return v.jsx(ry,{onClose:t,maxWidth:"sm",children:v.jsxs("div",{className:"pickup-code-modal",children:[v.jsxs("div",{className:"pickup-code-modal-header",children:[v.jsx("div",{className:"pickup-code-modal-header-icon",children:v.jsx(mk,{})}),v.jsxs("div",{children:[v.jsx("h2",{className:"pickup-code-modal-title",children:"Cdigo de Retiro"}),v.jsx("p",{className:"pickup-code-modal-subtitle",children:"Ingresa el cdigo para retirar el producto"})]}),v.jsx("button",{onClick:t,className:"pickup-code-modal-close","aria-label":"Cerrar",children:v.jsx(Zv,{})})]}),v.jsxs("form",{onSubmit:d,className:"pickup-code-modal-form",children:[v.jsxs("div",{className:"pickup-code-modal-input-group",children:[v.jsxs("label",{htmlFor:"pickup-code",className:"pickup-code-modal-label",children:["Cdigo del pedido ",n]}),v.jsx("input",{id:"pickup-code",type:"text",value:s,onChange:p=>h(p.target.value),placeholder:"000000",className:`pickup-code-modal-input ${l?"pickup-code-modal-input-error":""}`,maxLength:6,autoFocus:!0}),l&&v.jsxs("div",{className:"pickup-code-modal-error",children:[v.jsx(lk,{}),v.jsx("span",{children:l})]})]}),v.jsxs("div",{className:"pickup-code-modal-actions",children:[v.jsx("button",{type:"button",onClick:t,className:"pickup-code-modal-button pickup-code-modal-button-secondary",children:"Cancelar"}),v.jsx("button",{type:"submit",className:"pickup-code-modal-button pickup-code-modal-button-primary",children:"Confirmar"})]})]})]})})}const Gt=Object.freeze({PENDIENTE:"Pendiente",ASIGNADO:"Asignado",EN_CAMINO:"En camino",PRODUCTO_RETIRADO:"Producto retirado",ENTREGADO:"Entregado"}),iy=Object.freeze({[Gt.PENDIENTE]:[Gt.ASIGNADO],[Gt.ASIGNADO]:[Gt.EN_CAMINO],[Gt.EN_CAMINO]:[Gt.PRODUCTO_RETIRADO],[Gt.PRODUCTO_RETIRADO]:[Gt.ENTREGADO],[Gt.ENTREGADO]:[]}),Tk=Object.freeze({[`${Gt.EN_CAMINO}=>${Gt.PRODUCTO_RETIRADO}`]:{requiresPickupCode:!0}});function Ck(t,e){return(iy[t]||[]).includes(e)}function Pk(t){const e=iy[t]||[];return e.length>0?e[0]:null}function sy(t,e){return Tk[`${t}=>${e}`]||{}}function Ja(t){const e=Pk(t?.status);if(!e)return null;const n=sy(t.status,e);return{type:"ADVANCE_STATUS",label:e===Gt.ENTREGADO?"Entregar pedido":`Marcar como: ${e}`,toStatus:e,requiresPickupCode:!!n.requiresPickupCode}}function qs(t,e){return t?.status?Ck(t.status,e)?sy(t.status,e).requiresPickupCode&&!t.pickupCode?{ok:!1,reason:"Este pedido no tiene pickupCode configurado"}:{ok:!0}:{ok:!1,reason:`Transicin invlida: ${t.status}  ${e}`}:{ok:!1,reason:"Pedido sin estado"}}function jk({order:t,onClick:e,onDelete:n,onAcceptOrder:s,onUpdateStatus:o}){const l=bk();_k(t.status),Ek(t.status);const u=t.status==="Pendiente",d=t.status==="Asignado",h=t.status==="En camino",[p,g]=V.useState(null),[y,w]=V.useState(!1),_=Ja(t);V.useEffect(()=>{if(t.status==="Asignado"){const P=()=>{const I=new Date,U=new Date(t.updatedAt),z=Math.floor((I.getTime()-U.getTime())/1e3),F=Math.max(0,60-z);g(F)};P();const L=setInterval(P,1e3);return()=>clearInterval(L)}else g(null)},[t.status,t.updatedAt]);const E=P=>{const L=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(P)}`;window.open(L,"_blank")},C=async P=>{if(P.stopPropagation(),!!s)try{qa({particleCount:100,spread:70,origin:{y:.6},colors:["#035ce8","#2b73ee","#528af4","#10b981"]}),await s(t.id),qe.success("Pedido Aceptado!",{description:`${t.local||t.id} - ${t.clientName||"Cliente"}`,duration:3e3})}catch(L){qe.error("Error al aceptar pedido: "+L.message)}},S=P=>{if(P.stopPropagation(),!o)return;const L=qs(t,"En camino");if(!L.ok){qe.error(L.reason);return}o(t.id,"En camino"),qe.success("En camino!",{description:"El cliente ha sido notificado",duration:3e3})},T=P=>{if(P.stopPropagation(),!o||!_){qe.error("No se puede retirar el producto en este momento");return}const L=qs(t,_.toStatus);if(!L.ok){qe.error(L.reason);return}if(_.requiresPickupCode){w(!0);return}o&&o(t.id,_.toStatus)},N=P=>{const L=String(t.pickupCode??"").replace(/\D/g,"").padStart(6,"0");if(String(P??"").replace(/\D/g,"").padStart(6,"0")!==L)return!1;const U=Ja(t);return!U||!o?!1:(o(t.id,U.toStatus),w(!1),qa({particleCount:150,spread:100,origin:{y:.5},colors:["#10b981","#059669","#34d399"]}),qe.success("Producto Retirado!",{description:"Puedes continuar con la entrega",duration:3e3}),!0)};return v.jsxs(Ne.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},whileHover:{scale:1.02},className:"order-card-new",children:[v.jsxs("div",{className:"order-card-header",children:[v.jsx("h3",{className:"order-card-restaurant",children:t.local||t.id}),v.jsxs("span",{className:"order-card-payment",children:["$",ey(t.suggestedPrice)]})]}),v.jsxs("div",{className:"order-card-details",children:[v.jsxs("div",{className:"order-card-detail",children:[v.jsx(Fn,{className:"order-card-icon"}),v.jsx("span",{className:"order-card-detail-text",children:t.clientName||"Cliente"})]}),v.jsxs("div",{className:"order-card-location-wrapper",children:[v.jsxs("div",{className:"order-card-detail",children:[v.jsx(vr,{className:"order-card-icon"}),v.jsx("span",{className:"order-card-detail-text",children:t.deliveryAddress})]}),v.jsx(Ne.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:P=>{P.stopPropagation(),E(t.deliveryAddress)},className:"order-card-map-button",title:"Abrir en Google Maps",children:v.jsx(Yv,{className:"order-card-map-icon"})})]}),v.jsxs("div",{className:"order-card-metrics",children:[t.distance!==null&&t.distance!==void 0&&v.jsxs("div",{className:"order-card-metric",children:[v.jsx(Ka,{className:"order-card-metric-icon"}),v.jsxs("span",{children:[t.distance.toFixed(1)," km"]})]}),v.jsxs("div",{className:"order-card-metric",children:[v.jsx(Hs,{className:"order-card-metric-icon"}),v.jsx("span",{children:xk(t.createdAt,l)})]})]})]}),t.deliveryAddress&&v.jsx("div",{className:"order-card-map-container",children:v.jsx("iframe",{className:"order-card-map",loading:"lazy",src:`https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=${encodeURIComponent(t.deliveryAddress)}&zoom=15`,title:`Mapa de ${t.deliveryAddress}`,allowFullScreen:!0})}),u?v.jsx(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:C,className:"order-card-accept-button",children:"Aceptar Pedido"}):d?v.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:S,className:"order-card-en-camino-button",children:[v.jsx(Ka,{style:{width:"1.25rem",height:"1.25rem"}}),"Voy en Camino"]}):h?v.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,className:"order-card-retire-button",children:[v.jsx(Ri,{style:{width:"1.25rem",height:"1.25rem"}}),"Retirar Producto"]}):null,y&&v.jsx(ny,{onClose:()=>w(!1),onConfirm:N,orderId:t.id})]})}function oy({orders:t,onSelectOrder:e,onDeleteOrder:n,onAcceptOrder:s,onUpdateStatus:o}){return t.length===0?v.jsx("div",{className:"order-list-empty",children:v.jsx("p",{className:"order-list-empty-text",children:"No hay pedidos para mostrar"})}):v.jsx("div",{className:"order-list",children:t.map(l=>v.jsx(jk,{order:l,onClick:()=>e&&e(l),onDelete:n,onAcceptOrder:s,onUpdateStatus:o},l.id))})}function Ak({driverName:t}){const e=JSON.parse(localStorage.getItem("driver")||"{}"),n=t||e.name||"Repartidor";return v.jsxs("div",{className:"driver-profile",children:[v.jsxs("div",{className:"driver-profile-header",children:[v.jsx("h2",{children:"Mi Perfil"}),v.jsx("p",{children:"Gestiona tu informacin personal"})]}),v.jsx("div",{className:"driver-profile-content",children:v.jsxs("div",{className:"driver-profile-card",children:[v.jsxs("div",{className:"driver-profile-avatar-section",children:[v.jsx("div",{className:"driver-profile-avatar-large",children:v.jsx(Fn,{})}),v.jsx("h3",{children:n}),v.jsx("p",{className:"driver-profile-role",children:"Repartidor"})]}),v.jsxs("div",{className:"driver-profile-info",children:[e.email&&v.jsxs("div",{className:"driver-profile-field",children:[v.jsxs("div",{className:"driver-profile-field-label",children:[v.jsx(Qv,{}),v.jsx("span",{children:"Correo Electrnico"})]}),v.jsx("p",{className:"driver-profile-field-value",children:e.email})]}),e.phone&&v.jsxs("div",{className:"driver-profile-field",children:[v.jsxs("div",{className:"driver-profile-field-label",children:[v.jsx(Ga,{}),v.jsx("span",{children:"Telfono"})]}),v.jsx("p",{className:"driver-profile-field-value",children:e.phone})]}),e.address&&v.jsxs("div",{className:"driver-profile-field",children:[v.jsxs("div",{className:"driver-profile-field-label",children:[v.jsx(vr,{}),v.jsx("span",{children:"Direccin"})]}),v.jsx("p",{className:"driver-profile-field-value",children:e.address})]})]})]})})]})}function Rk({orders:t=[]}){const e=JSON.parse(localStorage.getItem("driver")||"{}"),n=t||[],s=n.filter(h=>h.driverId===e?.id&&h.status==="Entregado"),o=n.filter(h=>h.driverId===e?.id&&h.status!=="Entregado"&&h.status!=="Pendiente"),l=s.reduce((h,p)=>h+(p.suggestedPrice||0),0),u=o.reduce((h,p)=>h+(p.suggestedPrice||0),0),d=s.length;return v.jsxs("div",{className:"driver-wallet",children:[v.jsxs("div",{className:"driver-wallet-header",children:[v.jsx("h2",{children:"Mi Billetera"}),v.jsx("p",{children:"Gestiona tus ganancias y pagos"})]}),v.jsxs("div",{className:"driver-wallet-content",children:[v.jsxs("div",{className:"driver-wallet-card driver-wallet-card-primary",children:[v.jsx("div",{className:"driver-wallet-card-icon",children:v.jsx(wk,{})}),v.jsxs("div",{className:"driver-wallet-card-content",children:[v.jsx("p",{className:"driver-wallet-card-label",children:"Total Ganado"}),v.jsxs("p",{className:"driver-wallet-card-value",children:["$",l.toLocaleString("es-CL")]})]})]}),v.jsxs("div",{className:"driver-wallet-stats",children:[v.jsxs("div",{className:"driver-wallet-stat-card",children:[v.jsx("div",{className:"driver-wallet-stat-icon driver-wallet-stat-icon-orange",children:v.jsx(Hs,{})}),v.jsxs("div",{className:"driver-wallet-stat-content",children:[v.jsx("p",{className:"driver-wallet-stat-label",children:"Pendiente"}),v.jsxs("p",{className:"driver-wallet-stat-value",children:["$",u.toLocaleString("es-CL")]})]})]}),v.jsxs("div",{className:"driver-wallet-stat-card",children:[v.jsx("div",{className:"driver-wallet-stat-icon driver-wallet-stat-icon-green",children:v.jsx(Xv,{})}),v.jsxs("div",{className:"driver-wallet-stat-content",children:[v.jsx("p",{className:"driver-wallet-stat-label",children:"Pedidos Completados"}),v.jsx("p",{className:"driver-wallet-stat-value",children:d})]})]})]}),v.jsxs("div",{className:"driver-wallet-section",children:[v.jsx("h3",{className:"driver-wallet-section-title",children:"Historial de Pagos"}),v.jsx("div",{className:"driver-wallet-empty",children:v.jsx("p",{children:"No hay pagos registrados an"})})]})]})]})}function Nk({userName:t,isConnected:e,onToggleConnection:n,onNavigate:s,availableCount:o,myOrdersCount:l,completedCount:u}){const d=[{icon:Ri,label:"Disponibles",count:o||0,bgColor:"linear-gradient(135deg, #528af4 0%, #7aa1f9 100%)",iconBg:"rgba(82, 138, 244, 0.15)",color:"#528af4",navigateTo:"orders"},{icon:vk,label:"En Curso",count:l||0,bgColor:"linear-gradient(135deg, #2b73ee 0%, #528af4 100%)",iconBg:"rgba(43, 115, 238, 0.15)",color:"#2b73ee",navigateTo:"myOrders"},{icon:gk,label:"Completados Hoy",count:u||0,bgColor:"linear-gradient(135deg, #035ce8 0%, #2b73ee 100%)",iconBg:"rgba(3, 92, 232, 0.15)",color:"#035ce8",navigateTo:"completed"}];return v.jsxs("div",{className:"home-view-container",children:[v.jsx("div",{className:"home-view-header",children:v.jsxs("div",{children:[v.jsx("p",{className:"home-view-greeting",children:"Hola,"}),v.jsx("h1",{className:"home-view-name",children:t})]})}),v.jsx("div",{className:"home-view-stats-grid",children:d.map((h,p)=>v.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.1+.3},whileHover:{y:-6,scale:1.02},whileTap:{scale:.98},onClick:()=>s&&s(h.navigateTo),className:"home-view-stat-card",children:[v.jsx("div",{className:"home-view-stat-bg",style:{background:h.bgColor}}),v.jsxs("div",{className:"home-view-stat-content",children:[v.jsxs("div",{className:"home-view-stat-info",children:[v.jsx(Ne.div,{whileHover:{scale:1.15,rotate:10},transition:{type:"spring",stiffness:400},className:"home-view-stat-icon-container",style:{backgroundColor:h.iconBg},children:v.jsx(h.icon,{style:{color:h.color},className:"home-view-stat-icon"})}),v.jsxs("div",{children:[v.jsx("p",{className:"home-view-stat-label",children:h.label}),v.jsx(Ne.p,{initial:{scale:1.3,opacity:0},animate:{scale:1,opacity:1},className:"home-view-stat-count",children:h.count},h.count)]})]}),v.jsx(Ne.div,{initial:{scaleY:0},animate:{scaleY:1},transition:{delay:p*.1+.4},className:"home-view-stat-accent",style:{background:h.bgColor}})]})]},h.label))})]})}function Ok({orders:t,onSelectOrder:e,onAcceptOrder:n,onUpdateStatus:s,isOnline:o,hasLocation:l,locationLoading:u,activeTab:d,onTabChange:h}){const[p,g]=V.useState("distance"),[y,w]=V.useState(!1),_=[...t].sort((E,C)=>{if(p==="distance"){const S=E.distance!==null&&E.distance!==void 0?E.distance:1/0,T=C.distance!==null&&C.distance!==void 0?C.distance:1/0;return S-T}if(p==="payment")return(C.suggestedPrice||0)-(E.suggestedPrice||0);if(p==="time"){const S=new Date(E.createdAt).getTime(),T=new Date(C.createdAt).getTime();return S-T}return 0});return v.jsxs("div",{className:"orders-view-container",children:[v.jsxs("div",{className:"orders-view-tabs",children:[v.jsxs("button",{onClick:()=>h&&h("available"),className:`orders-view-tab ${d==="available"?"orders-view-tab-active":""}`,children:["Pedidos Disponibles (",t.length,")"]}),v.jsx("button",{onClick:()=>h&&h("myOrders"),className:`orders-view-tab ${d==="myOrders"?"orders-view-tab-active":""}`,children:"Mis Pedidos"})]}),d==="available"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"orders-view-header",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"orders-view-title",children:"Pedidos Disponibles"}),v.jsx("p",{className:"orders-view-subtitle",children:"Selecciona un pedido para comenzar"})]}),v.jsx("div",{className:"orders-view-controls",children:v.jsx(Ne.button,{whileTap:{scale:.95},onClick:()=>w(!y),className:"orders-view-control-button",children:v.jsx(ck,{className:"orders-view-control-icon"})})})]}),y&&v.jsx(Ne.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"orders-view-sort-container",children:[{value:"distance",label:"Ms Cerca"},{value:"payment",label:"Mayor Pago"},{value:"time",label:"Menos Tiempo"}].map(E=>v.jsx(Ne.button,{whileTap:{scale:.95},onClick:()=>{g(E.value),w(!1)},className:`orders-view-sort-option ${p===E.value?"orders-view-sort-option-active":""}`,children:E.label},E.value))}),!o&&v.jsxs("div",{className:"orders-view-warning orders-view-warning-important",children:[v.jsx(vr,{}),v.jsxs("div",{children:[v.jsx("p",{children:v.jsx("strong",{children:"Conctate para ver pedidos"})}),v.jsx("p",{children:'Activa el botn "Conectado" en la parte superior para activar tu ubicacin GPS y ver pedidos disponibles'})]})]}),o&&!l&&u&&v.jsxs("div",{className:"orders-view-warning",children:[v.jsx(vr,{}),v.jsx("p",{children:"Obteniendo tu ubicacin GPS..."})]}),o&&!l&&!u&&v.jsxs("div",{className:"orders-view-warning",children:[v.jsx(vr,{}),v.jsx("p",{children:"No se pudo obtener tu ubicacin GPS. Verifica los permisos de ubicacin en tu dispositivo."})]}),v.jsx("div",{className:"orders-view-orders-container",children:o?_.length>0?v.jsx(oy,{orders:_,onSelectOrder:e,onDeleteOrder:void 0,onAcceptOrder:n,onUpdateStatus:s}):v.jsxs("div",{className:"orders-view-empty",children:[v.jsx(vr,{className:"orders-view-empty-icon"}),v.jsx("p",{className:"orders-view-empty-title",children:"No hay pedidos disponibles"}),v.jsx("p",{className:"orders-view-empty-text",children:l?"No hay pedidos pendientes dentro de 5 km de tu ubicacin":"Obteniendo tu ubicacin GPS..."})]}):v.jsxs("div",{className:"orders-view-empty",children:[v.jsx(vr,{className:"orders-view-empty-icon"}),v.jsx("p",{className:"orders-view-empty-title",children:"Conctate para ver pedidos"}),v.jsx("p",{className:"orders-view-empty-text",children:'Activa el botn "Conectado" en la parte superior para activar tu ubicacin GPS y ver pedidos disponibles'})]})})]})]})}function Ik({orders:t,onSelectOrder:e,onUpdateStatus:n,selectedOrder:s,onCloseOrder:o}){const[l,u]=V.useState(null),[d,h]=V.useState(!1),p=t.length>0?t[0]:null,g=p?Ja(p):null,y=p?.status==="Asignado",w=p?.status==="En camino";V.useEffect(()=>{if(p&&p.status==="Asignado"){const P=setInterval(()=>{const L=new Date,I=new Date(p.updatedAt),U=Math.floor((L.getTime()-I.getTime())/1e3),z=Math.max(0,60-U);u(z)},1e3);return()=>clearInterval(P)}else u(null)},[p]);const _=P=>{if(P==null)return"0:00";const L=Math.floor(P/60),I=P%60;return`${L}:${I.toString().padStart(2,"0")}`},E=P=>{const L=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(P)}`;window.open(L,"_blank")},C=P=>{P&&(window.location.href=`tel:${P}`)},S=()=>{if(!n||!p)return;const P=qs(p,"En camino");if(!P.ok){qe.error(P.reason);return}n(p.id,"En camino"),qe.success("En camino!",{description:"El cliente ha sido notificado",duration:3e3})},T=()=>{if(!n||!g||!p){qe.error("No se puede retirar el producto en este momento");return}const P=qs(p,g.toStatus);if(!P.ok){qe.error(P.reason);return}if(g.requiresPickupCode){h(!0);return}n(p.id,g.toStatus)},N=P=>{if(!p||!n)return!1;const L=String(p.pickupCode??"").replace(/\D/g,"").padStart(6,"0");if(String(P??"").replace(/\D/g,"").padStart(6,"0")!==L)return!1;const U=Ja(p);return U?(n(p.id,U.toStatus),h(!1),qa({particleCount:150,spread:100,origin:{y:.5},colors:["#10b981","#059669","#34d399"]}),qe.success("Producto Retirado!",{description:"Puedes continuar con la entrega",duration:3e3}),!0):!1};return p?v.jsxs("div",{className:"my-orders-view-container",children:[v.jsxs("div",{className:"my-orders-view-header",children:[v.jsx("h1",{className:"my-orders-view-title",children:"Mi Pedido Activo"}),v.jsx("p",{className:"my-orders-view-subtitle",children:"Sigue el progreso de tu entrega"})]}),v.jsxs(Ne.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"my-orders-view-active-order-card",children:[l!==null&&v.jsxs("div",{className:"my-orders-view-timer-container",children:[v.jsx(Hs,{className:"my-orders-view-timer-icon"}),v.jsx("span",{className:"my-orders-view-timer-text",children:"Tiempo restante:"}),v.jsx(Ne.span,{className:`my-orders-view-timer-value ${l<300?"my-orders-view-timer-value-warning":""}`,animate:{scale:l<300?[1,1.1,1]:1},transition:{repeat:l<300?1/0:0,duration:1},children:_(l)})]}),v.jsxs("div",{className:"my-orders-view-active-order-header",children:[v.jsxs("div",{children:[v.jsx("span",{className:"my-orders-view-active-order-badge",children:"En Curso"}),v.jsx("h3",{className:"my-orders-view-active-order-title",children:p.local||p.id})]}),v.jsxs("span",{className:"my-orders-view-active-order-payment",children:["$",ey(p.suggestedPrice)]})]}),v.jsxs("div",{className:"my-orders-view-active-order-progress",children:[v.jsxs("div",{className:"my-orders-view-progress-step",children:[v.jsx("div",{className:"my-orders-view-progress-dot my-orders-view-progress-dot-complete"}),v.jsx("span",{className:"my-orders-view-progress-label",children:"Recogido"})]}),v.jsx("div",{className:"my-orders-view-progress-line"}),v.jsxs("div",{className:"my-orders-view-progress-step",children:[v.jsx("div",{className:"my-orders-view-progress-dot my-orders-view-progress-dot-active"}),v.jsx("span",{className:"my-orders-view-progress-label",children:"En camino"})]}),v.jsx("div",{className:"my-orders-view-progress-line"}),v.jsxs("div",{className:"my-orders-view-progress-step",children:[v.jsx("div",{className:"my-orders-view-progress-dot"}),v.jsx("span",{className:"my-orders-view-progress-label",children:"Entregado"})]})]}),v.jsx("div",{className:"my-orders-view-section-title",children:"Informacin del Cliente"}),v.jsxs("div",{className:"my-orders-view-active-order-details",children:[v.jsxs("div",{className:"my-orders-view-order-detail",children:[v.jsx(Fn,{className:"my-orders-view-order-icon"}),v.jsx("span",{children:p.clientName||"Cliente"})]}),v.jsxs("div",{className:"my-orders-view-location-wrapper",children:[v.jsxs("div",{className:"my-orders-view-order-detail",children:[v.jsx(vr,{className:"my-orders-view-order-icon"}),v.jsx("span",{children:p.deliveryAddress})]}),v.jsx(Ne.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>E(p.deliveryAddress),className:"my-orders-view-map-button",children:v.jsx(Yv,{className:"my-orders-view-map-icon"})})]}),p.clientPhone&&v.jsxs("div",{className:"my-orders-view-order-detail",children:[v.jsx(Ga,{className:"my-orders-view-order-icon"}),v.jsx("span",{children:p.clientPhone})]})]}),v.jsxs("div",{className:"my-orders-view-active-order-actions",children:[v.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>E(p.deliveryAddress),className:"my-orders-view-navigation-button",children:[v.jsx(Ka,{style:{width:"1.25rem",height:"1.25rem"}}),"Navegar"]}),p.clientPhone&&v.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>C(p.clientPhone),className:"my-orders-view-call-button",children:[v.jsx(Ga,{style:{width:"1.25rem",height:"1.25rem"}}),"Llamar"]})]}),y?v.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:S,className:"my-orders-view-en-camino-button",children:[v.jsx(Ka,{style:{width:"1.25rem",height:"1.25rem"}}),"Voy en Camino"]}):w?v.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,className:"my-orders-view-retire-button",children:[v.jsx(Ri,{style:{width:"1.25rem",height:"1.25rem"}}),"Retirar Producto"]}):p?.status==="Producto retirado"?v.jsx(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n&&p&&(n(p.id,"Entregado"),qa({particleCount:200,spread:120,origin:{y:.5},colors:["#10b981","#059669","#34d399"]}),qe.success("Pedido Entregado!",{description:"Gracias por tu trabajo",duration:3e3}))},className:"my-orders-view-complete-button",children:"Entregar Pedido"}):null]}),d&&p&&v.jsx(ny,{onClose:()=>h(!1),onConfirm:N,orderId:p.id}),v.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"my-orders-view-info-card",children:v.jsxs("p",{className:"my-orders-view-info-text",children:[" ",v.jsx("strong",{children:"Consejo:"})," Verifica el cdigo de entrega con el cliente antes de marcar como completado."]})})]}):v.jsxs("div",{className:"my-orders-view-container",children:[v.jsxs("div",{className:"my-orders-view-header",children:[v.jsx("h1",{className:"my-orders-view-title",children:"Mi Pedido Activo"}),v.jsx("p",{className:"my-orders-view-subtitle",children:"Sigue el progreso de tu entrega"})]}),v.jsxs("div",{className:"my-orders-view-empty",children:[v.jsx(Ri,{className:"my-orders-view-empty-icon"}),v.jsx("p",{className:"my-orders-view-empty-title",children:"No tienes pedidos activos"}),v.jsx("p",{className:"my-orders-view-empty-text",children:'Acepta pedidos de la pestaa "Disponibles"'})]})]})}function Dk({activeTab:t,onTabChange:e,availableOrdersCount:n}){const s=[{id:"home",icon:pk,label:"Inicio"},{id:"orders",icon:Ri,label:"Pedidos",badge:n>0?n:null},{id:"myOrders",icon:vr,label:"Activos"},{id:"wallet",icon:Xv,label:"Ganancias"},{id:"profile",icon:Fn,label:"Perfil"}];return v.jsx("nav",{className:"bottom-navigation",children:v.jsx("div",{className:"bottom-navigation-content",children:s.map(o=>{const l=o.icon,u=t===o.id;return v.jsxs(Ne.button,{onClick:()=>e(o.id),whileTap:{scale:.95},className:`bottom-nav-button ${u?"bottom-nav-active":""}`,children:[v.jsxs("div",{className:"bottom-nav-icon-wrapper",children:[v.jsx(l,{className:"bottom-nav-icon",style:{color:u?"#2b73ee":"#94a3b8"}}),u&&v.jsx(Ne.div,{layoutId:"activeIndicator",className:"bottom-nav-active-indicator",transition:{type:"spring",stiffness:500,damping:35}}),o.badge&&o.badge>0&&v.jsx(Ne.div,{initial:{scale:0},animate:{scale:1},className:"bottom-nav-badge badge-pulse",children:o.badge})]}),v.jsx("span",{className:"bottom-nav-label",style:{color:u?"#2b73ee":"#94a3b8",fontWeight:u?600:500},children:o.label})]},o.id)})})})}function Mk({isConnected:t,onToggleConnection:e,driverName:n,hasActiveOrders:s}){const o=()=>{if(t&&s){qe.error("No puedes desconectarte mientras tienes pedidos activos",{duration:3e3});return}e()};return v.jsx("header",{className:"driver-header",children:v.jsxs("div",{className:"driver-header-content",children:[v.jsx("div",{className:"driver-header-left",children:v.jsx("h1",{className:"driver-header-title",children:n||"Repartidor"})}),v.jsx(Ne.button,{onClick:o,className:`driver-header-connection-wrapper ${t&&s?"driver-header-connection-locked":""}`,whileTap:{scale:.95},whileHover:t&&s?{}:{scale:1.02},title:t&&s?"No puedes desconectarte con pedidos activos":"",children:t?v.jsxs("div",{className:"driver-header-status-connected",children:[v.jsx("div",{className:"driver-header-radar-pulse",style:{animationDelay:"0s"}}),v.jsx("div",{className:"driver-header-radar-pulse",style:{animationDelay:"0.6s"}}),v.jsx("div",{className:"driver-header-radar-pulse",style:{animationDelay:"1.2s"}}),v.jsx("div",{className:"driver-header-icon-wrapper driver-header-icon-glow",children:v.jsx(P0,{className:"driver-header-zap-icon"})}),v.jsx("span",{className:"driver-header-status-text",children:"En lnea"}),v.jsx("div",{className:"driver-header-status-dot"})]}):v.jsxs("div",{className:"driver-header-status-disconnected",children:[v.jsx("div",{className:"driver-header-icon-wrapper-offline",children:v.jsx(P0,{className:"driver-header-zap-icon"})}),v.jsx("span",{className:"driver-header-status-text",children:"Desconectado"})]})})]})})}var Rr={},ba={},od=function(t,e){return od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},od(t,e)};function ay(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");od(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ya=function(){return Ya=Object.assign||function(e){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Ya.apply(this,arguments)};function Li(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function ly(t,e,n,s){var o=arguments.length,l=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,n,s);else for(var d=t.length-1;d>=0;d--)(u=t[d])&&(l=(o<3?u(l):o>3?u(e,n,l):u(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l}function uy(t,e){return function(n,s){e(n,s,t)}}function cy(t,e,n,s,o,l){function u(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var d=s.kind,h=d==="getter"?"get":d==="setter"?"set":"value",p=!e&&t?s.static?t:t.prototype:null,g=e||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),y,w=!1,_=n.length-1;_>=0;_--){var E={};for(var C in s)E[C]=C==="access"?{}:s[C];for(var C in s.access)E.access[C]=s.access[C];E.addInitializer=function(T){if(w)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(T||null))};var S=(0,n[_])(d==="accessor"?{get:g.get,set:g.set}:g[h],E);if(d==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(y=u(S.get))&&(g.get=y),(y=u(S.set))&&(g.set=y),(y=u(S.init))&&o.unshift(y)}else(y=u(S))&&(d==="field"?o.unshift(y):g[h]=y)}p&&Object.defineProperty(p,s.name,g),w=!0}function dy(t,e,n){for(var s=arguments.length>2,o=0;o<e.length;o++)n=s?e[o].call(t,n):e[o].call(t);return s?n:void 0}function hy(t){return typeof t=="symbol"?t:"".concat(t)}function fy(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function py(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ie(t,e,n,s){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(g){try{p(s.next(g))}catch(y){u(y)}}function h(g){try{p(s.throw(g))}catch(y){u(y)}}function p(g){g.done?l(g.value):o(g.value).then(d,h)}p((s=s.apply(t,e||[])).next())})}function my(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(p){return function(g){return h([p,g])}}function h(p){if(s)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(s=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(g){p=[6,g],o=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var dl=Object.create?(function(t,e,n,s){s===void 0&&(s=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,s,o)}):(function(t,e,n,s){s===void 0&&(s=n),t[s]=e[n]});function gy(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&dl(e,t,n)}function Qa(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uh(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,l=[],u;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)l.push(o.value)}catch(d){u={error:d}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(u)throw u.error}}return l}function vy(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(uh(arguments[e]));return t}function yy(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),o=0,e=0;e<n;e++)for(var l=arguments[e],u=0,d=l.length;u<d;u++,o++)s[o]=l[u];return s}function wy(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,l;s<o;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}function Ni(t){return this instanceof Ni?(this.v=t,this):new Ni(t)}function xy(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(_){return function(E){return Promise.resolve(E).then(_,y)}}function d(_,E){s[_]&&(o[_]=function(C){return new Promise(function(S,T){l.push([_,C,S,T])>1||h(_,C)})},E&&(o[_]=E(o[_])))}function h(_,E){try{p(s[_](E))}catch(C){w(l[0][3],C)}}function p(_){_.value instanceof Ni?Promise.resolve(_.value.v).then(g,y):w(l[0][2],_)}function g(_){h("next",_)}function y(_){h("throw",_)}function w(_,E){_(E),l.shift(),l.length&&h(l[0][0],l[0][1])}}function by(t){var e,n;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,l){e[o]=t[o]?function(u){return(n=!n)?{value:Ni(t[o](u)),done:!1}:l?l(u):u}:l}}function _y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Qa=="function"?Qa(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(u){return new Promise(function(d,h){u=t[l](u),o(d,h,u.done,u.value)})}}function o(l,u,d,h){Promise.resolve(h).then(function(p){l({value:p,done:d})},u)}}function Ey(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Lk=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},ad=function(t){return ad=Object.getOwnPropertyNames||function(e){var n=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[n.length]=s);return n},ad(t)};function Sy(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=ad(t),s=0;s<n.length;s++)n[s]!=="default"&&dl(e,t,n[s]);return Lk(e,t),e}function ky(t){return t&&t.__esModule?t:{default:t}}function Ty(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function Cy(t,e,n,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n}function Py(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function jy(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],n&&(o=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");o&&(s=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:s,async:n})}else n&&t.stack.push({async:!0});return e}var $k=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var s=new Error(n);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function Ay(t){function e(l){t.error=t.hasError?new $k(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var n,s=0;function o(){for(;n=t.stack.pop();)try{if(!n.async&&s===1)return s=0,t.stack.push(n),Promise.resolve().then(o);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return s|=2,Promise.resolve(l).then(o,function(u){return e(u),o()})}else s|=1}catch(u){e(u)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return o()}function Ry(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,s,o,l,u){return s?e?".jsx":".js":o&&(!l||!u)?n:o+l+"."+u.toLowerCase()+"js"}):t}const Uk={__extends:ay,__assign:Ya,__rest:Li,__decorate:ly,__param:uy,__esDecorate:cy,__runInitializers:dy,__propKey:hy,__setFunctionName:fy,__metadata:py,__awaiter:ie,__generator:my,__createBinding:dl,__exportStar:gy,__values:Qa,__read:uh,__spread:vy,__spreadArrays:yy,__spreadArray:wy,__await:Ni,__asyncGenerator:xy,__asyncDelegator:by,__asyncValues:_y,__makeTemplateObject:Ey,__importStar:Sy,__importDefault:ky,__classPrivateFieldGet:Ty,__classPrivateFieldSet:Cy,__classPrivateFieldIn:Py,__addDisposableResource:jy,__disposeResources:Ay,__rewriteRelativeImportExtension:Ry},Vk=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:jy,get __assign(){return Ya},__asyncDelegator:by,__asyncGenerator:xy,__asyncValues:_y,__await:Ni,__awaiter:ie,__classPrivateFieldGet:Ty,__classPrivateFieldIn:Py,__classPrivateFieldSet:Cy,__createBinding:dl,__decorate:ly,__disposeResources:Ay,__esDecorate:cy,__exportStar:gy,__extends:ay,__generator:my,__importDefault:ky,__importStar:Sy,__makeTemplateObject:Ey,__metadata:py,__param:uy,__propKey:hy,__read:uh,__rest:Li,__rewriteRelativeImportExtension:Ry,__runInitializers:dy,__setFunctionName:fy,__spread:vy,__spreadArray:wy,__spreadArrays:yy,__values:Qa,default:Uk},Symbol.toStringTag,{value:"Module"})),Fk=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let hl=class extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}},Ny=class extends hl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},ld=class extends hl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},ud=class extends hl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Xa;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Xa||(Xa={}));class Bk{constructor(e,{headers:n={},customFetch:s,region:o=Xa.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=Fk(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ie(this,arguments,void 0,function*(n,s={}){var o;let l,u;try{const{headers:d,method:h,body:p,signal:g,timeout:y}=s;let w={},{region:_}=s;_||(_=this.region);const E=new URL(`${this.url}/${n}`);_&&_!=="any"&&(w["x-region"]=_,E.searchParams.set("forceFunctionRegion",_));let C;p&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",C=p):typeof p=="string"?(w["Content-Type"]="text/plain",C=p):typeof FormData<"u"&&p instanceof FormData?C=p:(w["Content-Type"]="application/json",C=JSON.stringify(p)):C=p;let S=g;y&&(u=new AbortController,l=setTimeout(()=>u.abort(),y),g?(S=u.signal,g.addEventListener("abort",()=>u.abort())):S=u.signal);const T=yield this.fetch(E.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),d),body:C,signal:S}).catch(I=>{throw new Ny(I)}),N=T.headers.get("x-relay-error");if(N&&N==="true")throw new ld(T);if(!T.ok)throw new ud(T);let P=((o=T.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),L;return P==="application/json"?L=yield T.json():P==="application/octet-stream"||P==="application/pdf"?L=yield T.blob():P==="text/event-stream"?L=T:P==="multipart/form-data"?L=yield T.formData():L=yield T.text(),{data:L,error:null,response:T}}catch(d){return{data:null,error:d,response:d instanceof ud||d instanceof ld?d.context:void 0}}finally{l&&clearTimeout(l)}})}}const zk=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Xa},FunctionsClient:Bk,FunctionsError:hl,FunctionsFetchError:Ny,FunctionsHttpError:ud,FunctionsRelayError:ld},Symbol.toStringTag,{value:"Module"})),Oy=Qs(zk);var wt={};const $i=Qs(Vk);var _a={},Ea={},Sa={},ka={},Ta={},Ca={},A0;function Iy(){if(A0)return Ca;A0=1,Object.defineProperty(Ca,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ca.default=t,Ca}var R0;function Dy(){if(R0)return Ta;R0=1,Object.defineProperty(Ta,"__esModule",{value:!0});const e=$i.__importDefault(Iy());let n=class{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var p,g,y,w;let _=null,E=null,C=null,S=h.status,T=h.statusText;if(h.ok){if(this.method!=="HEAD"){const I=await h.text();I===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?E=I:E=JSON.parse(I))}const P=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),L=(y=h.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");P&&L&&L.length>1&&(C=parseInt(L[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(_={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,C=null,S=406,T="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const P=await h.text();try{_=JSON.parse(P),Array.isArray(_)&&h.status===404&&(E=[],_=null,S=200,T="OK")}catch{h.status===404&&P===""?(S=204,T="No Content"):_={message:P}}if(_&&this.isMaybeSingle&&(!((w=_?.details)===null||w===void 0)&&w.includes("0 rows"))&&(_=null,S=200,T="OK"),_&&this.shouldThrowOnError)throw new e.default(_)}return{error:_,data:E,count:C,status:S,statusText:T}});return this.shouldThrowOnError||(d=d.catch(h=>{var p,g,y,w,_,E;let C="";const S=h?.cause;if(S){const T=(p=S?.message)!==null&&p!==void 0?p:"",N=(g=S?.code)!==null&&g!==void 0?g:"";C=`${(y=h?.name)!==null&&y!==void 0?y:"FetchError"}: ${h?.message}`,C+=`

Caused by: ${(w=S?.name)!==null&&w!==void 0?w:"Error"}: ${T}`,N&&(C+=` (${N})`),S?.stack&&(C+=`
${S.stack}`)}else C=(_=h?.stack)!==null&&_!==void 0?_:"";return{error:{message:`${(E=h?.name)!==null&&E!==void 0?E:"FetchError"}: ${h?.message}`,details:C,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(o,l)}returns(){return this}overrideTypes(){return this}};return Ta.default=n,Ta}var N0;function My(){if(N0)return ka;N0=1,Object.defineProperty(ka,"__esModule",{value:!0});const e=$i.__importDefault(Dy());let n=class extends e.default{select(o){let l=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:d,referencedTable:h=d}={}){const p=h?`${h}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:d=u}={}){const h=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(p,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:d=!1,wal:h=!1,format:p="text"}={}){var g;const y=[o?"analyze":null,l?"verbose":null,u?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),w=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${w}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}};return ka.default=n,ka}var O0;function ch(){if(O0)return Sa;O0=1,Object.defineProperty(Sa,"__esModule",{value:!0});const e=$i.__importDefault(My()),n=new RegExp("[,()]");let s=class extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const d=Array.from(new Set(u)).map(h=>typeof h=="string"&&n.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:d,type:h}={}){let p="";h==="plain"?p="pl":h==="phrase"?p="ph":h==="websearch"&&(p="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${p}fts${g}.${u}`),this}match(l){return Object.entries(l).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(l,u,d){return this.url.searchParams.append(l,`not.${u}.${d}`),this}or(l,{foreignTable:u,referencedTable:d=u}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,u,d){return this.url.searchParams.append(l,`${u}.${d}`),this}};return Sa.default=s,Sa}var I0;function Ly(){if(I0)return Ea;I0=1,Object.defineProperty(Ea,"__esModule",{value:!0});const e=$i.__importDefault(ch());let n=class{constructor(o,{headers:l={},schema:u,fetch:d}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=d}select(o,l){const{head:u=!1,count:d}=l??{},h=u?"HEAD":"GET";let p=!1;const g=(o??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var d;const h="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:d,defaultToNull:h=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const y=o.reduce((w,_)=>w.concat(Object.keys(_)),[]);if(y.length>0){const w=[...new Set(y)].map(_=>`"${_}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:l}={}){var u;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};return Ea.default=n,Ea}var D0;function Wk(){if(D0)return _a;D0=1,Object.defineProperty(_a,"__esModule",{value:!0});const t=$i,e=t.__importDefault(Ly()),n=t.__importDefault(ch());let s=class $y{constructor(l,{headers:u={},schema:d,fetch:h}={}){this.url=l,this.headers=new Headers(u),this.schemaName=d,this.fetch=h}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new $y(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:h=!1,count:p}={}){var g;let y;const w=new URL(`${this.url}/rpc/${l}`);let _;d||h?(y=d?"HEAD":"GET",Object.entries(u).filter(([C,S])=>S!==void 0).map(([C,S])=>[C,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([C,S])=>{w.searchParams.append(C,S)})):(y="POST",_=u);const E=new Headers(this.headers);return p&&E.set("Prefer",`count=${p}`),new n.default({method:y,url:w,headers:E,schema:this.schemaName,body:_,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};return _a.default=s,_a}var M0;function Uy(){if(M0)return wt;M0=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.PostgrestError=wt.PostgrestBuilder=wt.PostgrestTransformBuilder=wt.PostgrestFilterBuilder=wt.PostgrestQueryBuilder=wt.PostgrestClient=void 0;const t=$i,e=t.__importDefault(Wk());wt.PostgrestClient=e.default;const n=t.__importDefault(Ly());wt.PostgrestQueryBuilder=n.default;const s=t.__importDefault(ch());wt.PostgrestFilterBuilder=s.default;const o=t.__importDefault(My());wt.PostgrestTransformBuilder=o.default;const l=t.__importDefault(Dy());wt.PostgrestBuilder=l.default;const u=t.__importDefault(Iy());return wt.PostgrestError=u.default,wt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},wt}class Vy{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Hk="2.87.1",qk=`realtime-js/${Hk}`,Fy="1.0.0",Kk="2.0.0",L0=Fy,cd=1e4,Gk=1e3,Jk=100;var In;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(In||(In={}));var Qe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Qe||(Qe={}));var ur;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ur||(ur={}));var dd;(function(t){t.websocket="websocket"})(dd||(dd={}));var Dn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Dn||(Dn={}));class Yk{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,s;const o=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var n,s;const o=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,s){var o,l;const u=e.topic,d=(o=e.ref)!==null&&o!==void 0?o:"",h=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+u.length+p.length+y.length,_=new ArrayBuffer(this.HEADER_LENGTH+w);let E=new DataView(_),C=0;E.setUint8(C++,this.KINDS.userBroadcastPush),E.setUint8(C++,h.length),E.setUint8(C++,d.length),E.setUint8(C++,u.length),E.setUint8(C++,p.length),E.setUint8(C++,y.length),E.setUint8(C++,n),Array.from(h,T=>E.setUint8(C++,T.charCodeAt(0))),Array.from(d,T=>E.setUint8(C++,T.charCodeAt(0))),Array.from(u,T=>E.setUint8(C++,T.charCodeAt(0))),Array.from(p,T=>E.setUint8(C++,T.charCodeAt(0))),Array.from(y,T=>E.setUint8(C++,T.charCodeAt(0)));var S=new Uint8Array(_.byteLength+s.byteLength);return S.set(new Uint8Array(_),0),S.set(new Uint8Array(s),_.byteLength),S.buffer}decode(e,n){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return n(s)}if(typeof e=="string"){const s=JSON.parse(e),[o,l,u,d,h]=s;return n({join_ref:o,ref:l,topic:u,event:d,payload:h})}return n({})}_binaryDecode(e){const n=new DataView(e),s=n.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,o)}}_decodeUserBroadcast(e,n,s){const o=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),d=n.getUint8(4);let h=this.HEADER_LENGTH+4;const p=s.decode(e.slice(h,h+o));h=h+o;const g=s.decode(e.slice(h,h+l));h=h+l;const y=s.decode(e.slice(h,h+u));h=h+u;const w=e.slice(h,e.byteLength),_=d===this.JSON_ENCODING?JSON.parse(s.decode(w)):w,E={type:this.BROADCAST_EVENT,event:g,payload:_};return u>0&&(E.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>n.includes(s)))}}class By{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Re;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Re||(Re={}));const $0=(t,e,n={})=>{var s;const o=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=Qk(u,t,e,o),l),{}):{}},Qk=(t,e,n,s)=>{const o=e.find(d=>d.name===t),l=o?.type,u=n[t];return l&&!s.includes(l)?zy(l,u):hd(u)},zy=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return tT(e,n)}switch(t){case Re.bool:return Xk(e);case Re.float4:case Re.float8:case Re.int2:case Re.int4:case Re.int8:case Re.numeric:case Re.oid:return Zk(e);case Re.json:case Re.jsonb:return eT(e);case Re.timestamp:return rT(e);case Re.abstime:case Re.date:case Re.daterange:case Re.int4range:case Re.int8range:case Re.money:case Re.reltime:case Re.text:case Re.time:case Re.timestamptz:case Re.timetz:case Re.tsrange:case Re.tstzrange:return hd(e);default:return hd(e)}},hd=t=>t,Xk=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Zk=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},eT=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},tT=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const u=t.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>zy(e,d))}return t},rT=t=>typeof t=="string"?t.replace(" ","T"):t,Wy=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Tc{constructor(e,n,s={},o=cd){this.channel=e,this.event=n,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(fd||(fd={}));let Hy=class Da{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Da.syncState(this.state,o,l,u),this.pendingDiffs.forEach(h=>{this.state=Da.syncDiff(this.state,h,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Da.syncDiff(this.state,o,l,u),d())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,o){const l=this.cloneDeep(e),u=this.transformState(n),d={},h={};return this.map(l,(p,g)=>{u[p]||(h[p]=g)}),this.map(u,(p,g)=>{const y=l[p];if(y){const w=g.map(S=>S.presence_ref),_=y.map(S=>S.presence_ref),E=g.filter(S=>_.indexOf(S.presence_ref)<0),C=y.filter(S=>w.indexOf(S.presence_ref)<0);E.length>0&&(d[p]=E),C.length>0&&(h[p]=C)}else d[p]=g}),this.syncDiff(l,{joins:d,leaves:h},s,o)}static syncDiff(e,n,s,o){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(l,(d,h)=>{var p;const g=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(h),g.length>0){const y=e[d].map(_=>_.presence_ref),w=g.filter(_=>y.indexOf(_.presence_ref)<0);e[d].unshift(...w)}s(d,g,h)}),this.map(u,(d,h)=>{let p=e[d];if(!p)return;const g=h.map(y=>y.presence_ref);p=p.filter(y=>g.indexOf(y.presence_ref)<0),e[d]=p,o(d,p,h),p.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const o=e[s];return"metas"in o?n[s]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var pd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(pd||(pd={}));var Ci;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ci||(Ci={}));var gr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(gr||(gr={}));const nT=Qe;let qy=class Ns{constructor(e,n={config:{}},s){var o,l;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Tc(this,ur.join,this.params,this.timeout),this.rejoinTimer=new By(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qe.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ur.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Hy(this),this.broadcastEndpointURL=Wy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Qe.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(_=>_.filter))!==null&&o!==void 0?o:[],g=!!this.bindings[Ci.PRESENCE]&&this.bindings[Ci.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,y={},w={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(_=>e?.(gr.CHANNEL_ERROR,_)),this._onClose(()=>e?.(gr.CLOSED)),this.updateJoinPayload(Object.assign({config:w},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){e?.(gr.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,S=(E=C?.length)!==null&&E!==void 0?E:0,T=[];for(let N=0;N<S;N++){const P=C[N],{filter:{event:L,schema:I,table:U,filter:z}}=P,F=_&&_[N];if(F&&F.event===L&&Ns.isFilterValueEqual(F.schema,I)&&Ns.isFilterValueEqual(F.table,U)&&Ns.isFilterValueEqual(F.filter,z))T.push(Object.assign(Object.assign({},P),{id:F.id}));else{this.unsubscribe(),this.state=Qe.errored,e?.(gr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(gr.SUBSCRIBED);return}}).receive("error",_=>{this.state=Qe.errored,e?.(gr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e?.(gr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===Qe.joined&&e===Ci.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const p=await d.json();h=p.error||p.message||h}catch{}return Promise.reject(new Error(h))}async send(e,n={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,h;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Qe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ur.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Tc(this,ur.leave,{},e),s.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qe.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const o=new AbortController,l=setTimeout(()=>o.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),u}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Tc(this,e,n,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Jk){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var o,l;const u=e.toLocaleLowerCase(),{close:d,error:h,leave:p,join:g}=ur;if(s&&[d,h,p,g].indexOf(u)>=0&&s!==this._joinRef())return;let w=this._onMessage(u,n,s);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(_=>{var E,C,S;return((E=_.filter)===null||E===void 0?void 0:E.event)==="*"||((S=(C=_.filter)===null||C===void 0?void 0:C.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===u}).map(_=>_.callback(w,s)):(l=this.bindings[u])===null||l===void 0||l.filter(_=>{var E,C,S,T,N,P;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in _){const L=_.id,I=(E=_.filter)===null||E===void 0?void 0:E.event;return L&&((C=n.ids)===null||C===void 0?void 0:C.includes(L))&&(I==="*"||I?.toLocaleLowerCase()===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const L=(N=(T=_?.filter)===null||T===void 0?void 0:T.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return L==="*"||L===((P=n?.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===u}).map(_=>{if(typeof w=="object"&&"ids"in w){const E=w.data,{schema:C,table:S,commit_timestamp:T,type:N,errors:P}=E;w=Object.assign(Object.assign({},{schema:C,table:S,commit_timestamp:T,eventType:N,new:{},old:{},errors:P}),this._getPayloadRecords(E))}_.callback(w,s)})}_isClosed(){return this.state===Qe.closed}_isJoined(){return this.state===Qe.joined}_isJoining(){return this.state===Qe.joining}_isLeaving(){return this.state===Qe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const o=e.toLocaleLowerCase(),l={type:o,filter:n,callback:s};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Ns.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ur.close,{},e)}_onError(e){this._on(ur.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=$0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=$0(e.columns,e.old_record)),n}};const Cc=()=>{},Pa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},iT=[1e3,2e3,5e3,1e4],sT=1e4,oT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let aT=class{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cd,this.transport=null,this.heartbeatIntervalMs=Pa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cc,this.ref=0,this.reconnectTimer=null,this.vsn=L0,this.logger=Cc,this.conn=null,this.sendBuffer=[],this.serializer=new Yk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((s=n?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${dd.websocket}`,this.httpEndpoint=Wy(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Vy.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case In.connecting:return Dn.Connecting;case In.open:return Dn.Open;case In.closing:return Dn.Closing;default:return Dn.Closed}}isConnected(){return this.connectionState()===Dn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===s);if(o)return o;{const l=new qy(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:o,ref:l}=e,u=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${s} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Gk,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Pa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:l,ref:u}=n,d=u?`(${u})`:"",h=l.status||"";this.log("receive",`${h} ${s} ${o} ${d}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===In.open||this.conn.readyState===In.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ur.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${s}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([oT],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,s=!1;if(e)n=e,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const l={access_token:n,version:qk};n&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(ur.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new By(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,o,l,u,d,h,p,g,y,w,_;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:cd,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:Pa.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Cc,this.vsn=(h=e?.vsn)!==null&&h!==void 0?h:L0,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e?.reconnectAfterMs)!==null&&p!==void 0?p:(E=>iT[E-1]||sT),this.vsn){case Fy:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((E,C)=>C(JSON.stringify(E))),this.decode=(y=e?.decode)!==null&&y!==void 0?y:((E,C)=>C(JSON.parse(E)));break;case Kk:this.encode=(w=e?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(_=e?.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};const lT=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:nT,get REALTIME_LISTEN_TYPES(){return Ci},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return pd},get REALTIME_PRESENCE_LISTEN_EVENTS(){return fd},get REALTIME_SUBSCRIBE_STATES(){return gr},RealtimeChannel:qy,RealtimeClient:aT,RealtimePresence:Hy,WebSocketFactory:Vy},Symbol.toStringTag,{value:"Module"})),Ky=Qs(lT);class no extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Le(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Gy extends no{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Za extends no{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const dh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uT=()=>Response,md=t=>{if(Array.isArray(t))return t.map(n=>md(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=md(s)}),e},cT=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},dT=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Pc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},hT=(t,e,n)=>ie(void 0,void 0,void 0,function*(){const s=yield uT();t instanceof s&&!n?.noResolveJson?t.json().then(o=>{const l=t.status||500,u=o?.statusCode||l+"";e(new Gy(Pc(o),l,u))}).catch(o=>{e(new Za(Pc(o),o))}):e(new Za(Pc(t),t))}),fT=(t,e,n,s)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"||!s?o:(cT(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(s)):o.body=s,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function io(t,e,n,s,o,l){return ie(this,void 0,void 0,function*(){return new Promise((u,d)=>{t(n,fT(e,s,o,l)).then(h=>{if(!h.ok)throw h;return s?.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>hT(h,d,s))})})}function Ks(t,e,n,s){return ie(this,void 0,void 0,function*(){return io(t,"GET",e,n,s)})}function lr(t,e,n,s,o){return ie(this,void 0,void 0,function*(){return io(t,"POST",e,s,o,n)})}function gd(t,e,n,s,o){return ie(this,void 0,void 0,function*(){return io(t,"PUT",e,s,o,n)})}function pT(t,e,n,s){return ie(this,void 0,void 0,function*(){return io(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function hh(t,e,n,s,o){return ie(this,void 0,void 0,function*(){return io(t,"DELETE",e,s,o,n)})}class mT{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ie(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}}var Jy;class gT{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Jy]="BlobDownloadBuilder",this.promise=null}asStream(){return new mT(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ie(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}}Jy=Symbol.toStringTag;const vT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},U0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yT{constructor(e,n={},s,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=s,this.fetch=dh(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,s,o){return ie(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},U0),o);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),h&&l.append("metadata",this.encodeMetadata(h)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),h&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(h))):(l=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o?.headers&&(d=Object.assign(Object.assign({},d),o.headers));const p=this._removeEmptyFolders(n),g=this._getFinalPath(p),y=yield(e=="PUT"?gd:lr)(this.fetch,`${this.url}/object/${g}`,l,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Le(l))return{data:null,error:l};throw l}})}upload(e,n,s){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,o){return ie(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",n);try{let h;const p=Object.assign({upsert:U0.upsert},o),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",p.cacheControl)):(h=s,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const y=yield gd(this.fetch,d.toString(),h,{headers:g});return{data:{path:l,fullPath:y.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Le(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return ie(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const l=yield lr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),u=new URL(this.url+l.url),d=u.searchParams.get("token");if(!d)throw new no("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}update(e,n,s){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return ie(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}})}copy(e,n,s){return ie(this,void 0,void 0,function*(){try{return{data:{path:(yield lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,s){return ie(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield lr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,s){return ie(this,void 0,void 0,function*(){try{const o=yield lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}})}download(e,n){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),u=l?`?${l}`:"",d=this._getFinalPath(e),h=()=>Ks(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new gT(h,this.shouldThrowOnError)}info(e){return ie(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Ks(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:md(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}exists(e){return ie(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield pT(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s)&&s instanceof Za){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),o=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const d=typeof n?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(n?.transform||{});h!==""&&o.push(h);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${p}`)}}}remove(e){return ie(this,void 0,void 0,function*(){try{return{data:yield hh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}list(e,n,s){return ie(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},vT),n),{prefix:e||""});return{data:yield lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}})}listV2(e,n){return ie(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield lr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Yy="2.87.1",Qy={"X-Client-Info":`storage-js/${Yy}`};class wT{constructor(e,n={},s,o){this.shouldThrowOnError=!1;const l=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qy),n),this.fetch=dh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ie(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Ks(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}getBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}createBucket(e){return ie(this,arguments,void 0,function*(n,s={public:!1}){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Le(o))return{data:null,error:o};throw o}})}updateBucket(e,n){return ie(this,void 0,void 0,function*(){try{return{data:yield gd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield hh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Gs=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function xT(t,e,n){const s=new URL(e,t);if(n)for(const[o,l]of Object.entries(n))l!==void 0&&s.searchParams.set(o,l);return s.toString()}async function bT(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function _T(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:o,body:l,headers:u}){const d=xT(t.baseUrl,s,o),h=await bT(t.auth),p=await e(d,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...h,...u},body:l?JSON.stringify(l):void 0}),g=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),w=y&&g?JSON.parse(g):g;if(!p.ok){const _=y?w:void 0,E=_?.error;throw new Gs(E?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:E?.type,icebergCode:E?.code,details:_})}return{status:p.status,headers:p.headers,data:w}}}}function ja(t){return t.join("")}var ET=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ja(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ja(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ja(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ja(t.namespace)}`}),!0}catch(e){if(e instanceof Gs&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Gs&&n.status===409)return;throw n}}};function fi(t){return t.join("")}var ST=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fi(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fi(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fi(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fi(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fi(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fi(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Gs&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Gs&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},kT=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=_T({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new ET(this.client,e),this.tableOps=new ST(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class Xy{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qy),n),this.fetch=dh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}listBuckets(e){return ie(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const s=n.toString(),o=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Ks(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield hh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}from(e){if(!dT(e))throw new no("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new kT({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>ie(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(l,u){const d=l[u];return typeof d!="function"?d:(...h)=>ie(this,void 0,void 0,function*(){try{return{data:yield d.apply(l,h),error:null}}catch(p){if(s)throw p;return{data:null,error:p}}})}})}}const fh={"X-Client-Info":`storage-js/${Yy}`,"Content-Type":"application/json"};class ph extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ot(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Ma extends ph{constructor(e,n,s){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zy extends ph{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var vd;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(vd||(vd={}));const fl=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),TT=()=>Response,ew=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},CT=t=>Array.from(new Float32Array(t)),PT=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},V0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jT=(t,e,n)=>ie(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const o=t.status||500,l=t;if(typeof l.json=="function")l.json().then(u=>{const d=u?.statusCode||u?.code||o+"";e(new Ma(V0(u),o,d))}).catch(()=>{const u=o+"",d=l.statusText||`HTTP ${o} error`;e(new Ma(d,o,u))});else{const u=o+"",d=l.statusText||`HTTP ${o} error`;e(new Ma(d,o,u))}}else e(new Zy(V0(t),t))}),AT=(t,e,n,s)=>{const o={method:t,headers:e?.headers||{}};return s?(ew(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),n)):o};function RT(t,e,n,s,o,l){return ie(this,void 0,void 0,function*(){return new Promise((u,d)=>{t(n,AT(e,s,o,l)).then(h=>{if(!h.ok)throw h;if(s?.noResolveJson)return h;const p=h.headers.get("content-type");return!p||!p.includes("application/json")?{}:h.json()}).then(h=>u(h)).catch(h=>jT(h,d,s))})})}function Ut(t,e,n,s,o){return ie(this,void 0,void 0,function*(){return RT(t,"POST",e,s,o,n)})}class tw{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fh),n),this.fetch=fl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ie(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ie(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}})}listIndexes(e){return ie(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ie(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ot(s))return{data:null,error:s};throw s}})}}class rw{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fh),n),this.fetch=fl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ie(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ut(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}getVectors(e){return ie(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}listVectors(e){return ie(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ut(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}queryVectors(e){return ie(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ie(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ut(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}}class nw{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fh),n),this.fetch=fl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}getBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}listBuckets(){return ie(this,arguments,void 0,function*(e={}){try{return{data:yield Ut(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}}class iw extends nw{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new sw(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ie(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ie(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ie(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ie(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class sw extends tw{constructor(e,n,s,o){super(e,n,o),this.vectorBucketName=s}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ie(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ie(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ie(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ie(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new ow(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class ow extends rw{constructor(e,n,s,o,l){super(e,n,l),this.vectorBucketName=s,this.indexName=o}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ie(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ie(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ie(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ie(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ie(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class NT extends wT{constructor(e,n={},s,o){super(e,n,s,o)}from(e){return new yT(this.url,this.headers,e,this.fetch)}get vectors(){return new iw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Xy(this.url+"/iceberg",this.headers,this.fetch)}}const OT=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:Xy,StorageApiError:Gy,StorageClient:NT,StorageError:no,StorageUnknownError:Za,StorageVectorsApiError:Ma,StorageVectorsClient:iw,StorageVectorsError:ph,get StorageVectorsErrorCode(){return vd},StorageVectorsUnknownError:Zy,VectorBucketApi:nw,VectorBucketScope:sw,VectorDataApi:rw,VectorIndexApi:tw,VectorIndexScope:ow,isPlainObject:ew,isStorageError:Le,isStorageVectorsError:Ot,normalizeToFloat32:CT,resolveFetch:fl,resolveResponse:TT,validateVectorDimension:PT},Symbol.toStringTag,{value:"Module"})),IT=Qs(OT);var jc={},js={},F0;function DT(){return F0||(F0=1,Object.defineProperty(js,"__esModule",{value:!0}),js.version=void 0,js.version="2.87.1"),js}var B0;function MT(){return B0||(B0=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=DT();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(jc)),jc}var Ac={},z0;function LT(){return z0||(z0=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=o=>o?(...l)=>o(...l):(...l)=>fetch(...l);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const s=(o,l,u)=>{const d=(0,t.resolveFetch)(u),h=(0,t.resolveHeadersConstructor)();return async(p,g)=>{var y;const w=(y=await l())!==null&&y!==void 0?y:o;let _=new h(g?.headers);return _.has("apikey")||_.set("apikey",o),_.has("Authorization")||_.set("Authorization",`Bearer ${w}`),d(p,Object.assign(Object.assign({},g),{headers:_}))}};t.fetchWithAuth=s})(Ac)),Ac}var Nr={},W0;function $T(){if(W0)return Nr;W0=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.isBrowser=void 0,Nr.uuid=t,Nr.ensureTrailingSlash=e,Nr.applySettingDefaults=s,Nr.validateSupabaseUrl=o;function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var u=Math.random()*16|0,d=l=="x"?u:u&3|8;return d.toString(16)})}function e(l){return l.endsWith("/")?l:l+"/"}const n=()=>typeof window<"u";Nr.isBrowser=n;function s(l,u){var d,h;const{db:p,auth:g,realtime:y,global:w}=l,{db:_,auth:E,realtime:C,global:S}=u,T={db:Object.assign(Object.assign({},_),p),auth:Object.assign(Object.assign({},E),g),realtime:Object.assign(Object.assign({},C),y),storage:{},global:Object.assign(Object.assign(Object.assign({},S),w),{headers:Object.assign(Object.assign({},(d=S?.headers)!==null&&d!==void 0?d:{}),(h=w?.headers)!==null&&h!==void 0?h:{})}),accessToken:async()=>""};return l.accessToken?T.accessToken=l.accessToken:delete T.accessToken,T}function o(l){const u=l?.trim();if(!u)throw new Error("supabaseUrl is required.");if(!u.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(u))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Nr}var As={};const aw="2.87.1",yi=30*1e3,yd=3,Rc=yd*yi,UT="http://localhost:9999",VT="supabase.auth.token",FT={"X-Client-Info":`gotrue-js/${aw}`},wd="X-Supabase-Api-Version",lw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zT=600*1e3;let Oi=class extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}};function le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let uw=class extends Oi{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}};function cw(t){return le(t)&&t.name==="AuthApiError"}let ln=class extends Oi{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},Mr=class extends Oi{constructor(e,n,s,o){super(e,s,o),this.name=n,this.status=s}},Nt=class extends Mr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function dw(t){return le(t)&&t.name==="AuthSessionMissingError"}let Rn=class extends Mr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Os=class extends Mr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Is=class extends Mr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function hw(t){return le(t)&&t.name==="AuthImplicitGrantRedirectError"}let xd=class extends Mr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},el=class extends Mr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function La(t){return le(t)&&t.name==="AuthRetryableFetchError"}let bd=class extends Mr{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}};function WT(t){return le(t)&&t.name==="AuthWeakPasswordError"}let tl=class extends Mr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const rl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),H0=` 	
\r=`.split(""),HT=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<H0.length;e+=1)t[H0[e].charCodeAt(0)]=-2;for(let e=0;e<rl.length;e+=1)t[rl[e].charCodeAt(0)]=e;return t})();function q0(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(rl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(rl[s]),e.queuedBits-=6}}function fw(t,e,n){const s=HT[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function K0(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{GT(u,s,n)};for(let u=0;u<t.length;u+=1)fw(t.charCodeAt(u),o,l);return e.join("")}function qT(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function KT(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}qT(s,e)}}function GT(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Pi(t){const e=[],n={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)fw(t.charCodeAt(o),n,s);return new Uint8Array(e)}function JT(t){const e=[];return KT(t,n=>e.push(n)),new Uint8Array(e)}function $n(t){const e=[],n={queue:0,queuedBits:0},s=o=>{e.push(o)};return t.forEach(o=>q0(o,n,s)),q0(null,n,s),e.join("")}function YT(t){return Math.round(Date.now()/1e3)+t}function QT(){return Symbol("auth-callback")}const ht=()=>typeof window<"u"&&typeof document<"u",Pn={tested:!1,writable:!1},pw=()=>{if(!ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pn.tested)return Pn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pn.tested=!0,Pn.writable=!0}catch{Pn.tested=!0,Pn.writable=!1}return Pn.writable};function XT(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return n.searchParams.forEach((s,o)=>{e[o]=s}),e}const mw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ZT=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",wi=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},jn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},dt=async(t,e)=>{await t.removeItem(e)};class pl{constructor(){this.promise=new pl.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}pl.promiseConstructor=Promise;function Nc(t){const e=t.split(".");if(e.length!==3)throw new tl("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!BT.test(e[s]))throw new tl("JWT not in base64url format");return{header:JSON.parse(K0(e[0])),payload:JSON.parse(K0(e[1])),signature:Pi(e[2]),raw:{header:e[0],payload:e[1]}}}async function eC(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function tC(t,e){return new Promise((s,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){o(u);return}}})()})}function rC(t){return("0"+t.toString(16)).substr(-2)}function nC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,rC).join("")}async function iC(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(s);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function sC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await iC(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pi(t,e,n=!1){const s=nC();let o=s;n&&(o+="/PASSWORD_RECOVERY"),await wi(t,`${e}-code-verifier`,o);const l=await sC(s);return[l,s===l?"plain":"s256"]}const oC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aC(t){const e=t.headers.get(wd);if(!e||!e.match(oC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function lC(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function uC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mi(t){if(!cC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Oc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dC(t,e){return new Proxy(t,{get:(n,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,o)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,o)}})}function G0(t){return JSON.parse(JSON.stringify(t))}const Nn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hC=[502,503,504];async function J0(t){var e;if(!ZT(t))throw new el(Nn(t),0);if(hC.includes(t.status))throw new el(Nn(t),t.status);let n;try{n=await t.json()}catch(l){throw new ln(Nn(l),l)}let s;const o=aC(t);if(o&&o.getTime()>=lw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new bd(Nn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Nt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new bd(Nn(n),t.status,n.weak_password.reasons);throw new uw(Nn(n),t.status||500,s)}const fC=(t,e,n,s)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),n))};async function fe(t,e,n,s){var o;const l=Object.assign({},s?.headers);l[wd]||(l[wd]=lw["2024-01-01"].name),s?.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await pC(t,e,n+d,{headers:l,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(h):{data:Object.assign({},h),error:null}}async function pC(t,e,n,s,o,l){const u=fC(e,s,o,l);let d;try{d=await t(n,Object.assign({},u))}catch(h){throw console.error(h),new el(Nn(h),0)}if(d.ok||await J0(d),s?.noResolveJson)return d;try{return await d.json()}catch(h){await J0(h)}}function or(t){var e;let n=null;vC(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=YT(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function Y0(t){const e=or(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function un(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function mC(t){return{data:t,error:null}}function gC(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:o,verification_type:l}=t,u=Li(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:s,redirect_to:o,verification_type:l},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function Q0(t){return t}function vC(t){return t.access_token&&t.refresh_token&&t.expires_in}const $a=["global","local","others"];let mh=class{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=mw(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=$a[0]){if($a.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$a.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:un})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Li(e,["options"]),o=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:gC,redirectTo:n?.redirectTo})}catch(n){if(le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:un})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,o,l,u,d,h;try{const p={nextPage:null,lastPage:0,total:0},g=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Q0});if(g.error)throw g.error;const y=await g.json(),w=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,_=(h=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return _.length>0&&(_.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(E.split(";")[1].split("=")[1]);p[`${S}Page`]=C}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(le(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){mi(e);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:un})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){mi(e);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:un})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){mi(e);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:un})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){mi(e.userId);try{const{data:n,error:s}=await fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:s}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _deleteFactor(e){mi(e.userId),mi(e.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,o,l,u,d,h;try{const p={nextPage:null,lastPage:0,total:0},g=await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Q0});if(g.error)throw g.error;const y=await g.json(),w=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,_=(h=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return _.length>0&&(_.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(E.split(";")[1].split("=")[1]);p[`${S}Page`]=C}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(le(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}};function X0(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const On={debug:!!(globalThis&&pw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let gw=class extends gh{};class yC extends gh{}async function vw(t,e,n){On.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),On.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){On.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{On.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw On.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new gw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(On.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Z0={};async function wC(t,e,n){var s;const o=(s=Z0[t])!==null&&s!==void 0?s:Promise.resolve(),l=Promise.race([o.catch(()=>null),e>=0?new Promise((u,d)=>{setTimeout(()=>{d(new yC(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await n());return Z0[t]=l.catch(async u=>{if(u&&u.isAcquireTimeout)return await o,null;throw u}),await l}function xC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function yw(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function bC(t){return parseInt(t,16)}function _C(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function EC(t){var e;const{chainId:n,domain:s,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:h,resources:p,scheme:g,uri:y,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const _=yw(t.address),E=g?`${g}://${s}`:s,C=t.statement?`${t.statement}
`:"",S=`${E} wants you to sign in with your Ethereum account:
${_}

${C}`;let T=`URI: ${y}
Version: ${w}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(T+=`
Expiration Time: ${o.toISOString()}`),d&&(T+=`
Not Before: ${d.toISOString()}`),h&&(T+=`
Request ID: ${h}`),p){let N=`
Resources:`;for(const P of p){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);N+=`
- ${P}`}T+=N}return`${S}
${T}`}class Xe extends Error{constructor({message:e,code:n,cause:s,name:o}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=o??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class nl extends Xe{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function SC({error:t,options:e}){var n,s,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Xe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Xe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Xe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Xe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Xe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Xe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Xe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Xe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const u=window.location.hostname;if(ww(u)){if(l.rp.id!==u)return new Xe({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Xe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Xe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Xe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Xe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function kC({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Xe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Xe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(ww(s)){if(n.rpId!==s)return new Xe({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Xe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Xe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Xe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class TC{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const CC=new TC;function PC(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,o=Li(t,["challenge","user","excludeCredentials"]),l=Pi(e).buffer,u=Object.assign(Object.assign({},n),{id:Pi(n.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:l,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const p=s[h];d.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:Pi(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function jC(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=Li(t,["challenge","allowCredentials"]),o=Pi(e).buffer,l=Object.assign(Object.assign({},s),{challenge:o});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Pi(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function AC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:$n(new Uint8Array(t.response.attestationObject)),clientDataJSON:$n(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function RC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:$n(new Uint8Array(o.authenticatorData)),clientDataJSON:$n(new Uint8Array(o.clientDataJSON)),signature:$n(new Uint8Array(o.signature)),userHandle:o.userHandle?$n(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ww(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function eg(){var t,e;return!!(ht()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function NC(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new nl("Browser returned unexpected credential type",e)}:{data:null,error:new nl("Empty credential response",e)}}catch(e){return{data:null,error:SC({error:e,options:t})}}}async function OC(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new nl("Browser returned unexpected credential type",e)}:{data:null,error:new nl("Empty credential response",e)}}catch(e){return{data:null,error:kC({error:e,options:t})}}}const IC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function il(...t){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of t)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(n(u))s[l]=u;else if(e(u)){const d=s[l];e(d)?s[l]=il(d,u):s[l]=il(u)}else s[l]=u}return s}function MC(t,e){return il(IC,t,e||{})}function LC(t,e){return il(DC,t,e||{})}class $C{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:o},l){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:d};const h=o??CC.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=MC(u.webauthn.credential_options.publicKey,l?.create),{data:g,error:y}=await NC({publicKey:p,signal:h});return g?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const p=LC(u.webauthn.credential_options.publicKey,l?.request),{data:g,error:y}=await OC(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:h}));return g?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(u){return le(u)?{data:null,error:u}:{data:null,error:new ln("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new Oi("rpId is required for WebAuthn authentication")};try{if(!eg())return{data:null,error:new ln("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:o},{request:l});if(!u)return{data:null,error:d};const{webauthn:h}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:s,credential_response:h.credential_response}})}catch(u){return le(u)?{data:null,error:u}:{data:null,error:new ln("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new Oi("rpId is required for WebAuthn registration")};try{if(!eg())return{data:null,error:new ln("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:d};const{data:h,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:o},{create:l});return h?this._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(u){return le(u)?{data:null,error:u}:{data:null,error:new ln("Unexpected error in register",u)}}}}xC();const UC={url:UT,storageKey:VT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:FT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function tg(t,e,n){return await n()}const gi={};let vh=class _d{get jwks(){var e,n;return(n=(e=gi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){gi[this.storageKey]=Object.assign(Object.assign({},gi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=gi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){gi[this.storageKey]=Object.assign(Object.assign({},gi[this.storageKey]),{cachedAt:e})}constructor(e){var n,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},UC),e);if(this.storageKey=l.storageKey,this.instanceID=(n=_d.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,_d.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&ht()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new mh({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=mw(l.fetch),this.lock=l.lock||tg,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&ht()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=vw:this.lock=tg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $C(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:pw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=X0(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=X0(this.memoryStorage)),ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${aw}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(ht()&&(n=XT(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),ht()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),hw(l)){const h=(e=l.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return le(n)?this._returnResult({error:n}):this._returnResult({error:new ln("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,o;try{const l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:or}),{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(l){if(le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,s,o;try{let l;if("email"in e){const{email:g,password:y,options:w}=e;let _=null,E=null;this.flowType==="pkce"&&([_,E]=await pi(this.storage,this.storageKey)),l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:g,password:y,data:(n=w?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:_,code_challenge_method:E},xform:or})}else if("phone"in e){const{phone:g,password:y,options:w}=e;l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(s=w?.data)!==null&&s!==void 0?s:{},channel:(o=w?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:or})}else throw new Os("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return await dt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(l){if(await dt(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:d}=e;n=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Y0})}else if("phone"in e){const{phone:l,password:u,options:d}=e;n=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Y0})}else throw new Os("You must provide either an email or phone number and a password");const{data:s,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const l=new Rn;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,o,l,u,d,h,p,g,y,w;let _,E;if("message"in e)_=e.message,E=e.signature;else{const{chain:C,wallet:S,statement:T,options:N}=e;let P;if(ht())if(typeof S=="object")P=S;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")P=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=S}const L=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href),I=await P.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=yw(I[0]);let z=(s=N?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!z){const X=await P.request({method:"eth_chainId"});z=bC(X)}const F={domain:L.host,address:U,statement:T,uri:L.href,version:"1",chainId:z,nonce:(o=N?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=N?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=N?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=N?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=N?.signInWithEthereum)===null||g===void 0?void 0:g.resources};_=EC(F),E=await P.request({method:"personal_sign",params:[_C(_),U]})}try{const{data:C,error:S}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:E},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:or});if(S)throw S;if(!C||!C.session||!C.user){const T=new Rn;return this._returnResult({data:{user:null,session:null},error:T})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:S})}catch(C){if(le(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(e){var n,s,o,l,u,d,h,p,g,y,w,_;let E,C;if("message"in e)E=e.message,C=e.signature;else{const{chain:S,wallet:T,statement:N,options:P}=e;let L;if(ht())if(typeof T=="object")L=T;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))L=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=T}const I=new URL((n=P?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in L&&L.signIn){const U=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),N?{statement:N}:null));let z;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")z=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)z=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)E=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),C=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${I.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(o=(s=P?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=P?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((u=P?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((d=P?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((h=P?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((p=P?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((y=(g=P?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...P.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const U=await L.signMessage(new TextEncoder().encode(E),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=U}}try{const{data:S,error:T}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:$n(C)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:or});if(T)throw T;if(!S||!S.session||!S.user){const N=new Rn;return this._returnResult({data:{user:null,session:null},error:N})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:T})}catch(S){if(le(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(e){const n=await jn(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(n??"").split("/");try{const{data:l,error:u}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:or});if(await dt(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const d=new Rn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(await dt(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:o,access_token:l,nonce:u}=e,d=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:or}),{data:h,error:p}=d;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h||!h.session||!h.user){const g=new Rn;return this._returnResult({data:{user:null,session:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:p})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,o,l,u;try{if("email"in e){const{email:d,options:h}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await pi(this.storage,this.storageKey));const{error:y}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h?.data)!==null&&n!==void 0?n:{},create_user:(s=h?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:d,options:h}=e,{data:p,error:g}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(l=h?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(u=h?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:g})}throw new Os("You must provide either an email or phone number.")}catch(d){if(await dt(this.storage,`${this.storageKey}-code-verifier`),le(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var n,s;try{let o,l;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:or});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,p=u.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(le(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var n,s,o,l,u;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await pi(this.storage,this.storageKey));const p=await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:mC});return!((l=p.data)===null||l===void 0)&&l.url&&ht()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(d){if(await dt(this.storage,`${this.storageKey}-code-verifier`),le(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Nt;const{error:o}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(le(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:o,options:l}=e,{error:u}=await fe(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:s,type:o,options:l}=e,{data:u,error:d}=await fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Os("You must provide either an email or phone number and a type")}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await jn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Rc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await jn(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Oc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=dC(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:un}):await this._useSession(async n=>{var s,o,l;const{data:u,error:d}=n;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nt}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:un})})}catch(n){if(le(n))return dw(n)&&(await this._removeSession(),await dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new Nt;const u=o.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await pi(this.storage,this.storageKey));const{data:p,error:g}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:un});if(g)throw g;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(await dt(this.storage,`${this.storageKey}-code-verifier`),le(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nt;const n=Date.now()/1e3;let s=n,o=!0,l=null;const{payload:u}=Nc(e.access_token);if(u.exp&&(s=u.exp,o=s<=n),o){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(le(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:u,error:d}=n;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Nt;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!ht())throw new Is("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Is(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new xd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Is("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new xd("No code detected.");const{data:N,error:P}=await this._exchangeCodeForSession(e.code);if(P)throw P;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:d,expires_at:h,token_type:p}=e;if(!l||!d||!u||!p)throw new Is("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(d);let w=g+y;h&&(w=parseInt(h));const _=w-g;_*1e3<=yi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${y}s`);const E=w-y;g-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,w,g):g-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,w,g);const{data:C,error:S}=await this._getUser(l);if(S)throw S;const T={provider_token:s,provider_refresh_token:o,access_token:l,expires_in:y,expires_at:w,refresh_token:u,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(s){if(le(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await jn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({error:l});const u=(s=o.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(cw(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=QT(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,o;try{const{data:{session:l},error:u}=n;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await pi(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await dt(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:o}=await this._useSession(async l=>{var u,d,h,p,g;const{data:y,error:w}=l;if(w)throw w;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",_,{headers:this.headers,jwt:(g=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(o)throw o;return ht()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(le(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:o,data:{session:l}}=n;if(o)throw o;const{options:u,provider:d,token:h,access_token:p,nonce:g}=e,y=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:h,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:or}),{data:w,error:_}=y;return _?this._returnResult({data:{user:null,session:null},error:_}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Rn}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:_}))}catch(o){if(await dt(this.storage,`${this.storageKey}-code-verifier`),le(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,o;const{data:l,error:u}=n;if(u)throw u;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await tC(async o=>(o>0&&await eC(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:or})),(o,l)=>{const u=200*Math.pow(2,o);return l&&La(l)&&Date.now()+u-s<yi})}catch(s){if(this._debug(n,"error",s),le(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),ht()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await jn(this.storage,this.storageKey);if(o&&this.userStorage){let u=await jn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await wi(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u?.user)!==null&&e!==void 0?e:Oc()}else if(o&&!o.user&&!o.user){const u=await jn(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await dt(this.storage,this.storageKey+"-user"),await wi(this.storage,this.storageKey,o)):o.user=Oc()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Rc;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Rc}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),La(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Nt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new pl;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Nt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(o,"error",l),le(l)){const u={data:null,error:l};return La(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,s=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(h){l.push(h)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await dt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await wi(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=G0(o);await wi(this.storage,this.storageKey,l)}else{const o=G0(n);await wi(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await dt(this.storage,this.storageKey),await dt(this.storage,this.storageKey+"-code-verifier"),await dt(this.storage,this.storageKey+"-user"),this.userStorage&&await dt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ht()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/yi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${yi}ms, refresh threshold is ${yd} ticks`),o<=yd&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof gh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ht()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const o=[`provider=${encodeURIComponent(n)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await pi(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(s?.queryParams){const l=new URLSearchParams(s.queryParams);o.push(l.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;return l?this._returnResult({data:null,error:l}):await fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&h.type==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?AC(e.webauthn.credential_response):RC(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:PC(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:jC(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n?.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Nc(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(e=s.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?this._returnResult({data:null,error:o}):s?await fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Nt})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Nt});const u=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&ht()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Nt});const u=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&ht()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;return s?this._returnResult({data:null,error:s}):n?await fe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Nt})})}catch(e){if(le(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?this._returnResult({data:null,error:o}):s?(await fe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nt})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(d=>d.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+zT>o)return s;const{data:l,error:u}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,s=l.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:_,error:E}=await this.getSession();if(E||!_.session)return this._returnResult({data:null,error:E});s=_.session.access_token}const{header:o,payload:l,signature:u,raw:{header:d,payload:h}}=Nc(s);n?.allowExpired||lC(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:_}=await this.getUser(s);if(_)throw _;return{data:{claims:l,header:o,signature:u},error:null}}const g=uC(o.alg),y=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,u,JT(`${d}.${h}`)))throw new tl("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}};vh.nextInstanceID={};const VC=mh,FC=vh,BC=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:VC,AuthApiError:uw,AuthClient:FC,AuthError:Oi,AuthImplicitGrantRedirectError:Is,AuthInvalidCredentialsError:Os,AuthInvalidJwtError:tl,AuthInvalidTokenResponseError:Rn,AuthPKCEGrantCodeExchangeError:xd,AuthRetryableFetchError:el,AuthSessionMissingError:Nt,AuthUnknownError:ln,AuthWeakPasswordError:bd,CustomAuthError:Mr,GoTrueAdminApi:mh,GoTrueClient:vh,NavigatorLockAcquireTimeoutError:gw,SIGN_OUT_SCOPES:$a,isAuthApiError:cw,isAuthError:le,isAuthImplicitGrantRedirectError:hw,isAuthRetryableFetchError:La,isAuthSessionMissingError:dw,isAuthWeakPasswordError:WT,lockInternals:On,navigatorLock:vw,processLock:wC},Symbol.toStringTag,{value:"Module"})),xw=Qs(BC);var rg;function zC(){if(rg)return As;rg=1,Object.defineProperty(As,"__esModule",{value:!0}),As.SupabaseAuthClient=void 0;const t=xw;let e=class extends t.AuthClient{constructor(s){super(s)}};return As.SupabaseAuthClient=e,As}var ng;function ig(){if(ng)return ba;ng=1,Object.defineProperty(ba,"__esModule",{value:!0});const t=Oy,e=Uy(),n=Ky,s=IT,o=MT(),l=LT(),u=$T(),d=zC();class h{constructor(g,y,w){var _,E,C;this.supabaseUrl=g,this.supabaseKey=y;const S=(0,u.validateSupabaseUrl)(g);if(!y)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",S),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",S),this.storageUrl=new URL("storage/v1",S),this.functionsUrl=new URL("functions/v1",S);const T=`sb-${S.hostname.split(".")[0]}-auth-token`,N={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:T}),global:o.DEFAULT_GLOBAL_OPTIONS},P=(0,u.applySettingDefaults)(w??{},N);this.storageKey=(_=P.auth.storageKey)!==null&&_!==void 0?_:"",this.headers=(E=P.global.headers)!==null&&E!==void 0?E:{},P.accessToken?(this.accessToken=P.accessToken,this.auth=new Proxy({},{get:(L,I)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(I)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((C=P.auth)!==null&&C!==void 0?C:{},this.headers,P.global.fetch),this.fetch=(0,l.fetchWithAuth)(y,this._getAccessToken.bind(this),P.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},P.realtime)),this.accessToken&&this.accessToken().then(L=>this.realtime.setAuth(L)).catch(L=>console.warn("Failed to set initial Realtime auth token:",L)),this.rest=new e.PostgrestClient(new URL("rest/v1",S).href,{headers:this.headers,schema:P.db.schema,fetch:this.fetch}),this.storage=new s.StorageClient(this.storageUrl.href,this.headers,this.fetch,w?.storage),P.accessToken||this._listenForAuthEvents()}get functions(){return new t.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(g){return this.rest.from(g)}schema(g){return this.rest.schema(g)}rpc(g,y={},w={head:!1,get:!1,count:void 0}){return this.rest.rpc(g,y,w)}channel(g,y={config:{}}){return this.realtime.channel(g,y)}getChannels(){return this.realtime.getChannels()}removeChannel(g){return this.realtime.removeChannel(g)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var g,y;if(this.accessToken)return await this.accessToken();const{data:w}=await this.auth.getSession();return(y=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:g,persistSession:y,detectSessionInUrl:w,storage:_,userStorage:E,storageKey:C,flowType:S,lock:T,debug:N,throwOnError:P},L,I){const U={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},U),L),storageKey:C,autoRefreshToken:g,persistSession:y,detectSessionInUrl:w,storage:_,userStorage:E,flowType:S,lock:T,debug:N,throwOnError:P,fetch:I,hasCustomAuthorizationHeader:Object.keys(this.headers).some(z=>z.toLowerCase()==="authorization")})}_initRealtimeClient(g){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},g),{params:Object.assign({apikey:this.supabaseKey},g?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((y,w)=>{this._handleTokenChanged(y,"CLIENT",w?.access_token)})}_handleTokenChanged(g,y,w){(g==="TOKEN_REFRESHED"||g==="SIGNED_IN")&&this.changedAccessToken!==w?(this.changedAccessToken=w,this.realtime.setAuth(w)):g==="SIGNED_OUT"&&(this.realtime.setAuth(),y=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return ba.default=h,ba}var sg;function WC(){return sg||(sg=1,(function(t){var e=Rr&&Rr.__createBinding||(Object.create?(function(g,y,w,_){_===void 0&&(_=w);var E=Object.getOwnPropertyDescriptor(y,w);(!E||("get"in E?!y.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return y[w]}}),Object.defineProperty(g,_,E)}):(function(g,y,w,_){_===void 0&&(_=w),g[_]=y[w]})),n=Rr&&Rr.__exportStar||function(g,y){for(var w in g)w!=="default"&&!Object.prototype.hasOwnProperty.call(y,w)&&e(y,g,w)},s=Rr&&Rr.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const o=s(ig());n(xw,t);var l=Uy();Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var u=Oy;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return u.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return u.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return u.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return u.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return u.FunctionRegion}}),n(Ky,t);var d=ig();Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return s(d).default}});const h=(g,y,w)=>new o.default(g,y,w);t.createClient=h;function p(){if(typeof window<"u"||typeof process>"u")return!1;const g=process.version;if(g==null)return!1;const y=g.match(/^v(\d+)\./);return y?parseInt(y[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Rr)),Rr}var bw=WC();const _w=Pd(bw),HC=A1({__proto__:null,default:_w},[bw]),{PostgrestError:KP,FunctionsHttpError:GP,FunctionsFetchError:JP,FunctionsRelayError:YP,FunctionsError:QP,FunctionRegion:XP,SupabaseClient:ZP,createClient:qC,GoTrueAdminApi:ej,GoTrueClient:tj,AuthAdminApi:rj,AuthClient:nj,navigatorLock:ij,NavigatorLockAcquireTimeoutError:sj,lockInternals:oj,processLock:aj,SIGN_OUT_SCOPES:lj,AuthError:uj,AuthApiError:cj,AuthUnknownError:dj,CustomAuthError:hj,AuthSessionMissingError:fj,AuthInvalidTokenResponseError:pj,AuthInvalidCredentialsError:mj,AuthImplicitGrantRedirectError:gj,AuthPKCEGrantCodeExchangeError:vj,AuthRetryableFetchError:yj,AuthWeakPasswordError:wj,AuthInvalidJwtError:xj,isAuthError:bj,isAuthApiError:_j,isAuthSessionMissingError:Ej,isAuthImplicitGrantRedirectError:Sj,isAuthRetryableFetchError:kj,isAuthWeakPasswordError:Tj,RealtimePresence:Cj,RealtimeChannel:Pj,RealtimeClient:jj,REALTIME_LISTEN_TYPES:Aj,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:Rj,REALTIME_PRESENCE_LISTEN_EVENTS:Nj,REALTIME_SUBSCRIBE_STATES:Oj,REALTIME_CHANNEL_STATES:Ij}=_w||HC,KC="https://dexxhmdzkgyrfalggtbn.supabase.co",GC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRleHhobWR6a2d5cmZhbGdndGJuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMzE3MzQsImV4cCI6MjA4MDkwNzczNH0.jfyJiuS15w9LcTKM58tikm5EpPgXeqodji8viqfOQpU";let Ew=null;Ew=qC(KC,GC,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}});const Je=Ew;function JC({orders:t,setOrders:e,onReloadOrders:n,activeView:s,onViewChange:o,hasLocation:l,locationLoading:u,isOnline:d,onOnlineChange:h,onLogout:p,driverName:g}){const[y,w]=V.useState("available"),_=JSON.parse(localStorage.getItem("driver")||"{}"),E=_?.id,C=g||_?.name||"Repartidor",S=t.filter(ee=>ee.status==="Pendiente"),T=t.filter(ee=>ee.driverId===E&&ee.status!=="Entregado"),N=t.filter(ee=>ee.driverId===E&&ee.status==="Entregado"),P=async ee=>{const Pe=t.find(ye=>ye.id===ee);if(Pe)try{const{error:ye}=await Je.from("orders").update({status:"Asignado",driver_id:E}).eq("id",Pe._dbId);if(ye)throw ye;await Je.from("order_status_history").insert({order_id:Pe._dbId,status:"Asignado",driver_id:E}),n&&await n(),w("myOrders"),qe.success("Pedido aceptado exitosamente")}catch(ye){qe.error("Error al aceptar pedido: "+ye.message)}},L=async(ee,Pe)=>{const ye=t.find(_e=>_e.id===ee);if(!ye)return;const je=qs(ye,Pe);if(!je.ok){qe.error(je.reason);return}try{const{error:_e}=await Je.from("orders").update({status:Pe}).eq("id",ye._dbId);if(_e)throw _e;await Je.from("order_status_history").insert({order_id:ye._dbId,status:Pe,driver_id:E}),n&&await n(),qe.success("Estado actualizado exitosamente")}catch(_e){qe.error("Error al actualizar estado: "+_e.message)}},I=V.useRef(!1);V.useEffect(()=>{if(!t?.length)return;const ee=setInterval(async()=>{if(!I.current){I.current=!0;try{const ye=Date.now()-6e4,je=t.filter(_e=>{if(_e.status!=="Asignado")return!1;const Be=new Date(_e.updatedAt).getTime();return Number.isFinite(Be)&&Be<ye});if(je.length===0)return;for(const _e of je)try{await Je.from("orders").update({status:"Pendiente",driver_id:null}).eq("id",_e._dbId),await Je.from("order_status_history").insert({order_id:_e._dbId,status:"Pendiente",driver_id:null,notes:"Revertido automticamente por timeout"})}catch(Be){ve.error("Error revirtiendo pedido:",Be)}je.length>0&&w("available"),n&&await n()}finally{I.current=!1}}},15e3);return()=>clearInterval(ee)},[t,n]);const U=void 0,z=ee=>{ee==="orders"?(o("orders"),w("available")):ee==="myOrders"?(o("myOrders"),w("myOrders")):ee==="completed"&&o("completed")},F=ee=>{ee==="orders"?(o("orders"),w("available")):ee==="myOrders"?(o("orders"),w("myOrders")):o(ee)},X=()=>s==="orders"&&y==="myOrders"?"myOrders":s;return v.jsxs("div",{className:"driver-app-new",style:{background:"linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%)",minHeight:"100vh",paddingTop:"4.5rem",paddingBottom:"6rem",transition:"background 0.3s ease"},children:[v.jsx(Mk,{isConnected:d,onToggleConnection:()=>h&&h(!d),driverName:C,hasActiveOrders:T.length>0}),v.jsx("main",{style:{minHeight:"calc(100vh - 6rem - 4.5rem)"},children:v.jsxs(Ne.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:[s==="home"&&v.jsx(Nk,{userName:C,isConnected:d,onToggleConnection:()=>h&&h(!d),onNavigate:z,availableCount:d?S.length:0,myOrdersCount:T.length,completedCount:N.length}),s==="orders"&&(y==="available"?v.jsx(Ok,{orders:d?S:[],onSelectOrder:void 0,onAcceptOrder:P,onUpdateStatus:L,isOnline:d,hasLocation:l,locationLoading:u,activeTab:y,onTabChange:w}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"orders-view-tabs",children:[v.jsxs("button",{onClick:()=>w("available"),className:`orders-view-tab ${y==="available"?"orders-view-tab-active":""}`,children:["Pedidos Disponibles (",S.length,")"]}),v.jsxs("button",{onClick:()=>w("myOrders"),className:`orders-view-tab ${y==="myOrders"?"orders-view-tab-active":""}`,children:["Mis Pedidos (",T.length,")"]})]}),v.jsx(Ik,{orders:T,onSelectOrder:void 0,onUpdateStatus:L,selectedOrder:null,onCloseOrder:void 0})]})),s==="completed"&&v.jsxs("div",{className:"driver-stats",children:[v.jsx("div",{className:"driver-stats-grid",children:v.jsx("div",{className:"driver-stat-card",children:v.jsxs("div",{className:"driver-stat-content",children:[v.jsx("div",{className:"driver-stat-icon driver-stat-icon-green",children:v.jsx(Ws,{style:{width:"1.25rem",height:"1.25rem"}})}),v.jsx("p",{className:"driver-stat-label",children:"Total Completados"}),v.jsx("p",{className:"driver-stat-value",children:N.length})]})})}),N.length>0?v.jsx(oy,{orders:N,onSelectOrder:void 0,onDeleteOrder:U,onAcceptOrder:void 0,onUpdateStatus:void 0}):v.jsxs("div",{className:"driver-empty-state",children:[v.jsx(Ws,{className:"driver-empty-icon"}),v.jsx("p",{className:"driver-empty-title",children:"No hay pedidos completados"}),v.jsx("p",{className:"driver-empty-text",children:"Los pedidos que completes aparecern aqu"})]})]}),s==="profile"&&v.jsx(Ak,{driverName:C}),s==="wallet"&&v.jsx(Rk,{orders:t})]},s)}),v.jsx(Dk,{activeTab:X(),onTabChange:F,availableOrdersCount:S.length})]})}const YC={};var Ed=null;function QC(t){try{return crypto.getRandomValues(new Uint8Array(t))}catch{}try{return YC.randomBytes(t)}catch{}if(!Ed)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Ed(t)}function XC(t){Ed=t}function yh(t,e){if(t=t||wh,typeof t!="number")throw Error("Illegal arguments: "+typeof t+", "+typeof e);t<4?t=4:t>31&&(t=31);var n=[];return n.push("$2b$"),t<10&&n.push("0"),n.push(t.toString()),n.push("$"),n.push(sl(QC(Js),Js)),n.join("")}function Sw(t,e,n){if(typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),typeof t>"u")t=wh;else if(typeof t!="number")throw Error("illegal arguments: "+typeof t);function s(o){cr(function(){try{o(null,yh(t))}catch(l){o(l)}})}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(o,l){s(function(u,d){if(u){l(u);return}o(d)})})}function kw(t,e){if(typeof e>"u"&&(e=wh),typeof e=="number"&&(e=yh(e)),typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return Sd(t,e)}function Tw(t,e,n,s){function o(l){typeof t=="string"&&typeof e=="number"?Sw(e,function(u,d){Sd(t,d,l,s)}):typeof t=="string"&&typeof e=="string"?Sd(t,e,l,s):cr(l.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)))}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);o(n)}else return new Promise(function(l,u){o(function(d,h){if(d){u(d);return}l(h)})})}function Cw(t,e){for(var n=t.length^e.length,s=0;s<t.length;++s)n|=t.charCodeAt(s)^e.charCodeAt(s);return n===0}function ZC(t,e){if(typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return e.length!==60?!1:Cw(kw(t,e.substring(0,e.length-31)),e)}function eP(t,e,n,s){function o(l){if(typeof t!="string"||typeof e!="string"){cr(l.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)));return}if(e.length!==60){cr(l.bind(this,null,!1));return}Tw(t,e.substring(0,29),function(u,d){u?l(u):l(null,Cw(d,e))},s)}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);o(n)}else return new Promise(function(l,u){o(function(d,h){if(d){u(d);return}l(h)})})}function tP(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return parseInt(t.split("$")[2],10)}function rP(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);if(t.length!==60)throw Error("Illegal hash length: "+t.length+" != 60");return t.substring(0,29)}function nP(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return Pw(t)>72}var cr=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;function Pw(t){for(var e=0,n=0,s=0;s<t.length;++s)n=t.charCodeAt(s),n<128?e+=1:n<2048?e+=2:(n&64512)===55296&&(t.charCodeAt(s+1)&64512)===56320?(++s,e+=4):e+=3;return e}function iP(t){for(var e=0,n,s,o=new Array(Pw(t)),l=0,u=t.length;l<u;++l)n=t.charCodeAt(l),n<128?o[e++]=n:n<2048?(o[e++]=n>>6|192,o[e++]=n&63|128):(n&64512)===55296&&((s=t.charCodeAt(l+1))&64512)===56320?(n=65536+((n&1023)<<10)+(s&1023),++l,o[e++]=n>>18|240,o[e++]=n>>12&63|128,o[e++]=n>>6&63|128,o[e++]=n&63|128):(o[e++]=n>>12|224,o[e++]=n>>6&63|128,o[e++]=n&63|128);return o}var vi="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),sn=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function sl(t,e){var n=0,s=[],o,l;if(e<=0||e>t.length)throw Error("Illegal len: "+e);for(;n<e;){if(o=t[n++]&255,s.push(vi[o>>2&63]),o=(o&3)<<4,n>=e){s.push(vi[o&63]);break}if(l=t[n++]&255,o|=l>>4&15,s.push(vi[o&63]),o=(l&15)<<2,n>=e){s.push(vi[o&63]);break}l=t[n++]&255,o|=l>>6&3,s.push(vi[o&63]),s.push(vi[l&63])}return s.join("")}function jw(t,e){var n=0,s=t.length,o=0,l=[],u,d,h,p,g,y;if(e<=0)throw Error("Illegal len: "+e);for(;n<s-1&&o<e&&(y=t.charCodeAt(n++),u=y<sn.length?sn[y]:-1,y=t.charCodeAt(n++),d=y<sn.length?sn[y]:-1,!(u==-1||d==-1||(g=u<<2>>>0,g|=(d&48)>>4,l.push(String.fromCharCode(g)),++o>=e||n>=s)||(y=t.charCodeAt(n++),h=y<sn.length?sn[y]:-1,h==-1)||(g=(d&15)<<4>>>0,g|=(h&60)>>2,l.push(String.fromCharCode(g)),++o>=e||n>=s)));)y=t.charCodeAt(n++),p=y<sn.length?sn[y]:-1,g=(h&3)<<6>>>0,g|=p,l.push(String.fromCharCode(g)),++o;var w=[];for(n=0;n<o;n++)w.push(l[n].charCodeAt(0));return w}var Js=16,wh=10,sP=16,oP=100,og=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],ag=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],Aw=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Ys(t,e,n,s){var o,l=t[e],u=t[e+1];return l^=n[0],o=s[l>>>24],o+=s[256|l>>16&255],o^=s[512|l>>8&255],o+=s[768|l&255],u^=o^n[1],o=s[u>>>24],o+=s[256|u>>16&255],o^=s[512|u>>8&255],o+=s[768|u&255],l^=o^n[2],o=s[l>>>24],o+=s[256|l>>16&255],o^=s[512|l>>8&255],o+=s[768|l&255],u^=o^n[3],o=s[u>>>24],o+=s[256|u>>16&255],o^=s[512|u>>8&255],o+=s[768|u&255],l^=o^n[4],o=s[l>>>24],o+=s[256|l>>16&255],o^=s[512|l>>8&255],o+=s[768|l&255],u^=o^n[5],o=s[u>>>24],o+=s[256|u>>16&255],o^=s[512|u>>8&255],o+=s[768|u&255],l^=o^n[6],o=s[l>>>24],o+=s[256|l>>16&255],o^=s[512|l>>8&255],o+=s[768|l&255],u^=o^n[7],o=s[u>>>24],o+=s[256|u>>16&255],o^=s[512|u>>8&255],o+=s[768|u&255],l^=o^n[8],o=s[l>>>24],o+=s[256|l>>16&255],o^=s[512|l>>8&255],o+=s[768|l&255],u^=o^n[9],o=s[u>>>24],o+=s[256|u>>16&255],o^=s[512|u>>8&255],o+=s[768|u&255],l^=o^n[10],o=s[l>>>24],o+=s[256|l>>16&255],o^=s[512|l>>8&255],o+=s[768|l&255],u^=o^n[11],o=s[u>>>24],o+=s[256|u>>16&255],o^=s[512|u>>8&255],o+=s[768|u&255],l^=o^n[12],o=s[l>>>24],o+=s[256|l>>16&255],o^=s[512|l>>8&255],o+=s[768|l&255],u^=o^n[13],o=s[u>>>24],o+=s[256|u>>16&255],o^=s[512|u>>8&255],o+=s[768|u&255],l^=o^n[14],o=s[l>>>24],o+=s[256|l>>16&255],o^=s[512|l>>8&255],o+=s[768|l&255],u^=o^n[15],o=s[u>>>24],o+=s[256|u>>16&255],o^=s[512|u>>8&255],o+=s[768|u&255],l^=o^n[16],t[e]=u^n[sP+1],t[e+1]=l,t}function xi(t,e){for(var n=0,s=0;n<4;++n)s=s<<8|t[e]&255,e=(e+1)%t.length;return{key:s,offp:e}}function lg(t,e,n){for(var s=0,o=[0,0],l=e.length,u=n.length,d,h=0;h<l;h++)d=xi(t,s),s=d.offp,e[h]=e[h]^d.key;for(h=0;h<l;h+=2)o=Ys(o,0,e,n),e[h]=o[0],e[h+1]=o[1];for(h=0;h<u;h+=2)o=Ys(o,0,e,n),n[h]=o[0],n[h+1]=o[1]}function aP(t,e,n,s){for(var o=0,l=[0,0],u=n.length,d=s.length,h,p=0;p<u;p++)h=xi(e,o),o=h.offp,n[p]=n[p]^h.key;for(o=0,p=0;p<u;p+=2)h=xi(t,o),o=h.offp,l[0]^=h.key,h=xi(t,o),o=h.offp,l[1]^=h.key,l=Ys(l,0,n,s),n[p]=l[0],n[p+1]=l[1];for(p=0;p<d;p+=2)h=xi(t,o),o=h.offp,l[0]^=h.key,h=xi(t,o),o=h.offp,l[1]^=h.key,l=Ys(l,0,n,s),s[p]=l[0],s[p+1]=l[1]}function ug(t,e,n,s,o){var l=Aw.slice(),u=l.length,d;if(n<4||n>31)if(d=Error("Illegal number of rounds (4-31): "+n),s){cr(s.bind(this,d));return}else throw d;if(e.length!==Js)if(d=Error("Illegal salt length: "+e.length+" != "+Js),s){cr(s.bind(this,d));return}else throw d;n=1<<n>>>0;var h,p,g=0,y;typeof Int32Array=="function"?(h=new Int32Array(og),p=new Int32Array(ag)):(h=og.slice(),p=ag.slice()),aP(e,t,h,p);function w(){if(o&&o(g/n),g<n)for(var E=Date.now();g<n&&(g=g+1,lg(t,h,p),lg(e,h,p),!(Date.now()-E>oP)););else{for(g=0;g<64;g++)for(y=0;y<u>>1;y++)Ys(l,y<<1,h,p);var C=[];for(g=0;g<u;g++)C.push((l[g]>>24&255)>>>0),C.push((l[g]>>16&255)>>>0),C.push((l[g]>>8&255)>>>0),C.push((l[g]&255)>>>0);if(s){s(null,C);return}else return C}s&&cr(w)}if(typeof s<"u")w();else for(var _;;)if(typeof(_=w())<"u")return _||[]}function Sd(t,e,n,s){var o;if(typeof t!="string"||typeof e!="string")if(o=Error("Invalid string / salt: Not a string"),n){cr(n.bind(this,o));return}else throw o;var l,u;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(o=Error("Invalid salt version: "+e.substring(0,2)),n){cr(n.bind(this,o));return}else throw o;if(e.charAt(2)==="$")l="\0",u=3;else{if(l=e.charAt(2),l!=="a"&&l!=="b"&&l!=="y"||e.charAt(3)!=="$")if(o=Error("Invalid salt revision: "+e.substring(2,4)),n){cr(n.bind(this,o));return}else throw o;u=4}if(e.charAt(u+2)>"$")if(o=Error("Missing salt rounds"),n){cr(n.bind(this,o));return}else throw o;var d=parseInt(e.substring(u,u+1),10)*10,h=parseInt(e.substring(u+1,u+2),10),p=d+h,g=e.substring(u+3,u+25);t+=l>="a"?"\0":"";var y=iP(t),w=jw(g,Js);function _(E){var C=[];return C.push("$2"),l>="a"&&C.push(l),C.push("$"),p<10&&C.push("0"),C.push(p.toString()),C.push("$"),C.push(sl(w,w.length)),C.push(sl(E,Aw.length*4-1)),C.join("")}if(typeof n>"u")return _(ug(y,w,p));ug(y,w,p,function(E,C){E?n(E,null):n(null,_(C))},s)}function lP(t,e){return sl(t,e)}function uP(t,e){return jw(t,e)}const Rw={setRandomFallback:XC,genSaltSync:yh,genSalt:Sw,hashSync:kw,hash:Tw,compareSync:ZC,compare:eP,getRounds:tP,getSalt:rP,truncates:nP,encodeBase64:lP,decodeBase64:uP};async function cP(t){if(!t||typeof t!="string")throw new Error("La contrasea debe ser un string no vaco");return await Rw.hash(t,10)}async function dP(t,e){return!t||!e?!1:e.startsWith("$2")?await Rw.compare(t,e):(console.error(" Intento de autenticacin con contrasea en texto plano en produccin"),!1)}function kd(t){if(!t||typeof t!="string")return!1;const e=t.replace(/\./g,"").replace(/\s/g,"").toUpperCase();if(e.length<8||e.length>10)return!1;const n=e.match(/^(\d{7,9})([0-9K])$/);if(!n)return!1;const s=n[1],o=n[2];let l=0,u=2;for(let p=s.length-1;p>=0;p--)l+=parseInt(s[p])*u,u=u===7?2:u+1;let h=11-l%11;return h===11?h="0":h===10?h="K":h=h.toString(),h===o}function hP(t){if(!t)return"";const e=t.replace(/\./g,"").replace(/\-/g,"").replace(/\s/g,"").toUpperCase();if(e.length<2)return e;const n=e.match(/^(\d+)([0-9K])$/);if(!n)return e;const s=n[1],o=n[2];return`${s.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${o}`}function Td(t){if(!t||typeof t!="string")return!1;const e=t.replace(/\s/g,"").replace(/\-/g,"").replace(/\(/g,"").replace(/\)/g,"");return/^(\+?56)?9\d{8}$/.test(e)}function Cd(t){return!t||typeof t!="string"?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim())}async function Nw(t,e=null){const{data:n,error:s}=await Je.from("drivers").select("id").eq("document_id",t).maybeSingle();if(s)throw new Error("Error al verificar el RUT. Intenta nuevamente.");if(n)return{exists:!0,message:"Este RUT ya est registrado como repartidor"};let o=Je.from("driver_registration_requests").select("id, status").eq("document_id",t).in("status",["pending","approved"]);e&&(o=o.neq("id",e));const{data:l,error:u}=await o.maybeSingle();if(u)throw new Error("Error al verificar el RUT. Intenta nuevamente.");return l?{exists:!0,message:`Ya existe una solicitud ${l.status==="approved"?"aprobada":"pendiente"} con este RUT`}:{exists:!1,message:""}}async function Ow(t,e=null){if(!t||!t.trim())return{exists:!1,message:""};const{data:n,error:s}=await Je.from("drivers").select("id").eq("email",t.trim().toLowerCase()).maybeSingle();if(s)throw new Error("Error al verificar el email. Intenta nuevamente.");if(n)return{exists:!0,message:"Este email ya est registrado como repartidor"};let o=Je.from("driver_registration_requests").select("id, status").eq("email",t.trim().toLowerCase()).in("status",["pending","approved"]);e&&(o=o.neq("id",e));const{data:l,error:u}=await o.maybeSingle();if(u)throw new Error("Error al verificar el email. Intenta nuevamente.");return l?{exists:!0,message:`Ya existe una solicitud ${l.status==="approved"?"aprobada":"pendiente"} con este email`}:{exists:!1,message:""}}async function Iw(t,e=null){if(!t||!t.trim())return{exists:!1,message:""};const n=t.replace(/\s/g,"").replace(/\-/g,"").replace(/\(/g,"").replace(/\)/g,""),{data:s,error:o}=await Je.from("drivers").select("id, phone");if(o)throw new Error("Error al verificar el telfono. Intenta nuevamente.");if(s&&s.length>0)for(const h of s){const p=h.phone?.replace(/\s/g,"").replace(/\-/g,"").replace(/\(/g,"").replace(/\)/g,"")||"";if(p===n||p.endsWith(n.substring(n.length-9))||n.endsWith(p.substring(p.length-9)))return{exists:!0,message:"Este telfono ya est registrado como repartidor"}}let l=Je.from("driver_registration_requests").select("id, status, phone").in("status",["pending","approved"]);e&&(l=l.neq("id",e));const{data:u,error:d}=await l;if(d)throw new Error("Error al verificar el telfono. Intenta nuevamente.");if(u&&u.length>0)for(const h of u){const p=h.phone?.replace(/\s/g,"").replace(/\-/g,"").replace(/\(/g,"").replace(/\)/g,"")||"";if(p===n||p.endsWith(n)||n.endsWith(p))return{exists:!0,message:`Ya existe una solicitud ${h.status==="approved"?"aprobada":"pendiente"} con este telfono`}}return{exists:!1,message:""}}function fP(t){const e=new Date,n=new Date(t);let s=e.getFullYear()-n.getFullYear();const o=e.getMonth()-n.getMonth();return(o<0||o===0&&e.getDate()<n.getDate())&&s--,s>=18}async function pP(t){try{if(!kd(t.documentId))throw new Error("El RUT ingresado no es vlido. Verifica el formato y el dgito verificador.");if(!Td(t.phone))throw new Error("El telfono ingresado no es vlido. Debe ser un nmero mvil chileno (ej: +56912345678 o 912345678).");if(t.email&&t.email.trim()&&!Cd(t.email))throw new Error("El email ingresado no es vlido.");if(!fP(t.birthDate))throw new Error("Debes ser mayor de edad (18 aos) para registrarte");const e=await Nw(t.documentId);if(e.exists)throw new Error(e.message);if(t.email&&t.email.trim()){const g=await Ow(t.email);if(g.exists)throw new Error(g.message)}const n=await Iw(t.phone);if(n.exists)throw new Error(n.message);const{data:s,error:o}=await Je.from("drivers").select("id").eq("username",t.username).maybeSingle();if(o)throw ve.error("Error verificando username en drivers:",o),new Error("Error al verificar el nombre de usuario. Intenta nuevamente.");if(s)throw new Error("El nombre de usuario ya est en uso");const{data:l,error:u}=await Je.from("driver_registration_requests").select("id, status").eq("username",t.username).in("status",["pending"]).maybeSingle();if(u)throw ve.error("Error verificando solicitud pendiente:",u),new Error("Error al verificar solicitudes. Intenta nuevamente.");if(l)throw new Error("Ya existe una solicitud pendiente con este nombre de usuario");const d=await cP(t.password),{data:h,error:p}=await Je.from("driver_registration_requests").insert({username:t.username,password:d,name:t.name,document_id:t.documentId,birth_date:t.birthDate,phone:t.phone,email:t.email||null,address:t.address||null,vehicle_type:t.vehicleType,vehicle_brand:t.vehicleBrand||null,vehicle_model:t.vehicleModel||null,vehicle_year:t.vehicleYear||null,vehicle_plate:t.vehiclePlate||null,vehicle_photo_url:t.vehiclePhotoUrl||null,helmet_photo_url:t.helmetPhotoUrl||null,insurance_valid:t.insuranceValid||!1,id_card_photo_url:t.idCardPhotoUrl||null,driver_license_photo_url:t.driverLicensePhotoUrl||null,criminal_record_photo_url:t.criminalRecordPhotoUrl||null,status:"pending"}).select().single();if(p)throw ve.error("Error creando solicitud de registro de repartidor:",p),new Error("Error al enviar la solicitud. Intenta nuevamente.");return h}catch(e){throw ve.error("Error en createDriverRegistrationRequest:",e),e}}function mP(){const[t,e]=V.useState({username:"",password:"",confirmPassword:"",name:"",documentId:"",birthDate:"",phone:"",email:"",address:"",vehicleType:"",vehicleBrand:"",vehicleModel:"",vehicleYear:"",vehiclePlate:"",vehiclePhotoUrl:"",helmetPhotoUrl:"",insuranceValid:!1,idCardPhotoUrl:"",driverLicensePhotoUrl:"",criminalRecordPhotoUrl:""}),[n,s]=V.useState(""),[o,l]=V.useState(!1),[u,d]=V.useState(!1),[h,p]=V.useState(1),[g,y]=V.useState({}),[w,_]=V.useState({}),E=async(U,z)=>{let F=z;U==="documentId"&&z?F=hP(z):U==="phone"&&z&&(F=z.replace(/\s/g,"").replace(/\-/g,"").replace(/\(/g,"").replace(/\)/g,"")),e(X=>({...X,[U]:F})),s(""),g[U]&&y(X=>{const ee={...X};return delete ee[U],ee}),U==="documentId"&&F?C("documentId",F):U==="email"&&F?C("email",F):U==="phone"&&F&&C("phone",F)},C=async(U,z)=>{if(!(!z||!z.trim())){_(F=>({...F,[U]:!0}));try{if(U==="documentId")if(!kd(z))y(F=>({...F,documentId:"El RUT ingresado no es vlido. Verifica el formato y el dgito verificador."}));else{const F=await Nw(z);F.exists?y(X=>({...X,documentId:F.message})):y(X=>{const ee={...X};return delete ee.documentId,ee})}else if(U==="email")if(!Cd(z))y(F=>({...F,email:"El email ingresado no es vlido."}));else{const F=await Ow(z);F.exists?y(X=>({...X,email:F.message})):y(X=>{const ee={...X};return delete ee.email,ee})}else if(U==="phone")if(!Td(z))y(F=>({...F,phone:"El telfono debe ser un nmero mvil chileno (ej: +56912345678 o 912345678)."}));else{const F=await Iw(z);F.exists?y(X=>({...X,phone:F.message})):y(X=>{const ee={...X};return delete ee.phone,ee})}}catch(F){ve.error(`Error validando ${U}:`,F)}finally{_(F=>{const X={...F};return delete X[U],X})}}},S=()=>{s("");const U={};if(t.name.trim()||(U.name="El nombre completo es requerido"),t.documentId.trim()?kd(t.documentId)?g.documentId&&(U.documentId=g.documentId):U.documentId="El RUT ingresado no es vlido. Verifica el formato y el dgito verificador.":U.documentId="El RUT es requerido",!t.birthDate)U.birthDate="La fecha de nacimiento es requerida";else{const z=new Date,F=new Date(t.birthDate);let X=z.getFullYear()-F.getFullYear();const ee=z.getMonth()-F.getMonth();(ee<0||ee===0&&z.getDate()<F.getDate())&&X--,X<18&&(U.birthDate="Debes ser mayor de edad (18 aos) para registrarte")}return t.phone.trim()?Td(t.phone)?g.phone&&(U.phone=g.phone):U.phone="El telfono debe ser un nmero mvil chileno (ej: +56912345678 o 912345678).":U.phone="El telfono es requerido",t.email&&t.email.trim()&&(Cd(t.email)?g.email&&(U.email=g.email):U.email="El email ingresado no es vlido."),t.username.trim()?t.username.length<3&&(U.username="El nombre de usuario debe tener al menos 3 caracteres"):U.username="El nombre de usuario es requerido",t.password?t.password.length<6&&(U.password="La contrasea debe tener al menos 6 caracteres"):U.password="La contrasea es requerida",t.confirmPassword?t.password!==t.confirmPassword&&(U.confirmPassword="Las contraseas no coinciden"):U.confirmPassword="Debes confirmar la contrasea",Object.keys(U).length>0?(y(U),s("Por favor corrige los errores en el formulario"),!1):!0},T=()=>t.vehicleType?t.vehiclePhotoUrl?t.vehicleType==="bicicleta"&&!t.helmetPhotoUrl?(s("La foto del casco es requerida para bicicleta"),!1):!0:(s("La foto del vehculo es requerida"),!1):(s("El tipo de vehculo es requerido"),!1);return{formData:t,error:n,loading:o,success:u,currentStep:h,fieldErrors:g,validating:w,updateField:E,handleNextStep:()=>{s(""),!(h===1&&!S())&&(h===2&&!T()||h<3&&p(h+1))},handlePreviousStep:()=>{s(""),h>1&&p(h-1)},handleSubmit:async U=>{U.preventDefault(),s(""),d(!1),l(!0);try{await pP({username:t.username.trim().toLowerCase(),password:t.password,name:t.name.trim(),documentId:t.documentId.trim(),birthDate:t.birthDate,phone:t.phone.trim(),email:t.email.trim()||null,address:t.address.trim()||null,vehicleType:t.vehicleType,vehicleBrand:t.vehicleBrand.trim()||null,vehicleModel:t.vehicleModel.trim()||null,vehicleYear:t.vehicleYear?parseInt(t.vehicleYear):null,vehiclePlate:t.vehiclePlate.trim()||null,vehiclePhotoUrl:t.vehiclePhotoUrl||null,helmetPhotoUrl:t.helmetPhotoUrl||null,insuranceValid:t.insuranceValid,idCardPhotoUrl:t.idCardPhotoUrl||null,driverLicensePhotoUrl:t.driverLicensePhotoUrl||null,criminalRecordPhotoUrl:t.criminalRecordPhotoUrl||null}),d(!0),e({username:"",password:"",confirmPassword:"",name:"",documentId:"",birthDate:"",phone:"",email:"",address:"",vehicleType:"",vehicleBrand:"",vehicleModel:"",vehicleYear:"",vehiclePlate:"",vehiclePhotoUrl:"",helmetPhotoUrl:"",insuranceValid:!1,idCardPhotoUrl:"",driverLicensePhotoUrl:"",criminalRecordPhotoUrl:""}),p(1)}catch(z){s(z.message||"Error al enviar la solicitud. Intenta nuevamente."),ve.error("Error en registro de repartidor:",z)}finally{l(!1)}},resetForm:()=>{e({username:"",password:"",confirmPassword:"",name:"",documentId:"",birthDate:"",phone:"",email:"",address:"",vehicleType:"",vehicleBrand:"",vehicleModel:"",vehicleYear:"",vehiclePlate:"",vehiclePhotoUrl:"",insuranceValid:!1,idCardPhotoUrl:"",driverLicensePhotoUrl:"",criminalRecordPhotoUrl:""}),s(""),y({}),_({}),d(!1),p(1)}}}function gP({isOpen:t,onClose:e}){const{formData:n,error:s,loading:o,success:l,currentStep:u,fieldErrors:d,validating:h,updateField:p,handleNextStep:g,handlePreviousStep:y,handleSubmit:w,resetForm:_}=mP(),E=()=>{_(),e()},C=(T,N)=>{if(N){const P=new FileReader;P.onloadend=()=>{p(T,P.result)},P.readAsDataURL(N)}};if(!t)return null;const S=[{number:1,title:"Datos Personales"},{number:2,title:"Datos del Vehculo"},{number:3,title:"Documentacin"}];return v.jsx(ry,{onClose:E,maxWidth:"3xl",children:v.jsxs("div",{className:"driver-registration-container",children:[v.jsxs("div",{className:"driver-registration-header",children:[v.jsxs("div",{className:"driver-registration-header-content",children:[v.jsx(Jv,{className:"driver-registration-icon"}),v.jsx("h2",{className:"driver-registration-title",children:"Registro de Repartidor"})]}),v.jsx("button",{type:"button",onClick:E,className:"driver-registration-close","aria-label":"Cerrar",children:v.jsx(Zv,{style:{width:"1.25rem",height:"1.25rem"}})})]}),l?v.jsxs("div",{className:"driver-registration-success",children:[v.jsx(Ws,{className:"driver-registration-success-icon"}),v.jsx("h3",{className:"driver-registration-success-title",children:"Solicitud Enviada!"}),v.jsx("p",{className:"driver-registration-success-message",children:"Tu solicitud de registro ha sido enviada exitosamente. Un administrador revisar tu solicitud y te notificar cuando sea aprobada."}),v.jsx("button",{type:"button",onClick:E,className:"driver-registration-success-button",children:"Cerrar"})]}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"driver-registration-steps",children:S.map((T,N)=>v.jsxs("div",{className:"driver-registration-step-wrapper",children:[v.jsx("div",{className:`driver-registration-step ${u===T.number?"driver-registration-step-active":u>T.number?"driver-registration-step-completed":""}`,children:u>T.number?v.jsx(Ws,{style:{width:"1.25rem",height:"1.25rem"}}):v.jsx("span",{children:T.number})}),v.jsx("span",{className:"driver-registration-step-label",children:T.title}),N<S.length-1&&v.jsx("div",{className:`driver-registration-step-line ${u>T.number?"driver-registration-step-line-completed":""}`})]},T.number))}),v.jsxs("form",{onSubmit:u===3?w:T=>{T.preventDefault(),g()},className:"driver-registration-form",children:[s&&v.jsx("div",{className:"driver-registration-error",children:s}),u===1&&v.jsxs("div",{className:"driver-registration-step-content",children:[v.jsx("h3",{className:"driver-registration-step-title",children:"Datos Personales"}),v.jsx("p",{className:"driver-registration-step-description",children:"Completa tu informacin personal para identificarte"}),v.jsxs("div",{className:"driver-registration-form-grid",children:[v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Fn,{style:{width:"1rem",height:"1rem"}}),"Nombre Completo *"]})}),v.jsx("input",{type:"text",value:n.name,onChange:T=>p("name",T.target.value),className:`driver-registration-input ${d.name?"driver-registration-input-error":""}`,placeholder:"Juan Prez",required:!0,disabled:o}),d.name&&v.jsx("span",{className:"driver-registration-field-error",children:d.name})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Ps,{style:{width:"1rem",height:"1rem"}}),"RUT / Documento de Identidad *"]})}),v.jsx("input",{type:"text",value:n.documentId,onChange:T=>p("documentId",T.target.value),className:`driver-registration-input ${d.documentId?"driver-registration-input-error":""}`,placeholder:"12.345.678-9",required:!0,disabled:o||h.documentId}),h.documentId&&v.jsx("span",{className:"driver-registration-field-validating",children:"Verificando..."}),d.documentId&&!h.documentId&&v.jsx("span",{className:"driver-registration-field-error",children:d.documentId})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(T0,{style:{width:"1rem",height:"1rem"}}),"Fecha de Nacimiento *"]})}),v.jsx("input",{type:"date",value:n.birthDate,onChange:T=>p("birthDate",T.target.value),className:`driver-registration-input ${d.birthDate?"driver-registration-input-error":""}`,required:!0,disabled:o,max:new Date(new Date().setFullYear(new Date().getFullYear()-18)).toISOString().split("T")[0]}),d.birthDate&&v.jsx("span",{className:"driver-registration-field-error",children:d.birthDate})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Ga,{style:{width:"1rem",height:"1rem"}}),"Telfono * (Formato: +56912345678 o 912345678)"]})}),v.jsx("input",{type:"tel",value:n.phone,onChange:T=>p("phone",T.target.value),className:`driver-registration-input ${d.phone?"driver-registration-input-error":""}`,placeholder:"+56912345678",required:!0,disabled:o||h.phone}),h.phone&&v.jsx("span",{className:"driver-registration-field-validating",children:"Verificando..."}),d.phone&&!h.phone&&v.jsx("span",{className:"driver-registration-field-error",children:d.phone})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Qv,{style:{width:"1rem",height:"1rem"}}),"Email"]})}),v.jsx("input",{type:"email",value:n.email,onChange:T=>p("email",T.target.value),className:`driver-registration-input ${d.email?"driver-registration-input-error":""}`,placeholder:"correo@ejemplo.com",disabled:o||h.email}),h.email&&v.jsx("span",{className:"driver-registration-field-validating",children:"Verificando..."}),d.email&&!h.email&&v.jsx("span",{className:"driver-registration-field-error",children:d.email})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(vr,{style:{width:"1rem",height:"1rem"}}),"Direccin"]})}),v.jsx("input",{type:"text",value:n.address,onChange:T=>p("address",T.target.value),className:"driver-registration-input",placeholder:"Calle, nmero, ciudad",disabled:o})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Fn,{style:{width:"1rem",height:"1rem"}}),"Nombre de Usuario *"]})}),v.jsx("input",{type:"text",value:n.username,onChange:T=>p("username",T.target.value.toLowerCase()),className:`driver-registration-input ${d.username?"driver-registration-input-error":""}`,placeholder:"usuario123",required:!0,disabled:o,minLength:3}),d.username&&v.jsx("span",{className:"driver-registration-field-error",children:d.username})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(sd,{style:{width:"1rem",height:"1rem"}}),"Contrasea *"]})}),v.jsx("input",{type:"password",value:n.password,onChange:T=>p("password",T.target.value),className:`driver-registration-input ${d.password?"driver-registration-input-error":""}`,placeholder:"Mnimo 6 caracteres",required:!0,disabled:o,minLength:6}),d.password&&v.jsx("span",{className:"driver-registration-field-error",children:d.password})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(sd,{style:{width:"1rem",height:"1rem"}}),"Confirmar Contrasea *"]})}),v.jsx("input",{type:"password",value:n.confirmPassword,onChange:T=>p("confirmPassword",T.target.value),className:`driver-registration-input ${d.confirmPassword?"driver-registration-input-error":""}`,placeholder:"Repite la contrasea",required:!0,disabled:o,minLength:6}),d.confirmPassword&&v.jsx("span",{className:"driver-registration-field-error",children:d.confirmPassword})]})]})]}),u===2&&v.jsxs("div",{className:"driver-registration-step-content",children:[v.jsx("h3",{className:"driver-registration-step-title",children:"Datos del Vehculo"}),v.jsx("p",{className:"driver-registration-step-description",children:"Informacin sobre tu vehculo de trabajo"}),v.jsxs("div",{className:"driver-registration-form-grid",children:[v.jsxs("div",{className:"driver-registration-form-group driver-registration-form-group-full",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Sc,{style:{width:"1rem",height:"1rem"}}),"Tipo de Vehculo *"]})}),v.jsxs("select",{value:n.vehicleType,onChange:T=>p("vehicleType",T.target.value),className:"driver-registration-input",required:!0,disabled:o,children:[v.jsx("option",{value:"",children:"Selecciona un tipo"}),v.jsx("option",{value:"moto",children:"Moto"}),v.jsx("option",{value:"bicicleta",children:"Bicicleta"}),v.jsx("option",{value:"auto",children:"Auto"})]})]}),n.vehicleType!=="bicicleta"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Sc,{style:{width:"1rem",height:"1rem"}}),"Marca"]})}),v.jsx("input",{type:"text",value:n.vehicleBrand||"",onChange:T=>p("vehicleBrand",T.target.value),className:"driver-registration-input",placeholder:"Ej: Honda",disabled:o})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Sc,{style:{width:"1rem",height:"1rem"}}),"Modelo"]})}),v.jsx("input",{type:"text",value:n.vehicleModel||"",onChange:T=>p("vehicleModel",T.target.value),className:"driver-registration-input",placeholder:"Ej: CBR 600",disabled:o})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(T0,{style:{width:"1rem",height:"1rem"}}),"Ao"]})}),v.jsx("input",{type:"number",value:n.vehicleYear||"",onChange:T=>p("vehicleYear",T.target.value),className:"driver-registration-input",placeholder:"2020",min:"1900",max:new Date().getFullYear()+1,disabled:o})]}),v.jsxs("div",{className:"driver-registration-form-group",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Ps,{style:{width:"1rem",height:"1rem"}}),"Patente"]})}),v.jsx("input",{type:"text",value:n.vehiclePlate||"",onChange:T=>p("vehiclePlate",T.target.value.toUpperCase()),className:"driver-registration-input",placeholder:"ABCD12",disabled:o})]})]}),v.jsxs("div",{className:"driver-registration-form-group driver-registration-form-group-full",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(C0,{style:{width:"1rem",height:"1rem"}}),"Foto del Vehculo *"]})}),v.jsx("input",{type:"file",accept:"image/*",onChange:T=>C("vehiclePhotoUrl",T.target.files[0]),className:"driver-registration-file-input",required:!0,disabled:o})]}),n.vehicleType==="bicicleta"&&v.jsxs("div",{className:"driver-registration-form-group driver-registration-form-group-full",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(C0,{style:{width:"1rem",height:"1rem"}}),"Foto del Casco *"]})}),v.jsx("input",{type:"file",accept:"image/*",onChange:T=>C("helmetPhotoUrl",T.target.files[0]),className:"driver-registration-file-input",required:!0,disabled:o})]})]})]}),u===3&&v.jsxs("div",{className:"driver-registration-step-content",children:[v.jsx("h3",{className:"driver-registration-step-title",children:"Documentacin Obligatoria"}),v.jsx("p",{className:"driver-registration-step-description",children:"Sube las fotos de tus documentos. Estos sern revisados por un administrador."}),v.jsxs("div",{className:"driver-registration-form-grid",children:[v.jsxs("div",{className:"driver-registration-form-group driver-registration-form-group-full",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Ps,{style:{width:"1rem",height:"1rem"}}),"Foto del Carnet de Identidad *"]})}),v.jsx("input",{type:"file",accept:"image/*",onChange:T=>C("idCardPhotoUrl",T.target.files[0]),className:"driver-registration-file-input",required:!0,disabled:o})]}),n.vehicleType!=="moto"&&v.jsxs("div",{className:"driver-registration-form-group driver-registration-form-group-full",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Ps,{style:{width:"1rem",height:"1rem"}}),"Licencia de Conducir *"]})}),v.jsx("input",{type:"file",accept:"image/*",onChange:T=>C("driverLicensePhotoUrl",T.target.files[0]),className:"driver-registration-file-input",required:!0,disabled:o})]}),v.jsxs("div",{className:"driver-registration-form-group driver-registration-form-group-full",children:[v.jsx("label",{className:"driver-registration-label",children:v.jsxs("div",{className:"driver-registration-label-content",children:[v.jsx(Ps,{style:{width:"1rem",height:"1rem"}}),"Certificado de Antecedentes *"]})}),v.jsx("input",{type:"file",accept:"image/*",onChange:T=>C("criminalRecordPhotoUrl",T.target.files[0]),className:"driver-registration-file-input",required:!0,disabled:o})]})]})]}),v.jsxs("div",{className:"driver-registration-actions",children:[u>1&&v.jsxs("button",{type:"button",onClick:y,className:"driver-registration-button-secondary",disabled:o,children:[v.jsx(hk,{style:{width:"1rem",height:"1rem"}}),"Anterior"]}),v.jsx("div",{className:"driver-registration-actions-spacer"}),v.jsx("button",{type:"button",onClick:E,className:"driver-registration-button-cancel",disabled:o,children:"Cancelar"}),u<3?v.jsxs("button",{type:"button",onClick:g,className:"driver-registration-button-primary",disabled:o,children:["Siguiente",v.jsx(fk,{style:{width:"1rem",height:"1rem"}})]}):v.jsx("button",{type:"submit",className:"driver-registration-button-primary",disabled:o,children:o?"Enviando...":"Enviar Solicitud"})]})]})]})]})})}function vP({onLogin:t}){const[e,n]=V.useState(""),[s,o]=V.useState(""),[l,u]=V.useState(""),[d,h]=V.useState(!1),[p,g]=V.useState(!1),y=async w=>{if(w.preventDefault(),!d){u(""),h(!0);try{if(!e.trim()||!s.trim()){u("Por favor completa todos los campos");return}const{data:_,error:E}=await Je.from("drivers").select("*").eq("username",e.trim()).eq("active",!0).single();if(E){E.code==="PGRST116"?u("Usuario o contrasea incorrectos"):(ve.error("Error en consulta de login:",E),u("Error al verificar credenciales. Intenta nuevamente."));return}if(!_){u("Usuario o contrasea incorrectos");return}if(!_.active){u("Tu cuenta est desactivada. Contacta al administrador.");return}if(!await dP(s,_.password)){u("Usuario o contrasea incorrectos");return}const S={id:_.id,username:_.username,name:_.name,phone:_.phone||"",email:_.email||"",active:_.active,companyId:_.company_id,company_id:_.company_id};t(S)}catch(_){ve.error("Error en login:",_),u("Error al iniciar sesin. Intenta nuevamente.")}finally{h(!1)}}};return v.jsxs("div",{className:"login-container",children:[v.jsxs("header",{className:"login-header",children:[v.jsxs("div",{className:"glass-effect",children:[v.jsx("div",{className:"light-beam"}),v.jsx("div",{className:"light-beam"}),v.jsx("div",{className:"light-beam"}),v.jsx("div",{className:"floating-light"}),v.jsx("div",{className:"floating-light"}),v.jsx("div",{className:"floating-light"}),v.jsx("div",{className:"floating-light"}),v.jsx("div",{className:"frost-overlay"})]}),v.jsx("div",{className:"logo-container",children:v.jsx(Jv,{className:"logo-icon"})}),v.jsx("h1",{className:"header-title",children:"App Repartidor"}),v.jsx("p",{className:"header-subtitle",children:"Inicia sesin para comenzar tu jornada"})]}),v.jsxs("section",{className:"login-card",children:[v.jsx("h2",{className:"card-title",children:"Bienvenido"}),v.jsx("p",{className:"card-description",children:"Ingresa tus credenciales para continuar"}),v.jsxs("form",{onSubmit:y,className:"login-form",children:[v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{className:"form-label",children:[v.jsx(Fn,{className:"label-icon"}),"Usuario"]}),v.jsx("input",{type:"text",className:`form-input ${l?"is-error":""}`,placeholder:"Ingresa tu usuario",value:e,autoComplete:"username",disabled:d,onChange:w=>{n(w.target.value),u("")},required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsxs("label",{className:"form-label",children:[v.jsx(sd,{className:"label-icon"}),"Contrasea"]}),v.jsx("div",{className:"password-wrapper",children:v.jsx("input",{type:"password",className:`form-input password-input ${l?"is-error":""}`,placeholder:"Ingresa tu contrasea",value:s,autoComplete:"current-password",disabled:d,onChange:w=>{o(w.target.value),u("")},required:!0})})]}),l&&v.jsx("div",{className:"driver-login-error",children:l}),v.jsx("button",{type:"submit",className:"login-button",disabled:d,children:v.jsx("span",{className:"login-button-content",children:d?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"login-spinner"}),"Entrando..."]}):v.jsxs(v.Fragment,{children:["Iniciar sesin",v.jsx(uk,{className:"login-arrow-icon"})]})})})]}),v.jsx("div",{className:"safe-area"}),v.jsxs("div",{className:"login-crear-cuenta",children:[v.jsx("span",{className:"login-crear-cuenta-texto",children:"No tienes cuenta?"}),v.jsx("button",{type:"button",onClick:()=>g(!0),className:"login-crear-cuenta-enlace",children:"Registrarse"})]})]}),v.jsx(gP,{isOpen:p,onClose:()=>g(!1)})]})}function yP(t=!0){const[e,n]=V.useState(null),[s,o]=V.useState(!1),[l,u]=V.useState(null);return V.useEffect(()=>{if(!t)return;o(!0),j0().then(h=>{h&&n(h),u(null)}).catch(h=>{const p=h?.message||"Error desconocido";!p.includes("cancelled")&&!p.includes("PHASE_CLIENT_ALREADY_HIDDEN")?(u(p),ve.error("Error obteniendo ubicacin:",h)):u(null)}).finally(()=>{o(!1)});const d=setInterval(()=>{j0().then(h=>{h&&n(h)}).catch(h=>{const p=h?.message||"";!p.includes("cancelled")&&!p.includes("PHASE_CLIENT_ALREADY_HIDDEN")&&ve.error("Error actualizando ubicacin:",h)})},3e4);return()=>clearInterval(d)},[t]),{location:e,loading:s,error:l}}async function Ic(t,e,n,s=null){try{const{data:o,error:l}=await Je.from("driver_locations").upsert({driver_id:t,latitude:e,longitude:n,order_id:s,updated_at:new Date().toISOString()},{onConflict:"driver_id"}).select().single();if(l)throw l;return o}catch(o){throw ve.error("Error guardando ubicacin:",o),o}}function wP(t,e=null,n=!0){const s=V.useRef(null),o=V.useRef(0),l=V.useRef(null),u=1e4;V.useEffect(()=>{if(!n||!t)return;let d=()=>{};return(async()=>{const p=await ty();if(p){const{Geolocation:S,Capacitor:T}=p;try{if(T.isNativePlatform()){l.current=!0,ve.log(" Usando Capacitor Geolocation (mvil nativo)");let N=await S.checkPermissions();if(N.location!=="granted"&&(ve.log(" Solicitando permisos de ubicacin..."),N=await S.requestPermissions(),N.location!=="granted")){ve.error(" Permisos de ubicacin denegados en mvil");return}ve.log(" Permisos de ubicacin concedidos");try{const L=await S.getCurrentPosition({enableHighAccuracy:!0,timeout:5e3,maximumAge:0});ve.log(" Ubicacin inicial obtenida:",{lat:L.coords.latitude,lng:L.coords.longitude});const I=Date.now();I-o.current>=u&&(o.current=I,await Ic(t,L.coords.latitude,L.coords.longitude,e),ve.log(" Ubicacin inicial guardada en Supabase"))}catch(L){const I={message:L?.message||"Error desconocido",code:L?.code,name:L?.name,toString:L?.toString()};if(L?.message?.includes("cancelled")||L?.message?.includes("PHASE_CLIENT_ALREADY_HIDDEN")){ve.warn(" Usuario cancel el dilogo de permisos de ubicacin");return}ve.error(" Error obteniendo ubicacin inicial:",I)}const P=await S.watchPosition({enableHighAccuracy:!0,timeout:5e3,maximumAge:0},(L,I)=>{if(I){const X={message:I?.message||"Error desconocido",code:I?.code,name:I?.name,toString:I?.toString()};if(I?.message?.includes("cancelled")||I?.message?.includes("PHASE_CLIENT_ALREADY_HIDDEN")){ve.warn(" Usuario cancel el dilogo de permisos de ubicacin");return}ve.error(" Error en watchPosition:",X);return}const U=Date.now();if(U-o.current<u)return;const{latitude:z,longitude:F}=L.coords;o.current=U,ve.log(" Nueva ubicacin detectada (mvil):",{lat:z,lng:F}),Ic(t,z,F,e).then(()=>{ve.log(" Ubicacin guardada en Supabase")}).catch(X=>{ve.error(" Error guardando ubicacin:",X)})});s.current=P,ve.log(" Tracking iniciado con Capacitor (watchId:",P,")"),d=async()=>{if(s.current!==null){try{await S.clearWatch({id:s.current}),ve.log(" Tracking detenido (Capacitor)")}catch(L){ve.error("Error limpiando watchPosition:",L)}s.current=null}};return}}catch{}}if(l.current=!1,!navigator.geolocation){ve.error(" Geolocalizacin no disponible en este navegador");return}const g=S=>{const T=Date.now();if(T-o.current<u)return;const{latitude:N,longitude:P}=S.coords;o.current=T,Ic(t,N,P,e).then(()=>{}).catch(L=>{ve.error(" Error guardando ubicacin:",L)})},y=S=>{const T=S?.code,N=S?.message||"Error desconocido",P=S?.name||"GeolocationPositionError";if(N.includes("cancelled")||N.includes("PHASE_CLIENT_ALREADY_HIDDEN"))return;const I={1:"PERMISSION_DENIED - Permisos de ubicacin denegados. Por favor, permite el acceso a la ubicacin en la configuracin del navegador.",2:"POSITION_UNAVAILABLE - La ubicacin no est disponible. Verifica que el GPS est activado.",3:"TIMEOUT - Tiempo de espera agotado al obtener la ubicacin. Intenta de nuevo."}[T]||`Error desconocido: ${N}`;ve.error(" Error obteniendo ubicacin:",{code:T,message:N,name:P,errorType:{1:"PERMISSION_DENIED",2:"POSITION_UNAVAILABLE",3:"TIMEOUT"}[T]||"UNKNOWN",userMessage:I,errorObject:S?.toString?S.toString():JSON.stringify(S)}),T===1?qe.error("Permisos de ubicacin denegados. Por favor, permite el acceso a la ubicacin en la configuracin del navegador."):T===2&&qe.error("La ubicacin no est disponible. Verifica que el GPS est activado.")},w={enableHighAccuracy:!0,timeout:2e4,maximumAge:0},_=(S=1,T=3)=>{navigator.geolocation.getCurrentPosition(N=>{ve.log(" Ubicacin inicial obtenida (navegador):",{lat:N.coords.latitude,lng:N.coords.longitude}),g(N)},N=>{N.code===3&&S<T?setTimeout(()=>{_(S+1,T)},2e3):y(N)},w)};_();const E={enableHighAccuracy:!0,timeout:3e4,maximumAge:6e4},C=S=>{const T=S?.code;S?.message,T!==3&&y(S)};s.current=navigator.geolocation.watchPosition(g,C,E),ve.log(" Tracking iniciado con Web API (watchId:",s.current,")"),d=()=>{s.current!==null&&(navigator.geolocation.clearWatch(s.current),s.current=null)}})(),()=>{d()}},[t,e,n])}const xP=5;function bP(){const[t,e]=V.useState(null),[n,s]=V.useState([]),[o,l]=V.useState("home"),[u,d]=V.useState(!1),[h,p]=V.useState(new Map),[g,y]=V.useState(!1),[w,_]=V.useState(!0),{location:E,loading:C}=yP(g&&!!t);wP(t?.id,null,g&&!!t);const S=V.useCallback(I=>({id:`ORD-${I.id}`,clientName:I.clients?.name||"",clientPhone:I.clients?.phone||"",pickupAddress:I.pickup_address,deliveryAddress:I.delivery_address,local:I.locals?.name||"",localAddress:I.locals?.address||I.pickup_address||"",suggestedPrice:parseFloat(I.suggested_price),notes:I.notes||"",status:I.status,pickupCode:I.pickup_code,driverName:I.drivers?.name||null,driverId:I.driver_id,createdAt:new Date(I.created_at),updatedAt:new Date(I.updated_at),_dbId:I.id,_dbClientId:I.client_id,_dbLocalId:I.local_id,_dbUserId:I.user_id}),[]),T=V.useCallback(async I=>{if(!I)return null;if(h.has(I))return h.get(I);const U=await kk(I);return U&&p(z=>new Map(z).set(I,U)),U},[h]),N=V.useCallback(async()=>{if(t){d(!0);try{const I=t.companyId||t.company_id,U=t.id;let z=Je.from("orders").select(`
					*,
					clients(name, phone, address),
					locals(name, address),
					company_users(name),
					drivers(name, phone)
				`);I&&(z=z.eq("company_id",I));const{data:F,error:X}=await z.or(`status.eq.Pendiente,driver_id.eq.${U}`).order("created_at",{ascending:!1});if(X)throw X;let ee=(F||[]).map(S);E&&ee.length>0&&(ee=(await Promise.all(ee.map(async ye=>{if(ye.status!=="Pendiente"||ye.driverId===U)return{...ye,distance:0,withinRadius:!0};const je=await T(ye.localAddress);if(!je)return{...ye,distance:null,withinRadius:!0};const _e=Sk(E.lat,E.lon,je.lat,je.lon);return{...ye,distance:_e,withinRadius:_e<=xP}}))).filter(ye=>ye.driverId===U||ye.withinRadius)),s(ee)}catch(I){ve.error("Error cargando pedidos:",I),qe.error("Error al cargar los pedidos")}finally{d(!1)}}},[t,S,E,T]);V.useEffect(()=>{t&&!w&&N()},[t,w]),V.useEffect(()=>{if(!t||C||!E)return;const I=setTimeout(()=>{N()},2e3);return()=>clearTimeout(I)},[E?.lat,E?.lon,t]),V.useEffect(()=>{if(!t)return;const I=t.companyId||t.company_id;if(!I)return;N();const U=Je.channel(`orders-company-${I}`).on("postgres_changes",{event:"*",schema:"public",table:"orders",filter:`company_id=eq.${I}`},()=>{N()}).subscribe(),z=setInterval(()=>{N()},6e4);return()=>{clearInterval(z),Je.removeChannel(U)}},[t,N]),V.useEffect(()=>{w&&(async()=>{try{const U=localStorage.getItem("driver");if(!U){_(!1);return}let z;try{z=JSON.parse(U)}catch(Pe){ve.error("Error parseando sesin guardada:",Pe),localStorage.removeItem("driver"),localStorage.removeItem("orders"),_(!1);return}if(!z.id){localStorage.removeItem("driver"),localStorage.removeItem("orders"),_(!1);return}const{data:F,error:X}=await Je.from("drivers").select("id, username, name, phone, email, active, company_id").eq("id",z.id).eq("active",!0).single();if(X){X.code==="PGRST116"?ve.info("Driver no encontrado o inactivo, limpiando sesin"):ve.error("Error verificando driver en BD:",X),localStorage.removeItem("driver"),localStorage.removeItem("orders"),_(!1);return}if(!F){localStorage.removeItem("driver"),localStorage.removeItem("orders"),_(!1);return}const ee={id:F.id,username:F.username,name:F.name,phone:F.phone||"",email:F.email||"",active:F.active,companyId:F.company_id,company_id:F.company_id};e(ee),localStorage.setItem("driver",JSON.stringify(ee)),y(!1)}catch(U){ve.error("Error verificando sesin:",U),localStorage.removeItem("driver"),localStorage.removeItem("orders")}finally{_(!1)}})()},[]);const P=I=>{e(I),localStorage.setItem("driver",JSON.stringify(I)),y(!1)},L=()=>{e(null),s([]),y(!1),localStorage.removeItem("driver"),localStorage.removeItem("orders")};return w?v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:v.jsx("p",{children:"Cargando..."})}):t?u&&n.length===0?v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:v.jsx("p",{children:"Cargando pedidos..."})}):v.jsx(JC,{orders:n,setOrders:s,onReloadOrders:N,activeView:o,onViewChange:l,hasLocation:!!E,locationLoading:C,isOnline:g,onOnlineChange:y,onLogout:L,driverName:t.name}):v.jsx(vP,{onLogin:P})}F1.createRoot(document.getElementById("root")).render(v.jsxs(I1.StrictMode,{children:[v.jsx(jb,{}),v.jsx(bP,{})]}));
