function Vm(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _s(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var jd={exports:{}},na={},Cd={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=Symbol.for("react.element"),Hm=Symbol.for("react.portal"),Gm=Symbol.for("react.fragment"),Km=Symbol.for("react.strict_mode"),Jm=Symbol.for("react.profiler"),Qm=Symbol.for("react.provider"),Ym=Symbol.for("react.context"),Xm=Symbol.for("react.forward_ref"),Zm=Symbol.for("react.suspense"),e0=Symbol.for("react.memo"),t0=Symbol.for("react.lazy"),Uc=Symbol.iterator;function r0(t){return t===null||typeof t!="object"?null:(t=Uc&&t[Uc]||t["@@iterator"],typeof t=="function"?t:null)}var Nd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Td=Object.assign,Od={};function bn(t,e,r){this.props=t,this.context=e,this.refs=Od,this.updater=r||Nd}bn.prototype.isReactComponent={};bn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pd(){}Pd.prototype=bn.prototype;function Ol(t,e,r){this.props=t,this.context=e,this.refs=Od,this.updater=r||Nd}var Pl=Ol.prototype=new Pd;Pl.constructor=Ol;Td(Pl,bn.prototype);Pl.isPureReactComponent=!0;var zc=Array.isArray,Ad=Object.prototype.hasOwnProperty,Al={current:null},Rd={key:!0,ref:!0,__self:!0,__source:!0};function Id(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Ad.call(e,n)&&!Rd.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:bs,type:t,key:i,ref:a,props:s,_owner:Al.current}}function n0(t,e){return{$$typeof:bs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rl(t){return typeof t=="object"&&t!==null&&t.$$typeof===bs}function s0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Fc=/\/+/g;function Ra(t,e){return typeof t=="object"&&t!==null&&t.key!=null?s0(""+t.key):e.toString(36)}function si(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case bs:case Hm:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Ra(a,0):n,zc(s)?(r="",t!=null&&(r=t.replace(Fc,"$&/")+"/"),si(s,e,r,"",function(u){return u})):s!=null&&(Rl(s)&&(s=n0(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Fc,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",zc(t))for(var o=0;o<t.length;o++){i=t[o];var l=n+Ra(i,o);a+=si(i,e,r,l,s)}else if(l=r0(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=n+Ra(i,o++),a+=si(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Os(t,e,r){if(t==null)return t;var n=[],s=0;return si(t,n,"","",function(i){return e.call(r,i,s++)}),n}function i0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ae={current:null},ii={transition:null},a0={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:ii,ReactCurrentOwner:Al};function $d(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Os,forEach:function(t,e,r){Os(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Os(t,function(){e++}),e},toArray:function(t){return Os(t,function(e){return e})||[]},only:function(t){if(!Rl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=bn;H.Fragment=Gm;H.Profiler=Jm;H.PureComponent=Ol;H.StrictMode=Km;H.Suspense=Zm;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a0;H.act=$d;H.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Td({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Al.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Ad.call(e,l)&&!Rd.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:bs,type:t.type,key:s,ref:i,props:n,_owner:a}};H.createContext=function(t){return t={$$typeof:Ym,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Qm,_context:t},t.Consumer=t};H.createElement=Id;H.createFactory=function(t){var e=Id.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:Xm,render:t}};H.isValidElement=Rl;H.lazy=function(t){return{$$typeof:t0,_payload:{_status:-1,_result:t},_init:i0}};H.memo=function(t,e){return{$$typeof:e0,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=ii.transition;ii.transition={};try{t()}finally{ii.transition=e}};H.unstable_act=$d;H.useCallback=function(t,e){return Ae.current.useCallback(t,e)};H.useContext=function(t){return Ae.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return Ae.current.useDeferredValue(t)};H.useEffect=function(t,e){return Ae.current.useEffect(t,e)};H.useId=function(){return Ae.current.useId()};H.useImperativeHandle=function(t,e,r){return Ae.current.useImperativeHandle(t,e,r)};H.useInsertionEffect=function(t,e){return Ae.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return Ae.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return Ae.current.useMemo(t,e)};H.useReducer=function(t,e,r){return Ae.current.useReducer(t,e,r)};H.useRef=function(t){return Ae.current.useRef(t)};H.useState=function(t){return Ae.current.useState(t)};H.useSyncExternalStore=function(t,e,r){return Ae.current.useSyncExternalStore(t,e,r)};H.useTransition=function(){return Ae.current.useTransition()};H.version="18.3.1";Cd.exports=H;var b=Cd.exports;const o0=Sd(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0=b,c0=Symbol.for("react.element"),u0=Symbol.for("react.fragment"),d0=Object.prototype.hasOwnProperty,f0=l0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h0={key:!0,ref:!0,__self:!0,__source:!0};function Ld(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)d0.call(e,n)&&!h0.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:c0,type:t,key:i,ref:a,props:s,_owner:f0.current}}na.Fragment=u0;na.jsx=Ld;na.jsxs=Ld;jd.exports=na;var c=jd.exports,ho={},Md={exports:{}},Ke={},Dd={exports:{}},Ud={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,$){var L=N.length;N.push($);e:for(;0<L;){var V=L-1>>>1,F=N[V];if(0<s(F,$))N[V]=$,N[L]=F,L=V;else break e}}function r(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var $=N[0],L=N.pop();if(L!==$){N[0]=L;e:for(var V=0,F=N.length,X=F>>>1;V<X;){var Fe=2*(V+1)-1,dr=N[Fe],pt=Fe+1,bt=N[pt];if(0>s(dr,L))pt<F&&0>s(bt,dr)?(N[V]=bt,N[pt]=L,V=pt):(N[V]=dr,N[Fe]=L,V=Fe);else if(pt<F&&0>s(bt,L))N[V]=bt,N[pt]=L,V=pt;else break e}}return $}function s(N,$){var L=N.sortIndex-$.sortIndex;return L!==0?L:N.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,f=null,h=3,m=!1,y=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(N){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=N)n(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=r(u)}}function w(N){if(x=!1,p(N),!y)if(r(l)!==null)y=!0,I(k);else{var $=r(u);$!==null&&W(w,$.startTime-N)}}function k(N,$){y=!1,x&&(x=!1,v(E),E=-1),m=!0;var L=h;try{for(p($),f=r(l);f!==null&&(!(f.expirationTime>$)||N&&!C());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var F=V(f.expirationTime<=$);$=t.unstable_now(),typeof F=="function"?f.callback=F:f===r(l)&&n(l),p($)}else n(l);f=r(l)}if(f!==null)var X=!0;else{var Fe=r(u);Fe!==null&&W(w,Fe.startTime-$),X=!1}return X}finally{f=null,h=L,m=!1}}var S=!1,j=null,E=-1,P=5,B=-1;function C(){return!(t.unstable_now()-B<P)}function O(){if(j!==null){var N=t.unstable_now();B=N;var $=!0;try{$=j(!0,N)}finally{$?z():(S=!1,j=null)}}else S=!1}var z;if(typeof g=="function")z=function(){g(O)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,D=K.port2;K.port1.onmessage=O,z=function(){D.postMessage(null)}}else z=function(){_(O,0)};function I(N){j=N,S||(S=!0,z())}function W(N,$){E=_(function(){N(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,I(k))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var L=h;h=$;try{return N()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,$){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var L=h;h=N;try{return $()}finally{h=L}},t.unstable_scheduleCallback=function(N,$,L){var V=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?V+L:V):L=V,N){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=L+F,N={id:d++,callback:$,priorityLevel:N,startTime:L,expirationTime:F,sortIndex:-1},L>V?(N.sortIndex=L,e(u,N),r(l)===null&&N===r(u)&&(x?(v(E),E=-1):x=!0,W(w,L-V))):(N.sortIndex=F,e(l,N),y||m||(y=!0,I(k))),N},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(N){var $=h;return function(){var L=h;h=$;try{return N.apply(this,arguments)}finally{h=L}}}})(Ud);Dd.exports=Ud;var p0=Dd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0=b,Ge=p0;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zd=new Set,Zn={};function Rr(t,e){hn(t,e),hn(t+"Capture",e)}function hn(t,e){for(Zn[t]=e,t=0;t<e.length;t++)zd.add(e[t])}var Tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),po=Object.prototype.hasOwnProperty,g0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bc={},qc={};function v0(t){return po.call(qc,t)?!0:po.call(Bc,t)?!1:g0.test(t)?qc[t]=!0:(Bc[t]=!0,!1)}function y0(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function x0(t,e,r,n){if(e===null||typeof e>"u"||y0(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Re(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ke[t]=new Re(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ke[e]=new Re(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ke[t]=new Re(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ke[t]=new Re(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ke[t]=new Re(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ke[t]=new Re(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ke[t]=new Re(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ke[t]=new Re(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ke[t]=new Re(t,5,!1,t.toLowerCase(),null,!1,!1)});var Il=/[\-:]([a-z])/g;function $l(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Il,$l);ke[e]=new Re(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Il,$l);ke[e]=new Re(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Il,$l);ke[e]=new Re(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ke[t]=new Re(t,1,!1,t.toLowerCase(),null,!1,!1)});ke.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ke[t]=new Re(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ll(t,e,r,n){var s=ke.hasOwnProperty(e)?ke[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(x0(e,r,s,n)&&(r=null),n||s===null?v0(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var It=m0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ps=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),Gr=Symbol.for("react.fragment"),Ml=Symbol.for("react.strict_mode"),mo=Symbol.for("react.profiler"),Fd=Symbol.for("react.provider"),Bd=Symbol.for("react.context"),Dl=Symbol.for("react.forward_ref"),go=Symbol.for("react.suspense"),vo=Symbol.for("react.suspense_list"),Ul=Symbol.for("react.memo"),Ut=Symbol.for("react.lazy"),qd=Symbol.for("react.offscreen"),Wc=Symbol.iterator;function Nn(t){return t===null||typeof t!="object"?null:(t=Wc&&t[Wc]||t["@@iterator"],typeof t=="function"?t:null)}var le=Object.assign,Ia;function Ln(t){if(Ia===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ia=e&&e[1]||""}return`
`+Ia+t}var $a=!1;function La(t,e){if(!t||$a)return"";$a=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{$a=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ln(t):""}function w0(t){switch(t.tag){case 5:return Ln(t.type);case 16:return Ln("Lazy");case 13:return Ln("Suspense");case 19:return Ln("SuspenseList");case 0:case 2:case 15:return t=La(t.type,!1),t;case 11:return t=La(t.type.render,!1),t;case 1:return t=La(t.type,!0),t;default:return""}}function yo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gr:return"Fragment";case Hr:return"Portal";case mo:return"Profiler";case Ml:return"StrictMode";case go:return"Suspense";case vo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bd:return(t.displayName||"Context")+".Consumer";case Fd:return(t._context.displayName||"Context")+".Provider";case Dl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ul:return e=t.displayName||null,e!==null?e:yo(t.type)||"Memo";case Ut:e=t._payload,t=t._init;try{return yo(t(e))}catch{}}return null}function _0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yo(e);case 8:return e===Ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function b0(t){var e=Wd(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function As(t){t._valueTracker||(t._valueTracker=b0(t))}function Vd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Wd(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function _i(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xo(t,e){var r=e.checked;return le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Vc(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=nr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hd(t,e){e=e.checked,e!=null&&Ll(t,"checked",e,!1)}function wo(t,e){Hd(t,e);var r=nr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_o(t,e.type,r):e.hasOwnProperty("defaultValue")&&_o(t,e.type,nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hc(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function _o(t,e,r){(e!=="number"||_i(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Mn=Array.isArray;function sn(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+nr(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function bo(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gc(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(T(92));if(Mn(r)){if(1<r.length)throw Error(T(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:nr(r)}}function Gd(t,e){var r=nr(e.value),n=nr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Kc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Kd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eo(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Kd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rs,Jd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rs=Rs||document.createElement("div"),Rs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function es(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Wn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E0=["Webkit","ms","Moz","O"];Object.keys(Wn).forEach(function(t){E0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wn[e]=Wn[t]})});function Qd(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Wn.hasOwnProperty(t)&&Wn[t]?(""+e).trim():e+"px"}function Yd(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Qd(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var k0=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ko(t,e){if(e){if(k0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function So(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jo=null;function zl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Co=null,an=null,on=null;function Jc(t){if(t=Ss(t)){if(typeof Co!="function")throw Error(T(280));var e=t.stateNode;e&&(e=la(e),Co(t.stateNode,t.type,e))}}function Xd(t){an?on?on.push(t):on=[t]:an=t}function Zd(){if(an){var t=an,e=on;if(on=an=null,Jc(t),e)for(t=0;t<e.length;t++)Jc(e[t])}}function ef(t,e){return t(e)}function tf(){}var Ma=!1;function rf(t,e,r){if(Ma)return t(e,r);Ma=!0;try{return ef(t,e,r)}finally{Ma=!1,(an!==null||on!==null)&&(tf(),Zd())}}function ts(t,e){var r=t.stateNode;if(r===null)return null;var n=la(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(T(231,e,typeof r));return r}var No=!1;if(Tt)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){No=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{No=!1}function S0(t,e,r,n,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Vn=!1,bi=null,Ei=!1,To=null,j0={onError:function(t){Vn=!0,bi=t}};function C0(t,e,r,n,s,i,a,o,l){Vn=!1,bi=null,S0.apply(j0,arguments)}function N0(t,e,r,n,s,i,a,o,l){if(C0.apply(this,arguments),Vn){if(Vn){var u=bi;Vn=!1,bi=null}else throw Error(T(198));Ei||(Ei=!0,To=u)}}function Ir(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function nf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qc(t){if(Ir(t)!==t)throw Error(T(188))}function T0(t){var e=t.alternate;if(!e){if(e=Ir(t),e===null)throw Error(T(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Qc(s),t;if(i===n)return Qc(s),e;i=i.sibling}throw Error(T(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(T(189))}}if(r.alternate!==n)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?t:e}function sf(t){return t=T0(t),t!==null?af(t):null}function af(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=af(t);if(e!==null)return e;t=t.sibling}return null}var of=Ge.unstable_scheduleCallback,Yc=Ge.unstable_cancelCallback,O0=Ge.unstable_shouldYield,P0=Ge.unstable_requestPaint,ue=Ge.unstable_now,A0=Ge.unstable_getCurrentPriorityLevel,Fl=Ge.unstable_ImmediatePriority,lf=Ge.unstable_UserBlockingPriority,ki=Ge.unstable_NormalPriority,R0=Ge.unstable_LowPriority,cf=Ge.unstable_IdlePriority,sa=null,wt=null;function I0(t){if(wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(sa,t,void 0,(t.current.flags&128)===128)}catch{}}var dt=Math.clz32?Math.clz32:M0,$0=Math.log,L0=Math.LN2;function M0(t){return t>>>=0,t===0?32:31-($0(t)/L0|0)|0}var Is=64,$s=4194304;function Dn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Si(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=Dn(o):(i&=a,i!==0&&(n=Dn(i)))}else a=r&~s,a!==0?n=Dn(a):i!==0&&(n=Dn(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-dt(e),s=1<<r,n|=t[r],e&=~s;return n}function D0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U0(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-dt(i),o=1<<a,l=s[a];l===-1?(!(o&r)||o&n)&&(s[a]=D0(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function Oo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uf(){var t=Is;return Is<<=1,!(Is&4194240)&&(Is=64),t}function Da(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Es(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dt(e),t[e]=r}function z0(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-dt(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Bl(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-dt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Q=0;function df(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ff,ql,hf,pf,mf,Po=!1,Ls=[],Jt=null,Qt=null,Yt=null,rs=new Map,ns=new Map,Ft=[],F0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xc(t,e){switch(t){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":Yt=null;break;case"pointerover":case"pointerout":rs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ns.delete(e.pointerId)}}function On(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ss(e),e!==null&&ql(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function B0(t,e,r,n,s){switch(e){case"focusin":return Jt=On(Jt,t,e,r,n,s),!0;case"dragenter":return Qt=On(Qt,t,e,r,n,s),!0;case"mouseover":return Yt=On(Yt,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return rs.set(i,On(rs.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ns.set(i,On(ns.get(i)||null,t,e,r,n,s)),!0}return!1}function gf(t){var e=_r(t.target);if(e!==null){var r=Ir(e);if(r!==null){if(e=r.tag,e===13){if(e=nf(r),e!==null){t.blockedOn=e,mf(t.priority,function(){hf(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ai(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ao(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);jo=n,r.target.dispatchEvent(n),jo=null}else return e=Ss(r),e!==null&&ql(e),t.blockedOn=r,!1;e.shift()}return!0}function Zc(t,e,r){ai(t)&&r.delete(e)}function q0(){Po=!1,Jt!==null&&ai(Jt)&&(Jt=null),Qt!==null&&ai(Qt)&&(Qt=null),Yt!==null&&ai(Yt)&&(Yt=null),rs.forEach(Zc),ns.forEach(Zc)}function Pn(t,e){t.blockedOn===e&&(t.blockedOn=null,Po||(Po=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,q0)))}function ss(t){function e(s){return Pn(s,t)}if(0<Ls.length){Pn(Ls[0],t);for(var r=1;r<Ls.length;r++){var n=Ls[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Jt!==null&&Pn(Jt,t),Qt!==null&&Pn(Qt,t),Yt!==null&&Pn(Yt,t),rs.forEach(e),ns.forEach(e),r=0;r<Ft.length;r++)n=Ft[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ft.length&&(r=Ft[0],r.blockedOn===null);)gf(r),r.blockedOn===null&&Ft.shift()}var ln=It.ReactCurrentBatchConfig,ji=!0;function W0(t,e,r,n){var s=Q,i=ln.transition;ln.transition=null;try{Q=1,Wl(t,e,r,n)}finally{Q=s,ln.transition=i}}function V0(t,e,r,n){var s=Q,i=ln.transition;ln.transition=null;try{Q=4,Wl(t,e,r,n)}finally{Q=s,ln.transition=i}}function Wl(t,e,r,n){if(ji){var s=Ao(t,e,r,n);if(s===null)Ka(t,e,n,Ci,r),Xc(t,n);else if(B0(s,t,e,r,n))n.stopPropagation();else if(Xc(t,n),e&4&&-1<F0.indexOf(t)){for(;s!==null;){var i=Ss(s);if(i!==null&&ff(i),i=Ao(t,e,r,n),i===null&&Ka(t,e,n,Ci,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ka(t,e,n,null,r)}}var Ci=null;function Ao(t,e,r,n){if(Ci=null,t=zl(n),t=_r(t),t!==null)if(e=Ir(t),e===null)t=null;else if(r=e.tag,r===13){if(t=nf(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ci=t,null}function vf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A0()){case Fl:return 1;case lf:return 4;case ki:case R0:return 16;case cf:return 536870912;default:return 16}default:return 16}}var Ht=null,Vl=null,oi=null;function yf(){if(oi)return oi;var t,e=Vl,r=e.length,n,s="value"in Ht?Ht.value:Ht.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return oi=s.slice(t,1<n?1-n:void 0)}function li(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ms(){return!0}function eu(){return!1}function Je(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ms:eu,this.isPropagationStopped=eu,this}return le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),e}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hl=Je(En),ks=le({},En,{view:0,detail:0}),H0=Je(ks),Ua,za,An,ia=le({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==An&&(An&&t.type==="mousemove"?(Ua=t.screenX-An.screenX,za=t.screenY-An.screenY):za=Ua=0,An=t),Ua)},movementY:function(t){return"movementY"in t?t.movementY:za}}),tu=Je(ia),G0=le({},ia,{dataTransfer:0}),K0=Je(G0),J0=le({},ks,{relatedTarget:0}),Fa=Je(J0),Q0=le({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),Y0=Je(Q0),X0=le({},En,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Z0=Je(X0),eg=le({},En,{data:0}),ru=Je(eg),tg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ng={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ng[t])?!!e[t]:!1}function Gl(){return sg}var ig=le({},ks,{key:function(t){if(t.key){var e=tg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=li(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gl,charCode:function(t){return t.type==="keypress"?li(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?li(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ag=Je(ig),og=le({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nu=Je(og),lg=le({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gl}),cg=Je(lg),ug=le({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),dg=Je(ug),fg=le({},ia,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hg=Je(fg),pg=[9,13,27,32],Kl=Tt&&"CompositionEvent"in window,Hn=null;Tt&&"documentMode"in document&&(Hn=document.documentMode);var mg=Tt&&"TextEvent"in window&&!Hn,xf=Tt&&(!Kl||Hn&&8<Hn&&11>=Hn),su=" ",iu=!1;function wf(t,e){switch(t){case"keyup":return pg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _f(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kr=!1;function gg(t,e){switch(t){case"compositionend":return _f(e);case"keypress":return e.which!==32?null:(iu=!0,su);case"textInput":return t=e.data,t===su&&iu?null:t;default:return null}}function vg(t,e){if(Kr)return t==="compositionend"||!Kl&&wf(t,e)?(t=yf(),oi=Vl=Ht=null,Kr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xf&&e.locale!=="ko"?null:e.data;default:return null}}var yg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function au(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yg[t.type]:e==="textarea"}function bf(t,e,r,n){Xd(n),e=Ni(e,"onChange"),0<e.length&&(r=new Hl("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Gn=null,is=null;function xg(t){Rf(t,0)}function aa(t){var e=Yr(t);if(Vd(e))return t}function wg(t,e){if(t==="change")return e}var Ef=!1;if(Tt){var Ba;if(Tt){var qa="oninput"in document;if(!qa){var ou=document.createElement("div");ou.setAttribute("oninput","return;"),qa=typeof ou.oninput=="function"}Ba=qa}else Ba=!1;Ef=Ba&&(!document.documentMode||9<document.documentMode)}function lu(){Gn&&(Gn.detachEvent("onpropertychange",kf),is=Gn=null)}function kf(t){if(t.propertyName==="value"&&aa(is)){var e=[];bf(e,is,t,zl(t)),rf(xg,e)}}function _g(t,e,r){t==="focusin"?(lu(),Gn=e,is=r,Gn.attachEvent("onpropertychange",kf)):t==="focusout"&&lu()}function bg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aa(is)}function Eg(t,e){if(t==="click")return aa(e)}function kg(t,e){if(t==="input"||t==="change")return aa(e)}function Sg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ht=typeof Object.is=="function"?Object.is:Sg;function as(t,e){if(ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!po.call(e,s)||!ht(t[s],e[s]))return!1}return!0}function cu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uu(t,e){var r=cu(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cu(r)}}function Sf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Sf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jf(){for(var t=window,e=_i();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=_i(t.document)}return e}function Jl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jg(t){var e=jf(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Sf(r.ownerDocument.documentElement,r)){if(n!==null&&Jl(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=uu(r,i);var a=uu(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Cg=Tt&&"documentMode"in document&&11>=document.documentMode,Jr=null,Ro=null,Kn=null,Io=!1;function du(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Io||Jr==null||Jr!==_i(n)||(n=Jr,"selectionStart"in n&&Jl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Kn&&as(Kn,n)||(Kn=n,n=Ni(Ro,"onSelect"),0<n.length&&(e=new Hl("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Jr)))}function Ds(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Qr={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionend:Ds("Transition","TransitionEnd")},Wa={},Cf={};Tt&&(Cf=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function oa(t){if(Wa[t])return Wa[t];if(!Qr[t])return t;var e=Qr[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Cf)return Wa[t]=e[r];return t}var Nf=oa("animationend"),Tf=oa("animationiteration"),Of=oa("animationstart"),Pf=oa("transitionend"),Af=new Map,fu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(t,e){Af.set(t,e),Rr(e,[t])}for(var Va=0;Va<fu.length;Va++){var Ha=fu[Va],Ng=Ha.toLowerCase(),Tg=Ha[0].toUpperCase()+Ha.slice(1);ar(Ng,"on"+Tg)}ar(Nf,"onAnimationEnd");ar(Tf,"onAnimationIteration");ar(Of,"onAnimationStart");ar("dblclick","onDoubleClick");ar("focusin","onFocus");ar("focusout","onBlur");ar(Pf,"onTransitionEnd");hn("onMouseEnter",["mouseout","mouseover"]);hn("onMouseLeave",["mouseout","mouseover"]);hn("onPointerEnter",["pointerout","pointerover"]);hn("onPointerLeave",["pointerout","pointerover"]);Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Un="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Og=new Set("cancel close invalid load scroll toggle".split(" ").concat(Un));function hu(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,N0(n,e,void 0,t),t.currentTarget=null}function Rf(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;hu(s,o,u),i=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;hu(s,o,u),i=l}}}if(Ei)throw t=To,Ei=!1,To=null,t}function te(t,e){var r=e[Uo];r===void 0&&(r=e[Uo]=new Set);var n=t+"__bubble";r.has(n)||(If(e,t,2,!1),r.add(n))}function Ga(t,e,r){var n=0;e&&(n|=4),If(r,t,n,e)}var Us="_reactListening"+Math.random().toString(36).slice(2);function os(t){if(!t[Us]){t[Us]=!0,zd.forEach(function(r){r!=="selectionchange"&&(Og.has(r)||Ga(r,!1,t),Ga(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Us]||(e[Us]=!0,Ga("selectionchange",!1,e))}}function If(t,e,r,n){switch(vf(e)){case 1:var s=W0;break;case 4:s=V0;break;default:s=Wl}r=s.bind(null,e,r,t),s=void 0,!No||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Ka(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=_r(o),a===null)return;if(l=a.tag,l===5||l===6){n=i=a;continue e}o=o.parentNode}}n=n.return}rf(function(){var u=i,d=zl(r),f=[];e:{var h=Af.get(t);if(h!==void 0){var m=Hl,y=t;switch(t){case"keypress":if(li(r)===0)break e;case"keydown":case"keyup":m=ag;break;case"focusin":y="focus",m=Fa;break;case"focusout":y="blur",m=Fa;break;case"beforeblur":case"afterblur":m=Fa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=K0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=cg;break;case Nf:case Tf:case Of:m=Y0;break;case Pf:m=dg;break;case"scroll":m=H0;break;case"wheel":m=hg;break;case"copy":case"cut":case"paste":m=Z0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=nu}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?h!==null?h+"Capture":null:h;x=[];for(var g=u,p;g!==null;){p=g;var w=p.stateNode;if(p.tag===5&&w!==null&&(p=w,v!==null&&(w=ts(g,v),w!=null&&x.push(ls(g,w,p)))),_)break;g=g.return}0<x.length&&(h=new m(h,y,null,r,d),f.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&r!==jo&&(y=r.relatedTarget||r.fromElement)&&(_r(y)||y[Ot]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=u,y=y?_r(y):null,y!==null&&(_=Ir(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(x=tu,w="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=nu,w="onPointerLeave",v="onPointerEnter",g="pointer"),_=m==null?h:Yr(m),p=y==null?h:Yr(y),h=new x(w,g+"leave",m,r,d),h.target=_,h.relatedTarget=p,w=null,_r(d)===u&&(x=new x(v,g+"enter",y,r,d),x.target=p,x.relatedTarget=_,w=x),_=w,m&&y)t:{for(x=m,v=y,g=0,p=x;p;p=Lr(p))g++;for(p=0,w=v;w;w=Lr(w))p++;for(;0<g-p;)x=Lr(x),g--;for(;0<p-g;)v=Lr(v),p--;for(;g--;){if(x===v||v!==null&&x===v.alternate)break t;x=Lr(x),v=Lr(v)}x=null}else x=null;m!==null&&pu(f,h,m,x,!1),y!==null&&_!==null&&pu(f,_,y,x,!0)}}e:{if(h=u?Yr(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var k=wg;else if(au(h))if(Ef)k=kg;else{k=bg;var S=_g}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=Eg);if(k&&(k=k(t,u))){bf(f,k,r,d);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&_o(h,"number",h.value)}switch(S=u?Yr(u):window,t){case"focusin":(au(S)||S.contentEditable==="true")&&(Jr=S,Ro=u,Kn=null);break;case"focusout":Kn=Ro=Jr=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,du(f,r,d);break;case"selectionchange":if(Cg)break;case"keydown":case"keyup":du(f,r,d)}var j;if(Kl)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Kr?wf(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(xf&&r.locale!=="ko"&&(Kr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Kr&&(j=yf()):(Ht=d,Vl="value"in Ht?Ht.value:Ht.textContent,Kr=!0)),S=Ni(u,E),0<S.length&&(E=new ru(E,t,null,r,d),f.push({event:E,listeners:S}),j?E.data=j:(j=_f(r),j!==null&&(E.data=j)))),(j=mg?gg(t,r):vg(t,r))&&(u=Ni(u,"onBeforeInput"),0<u.length&&(d=new ru("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}Rf(f,e)})}function ls(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Ni(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ts(t,r),i!=null&&n.unshift(ls(t,i,s)),i=ts(t,e),i!=null&&n.push(ls(t,i,s))),t=t.return}return n}function Lr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pu(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,s?(l=ts(r,i),l!=null&&a.unshift(ls(r,l,o))):s||(l=ts(r,i),l!=null&&a.push(ls(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Pg=/\r\n?/g,Ag=/\u0000|\uFFFD/g;function mu(t){return(typeof t=="string"?t:""+t).replace(Pg,`
`).replace(Ag,"")}function zs(t,e,r){if(e=mu(e),mu(t)!==e&&r)throw Error(T(425))}function Ti(){}var $o=null,Lo=null;function Mo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Do=typeof setTimeout=="function"?setTimeout:void 0,Rg=typeof clearTimeout=="function"?clearTimeout:void 0,gu=typeof Promise=="function"?Promise:void 0,Ig=typeof queueMicrotask=="function"?queueMicrotask:typeof gu<"u"?function(t){return gu.resolve(null).then(t).catch($g)}:Do;function $g(t){setTimeout(function(){throw t})}function Ja(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),ss(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ss(e)}function Xt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var kn=Math.random().toString(36).slice(2),yt="__reactFiber$"+kn,cs="__reactProps$"+kn,Ot="__reactContainer$"+kn,Uo="__reactEvents$"+kn,Lg="__reactListeners$"+kn,Mg="__reactHandles$"+kn;function _r(t){var e=t[yt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ot]||r[yt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=vu(t);t!==null;){if(r=t[yt])return r;t=vu(t)}return e}t=r,r=t.parentNode}return null}function Ss(t){return t=t[yt]||t[Ot],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function la(t){return t[cs]||null}var zo=[],Xr=-1;function or(t){return{current:t}}function re(t){0>Xr||(t.current=zo[Xr],zo[Xr]=null,Xr--)}function ee(t,e){Xr++,zo[Xr]=t.current,t.current=e}var sr={},Te=or(sr),De=or(!1),Cr=sr;function pn(t,e){var r=t.type.contextTypes;if(!r)return sr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ue(t){return t=t.childContextTypes,t!=null}function Oi(){re(De),re(Te)}function yu(t,e,r){if(Te.current!==sr)throw Error(T(168));ee(Te,e),ee(De,r)}function $f(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(T(108,_0(t)||"Unknown",s));return le({},r,n)}function Pi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sr,Cr=Te.current,ee(Te,t),ee(De,De.current),!0}function xu(t,e,r){var n=t.stateNode;if(!n)throw Error(T(169));r?(t=$f(t,e,Cr),n.__reactInternalMemoizedMergedChildContext=t,re(De),re(Te),ee(Te,t)):re(De),ee(De,r)}var St=null,ca=!1,Qa=!1;function Lf(t){St===null?St=[t]:St.push(t)}function Dg(t){ca=!0,Lf(t)}function lr(){if(!Qa&&St!==null){Qa=!0;var t=0,e=Q;try{var r=St;for(Q=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}St=null,ca=!1}catch(s){throw St!==null&&(St=St.slice(t+1)),of(Fl,lr),s}finally{Q=e,Qa=!1}}return null}var Zr=[],en=0,Ai=null,Ri=0,Qe=[],Ye=0,Nr=null,jt=1,Ct="";function pr(t,e){Zr[en++]=Ri,Zr[en++]=Ai,Ai=t,Ri=e}function Mf(t,e,r){Qe[Ye++]=jt,Qe[Ye++]=Ct,Qe[Ye++]=Nr,Nr=t;var n=jt;t=Ct;var s=32-dt(n)-1;n&=~(1<<s),r+=1;var i=32-dt(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,jt=1<<32-dt(e)+s|r<<s|n,Ct=i+t}else jt=1<<i|r<<s|n,Ct=t}function Ql(t){t.return!==null&&(pr(t,1),Mf(t,1,0))}function Yl(t){for(;t===Ai;)Ai=Zr[--en],Zr[en]=null,Ri=Zr[--en],Zr[en]=null;for(;t===Nr;)Nr=Qe[--Ye],Qe[Ye]=null,Ct=Qe[--Ye],Qe[Ye]=null,jt=Qe[--Ye],Qe[Ye]=null}var He=null,We=null,ie=!1,ct=null;function Df(t,e){var r=Xe(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function wu(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,He=t,We=Xt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,He=t,We=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Nr!==null?{id:jt,overflow:Ct}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Xe(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,He=t,We=null,!0):!1;default:return!1}}function Fo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bo(t){if(ie){var e=We;if(e){var r=e;if(!wu(t,e)){if(Fo(t))throw Error(T(418));e=Xt(r.nextSibling);var n=He;e&&wu(t,e)?Df(n,r):(t.flags=t.flags&-4097|2,ie=!1,He=t)}}else{if(Fo(t))throw Error(T(418));t.flags=t.flags&-4097|2,ie=!1,He=t}}}function _u(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;He=t}function Fs(t){if(t!==He)return!1;if(!ie)return _u(t),ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mo(t.type,t.memoizedProps)),e&&(e=We)){if(Fo(t))throw Uf(),Error(T(418));for(;e;)Df(t,e),e=Xt(e.nextSibling)}if(_u(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){We=Xt(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}We=null}}else We=He?Xt(t.stateNode.nextSibling):null;return!0}function Uf(){for(var t=We;t;)t=Xt(t.nextSibling)}function mn(){We=He=null,ie=!1}function Xl(t){ct===null?ct=[t]:ct.push(t)}var Ug=It.ReactCurrentBatchConfig;function Rn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var n=r.stateNode}if(!n)throw Error(T(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,t))}return t}function Bs(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bu(t){var e=t._init;return e(t._payload)}function zf(t){function e(v,g){if(t){var p=v.deletions;p===null?(v.deletions=[g],v.flags|=16):p.push(g)}}function r(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=rr(v,g),v.index=0,v.sibling=null,v}function i(v,g,p){return v.index=p,t?(p=v.alternate,p!==null?(p=p.index,p<g?(v.flags|=2,g):p):(v.flags|=2,g)):(v.flags|=1048576,g)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,g,p,w){return g===null||g.tag!==6?(g=no(p,v.mode,w),g.return=v,g):(g=s(g,p),g.return=v,g)}function l(v,g,p,w){var k=p.type;return k===Gr?d(v,g,p.props.children,w,p.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ut&&bu(k)===g.type)?(w=s(g,p.props),w.ref=Rn(v,g,p),w.return=v,w):(w=mi(p.type,p.key,p.props,null,v.mode,w),w.ref=Rn(v,g,p),w.return=v,w)}function u(v,g,p,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==p.containerInfo||g.stateNode.implementation!==p.implementation?(g=so(p,v.mode,w),g.return=v,g):(g=s(g,p.children||[]),g.return=v,g)}function d(v,g,p,w,k){return g===null||g.tag!==7?(g=jr(p,v.mode,w,k),g.return=v,g):(g=s(g,p),g.return=v,g)}function f(v,g,p){if(typeof g=="string"&&g!==""||typeof g=="number")return g=no(""+g,v.mode,p),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ps:return p=mi(g.type,g.key,g.props,null,v.mode,p),p.ref=Rn(v,null,g),p.return=v,p;case Hr:return g=so(g,v.mode,p),g.return=v,g;case Ut:var w=g._init;return f(v,w(g._payload),p)}if(Mn(g)||Nn(g))return g=jr(g,v.mode,p,null),g.return=v,g;Bs(v,g)}return null}function h(v,g,p,w){var k=g!==null?g.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return k!==null?null:o(v,g,""+p,w);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ps:return p.key===k?l(v,g,p,w):null;case Hr:return p.key===k?u(v,g,p,w):null;case Ut:return k=p._init,h(v,g,k(p._payload),w)}if(Mn(p)||Nn(p))return k!==null?null:d(v,g,p,w,null);Bs(v,p)}return null}function m(v,g,p,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(p)||null,o(g,v,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ps:return v=v.get(w.key===null?p:w.key)||null,l(g,v,w,k);case Hr:return v=v.get(w.key===null?p:w.key)||null,u(g,v,w,k);case Ut:var S=w._init;return m(v,g,p,S(w._payload),k)}if(Mn(w)||Nn(w))return v=v.get(p)||null,d(g,v,w,k,null);Bs(g,w)}return null}function y(v,g,p,w){for(var k=null,S=null,j=g,E=g=0,P=null;j!==null&&E<p.length;E++){j.index>E?(P=j,j=null):P=j.sibling;var B=h(v,j,p[E],w);if(B===null){j===null&&(j=P);break}t&&j&&B.alternate===null&&e(v,j),g=i(B,g,E),S===null?k=B:S.sibling=B,S=B,j=P}if(E===p.length)return r(v,j),ie&&pr(v,E),k;if(j===null){for(;E<p.length;E++)j=f(v,p[E],w),j!==null&&(g=i(j,g,E),S===null?k=j:S.sibling=j,S=j);return ie&&pr(v,E),k}for(j=n(v,j);E<p.length;E++)P=m(j,v,E,p[E],w),P!==null&&(t&&P.alternate!==null&&j.delete(P.key===null?E:P.key),g=i(P,g,E),S===null?k=P:S.sibling=P,S=P);return t&&j.forEach(function(C){return e(v,C)}),ie&&pr(v,E),k}function x(v,g,p,w){var k=Nn(p);if(typeof k!="function")throw Error(T(150));if(p=k.call(p),p==null)throw Error(T(151));for(var S=k=null,j=g,E=g=0,P=null,B=p.next();j!==null&&!B.done;E++,B=p.next()){j.index>E?(P=j,j=null):P=j.sibling;var C=h(v,j,B.value,w);if(C===null){j===null&&(j=P);break}t&&j&&C.alternate===null&&e(v,j),g=i(C,g,E),S===null?k=C:S.sibling=C,S=C,j=P}if(B.done)return r(v,j),ie&&pr(v,E),k;if(j===null){for(;!B.done;E++,B=p.next())B=f(v,B.value,w),B!==null&&(g=i(B,g,E),S===null?k=B:S.sibling=B,S=B);return ie&&pr(v,E),k}for(j=n(v,j);!B.done;E++,B=p.next())B=m(j,v,E,B.value,w),B!==null&&(t&&B.alternate!==null&&j.delete(B.key===null?E:B.key),g=i(B,g,E),S===null?k=B:S.sibling=B,S=B);return t&&j.forEach(function(O){return e(v,O)}),ie&&pr(v,E),k}function _(v,g,p,w){if(typeof p=="object"&&p!==null&&p.type===Gr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Ps:e:{for(var k=p.key,S=g;S!==null;){if(S.key===k){if(k=p.type,k===Gr){if(S.tag===7){r(v,S.sibling),g=s(S,p.props.children),g.return=v,v=g;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ut&&bu(k)===S.type){r(v,S.sibling),g=s(S,p.props),g.ref=Rn(v,S,p),g.return=v,v=g;break e}r(v,S);break}else e(v,S);S=S.sibling}p.type===Gr?(g=jr(p.props.children,v.mode,w,p.key),g.return=v,v=g):(w=mi(p.type,p.key,p.props,null,v.mode,w),w.ref=Rn(v,g,p),w.return=v,v=w)}return a(v);case Hr:e:{for(S=p.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===p.containerInfo&&g.stateNode.implementation===p.implementation){r(v,g.sibling),g=s(g,p.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else e(v,g);g=g.sibling}g=so(p,v.mode,w),g.return=v,v=g}return a(v);case Ut:return S=p._init,_(v,g,S(p._payload),w)}if(Mn(p))return y(v,g,p,w);if(Nn(p))return x(v,g,p,w);Bs(v,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,g!==null&&g.tag===6?(r(v,g.sibling),g=s(g,p),g.return=v,v=g):(r(v,g),g=no(p,v.mode,w),g.return=v,v=g),a(v)):r(v,g)}return _}var gn=zf(!0),Ff=zf(!1),Ii=or(null),$i=null,tn=null,Zl=null;function ec(){Zl=tn=$i=null}function tc(t){var e=Ii.current;re(Ii),t._currentValue=e}function qo(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function cn(t,e){$i=t,Zl=tn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Me=!0),t.firstContext=null)}function et(t){var e=t._currentValue;if(Zl!==t)if(t={context:t,memoizedValue:e,next:null},tn===null){if($i===null)throw Error(T(308));tn=t,$i.dependencies={lanes:0,firstContext:t}}else tn=tn.next=t;return e}var br=null;function rc(t){br===null?br=[t]:br.push(t)}function Bf(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,rc(e)):(r.next=s.next,s.next=r),e.interleaved=r,Pt(t,n)}function Pt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var zt=!1;function nc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zt(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,J&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Pt(t,r)}return s=n.interleaved,s===null?(e.next=e,rc(n)):(e.next=s.next,s.next=e),n.interleaved=e,Pt(t,r)}function ci(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Bl(t,r)}}function Eu(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Li(t,e,r,n){var s=t.updateQueue;zt=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;a=0,d=u=l=null,o=i;do{var h=o.lane,m=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,x=o;switch(h=e,m=r,x.tag){case 1:if(y=x.payload,typeof y=="function"){f=y.call(m,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,h=typeof y=="function"?y.call(m,f,h):y,h==null)break e;f=le({},f,h);break e;case 2:zt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=m,l=f):d=d.next=m,a|=h;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;h=o,o=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Or|=a,t.lanes=a,t.memoizedState=f}}function ku(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(T(191,s));s.call(n)}}}var js={},_t=or(js),us=or(js),ds=or(js);function Er(t){if(t===js)throw Error(T(174));return t}function sc(t,e){switch(ee(ds,e),ee(us,t),ee(_t,js),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Eo(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Eo(e,t)}re(_t),ee(_t,e)}function vn(){re(_t),re(us),re(ds)}function Wf(t){Er(ds.current);var e=Er(_t.current),r=Eo(e,t.type);e!==r&&(ee(us,t),ee(_t,r))}function ic(t){us.current===t&&(re(_t),re(us))}var ae=or(0);function Mi(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ya=[];function ac(){for(var t=0;t<Ya.length;t++)Ya[t]._workInProgressVersionPrimary=null;Ya.length=0}var ui=It.ReactCurrentDispatcher,Xa=It.ReactCurrentBatchConfig,Tr=0,oe=null,pe=null,ve=null,Di=!1,Jn=!1,fs=0,zg=0;function Se(){throw Error(T(321))}function oc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ht(t[r],e[r]))return!1;return!0}function lc(t,e,r,n,s,i){if(Tr=i,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ui.current=t===null||t.memoizedState===null?Wg:Vg,t=r(n,s),Jn){i=0;do{if(Jn=!1,fs=0,25<=i)throw Error(T(301));i+=1,ve=pe=null,e.updateQueue=null,ui.current=Hg,t=r(n,s)}while(Jn)}if(ui.current=Ui,e=pe!==null&&pe.next!==null,Tr=0,ve=pe=oe=null,Di=!1,e)throw Error(T(300));return t}function cc(){var t=fs!==0;return fs=0,t}function gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?oe.memoizedState=ve=t:ve=ve.next=t,ve}function tt(){if(pe===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=pe.next;var e=ve===null?oe.memoizedState:ve.next;if(e!==null)ve=e,pe=t;else{if(t===null)throw Error(T(310));pe=t,t={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},ve===null?oe.memoizedState=ve=t:ve=ve.next=t}return ve}function hs(t,e){return typeof e=="function"?e(t):e}function Za(t){var e=tt(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=pe,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,l=null,u=i;do{var d=u.lane;if((Tr&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,a=n):l=l.next=f,oe.lanes|=d,Or|=d}u=u.next}while(u!==null&&u!==i);l===null?a=n:l.next=o,ht(n,e.memoizedState)||(Me=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,oe.lanes|=i,Or|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function eo(t){var e=tt(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);ht(i,e.memoizedState)||(Me=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Vf(){}function Hf(t,e){var r=oe,n=tt(),s=e(),i=!ht(n.memoizedState,s);if(i&&(n.memoizedState=s,Me=!0),n=n.queue,uc(Jf.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||ve!==null&&ve.memoizedState.tag&1){if(r.flags|=2048,ps(9,Kf.bind(null,r,n,s,e),void 0,null),ye===null)throw Error(T(349));Tr&30||Gf(r,e,s)}return s}function Gf(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Kf(t,e,r,n){e.value=r,e.getSnapshot=n,Qf(e)&&Yf(t)}function Jf(t,e,r){return r(function(){Qf(e)&&Yf(t)})}function Qf(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ht(t,r)}catch{return!0}}function Yf(t){var e=Pt(t,1);e!==null&&ft(e,t,1,-1)}function Su(t){var e=gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:t},e.queue=t,t=t.dispatch=qg.bind(null,oe,t),[e.memoizedState,t]}function ps(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Xf(){return tt().memoizedState}function di(t,e,r,n){var s=gt();oe.flags|=t,s.memoizedState=ps(1|e,r,void 0,n===void 0?null:n)}function ua(t,e,r,n){var s=tt();n=n===void 0?null:n;var i=void 0;if(pe!==null){var a=pe.memoizedState;if(i=a.destroy,n!==null&&oc(n,a.deps)){s.memoizedState=ps(e,r,i,n);return}}oe.flags|=t,s.memoizedState=ps(1|e,r,i,n)}function ju(t,e){return di(8390656,8,t,e)}function uc(t,e){return ua(2048,8,t,e)}function Zf(t,e){return ua(4,2,t,e)}function eh(t,e){return ua(4,4,t,e)}function th(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rh(t,e,r){return r=r!=null?r.concat([t]):null,ua(4,4,th.bind(null,e,t),r)}function dc(){}function nh(t,e){var r=tt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&oc(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function sh(t,e){var r=tt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&oc(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function ih(t,e,r){return Tr&21?(ht(r,e)||(r=uf(),oe.lanes|=r,Or|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Me=!0),t.memoizedState=r)}function Fg(t,e){var r=Q;Q=r!==0&&4>r?r:4,t(!0);var n=Xa.transition;Xa.transition={};try{t(!1),e()}finally{Q=r,Xa.transition=n}}function ah(){return tt().memoizedState}function Bg(t,e,r){var n=tr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},oh(t))lh(e,r);else if(r=Bf(t,e,r,n),r!==null){var s=Pe();ft(r,t,n,s),ch(r,e,n)}}function qg(t,e,r){var n=tr(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(oh(t))lh(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,ht(o,a)){var l=e.interleaved;l===null?(s.next=s,rc(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=Bf(t,e,s,n),r!==null&&(s=Pe(),ft(r,t,n,s),ch(r,e,n))}}function oh(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function lh(t,e){Jn=Di=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function ch(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Bl(t,r)}}var Ui={readContext:et,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},Wg={readContext:et,useCallback:function(t,e){return gt().memoizedState=[t,e===void 0?null:e],t},useContext:et,useEffect:ju,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,di(4194308,4,th.bind(null,e,t),r)},useLayoutEffect:function(t,e){return di(4194308,4,t,e)},useInsertionEffect:function(t,e){return di(4,2,t,e)},useMemo:function(t,e){var r=gt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=gt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Bg.bind(null,oe,t),[n.memoizedState,t]},useRef:function(t){var e=gt();return t={current:t},e.memoizedState=t},useState:Su,useDebugValue:dc,useDeferredValue:function(t){return gt().memoizedState=t},useTransition:function(){var t=Su(!1),e=t[0];return t=Fg.bind(null,t[1]),gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=oe,s=gt();if(ie){if(r===void 0)throw Error(T(407));r=r()}else{if(r=e(),ye===null)throw Error(T(349));Tr&30||Gf(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,ju(Jf.bind(null,n,i,t),[t]),n.flags|=2048,ps(9,Kf.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=gt(),e=ye.identifierPrefix;if(ie){var r=Ct,n=jt;r=(n&~(1<<32-dt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=fs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=zg++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Vg={readContext:et,useCallback:nh,useContext:et,useEffect:uc,useImperativeHandle:rh,useInsertionEffect:Zf,useLayoutEffect:eh,useMemo:sh,useReducer:Za,useRef:Xf,useState:function(){return Za(hs)},useDebugValue:dc,useDeferredValue:function(t){var e=tt();return ih(e,pe.memoizedState,t)},useTransition:function(){var t=Za(hs)[0],e=tt().memoizedState;return[t,e]},useMutableSource:Vf,useSyncExternalStore:Hf,useId:ah,unstable_isNewReconciler:!1},Hg={readContext:et,useCallback:nh,useContext:et,useEffect:uc,useImperativeHandle:rh,useInsertionEffect:Zf,useLayoutEffect:eh,useMemo:sh,useReducer:eo,useRef:Xf,useState:function(){return eo(hs)},useDebugValue:dc,useDeferredValue:function(t){var e=tt();return pe===null?e.memoizedState=t:ih(e,pe.memoizedState,t)},useTransition:function(){var t=eo(hs)[0],e=tt().memoizedState;return[t,e]},useMutableSource:Vf,useSyncExternalStore:Hf,useId:ah,unstable_isNewReconciler:!1};function it(t,e){if(t&&t.defaultProps){e=le({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Wo(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:le({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var da={isMounted:function(t){return(t=t._reactInternals)?Ir(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Pe(),s=tr(t),i=Nt(n,s);i.payload=e,r!=null&&(i.callback=r),e=Zt(t,i,s),e!==null&&(ft(e,t,s,n),ci(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Pe(),s=tr(t),i=Nt(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Zt(t,i,s),e!==null&&(ft(e,t,s,n),ci(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Pe(),n=tr(t),s=Nt(r,n);s.tag=2,e!=null&&(s.callback=e),e=Zt(t,s,n),e!==null&&(ft(e,t,n,r),ci(e,t,n))}};function Cu(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!as(r,n)||!as(s,i):!0}function uh(t,e,r){var n=!1,s=sr,i=e.contextType;return typeof i=="object"&&i!==null?i=et(i):(s=Ue(e)?Cr:Te.current,n=e.contextTypes,i=(n=n!=null)?pn(t,s):sr),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=da,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Nu(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&da.enqueueReplaceState(e,e.state,null)}function Vo(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},nc(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=et(i):(i=Ue(e)?Cr:Te.current,s.context=pn(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Wo(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&da.enqueueReplaceState(s,s.state,null),Li(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function yn(t,e){try{var r="",n=e;do r+=w0(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function to(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Ho(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Gg=typeof WeakMap=="function"?WeakMap:Map;function dh(t,e,r){r=Nt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Fi||(Fi=!0,rl=n),Ho(t,e)},r}function fh(t,e,r){r=Nt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Ho(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ho(t,e),typeof n!="function"&&(er===null?er=new Set([this]):er.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Tu(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Gg;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=ov.bind(null,t,e,r),e.then(t,t))}function Ou(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pu(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Nt(-1,1),e.tag=2,Zt(r,e,1))),r.lanes|=1),t)}var Kg=It.ReactCurrentOwner,Me=!1;function Oe(t,e,r,n){e.child=t===null?Ff(e,null,r,n):gn(e,t.child,r,n)}function Au(t,e,r,n,s){r=r.render;var i=e.ref;return cn(e,s),n=lc(t,e,r,n,i,s),r=cc(),t!==null&&!Me?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,At(t,e,s)):(ie&&r&&Ql(e),e.flags|=1,Oe(t,e,n,s),e.child)}function Ru(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!xc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,hh(t,e,i,n,s)):(t=mi(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:as,r(a,n)&&t.ref===e.ref)return At(t,e,s)}return e.flags|=1,t=rr(i,n),t.ref=e.ref,t.return=e,e.child=t}function hh(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(as(i,n)&&t.ref===e.ref)if(Me=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Me=!0);else return e.lanes=t.lanes,At(t,e,s)}return Go(t,e,r,n,s)}function ph(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(nn,Be),Be|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ee(nn,Be),Be|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ee(nn,Be),Be|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,ee(nn,Be),Be|=n;return Oe(t,e,s,r),e.child}function mh(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Go(t,e,r,n,s){var i=Ue(r)?Cr:Te.current;return i=pn(e,i),cn(e,s),r=lc(t,e,r,n,i,s),n=cc(),t!==null&&!Me?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,At(t,e,s)):(ie&&n&&Ql(e),e.flags|=1,Oe(t,e,r,s),e.child)}function Iu(t,e,r,n,s){if(Ue(r)){var i=!0;Pi(e)}else i=!1;if(cn(e,s),e.stateNode===null)fi(t,e),uh(e,r,n),Vo(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=et(u):(u=Ue(r)?Cr:Te.current,u=pn(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&Nu(e,a,n,u),zt=!1;var h=e.memoizedState;a.state=h,Li(e,n,a,s),l=e.memoizedState,o!==n||h!==l||De.current||zt?(typeof d=="function"&&(Wo(e,r,d,n),l=e.memoizedState),(o=zt||Cu(e,r,o,n,h,l,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,qf(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:it(e.type,o),a.props=u,f=e.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=et(l):(l=Ue(r)?Cr:Te.current,l=pn(e,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||h!==l)&&Nu(e,a,n,l),zt=!1,h=e.memoizedState,a.state=h,Li(e,n,a,s);var y=e.memoizedState;o!==f||h!==y||De.current||zt?(typeof m=="function"&&(Wo(e,r,m,n),y=e.memoizedState),(u=zt||Cu(e,r,u,n,h,y,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Ko(t,e,r,n,i,s)}function Ko(t,e,r,n,s,i){mh(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&xu(e,r,!1),At(t,e,i);n=e.stateNode,Kg.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=gn(e,t.child,null,i),e.child=gn(e,null,o,i)):Oe(t,e,o,i),e.memoizedState=n.state,s&&xu(e,r,!0),e.child}function gh(t){var e=t.stateNode;e.pendingContext?yu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yu(t,e.context,!1),sc(t,e.containerInfo)}function $u(t,e,r,n,s){return mn(),Xl(s),e.flags|=256,Oe(t,e,r,n),e.child}var Jo={dehydrated:null,treeContext:null,retryLane:0};function Qo(t){return{baseLanes:t,cachePool:null,transitions:null}}function vh(t,e,r){var n=e.pendingProps,s=ae.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ee(ae,s&1),t===null)return Bo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=pa(a,n,0,null),t=jr(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qo(r),e.memoizedState=Jo,t):fc(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return Jg(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=rr(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=rr(o,i):(i=jr(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?Qo(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=Jo,n}return i=t.child,t=i.sibling,n=rr(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function fc(t,e){return e=pa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qs(t,e,r,n){return n!==null&&Xl(n),gn(e,t.child,null,r),t=fc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Jg(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=to(Error(T(422))),qs(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=pa({mode:"visible",children:n.children},s,0,null),i=jr(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&gn(e,t.child,null,a),e.child.memoizedState=Qo(a),e.memoizedState=Jo,i);if(!(e.mode&1))return qs(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(T(419)),n=to(i,n,void 0),qs(t,e,a,n)}if(o=(a&t.childLanes)!==0,Me||o){if(n=ye,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Pt(t,s),ft(n,t,s,-1))}return yc(),n=to(Error(T(421))),qs(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lv.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,We=Xt(s.nextSibling),He=e,ie=!0,ct=null,t!==null&&(Qe[Ye++]=jt,Qe[Ye++]=Ct,Qe[Ye++]=Nr,jt=t.id,Ct=t.overflow,Nr=e),e=fc(e,n.children),e.flags|=4096,e)}function Lu(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),qo(t.return,e,r)}function ro(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function yh(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Oe(t,e,n.children,r),n=ae.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lu(t,r,e);else if(t.tag===19)Lu(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ee(ae,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Mi(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),ro(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Mi(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}ro(e,!0,r,null,i);break;case"together":ro(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function At(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Or|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,r=rr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=rr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Qg(t,e,r){switch(e.tag){case 3:gh(e),mn();break;case 5:Wf(e);break;case 1:Ue(e.type)&&Pi(e);break;case 4:sc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ee(Ii,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ee(ae,ae.current&1),e.flags|=128,null):r&e.child.childLanes?vh(t,e,r):(ee(ae,ae.current&1),t=At(t,e,r),t!==null?t.sibling:null);ee(ae,ae.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return yh(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ee(ae,ae.current),n)break;return null;case 22:case 23:return e.lanes=0,ph(t,e,r)}return At(t,e,r)}var xh,Yo,wh,_h;xh=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Yo=function(){};wh=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Er(_t.current);var i=null;switch(r){case"input":s=xo(t,s),n=xo(t,n),i=[];break;case"select":s=le({},s,{value:void 0}),n=le({},n,{value:void 0}),i=[];break;case"textarea":s=bo(t,s),n=bo(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ti)}ko(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(o=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zn.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&te("scroll",t),i||o===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};_h=function(t,e,r,n){r!==n&&(e.flags|=4)};function In(t,e){if(!ie)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function je(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Yg(t,e,r){var n=e.pendingProps;switch(Yl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(e),null;case 1:return Ue(e.type)&&Oi(),je(e),null;case 3:return n=e.stateNode,vn(),re(De),re(Te),ac(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Fs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ct!==null&&(il(ct),ct=null))),Yo(t,e),je(e),null;case 5:ic(e);var s=Er(ds.current);if(r=e.type,t!==null&&e.stateNode!=null)wh(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(T(166));return je(e),null}if(t=Er(_t.current),Fs(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[yt]=e,n[cs]=i,t=(e.mode&1)!==0,r){case"dialog":te("cancel",n),te("close",n);break;case"iframe":case"object":case"embed":te("load",n);break;case"video":case"audio":for(s=0;s<Un.length;s++)te(Un[s],n);break;case"source":te("error",n);break;case"img":case"image":case"link":te("error",n),te("load",n);break;case"details":te("toggle",n);break;case"input":Vc(n,i),te("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},te("invalid",n);break;case"textarea":Gc(n,i),te("invalid",n)}ko(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&zs(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&zs(n.textContent,o,t),s=["children",""+o]):Zn.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&te("scroll",n)}switch(r){case"input":As(n),Hc(n,i,!0);break;case"textarea":As(n),Kc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ti)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Kd(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[yt]=e,t[cs]=n,xh(t,e,!1,!1),e.stateNode=t;e:{switch(a=So(r,n),r){case"dialog":te("cancel",t),te("close",t),s=n;break;case"iframe":case"object":case"embed":te("load",t),s=n;break;case"video":case"audio":for(s=0;s<Un.length;s++)te(Un[s],t);s=n;break;case"source":te("error",t),s=n;break;case"img":case"image":case"link":te("error",t),te("load",t),s=n;break;case"details":te("toggle",t),s=n;break;case"input":Vc(t,n),s=xo(t,n),te("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=le({},n,{value:void 0}),te("invalid",t);break;case"textarea":Gc(t,n),s=bo(t,n),te("invalid",t);break;default:s=n}ko(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?Yd(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Jd(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&es(t,l):typeof l=="number"&&es(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zn.hasOwnProperty(i)?l!=null&&i==="onScroll"&&te("scroll",t):l!=null&&Ll(t,i,l,a))}switch(r){case"input":As(t),Hc(t,n,!1);break;case"textarea":As(t),Kc(t);break;case"option":n.value!=null&&t.setAttribute("value",""+nr(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?sn(t,!!n.multiple,i,!1):n.defaultValue!=null&&sn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ti)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return je(e),null;case 6:if(t&&e.stateNode!=null)_h(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(T(166));if(r=Er(ds.current),Er(_t.current),Fs(e)){if(n=e.stateNode,r=e.memoizedProps,n[yt]=e,(i=n.nodeValue!==r)&&(t=He,t!==null))switch(t.tag){case 3:zs(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zs(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[yt]=e,e.stateNode=n}return je(e),null;case 13:if(re(ae),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ie&&We!==null&&e.mode&1&&!(e.flags&128))Uf(),mn(),e.flags|=98560,i=!1;else if(i=Fs(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(T(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[yt]=e}else mn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;je(e),i=!1}else ct!==null&&(il(ct),ct=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ae.current&1?ge===0&&(ge=3):yc())),e.updateQueue!==null&&(e.flags|=4),je(e),null);case 4:return vn(),Yo(t,e),t===null&&os(e.stateNode.containerInfo),je(e),null;case 10:return tc(e.type._context),je(e),null;case 17:return Ue(e.type)&&Oi(),je(e),null;case 19:if(re(ae),i=e.memoizedState,i===null)return je(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)In(i,!1);else{if(ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Mi(t),a!==null){for(e.flags|=128,In(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ee(ae,ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&ue()>xn&&(e.flags|=128,n=!0,In(i,!1),e.lanes=4194304)}else{if(!n)if(t=Mi(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),In(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ie)return je(e),null}else 2*ue()-i.renderingStartTime>xn&&r!==1073741824&&(e.flags|=128,n=!0,In(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ue(),e.sibling=null,r=ae.current,ee(ae,n?r&1|2:r&1),e):(je(e),null);case 22:case 23:return vc(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Be&1073741824&&(je(e),e.subtreeFlags&6&&(e.flags|=8192)):je(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function Xg(t,e){switch(Yl(e),e.tag){case 1:return Ue(e.type)&&Oi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vn(),re(De),re(Te),ac(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ic(e),null;case 13:if(re(ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));mn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return re(ae),null;case 4:return vn(),null;case 10:return tc(e.type._context),null;case 22:case 23:return vc(),null;case 24:return null;default:return null}}var Ws=!1,Ce=!1,Zg=typeof WeakSet=="function"?WeakSet:Set,A=null;function rn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ce(t,e,n)}else r.current=null}function Xo(t,e,r){try{r()}catch(n){ce(t,e,n)}}var Mu=!1;function ev(t,e){if($o=ji,t=jf(),Jl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var m;f!==r||s!==0&&f.nodeType!==3||(o=a+s),f!==i||n!==0&&f.nodeType!==3||(l=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===t)break t;if(h===r&&++u===s&&(o=a),h===i&&++d===n&&(l=a),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Lo={focusedElem:t,selectionRange:r},ji=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,_=y.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:it(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(w){ce(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return y=Mu,Mu=!1,y}function Qn(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xo(e,r,i)}s=s.next}while(s!==n)}}function fa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Zo(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function bh(t){var e=t.alternate;e!==null&&(t.alternate=null,bh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yt],delete e[cs],delete e[Uo],delete e[Lg],delete e[Mg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Eh(t){return t.tag===5||t.tag===3||t.tag===4}function Du(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Eh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function el(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ti));else if(n!==4&&(t=t.child,t!==null))for(el(t,e,r),t=t.sibling;t!==null;)el(t,e,r),t=t.sibling}function tl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(tl(t,e,r),t=t.sibling;t!==null;)tl(t,e,r),t=t.sibling}var be=null,ot=!1;function Lt(t,e,r){for(r=r.child;r!==null;)kh(t,e,r),r=r.sibling}function kh(t,e,r){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(sa,r)}catch{}switch(r.tag){case 5:Ce||rn(r,e);case 6:var n=be,s=ot;be=null,Lt(t,e,r),be=n,ot=s,be!==null&&(ot?(t=be,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):be.removeChild(r.stateNode));break;case 18:be!==null&&(ot?(t=be,r=r.stateNode,t.nodeType===8?Ja(t.parentNode,r):t.nodeType===1&&Ja(t,r),ss(t)):Ja(be,r.stateNode));break;case 4:n=be,s=ot,be=r.stateNode.containerInfo,ot=!0,Lt(t,e,r),be=n,ot=s;break;case 0:case 11:case 14:case 15:if(!Ce&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Xo(r,e,a),s=s.next}while(s!==n)}Lt(t,e,r);break;case 1:if(!Ce&&(rn(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ce(r,e,o)}Lt(t,e,r);break;case 21:Lt(t,e,r);break;case 22:r.mode&1?(Ce=(n=Ce)||r.memoizedState!==null,Lt(t,e,r),Ce=n):Lt(t,e,r);break;default:Lt(t,e,r)}}function Uu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Zg),e.forEach(function(n){var s=cv.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function nt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:be=o.stateNode,ot=!1;break e;case 3:be=o.stateNode.containerInfo,ot=!0;break e;case 4:be=o.stateNode.containerInfo,ot=!0;break e}o=o.return}if(be===null)throw Error(T(160));kh(i,a,s),be=null,ot=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){ce(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Sh(e,t),e=e.sibling}function Sh(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nt(e,t),mt(t),n&4){try{Qn(3,t,t.return),fa(3,t)}catch(x){ce(t,t.return,x)}try{Qn(5,t,t.return)}catch(x){ce(t,t.return,x)}}break;case 1:nt(e,t),mt(t),n&512&&r!==null&&rn(r,r.return);break;case 5:if(nt(e,t),mt(t),n&512&&r!==null&&rn(r,r.return),t.flags&32){var s=t.stateNode;try{es(s,"")}catch(x){ce(t,t.return,x)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Hd(s,i),So(o,a);var u=So(o,i);for(a=0;a<l.length;a+=2){var d=l[a],f=l[a+1];d==="style"?Yd(s,f):d==="dangerouslySetInnerHTML"?Jd(s,f):d==="children"?es(s,f):Ll(s,d,f,u)}switch(o){case"input":wo(s,i);break;case"textarea":Gd(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?sn(s,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?sn(s,!!i.multiple,i.defaultValue,!0):sn(s,!!i.multiple,i.multiple?[]:"",!1))}s[cs]=i}catch(x){ce(t,t.return,x)}}break;case 6:if(nt(e,t),mt(t),n&4){if(t.stateNode===null)throw Error(T(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){ce(t,t.return,x)}}break;case 3:if(nt(e,t),mt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ss(e.containerInfo)}catch(x){ce(t,t.return,x)}break;case 4:nt(e,t),mt(t);break;case 13:nt(e,t),mt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(mc=ue())),n&4&&Uu(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Ce=(u=Ce)||d,nt(e,t),Ce=u):nt(e,t),mt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(A=t,d=t.child;d!==null;){for(f=A=d;A!==null;){switch(h=A,m=h.child,h.tag){case 0:case 11:case 14:case 15:Qn(4,h,h.return);break;case 1:rn(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){ce(n,r,x)}}break;case 5:rn(h,h.return);break;case 22:if(h.memoizedState!==null){Fu(f);continue}}m!==null?(m.return=h,A=m):Fu(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Qd("display",a))}catch(x){ce(t,t.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){ce(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nt(e,t),mt(t),n&4&&Uu(t);break;case 21:break;default:nt(e,t),mt(t)}}function mt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Eh(r)){var n=r;break e}r=r.return}throw Error(T(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(es(s,""),n.flags&=-33);var i=Du(t);tl(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Du(t);el(t,o,a);break;default:throw Error(T(161))}}catch(l){ce(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tv(t,e,r){A=t,jh(t)}function jh(t,e,r){for(var n=(t.mode&1)!==0;A!==null;){var s=A,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Ws;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Ce;o=Ws;var u=Ce;if(Ws=a,(Ce=l)&&!u)for(A=s;A!==null;)a=A,l=a.child,a.tag===22&&a.memoizedState!==null?Bu(s):l!==null?(l.return=a,A=l):Bu(s);for(;i!==null;)A=i,jh(i),i=i.sibling;A=s,Ws=o,Ce=u}zu(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,A=i):zu(t)}}function zu(t){for(;A!==null;){var e=A;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ce||fa(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ce)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:it(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ku(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ku(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ss(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Ce||e.flags&512&&Zo(e)}catch(h){ce(e,e.return,h)}}if(e===t){A=null;break}if(r=e.sibling,r!==null){r.return=e.return,A=r;break}A=e.return}}function Fu(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var r=e.sibling;if(r!==null){r.return=e.return,A=r;break}A=e.return}}function Bu(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{fa(4,e)}catch(l){ce(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){ce(e,s,l)}}var i=e.return;try{Zo(e)}catch(l){ce(e,i,l)}break;case 5:var a=e.return;try{Zo(e)}catch(l){ce(e,a,l)}}}catch(l){ce(e,e.return,l)}if(e===t){A=null;break}var o=e.sibling;if(o!==null){o.return=e.return,A=o;break}A=e.return}}var rv=Math.ceil,zi=It.ReactCurrentDispatcher,hc=It.ReactCurrentOwner,Ze=It.ReactCurrentBatchConfig,J=0,ye=null,he=null,Ee=0,Be=0,nn=or(0),ge=0,ms=null,Or=0,ha=0,pc=0,Yn=null,$e=null,mc=0,xn=1/0,kt=null,Fi=!1,rl=null,er=null,Vs=!1,Gt=null,Bi=0,Xn=0,nl=null,hi=-1,pi=0;function Pe(){return J&6?ue():hi!==-1?hi:hi=ue()}function tr(t){return t.mode&1?J&2&&Ee!==0?Ee&-Ee:Ug.transition!==null?(pi===0&&(pi=uf()),pi):(t=Q,t!==0||(t=window.event,t=t===void 0?16:vf(t.type)),t):1}function ft(t,e,r,n){if(50<Xn)throw Xn=0,nl=null,Error(T(185));Es(t,r,n),(!(J&2)||t!==ye)&&(t===ye&&(!(J&2)&&(ha|=r),ge===4&&Bt(t,Ee)),ze(t,n),r===1&&J===0&&!(e.mode&1)&&(xn=ue()+500,ca&&lr()))}function ze(t,e){var r=t.callbackNode;U0(t,e);var n=Si(t,t===ye?Ee:0);if(n===0)r!==null&&Yc(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Yc(r),e===1)t.tag===0?Dg(qu.bind(null,t)):Lf(qu.bind(null,t)),Ig(function(){!(J&6)&&lr()}),r=null;else{switch(df(n)){case 1:r=Fl;break;case 4:r=lf;break;case 16:r=ki;break;case 536870912:r=cf;break;default:r=ki}r=Ih(r,Ch.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Ch(t,e){if(hi=-1,pi=0,J&6)throw Error(T(327));var r=t.callbackNode;if(un()&&t.callbackNode!==r)return null;var n=Si(t,t===ye?Ee:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=qi(t,n);else{e=n;var s=J;J|=2;var i=Th();(ye!==t||Ee!==e)&&(kt=null,xn=ue()+500,Sr(t,e));do try{iv();break}catch(o){Nh(t,o)}while(!0);ec(),zi.current=i,J=s,he!==null?e=0:(ye=null,Ee=0,e=ge)}if(e!==0){if(e===2&&(s=Oo(t),s!==0&&(n=s,e=sl(t,s))),e===1)throw r=ms,Sr(t,0),Bt(t,n),ze(t,ue()),r;if(e===6)Bt(t,n);else{if(s=t.current.alternate,!(n&30)&&!nv(s)&&(e=qi(t,n),e===2&&(i=Oo(t),i!==0&&(n=i,e=sl(t,i))),e===1))throw r=ms,Sr(t,0),Bt(t,n),ze(t,ue()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(T(345));case 2:mr(t,$e,kt);break;case 3:if(Bt(t,n),(n&130023424)===n&&(e=mc+500-ue(),10<e)){if(Si(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Pe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Do(mr.bind(null,t,$e,kt),e);break}mr(t,$e,kt);break;case 4:if(Bt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-dt(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=ue()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*rv(n/1960))-n,10<n){t.timeoutHandle=Do(mr.bind(null,t,$e,kt),n);break}mr(t,$e,kt);break;case 5:mr(t,$e,kt);break;default:throw Error(T(329))}}}return ze(t,ue()),t.callbackNode===r?Ch.bind(null,t):null}function sl(t,e){var r=Yn;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=qi(t,e),t!==2&&(e=$e,$e=r,e!==null&&il(e)),t}function il(t){$e===null?$e=t:$e.push.apply($e,t)}function nv(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ht(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bt(t,e){for(e&=~pc,e&=~ha,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-dt(e),n=1<<r;t[r]=-1,e&=~n}}function qu(t){if(J&6)throw Error(T(327));un();var e=Si(t,0);if(!(e&1))return ze(t,ue()),null;var r=qi(t,e);if(t.tag!==0&&r===2){var n=Oo(t);n!==0&&(e=n,r=sl(t,n))}if(r===1)throw r=ms,Sr(t,0),Bt(t,e),ze(t,ue()),r;if(r===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mr(t,$e,kt),ze(t,ue()),null}function gc(t,e){var r=J;J|=1;try{return t(e)}finally{J=r,J===0&&(xn=ue()+500,ca&&lr())}}function Pr(t){Gt!==null&&Gt.tag===0&&!(J&6)&&un();var e=J;J|=1;var r=Ze.transition,n=Q;try{if(Ze.transition=null,Q=1,t)return t()}finally{Q=n,Ze.transition=r,J=e,!(J&6)&&lr()}}function vc(){Be=nn.current,re(nn)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Rg(r)),he!==null)for(r=he.return;r!==null;){var n=r;switch(Yl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Oi();break;case 3:vn(),re(De),re(Te),ac();break;case 5:ic(n);break;case 4:vn();break;case 13:re(ae);break;case 19:re(ae);break;case 10:tc(n.type._context);break;case 22:case 23:vc()}r=r.return}if(ye=t,he=t=rr(t.current,null),Ee=Be=e,ge=0,ms=null,pc=ha=Or=0,$e=Yn=null,br!==null){for(e=0;e<br.length;e++)if(r=br[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}br=null}return t}function Nh(t,e){do{var r=he;try{if(ec(),ui.current=Ui,Di){for(var n=oe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Di=!1}if(Tr=0,ve=pe=oe=null,Jn=!1,fs=0,hc.current=null,r===null||r.return===null){ge=1,ms=e,he=null;break}e:{var i=t,a=r.return,o=r,l=e;if(e=Ee,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Ou(a);if(m!==null){m.flags&=-257,Pu(m,a,o,i,e),m.mode&1&&Tu(i,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){Tu(i,u,e),yc();break e}l=Error(T(426))}}else if(ie&&o.mode&1){var _=Ou(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Pu(_,a,o,i,e),Xl(yn(l,o));break e}}i=l=yn(l,o),ge!==4&&(ge=2),Yn===null?Yn=[i]:Yn.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=dh(i,l,e);Eu(i,v);break e;case 1:o=l;var g=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(er===null||!er.has(p)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=fh(i,o,e);Eu(i,w);break e}}i=i.return}while(i!==null)}Ph(r)}catch(k){e=k,he===r&&r!==null&&(he=r=r.return);continue}break}while(!0)}function Th(){var t=zi.current;return zi.current=Ui,t===null?Ui:t}function yc(){(ge===0||ge===3||ge===2)&&(ge=4),ye===null||!(Or&268435455)&&!(ha&268435455)||Bt(ye,Ee)}function qi(t,e){var r=J;J|=2;var n=Th();(ye!==t||Ee!==e)&&(kt=null,Sr(t,e));do try{sv();break}catch(s){Nh(t,s)}while(!0);if(ec(),J=r,zi.current=n,he!==null)throw Error(T(261));return ye=null,Ee=0,ge}function sv(){for(;he!==null;)Oh(he)}function iv(){for(;he!==null&&!O0();)Oh(he)}function Oh(t){var e=Rh(t.alternate,t,Be);t.memoizedProps=t.pendingProps,e===null?Ph(t):he=e,hc.current=null}function Ph(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Xg(r,e),r!==null){r.flags&=32767,he=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ge=6,he=null;return}}else if(r=Yg(r,e,Be),r!==null){he=r;return}if(e=e.sibling,e!==null){he=e;return}he=e=t}while(e!==null);ge===0&&(ge=5)}function mr(t,e,r){var n=Q,s=Ze.transition;try{Ze.transition=null,Q=1,av(t,e,r,n)}finally{Ze.transition=s,Q=n}return null}function av(t,e,r,n){do un();while(Gt!==null);if(J&6)throw Error(T(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(z0(t,i),t===ye&&(he=ye=null,Ee=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Vs||(Vs=!0,Ih(ki,function(){return un(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ze.transition,Ze.transition=null;var a=Q;Q=1;var o=J;J|=4,hc.current=null,ev(t,r),Sh(r,t),jg(Lo),ji=!!$o,Lo=$o=null,t.current=r,tv(r),P0(),J=o,Q=a,Ze.transition=i}else t.current=r;if(Vs&&(Vs=!1,Gt=t,Bi=s),i=t.pendingLanes,i===0&&(er=null),I0(r.stateNode),ze(t,ue()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Fi)throw Fi=!1,t=rl,rl=null,t;return Bi&1&&t.tag!==0&&un(),i=t.pendingLanes,i&1?t===nl?Xn++:(Xn=0,nl=t):Xn=0,lr(),null}function un(){if(Gt!==null){var t=df(Bi),e=Ze.transition,r=Q;try{if(Ze.transition=null,Q=16>t?16:t,Gt===null)var n=!1;else{if(t=Gt,Gt=null,Bi=0,J&6)throw Error(T(331));var s=J;for(J|=4,A=t.current;A!==null;){var i=A,a=i.child;if(A.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(A=u;A!==null;){var d=A;switch(d.tag){case 0:case 11:case 15:Qn(8,d,i)}var f=d.child;if(f!==null)f.return=d,A=f;else for(;A!==null;){d=A;var h=d.sibling,m=d.return;if(bh(d),d===u){A=null;break}if(h!==null){h.return=m,A=h;break}A=m}}}var y=i.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}A=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,A=a;else e:for(;A!==null;){if(i=A,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qn(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,A=v;break e}A=i.return}}var g=t.current;for(A=g;A!==null;){a=A;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,A=p;else e:for(a=g;A!==null;){if(o=A,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:fa(9,o)}}catch(k){ce(o,o.return,k)}if(o===a){A=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,A=w;break e}A=o.return}}if(J=s,lr(),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(sa,t)}catch{}n=!0}return n}finally{Q=r,Ze.transition=e}}return!1}function Wu(t,e,r){e=yn(r,e),e=dh(t,e,1),t=Zt(t,e,1),e=Pe(),t!==null&&(Es(t,1,e),ze(t,e))}function ce(t,e,r){if(t.tag===3)Wu(t,t,r);else for(;e!==null;){if(e.tag===3){Wu(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(er===null||!er.has(n))){t=yn(r,t),t=fh(e,t,1),e=Zt(e,t,1),t=Pe(),e!==null&&(Es(e,1,t),ze(e,t));break}}e=e.return}}function ov(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Pe(),t.pingedLanes|=t.suspendedLanes&r,ye===t&&(Ee&r)===r&&(ge===4||ge===3&&(Ee&130023424)===Ee&&500>ue()-mc?Sr(t,0):pc|=r),ze(t,e)}function Ah(t,e){e===0&&(t.mode&1?(e=$s,$s<<=1,!($s&130023424)&&($s=4194304)):e=1);var r=Pe();t=Pt(t,e),t!==null&&(Es(t,e,r),ze(t,r))}function lv(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Ah(t,r)}function cv(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(e),Ah(t,r)}var Rh;Rh=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||De.current)Me=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Me=!1,Qg(t,e,r);Me=!!(t.flags&131072)}else Me=!1,ie&&e.flags&1048576&&Mf(e,Ri,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;fi(t,e),t=e.pendingProps;var s=pn(e,Te.current);cn(e,r),s=lc(null,e,n,t,s,r);var i=cc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(n)?(i=!0,Pi(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,nc(e),s.updater=da,e.stateNode=s,s._reactInternals=e,Vo(e,n,t,r),e=Ko(null,e,n,!0,i,r)):(e.tag=0,ie&&i&&Ql(e),Oe(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(fi(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=dv(n),t=it(n,t),s){case 0:e=Go(null,e,n,t,r);break e;case 1:e=Iu(null,e,n,t,r);break e;case 11:e=Au(null,e,n,t,r);break e;case 14:e=Ru(null,e,n,it(n.type,t),r);break e}throw Error(T(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:it(n,s),Go(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:it(n,s),Iu(t,e,n,s,r);case 3:e:{if(gh(e),t===null)throw Error(T(387));n=e.pendingProps,i=e.memoizedState,s=i.element,qf(t,e),Li(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=yn(Error(T(423)),e),e=$u(t,e,n,r,s);break e}else if(n!==s){s=yn(Error(T(424)),e),e=$u(t,e,n,r,s);break e}else for(We=Xt(e.stateNode.containerInfo.firstChild),He=e,ie=!0,ct=null,r=Ff(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(mn(),n===s){e=At(t,e,r);break e}Oe(t,e,n,r)}e=e.child}return e;case 5:return Wf(e),t===null&&Bo(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Mo(n,s)?a=null:i!==null&&Mo(n,i)&&(e.flags|=32),mh(t,e),Oe(t,e,a,r),e.child;case 6:return t===null&&Bo(e),null;case 13:return vh(t,e,r);case 4:return sc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=gn(e,null,n,r):Oe(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:it(n,s),Au(t,e,n,s,r);case 7:return Oe(t,e,e.pendingProps,r),e.child;case 8:return Oe(t,e,e.pendingProps.children,r),e.child;case 12:return Oe(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ee(Ii,n._currentValue),n._currentValue=a,i!==null)if(ht(i.value,a)){if(i.children===s.children&&!De.current){e=At(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Nt(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),qo(i.return,r,e),o.lanes|=r;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(T(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),qo(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Oe(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,cn(e,r),s=et(s),n=n(s),e.flags|=1,Oe(t,e,n,r),e.child;case 14:return n=e.type,s=it(n,e.pendingProps),s=it(n.type,s),Ru(t,e,n,s,r);case 15:return hh(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:it(n,s),fi(t,e),e.tag=1,Ue(n)?(t=!0,Pi(e)):t=!1,cn(e,r),uh(e,n,s),Vo(e,n,s,r),Ko(null,e,n,!0,t,r);case 19:return yh(t,e,r);case 22:return ph(t,e,r)}throw Error(T(156,e.tag))};function Ih(t,e){return of(t,e)}function uv(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(t,e,r,n){return new uv(t,e,r,n)}function xc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dv(t){if(typeof t=="function")return xc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dl)return 11;if(t===Ul)return 14}return 2}function rr(t,e){var r=t.alternate;return r===null?(r=Xe(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function mi(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")xc(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Gr:return jr(r.children,s,i,e);case Ml:a=8,s|=8;break;case mo:return t=Xe(12,r,e,s|2),t.elementType=mo,t.lanes=i,t;case go:return t=Xe(13,r,e,s),t.elementType=go,t.lanes=i,t;case vo:return t=Xe(19,r,e,s),t.elementType=vo,t.lanes=i,t;case qd:return pa(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fd:a=10;break e;case Bd:a=9;break e;case Dl:a=11;break e;case Ul:a=14;break e;case Ut:a=16,n=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=Xe(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function jr(t,e,r,n){return t=Xe(7,t,n,e),t.lanes=r,t}function pa(t,e,r,n){return t=Xe(22,t,n,e),t.elementType=qd,t.lanes=r,t.stateNode={isHidden:!1},t}function no(t,e,r){return t=Xe(6,t,null,e),t.lanes=r,t}function so(t,e,r){return e=Xe(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fv(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Da(0),this.expirationTimes=Da(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Da(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wc(t,e,r,n,s,i,a,o,l){return t=new fv(t,e,r,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xe(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nc(i),t}function hv(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function $h(t){if(!t)return sr;t=t._reactInternals;e:{if(Ir(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var r=t.type;if(Ue(r))return $f(t,r,e)}return e}function Lh(t,e,r,n,s,i,a,o,l){return t=wc(r,n,!0,t,s,i,a,o,l),t.context=$h(null),r=t.current,n=Pe(),s=tr(r),i=Nt(n,s),i.callback=e??null,Zt(r,i,s),t.current.lanes=s,Es(t,s,n),ze(t,n),t}function ma(t,e,r,n){var s=e.current,i=Pe(),a=tr(s);return r=$h(r),e.context===null?e.context=r:e.pendingContext=r,e=Nt(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Zt(s,e,a),t!==null&&(ft(t,s,a,i),ci(t,s,a)),a}function Wi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function _c(t,e){Vu(t,e),(t=t.alternate)&&Vu(t,e)}function pv(){return null}var Mh=typeof reportError=="function"?reportError:function(t){console.error(t)};function bc(t){this._internalRoot=t}ga.prototype.render=bc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));ma(t,e,null,null)};ga.prototype.unmount=bc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pr(function(){ma(null,t,null,null)}),e[Ot]=null}};function ga(t){this._internalRoot=t}ga.prototype.unstable_scheduleHydration=function(t){if(t){var e=pf();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ft.length&&e!==0&&e<Ft[r].priority;r++);Ft.splice(r,0,t),r===0&&gf(t)}};function Ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function va(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hu(){}function mv(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Wi(a);i.call(u)}}var a=Lh(e,n,t,0,null,!1,!1,"",Hu);return t._reactRootContainer=a,t[Ot]=a.current,os(t.nodeType===8?t.parentNode:t),Pr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var u=Wi(l);o.call(u)}}var l=wc(t,0,!1,null,null,!1,!1,"",Hu);return t._reactRootContainer=l,t[Ot]=l.current,os(t.nodeType===8?t.parentNode:t),Pr(function(){ma(e,l,r,n)}),l}function ya(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=Wi(a);o.call(l)}}ma(e,a,t,s)}else a=mv(r,e,t,s,n);return Wi(a)}ff=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Dn(e.pendingLanes);r!==0&&(Bl(e,r|1),ze(e,ue()),!(J&6)&&(xn=ue()+500,lr()))}break;case 13:Pr(function(){var n=Pt(t,1);if(n!==null){var s=Pe();ft(n,t,1,s)}}),_c(t,1)}};ql=function(t){if(t.tag===13){var e=Pt(t,134217728);if(e!==null){var r=Pe();ft(e,t,134217728,r)}_c(t,134217728)}};hf=function(t){if(t.tag===13){var e=tr(t),r=Pt(t,e);if(r!==null){var n=Pe();ft(r,t,e,n)}_c(t,e)}};pf=function(){return Q};mf=function(t,e){var r=Q;try{return Q=t,e()}finally{Q=r}};Co=function(t,e,r){switch(e){case"input":if(wo(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=la(n);if(!s)throw Error(T(90));Vd(n),wo(n,s)}}}break;case"textarea":Gd(t,r);break;case"select":e=r.value,e!=null&&sn(t,!!r.multiple,e,!1)}};ef=gc;tf=Pr;var gv={usingClientEntryPoint:!1,Events:[Ss,Yr,la,Xd,Zd,gc]},$n={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vv={bundleType:$n.bundleType,version:$n.version,rendererPackageName:$n.rendererPackageName,rendererConfig:$n.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:It.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sf(t),t===null?null:t.stateNode},findFiberByHostInstance:$n.findFiberByHostInstance||pv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hs.isDisabled&&Hs.supportsFiber)try{sa=Hs.inject(vv),wt=Hs}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gv;Ke.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(e))throw Error(T(200));return hv(t,e,null,r)};Ke.createRoot=function(t,e){if(!Ec(t))throw Error(T(299));var r=!1,n="",s=Mh;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wc(t,1,!1,null,null,r,!1,n,s),t[Ot]=e.current,os(t.nodeType===8?t.parentNode:t),new bc(e)};Ke.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=sf(e),t=t===null?null:t.stateNode,t};Ke.flushSync=function(t){return Pr(t)};Ke.hydrate=function(t,e,r){if(!va(e))throw Error(T(200));return ya(null,t,e,!0,r)};Ke.hydrateRoot=function(t,e,r){if(!Ec(t))throw Error(T(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=Mh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=Lh(e,null,t,1,r??null,s,!1,i,a),t[Ot]=e.current,os(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new ga(e)};Ke.render=function(t,e,r){if(!va(e))throw Error(T(200));return ya(null,t,e,!1,r)};Ke.unmountComponentAtNode=function(t){if(!va(t))throw Error(T(40));return t._reactRootContainer?(Pr(function(){ya(null,null,t,!1,function(){t._reactRootContainer=null,t[Ot]=null})}),!0):!1};Ke.unstable_batchedUpdates=gc;Ke.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!va(r))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return ya(t,e,r,!1,n)};Ke.version="18.3.1-next-f1338f8080-20240426";function Dh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dh)}catch(t){console.error(t)}}Dh(),Md.exports=Ke;var yv=Md.exports,Gu=yv;ho.createRoot=Gu.createRoot,ho.hydrateRoot=Gu.hydrateRoot;let xv={data:""},wv=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||xv},_v=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,bv=/\/\*[^]*?\*\/|  +/g,Ku=/\n+/g,qt=(t,e)=>{let r="",n="",s="";for(let i in t){let a=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+a+";":n+=i[1]=="f"?qt(a,i):i+"{"+qt(a,i[1]=="k"?"":e)+"}":typeof a=="object"?n+=qt(a,e?e.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=qt.p?qt.p(i,a):i+":"+a+";")}return r+(e&&s?e+"{"+s+"}":s)+n},Et={},Uh=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+Uh(t[r]);return e}return t},Ev=(t,e,r,n,s)=>{let i=Uh(t),a=Et[i]||(Et[i]=(l=>{let u=0,d=11;for(;u<l.length;)d=101*d+l.charCodeAt(u++)>>>0;return"go"+d})(i));if(!Et[a]){let l=i!==t?t:(u=>{let d,f,h=[{}];for(;d=_v.exec(u.replace(bv,""));)d[4]?h.shift():d[3]?(f=d[3].replace(Ku," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(Ku," ").trim();return h[0]})(t);Et[a]=qt(s?{["@keyframes "+a]:l}:l,r?"":"."+a)}let o=r&&Et.g?Et.g:null;return r&&(Et.g=Et[a]),((l,u,d,f)=>{f?u.data=u.data.replace(f,l):u.data.indexOf(l)===-1&&(u.data=d?l+u.data:u.data+l)})(Et[a],e,n,o),a},kv=(t,e,r)=>t.reduce((n,s,i)=>{let a=e[i];if(a&&a.call){let o=a(r),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=l?"."+l:o&&typeof o=="object"?o.props?"":qt(o,""):o===!1?"":o}return n+s+(a??"")},"");function xa(t){let e=this||{},r=t.call?t(e.p):t;return Ev(r.unshift?r.raw?kv(r,[].slice.call(arguments,1),e.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):r,wv(e.target),e.g,e.o,e.k)}let zh,al,ol;xa.bind({g:1});let Rt=xa.bind({k:1});function Sv(t,e,r,n){qt.p=e,zh=t,al=r,ol=n}function cr(t,e){let r=this||{};return function(){let n=arguments;function s(i,a){let o=Object.assign({},i),l=o.className||s.className;r.p=Object.assign({theme:al&&al()},o),r.o=/ *go\d+/.test(l),o.className=xa.apply(r,n)+(l?" "+l:"");let u=t;return t[0]&&(u=o.as||t,delete o.as),ol&&u[0]&&ol(o),zh(u,o)}return s}}var jv=t=>typeof t=="function",Vi=(t,e)=>jv(t)?t(e):t,Cv=(()=>{let t=0;return()=>(++t).toString()})(),Fh=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Nv=20,kc="default",Bh=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return Bh(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},gi=[],qh={toasts:[],pausedAt:void 0,settings:{toastLimit:Nv}},xt={},Wh=(t,e=kc)=>{xt[e]=Bh(xt[e]||qh,t),gi.forEach(([r,n])=>{r===e&&n(xt[e])})},Vh=t=>Object.keys(xt).forEach(e=>Wh(t,e)),Tv=t=>Object.keys(xt).find(e=>xt[e].toasts.some(r=>r.id===t)),wa=(t=kc)=>e=>{Wh(e,t)},Ov={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Pv=(t={},e=kc)=>{let[r,n]=b.useState(xt[e]||qh),s=b.useRef(xt[e]);b.useEffect(()=>(s.current!==xt[e]&&n(xt[e]),gi.push([e,n]),()=>{let a=gi.findIndex(([o])=>o===e);a>-1&&gi.splice(a,1)}),[e]);let i=r.toasts.map(a=>{var o,l,u;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||Ov[a.type],style:{...t.style,...(u=t[a.type])==null?void 0:u.style,...a.style}}});return{...r,toasts:i}},Av=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Cv()}),Cs=t=>(e,r)=>{let n=Av(e,t,r);return wa(n.toasterId||Tv(n.id))({type:2,toast:n}),n.id},me=(t,e)=>Cs("blank")(t,e);me.error=Cs("error");me.success=Cs("success");me.loading=Cs("loading");me.custom=Cs("custom");me.dismiss=(t,e)=>{let r={type:3,toastId:t};e?wa(e)(r):Vh(r)};me.dismissAll=t=>me.dismiss(void 0,t);me.remove=(t,e)=>{let r={type:4,toastId:t};e?wa(e)(r):Vh(r)};me.removeAll=t=>me.remove(void 0,t);me.promise=(t,e,r)=>{let n=me.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Vi(e.success,s):void 0;return i?me.success(i,{id:n,...r,...r==null?void 0:r.success}):me.dismiss(n),s}).catch(s=>{let i=e.error?Vi(e.error,s):void 0;i?me.error(i,{id:n,...r,...r==null?void 0:r.error}):me.dismiss(n)}),t};var Rv=1e3,Iv=(t,e="default")=>{let{toasts:r,pausedAt:n}=Pv(t,e),s=b.useRef(new Map).current,i=b.useCallback((f,h=Rv)=>{if(s.has(f))return;let m=setTimeout(()=>{s.delete(f),a({type:4,toastId:f})},h);s.set(f,m)},[]);b.useEffect(()=>{if(n)return;let f=Date.now(),h=r.map(m=>{if(m.duration===1/0)return;let y=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(y<0){m.visible&&me.dismiss(m.id);return}return setTimeout(()=>me.dismiss(m.id,e),y)});return()=>{h.forEach(m=>m&&clearTimeout(m))}},[r,n,e]);let a=b.useCallback(wa(e),[e]),o=b.useCallback(()=>{a({type:5,time:Date.now()})},[a]),l=b.useCallback((f,h)=>{a({type:1,toast:{id:f,height:h}})},[a]),u=b.useCallback(()=>{n&&a({type:6,time:Date.now()})},[n,a]),d=b.useCallback((f,h)=>{let{reverseOrder:m=!1,gutter:y=8,defaultPosition:x}=h||{},_=r.filter(p=>(p.position||x)===(f.position||x)&&p.height),v=_.findIndex(p=>p.id===f.id),g=_.filter((p,w)=>w<v&&p.visible).length;return _.filter(p=>p.visible).slice(...m?[g+1]:[0,g]).reduce((p,w)=>p+(w.height||0)+y,0)},[r]);return b.useEffect(()=>{r.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let h=s.get(f.id);h&&(clearTimeout(h),s.delete(f.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:l,startPause:o,endPause:u,calculateOffset:d}}},$v=Rt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Lv=Rt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Mv=Rt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Dv=cr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$v} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Lv} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Mv} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Uv=Rt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zv=cr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Uv} 1s linear infinite;
`,Fv=Rt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Bv=Rt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,qv=cr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Fv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Bv} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Wv=cr("div")`
  position: absolute;
`,Vv=cr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Hv=Rt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Gv=cr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Hv} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Kv=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?b.createElement(Gv,null,e):e:r==="blank"?null:b.createElement(Vv,null,b.createElement(zv,{...n}),r!=="loading"&&b.createElement(Wv,null,r==="error"?b.createElement(Dv,{...n}):b.createElement(qv,{...n})))},Jv=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Qv=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Yv="0%{opacity:0;} 100%{opacity:1;}",Xv="0%{opacity:1;} 100%{opacity:0;}",Zv=cr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ey=cr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ty=(t,e)=>{let r=t.includes("top")?1:-1,[n,s]=Fh()?[Yv,Xv]:[Jv(r),Qv(r)];return{animation:e?`${Rt(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Rt(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ry=b.memo(({toast:t,position:e,style:r,children:n})=>{let s=t.height?ty(t.position||e||"top-center",t.visible):{opacity:0},i=b.createElement(Kv,{toast:t}),a=b.createElement(ey,{...t.ariaProps},Vi(t.message,t));return b.createElement(Zv,{className:t.className,style:{...s,...r,...t.style}},typeof n=="function"?n({icon:i,message:a}):b.createElement(b.Fragment,null,i,a))});Sv(b.createElement);var ny=({id:t,className:e,style:r,onHeightUpdate:n,children:s})=>{let i=b.useCallback(a=>{if(a){let o=()=>{let l=a.getBoundingClientRect().height;n(t,l)};o(),new MutationObserver(o).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return b.createElement("div",{ref:i,className:e,style:r},s)},sy=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Fh()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...s}},iy=xa`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Gs=16,ay=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:s,toasterId:i,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:u}=Iv(r,i);return b.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Gs,left:Gs,right:Gs,bottom:Gs,pointerEvents:"none",...a},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(d=>{let f=d.position||e,h=u.calculateOffset(d,{reverseOrder:t,gutter:n,defaultPosition:e}),m=sy(f,h);return b.createElement(ny,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?iy:"",style:m},d.type==="custom"?Vi(d.message,d):s?s(d):b.createElement(ry,{toast:d,position:f}))}))},Ks=me;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const r=b.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...u},d)=>b.createElement("svg",{ref:d,...oy,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${ly(t)}`,o].join(" "),...u},[...e.map(([f,h])=>b.createElement(f,h)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=G("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=G("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=G("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=G("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=G("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=G("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=G("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=G("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=G("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=G("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=G("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=G("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=G("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=G("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=G("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=G("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=G("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=G("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=G("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),U={log:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{console.error(...t)}};function Qh(t,e=new Date){const r=e.getTime()-new Date(t).getTime(),n=Math.floor(r/1e3),s=Math.floor(n/60),i=Math.floor(s/60),a=Math.floor(i/24);if(n<60)return`Hace ${n} seg`;if(s<60){const o=n%60;return o===0?`Hace ${s} min`:`Hace ${s} min ${o} seg`}if(i<24){const o=s%60;return o===0?`Hace ${i} h`:`Hace ${i} h ${o} min`}return a<7?`Hace ${a} da${a>1?"s":""}`:new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}function Yh(t){return t?t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"??"}function Xh(){const[t,e]=b.useState(new Date);return b.useEffect(()=>{const r=setInterval(()=>e(new Date),1e3);return()=>clearInterval(r)},[]),t}function Zh(t){return Math.round(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}function jy(){return Math.floor(1e5+Math.random()*9e5).toString()}function Cy(t){return{Pendiente:gs,Asignado:Hh,"En camino al retiro":Ey,"Producto retirado":Kt,Entregado:hy}[t]||gs}function ul(t){return t==="Producto retirado"?"Producto retirado, en camino":t}function zn(t){return t==="admin"||t==="empresarial"}function ep(t){return{empresarial:"CEO",admin:"Administrador",local:"Local"}[t]||t}function io(t,e){const r=e.find(n=>n.name===t);return(r==null?void 0:r.address)||""}async function Yu(t){if(!t||!t.trim()||((!window.google||!window.google.maps)&&await new Promise(e=>{let r=0;const n=30,s=setInterval(()=>{r++,(window.google&&window.google.maps&&window.google.maps.Geocoder||r>=n)&&(clearInterval(s),e())},100)}),!window.google||!window.google.maps||!window.google.maps.Geocoder))return null;try{const e=new window.google.maps.Geocoder;return new Promise(r=>{e.geocode({address:t},(n,s)=>{if(s==="OK"&&n&&n.length>0){const i=n[0].geometry.location;r({lat:i.lat(),lon:i.lng()})}else r(null)})})}catch{return null}}function Ny(t,e,r){var g;const n=(t==null?void 0:t.role)==="local"&&t.local,s=n?[t.local]:e.map(p=>p.name),i=n?t.local:((g=e[0])==null?void 0:g.name)||"",a=io(i,e),[o,l]=b.useState({clientName:"",selectedClientId:"",pickupAddress:a,deliveryAddress:"",local:i,suggestedPrice:"",notes:""}),[u,d]=b.useState(!1),f=b.useMemo(()=>{let p=r.filter(k=>k.local===o.local);if(!o.clientName.trim())return p;const w=o.clientName.toLowerCase();return p.filter(k=>k.name.toLowerCase().includes(w)||k.phone.includes(w)||k.address.toLowerCase().includes(w))},[r,o.clientName,o.local]),h=p=>{l(w=>({...w,selectedClientId:p.id,clientName:p.name,deliveryAddress:p.address})),d(!1)},m=p=>{l(w=>({...w,clientName:p,selectedClientId:"",deliveryAddress:w.selectedClientId?"":w.deliveryAddress})),d(p.trim().length>0)};b.useEffect(()=>{const p=w=>{w.target.closest(".formulario-crear-pedido-client-wrapper")||d(!1)};if(u)return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[u]),b.useEffect(()=>{n&&l(p=>({...p,local:t.local,pickupAddress:io(t.local,e)}))},[n,t==null?void 0:t.local,e]);const y=p=>{l(w=>({...w,local:p,pickupAddress:io(p,e)}))},x=p=>(p.preventDefault(),{clientName:o.clientName,selectedClientId:o.selectedClientId,pickupAddress:o.pickupAddress,deliveryAddress:o.deliveryAddress,local:o.local,suggestedPrice:parseFloat(o.suggestedPrice),notes:o.notes||void 0}),_=o.pickupAddress.trim()!==""&&o.deliveryAddress.trim()!==""&&o.suggestedPrice!==""&&parseFloat(o.suggestedPrice)>0;return{formData:o,showClientDropdown:u,filteredClients:f,isLocal:n,availableLocales:s,isValid:_,gridClass:s.length<=3?"formulario-crear-pedido-local-grid-3":s.length<=4?"formulario-crear-pedido-local-grid-4":"formulario-crear-pedido-local-grid-5",setFormData:l,setShowClientDropdown:d,handleSelectClient:h,handleClientNameChange:m,handleLocalChange:y,handleSubmit:x}}function Ty({onSubmit:t,onCancel:e,currentUser:r,localConfigs:n,clients:s}){const{formData:i,showClientDropdown:a,filteredClients:o,isLocal:l,availableLocales:u,isValid:d,gridClass:f,setFormData:h,setShowClientDropdown:m,handleSelectClient:y,handleClientNameChange:x,handleLocalChange:_,handleSubmit:v}=Ny(r,n,s),g=p=>{const w=v(p);w&&t(w)};return c.jsxs("div",{className:"formulario-crear-pedido-container",children:[c.jsxs("div",{className:"formulario-crear-pedido-header",children:[c.jsxs("div",{className:"formulario-crear-pedido-header-left",children:[c.jsx("div",{className:"formulario-crear-pedido-header-icon",children:c.jsx(Kt,{})}),c.jsxs("div",{children:[c.jsx("h2",{className:"formulario-crear-pedido-title",children:"Crear Nuevo Pedido"}),c.jsx("p",{className:"formulario-crear-pedido-subtitle",children:"Completa los detalles del pedido"})]})]}),c.jsx("button",{type:"button",onClick:e,className:"formulario-crear-pedido-close","aria-label":"Cerrar",children:c.jsx(rt,{})})]}),c.jsxs("form",{onSubmit:g,className:"formulario-crear-pedido",children:[c.jsxs("div",{className:"formulario-crear-pedido-group",children:[c.jsx("label",{htmlFor:"order-client",className:"formulario-crear-pedido-label",children:"Cliente (Opcional)"}),c.jsxs("div",{className:"formulario-crear-pedido-input-wrapper",children:[c.jsx(xe,{className:"formulario-crear-pedido-input-icon"}),c.jsxs("div",{className:"formulario-crear-pedido-client-wrapper",children:[c.jsx("input",{id:"order-client",type:"text",value:i.clientName,onChange:p=>x(p.target.value),onFocus:()=>m(!0),placeholder:"Escribe el nombre o selecciona un cliente",className:"formulario-crear-pedido-input"}),a&&o.length>0&&c.jsx("div",{className:"formulario-crear-pedido-client-dropdown",children:o.map(p=>c.jsx("button",{type:"button",onClick:()=>y(p),className:"formulario-crear-pedido-client-item",children:c.jsxs("div",{className:"formulario-crear-pedido-client-item-info",children:[c.jsx("p",{className:"formulario-crear-pedido-client-item-name",children:p.name}),c.jsxs("p",{className:"formulario-crear-pedido-client-item-details",children:[p.phone,"  ",p.address]})]})},p.id))})]})]})]}),c.jsxs("div",{className:"formulario-crear-pedido-group",children:[c.jsx("label",{htmlFor:"order-pickup",className:"formulario-crear-pedido-label",children:"Direccin de Retiro *"}),c.jsxs("div",{className:"formulario-crear-pedido-input-wrapper",children:[c.jsx(ir,{className:"formulario-crear-pedido-input-icon"}),c.jsx("input",{id:"order-pickup",type:"text",value:i.pickupAddress,onChange:p=>h({...i,pickupAddress:p.target.value}),placeholder:"Ej: Av. Principal 123, Local 5",className:"formulario-crear-pedido-input",required:!0})]})]}),c.jsxs("div",{className:"formulario-crear-pedido-group",children:[c.jsx("label",{htmlFor:"order-delivery",className:"formulario-crear-pedido-label",children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("span",{children:"Direccin de Entrega *"}),i.selectedClientId&&c.jsx("span",{className:"formulario-crear-pedido-client-badge",children:"Desde cliente"})]})}),c.jsxs("div",{className:"formulario-crear-pedido-input-wrapper",children:[c.jsx(_a,{className:"formulario-crear-pedido-input-icon"}),c.jsx("input",{id:"order-delivery",type:"text",value:i.deliveryAddress,onChange:p=>h({...i,deliveryAddress:p.target.value}),placeholder:"Ej: Calle Secundaria 456, Apto 10B",className:"formulario-crear-pedido-input",required:!0})]})]}),c.jsxs("div",{className:"formulario-crear-pedido-group",children:[c.jsx("label",{className:"formulario-crear-pedido-label",children:"Local de Retiro *"}),l?c.jsxs("div",{className:"formulario-crear-pedido-input-wrapper",children:[c.jsx(Ve,{className:"formulario-crear-pedido-input-icon"}),c.jsx("div",{className:"formulario-crear-pedido-local-display",children:r.local})]}):c.jsx("div",{className:`formulario-crear-pedido-local-grid ${f}`,children:u.map(p=>c.jsxs("button",{type:"button",onClick:()=>_(p),className:`formulario-crear-pedido-local-button ${i.local===p?"formulario-crear-pedido-local-button-active":"formulario-crear-pedido-local-button-inactive"}`,children:[c.jsx(Ve,{size:16}),p]},p))})]}),c.jsxs("div",{className:"formulario-crear-pedido-group",children:[c.jsx("label",{htmlFor:"order-price",className:"formulario-crear-pedido-label",children:"Precio Sugerido para el Repartidor *"}),c.jsxs("div",{className:"formulario-crear-pedido-input-wrapper",children:[c.jsx(Kh,{className:"formulario-crear-pedido-input-icon"}),c.jsx("input",{id:"order-price",type:"number",step:"0.01",min:"0",value:i.suggestedPrice,onChange:p=>h({...i,suggestedPrice:p.target.value}),placeholder:"0.00",className:"formulario-crear-pedido-input",required:!0})]})]}),c.jsxs("div",{className:"formulario-crear-pedido-group",children:[c.jsx("label",{htmlFor:"order-notes",className:"formulario-crear-pedido-label",children:"Notas Adicionales (Opcional)"}),c.jsxs("div",{className:"formulario-crear-pedido-input-wrapper",children:[c.jsx(py,{className:"formulario-crear-pedido-input-icon formulario-crear-pedido-textarea-icon"}),c.jsx("textarea",{id:"order-notes",value:i.notes,onChange:p=>h({...i,notes:p.target.value}),placeholder:"Instrucciones especiales, detalles del paquete, etc.",rows:3,className:"formulario-crear-pedido-textarea"})]})]}),c.jsxs("div",{className:"formulario-crear-pedido-actions",children:[c.jsx("button",{type:"button",onClick:e,className:"formulario-crear-pedido-button formulario-crear-pedido-button-cancel",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:!d,className:"formulario-crear-pedido-button formulario-crear-pedido-button-submit",children:"Crear Pedido"})]})]})]})}function Oy(t,e,r){var w;const n=(t==null?void 0:t.role)==="local"&&t.local,s=b.useMemo(()=>n?[t.local]:e.map(k=>k.name),[n,t==null?void 0:t.local,e]),i=n?t.local:(r==null?void 0:r.local)||((w=e[0])==null?void 0:w.name)||"",[a,o]=b.useState((r==null?void 0:r.name)||""),[l,u]=b.useState((r==null?void 0:r.phone)||""),[d,f]=b.useState((r==null?void 0:r.address)||""),[h,m]=b.useState((r==null?void 0:r.local)||i),[y,x]=b.useState({});b.useEffect(()=>{r?(o(r.name),u(r.phone),f(r.address),m(r.local)):(o(""),u(""),f(""),m(i)),x({})},[r,i]);const _=()=>{const k={};return a.trim()||(k.name="El nombre es requerido"),l.trim()?/^\+?[\d\s-()]+$/.test(l.trim())||(k.phone="El telfono no es vlido"):k.phone="El telfono es requerido",d.trim()||(k.address="La direccin es requerida"),x(k),Object.keys(k).length===0};return{name:a,phone:l,address:d,local:h,errors:y,isLocal:n,availableLocales:s,setName:o,setPhone:u,setAddress:f,setLocal:m,handlePhoneChange:k=>{const S=k.replace(/[^\d\s\-()+]/g,"");u(S),y.phone&&x({...y,phone:""})},clearError:k=>{y[k]&&x({...y,[k]:""})},handleSubmit:k=>{if(k.preventDefault(),_()){const S={name:a.trim(),phone:l.trim(),address:d.trim(),local:h};return r||(o(""),u(""),f(""),m(i)),x({}),S}return null}}}function Py({onSubmit:t,onClose:e,currentUser:r,localConfigs:n,initialData:s}){const{name:i,phone:a,address:o,local:l,errors:u,isLocal:d,availableLocales:f,setName:h,setAddress:m,setLocal:y,handlePhoneChange:x,clearError:_,handleSubmit:v}=Oy(r,n,s),g=p=>{const w=v(p);w&&t(w)};return c.jsx("div",{className:"formulario-crear-cliente-overlay",onClick:e,children:c.jsxs("div",{className:"formulario-crear-cliente-content",onClick:p=>p.stopPropagation(),children:[c.jsxs("div",{className:"formulario-crear-cliente-header",children:[c.jsxs("div",{className:"formulario-crear-cliente-header-left",children:[c.jsx("div",{className:"formulario-crear-cliente-header-icon",children:c.jsx(xe,{})}),c.jsxs("div",{children:[c.jsx("h2",{className:"formulario-crear-cliente-title",children:s?"Editar Cliente":"Agregar Cliente"}),c.jsx("p",{className:"formulario-crear-cliente-subtitle",children:"Completa los datos del cliente"})]})]}),c.jsx("button",{onClick:e,className:"formulario-crear-cliente-close","aria-label":"Cerrar",children:c.jsx(rt,{})})]}),c.jsxs("form",{onSubmit:g,className:"formulario-crear-cliente",children:[c.jsxs("div",{className:"formulario-crear-cliente-group",children:[c.jsx("label",{htmlFor:"client-name",className:"formulario-crear-cliente-label",children:"Nombre del Cliente *"}),c.jsxs("div",{className:"formulario-crear-cliente-input-wrapper",children:[c.jsx(xe,{className:"formulario-crear-cliente-input-icon"}),c.jsx("input",{id:"client-name",type:"text",value:i,onChange:p=>{h(p.target.value),_("name")},placeholder:"Ej: Juan Prez",className:`formulario-crear-cliente-input ${u.name?"formulario-crear-cliente-input-error":""}`,autoFocus:!0})]}),u.name&&c.jsx("span",{className:"formulario-crear-cliente-error",children:u.name})]}),c.jsxs("div",{className:"formulario-crear-cliente-group",children:[c.jsx("label",{htmlFor:"client-phone",className:"formulario-crear-cliente-label",children:"Telfono *"}),c.jsxs("div",{className:"formulario-crear-cliente-input-wrapper",children:[c.jsx(Sc,{className:"formulario-crear-cliente-input-icon"}),c.jsx("input",{id:"client-phone",type:"tel",value:a,onChange:p=>x(p.target.value),placeholder:"Ej: +56 9 1234 5678",className:`formulario-crear-cliente-input ${u.phone?"formulario-crear-cliente-input-error":""}`})]}),u.phone&&c.jsx("span",{className:"formulario-crear-cliente-error",children:u.phone})]}),c.jsxs("div",{className:"formulario-crear-cliente-group",children:[c.jsx("label",{htmlFor:"client-address",className:"formulario-crear-cliente-label",children:"Direccin *"}),c.jsxs("div",{className:"formulario-crear-cliente-input-wrapper",children:[c.jsx(ir,{className:"formulario-crear-cliente-input-icon"}),c.jsx("input",{id:"client-address",type:"text",value:o,onChange:p=>{m(p.target.value),_("address")},placeholder:"Ej: Av. Principal 123, Santiago",className:`formulario-crear-cliente-input ${u.address?"formulario-crear-cliente-input-error":""}`})]}),u.address&&c.jsx("span",{className:"formulario-crear-cliente-error",children:u.address})]}),c.jsxs("div",{className:"formulario-crear-cliente-group",children:[c.jsx("label",{className:"formulario-crear-cliente-label",children:c.jsxs("div",{className:"formulario-crear-cliente-label-content",children:[c.jsx(Ve,{}),"Local Asignado *"]})}),d?c.jsx("div",{className:"formulario-crear-cliente-local-display",children:r.local}):c.jsx("div",{className:"formulario-crear-cliente-local-grid",children:f.map(p=>c.jsx("button",{type:"button",onClick:()=>y(p),className:`formulario-crear-cliente-local-button ${l===p?"formulario-crear-cliente-local-button-active":"formulario-crear-cliente-local-button-inactive"}`,children:p},p))})]}),c.jsxs("div",{className:"formulario-crear-cliente-actions",children:[c.jsx("button",{type:"button",onClick:e,className:"formulario-crear-cliente-button formulario-crear-cliente-button-secondary",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"formulario-crear-cliente-button formulario-crear-cliente-button-primary",children:s?"Guardar Cambios":"Agregar Cliente"})]})]})]})})}function Ay(t,e){const[r,n]=b.useState(!1),[s,i]=b.useState(null),a=b.useMemo(()=>(e==null?void 0:e.role)==="local"&&e.local?t.filter(f=>f.local===e.local):t,[t,e]);return{showCreateForm:r,editingClient:s,filteredClients:a,setShowCreateForm:n,handleEdit:f=>{i(f),n(!0)},handleDelete:(f,h)=>{h(f)},handleCreateSubmit:(f,h,m)=>{s?(m(s.id,f),i(null)):h(f),n(!1)},handleCreateFormClose:()=>{n(!1),i(null)}}}function Ry({clients:t,currentUser:e,localConfigs:r,onCreateClient:n,onUpdateClient:s,onDeleteClient:i,onClose:a}){const{showCreateForm:o,editingClient:l,filteredClients:u,setShowCreateForm:d,handleEdit:f,handleDelete:h,handleCreateSubmit:m,handleCreateFormClose:y}=Ay(t,e),x=v=>{h(v,i)},_=v=>{m(v,n,s)};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"gestion-clientes-overlay",onClick:a,children:c.jsxs("div",{className:"gestion-clientes-content",onClick:v=>v.stopPropagation(),children:[c.jsxs("div",{className:"gestion-clientes-header",children:[c.jsxs("div",{className:"gestion-clientes-header-content",children:[c.jsx("div",{className:"gestion-clientes-header-icon",children:c.jsx(xe,{})}),c.jsxs("div",{children:[c.jsx("h2",{className:"gestion-clientes-title",children:"Configurar Clientes"}),c.jsx("p",{className:"gestion-clientes-subtitle",children:"Gestiona tu lista de clientes"})]})]}),c.jsx("button",{onClick:a,className:"gestion-clientes-close","aria-label":"Cerrar",children:c.jsx(rt,{})})]}),c.jsx("div",{className:"gestion-clientes-actions",children:c.jsxs("button",{onClick:()=>d(!0),className:"gestion-clientes-button gestion-clientes-button-add",children:[c.jsx(ba,{}),"Agregar Cliente"]})}),c.jsx("div",{className:"gestion-clientes-list",children:u.length===0?c.jsxs("div",{className:"gestion-clientes-empty",children:[c.jsx(xe,{className:"gestion-clientes-empty-icon"}),c.jsx("p",{className:"gestion-clientes-empty-text",children:"No hay clientes registrados"}),c.jsx("p",{className:"gestion-clientes-empty-subtext",children:e.role==="local"?`No hay clientes asignados a ${e.local}`:"Agrega tu primer cliente para comenzar"})]}):u.map(v=>c.jsxs("div",{className:"gestion-clientes-item",children:[c.jsxs("div",{className:"gestion-clientes-item-content",children:[c.jsx("div",{className:"gestion-clientes-item-avatar",children:c.jsx(xe,{})}),c.jsxs("div",{className:"gestion-clientes-item-info",children:[c.jsx("h3",{className:"gestion-clientes-item-name",children:v.name}),c.jsxs("div",{className:"gestion-clientes-item-details",children:[c.jsxs("div",{className:"gestion-clientes-item-detail",children:[c.jsx(Sc,{}),c.jsx("span",{children:v.phone})]}),c.jsxs("div",{className:"gestion-clientes-item-detail",children:[c.jsx(ir,{}),c.jsx("span",{children:v.address})]}),c.jsxs("div",{className:"gestion-clientes-item-detail",children:[c.jsx(Ve,{}),c.jsx("span",{children:v.local})]})]})]})]}),c.jsxs("div",{className:"gestion-clientes-item-actions",children:[c.jsx("button",{onClick:()=>f(v),className:"gestion-clientes-item-button gestion-clientes-item-button-edit",title:"Editar cliente",children:c.jsx(Jh,{})}),c.jsx("button",{onClick:()=>x(v.id),className:"gestion-clientes-item-button gestion-clientes-item-button-delete",title:"Eliminar cliente",children:c.jsx(Ea,{})})]})]},v.id))})]})}),o&&c.jsx(Py,{onSubmit:_,onClose:y,currentUser:e,localConfigs:r,initialData:l?{name:l.name,phone:l.phone,address:l.address,local:l.local}:void 0})]})}function Iy(t,e,r){const n=b.useMemo(()=>t.map(E=>E.name),[t]),[s,i]=b.useState((r==null?void 0:r.username)||""),[a,o]=b.useState(""),[l,u]=b.useState(""),[d,f]=b.useState((r==null?void 0:r.name)||""),[h,m]=b.useState((r==null?void 0:r.role)||"local"),[y,x]=b.useState((r==null?void 0:r.local)||(n.length>0?n[0]:void 0)),[_,v]=b.useState({});b.useEffect(()=>{r?(i(r.username),o(""),u(""),f(r.name),m(r.role),x(r.local)):(i(""),o(""),u(""),f(""),m("local"),x(n.length>0?n[0]:void 0)),v({})},[r==null?void 0:r.id,n.length]);const g=()=>{const E={};return s.trim()?/^[a-zA-Z0-9_]+$/.test(s.trim())?e.some(P=>P.username.toLowerCase()===s.trim().toLowerCase()&&(!r||P.id!==r.id))&&(E.username="Este usuario ya existe"):E.username="El usuario solo puede contener letras, nmeros y guiones bajos":E.username="El usuario es requerido",r?(a.trim()||l.trim())&&(a.length<6&&(E.password="La contrasea debe tener al menos 6 caracteres"),a!==l&&(E.confirmPassword="Las contraseas no coinciden")):(a.trim()?a.length<6&&(E.password="La contrasea debe tener al menos 6 caracteres"):E.password="La contrasea es requerida",l.trim()?a!==l&&(E.confirmPassword="Las contraseas no coinciden"):E.confirmPassword="Confirma la contrasea"),d.trim()||(E.name="El nombre es requerido"),h==="local"&&(n.length===0?E.local='Primero debes crear locales en "Configurar Locales"':y||(E.local="Debes seleccionar un local para usuarios de tipo local")),v(E),Object.keys(E).length===0},p=E=>{if(E.preventDefault(),g()){const P={username:s.trim(),password:a.trim()||void 0,role:h,local:h==="local"?y:void 0,name:d.trim()};return r||(i(""),o(""),u(""),f(""),m("local"),x(n[0])),v({}),P}return null},w=E=>{m(E),E!=="local"?(x(void 0),_.local&&v({..._,local:""})):x(n.length>0?n[0]:void 0)},k=E=>{x(E),_.local&&v({..._,local:""})},S=E=>{_[E]&&v({..._,[E]:""})};return{username:s,password:a,confirmPassword:l,name:d,role:h,local:y,errors:_,availableLocales:n,gridClass:n.length<=3?"formulario-crear-usuario-local-grid-3":n.length<=4?"formulario-crear-usuario-local-grid-4":"formulario-crear-usuario-local-grid-5",setUsername:i,setPassword:o,setConfirmPassword:u,setName:f,handleRoleChange:w,handleLocalChange:k,clearError:S,handleSubmit:p}}function $y({onSubmit:t,onClose:e,localConfigs:r,existingUsers:n,initialData:s}){const{username:i,password:a,confirmPassword:o,name:l,role:u,local:d,errors:f,availableLocales:h,gridClass:m,setUsername:y,setPassword:x,setConfirmPassword:_,setName:v,handleRoleChange:g,handleLocalChange:p,clearError:w,handleSubmit:k}=Iy(r,n,s),S=j=>{const E=k(j);E&&t(E)};return c.jsx("div",{className:"formulario-crear-usuario-overlay",onClick:e,children:c.jsxs("div",{className:"formulario-crear-usuario-content",onClick:j=>j.stopPropagation(),children:[c.jsxs("div",{className:"formulario-crear-usuario-header",children:[c.jsxs("div",{className:"formulario-crear-usuario-header-left",children:[c.jsx("div",{className:"formulario-crear-usuario-header-icon",children:c.jsx(xe,{})}),c.jsxs("div",{children:[c.jsx("h2",{className:"formulario-crear-usuario-title",children:s?"Editar Usuario":"Agregar Usuario"}),c.jsx("p",{className:"formulario-crear-usuario-subtitle",children:"Completa los datos del usuario"})]})]}),c.jsx("button",{onClick:e,className:"formulario-crear-usuario-close","aria-label":"Cerrar",children:c.jsx(rt,{})})]}),c.jsxs("form",{onSubmit:S,className:"formulario-crear-usuario",children:[c.jsxs("div",{className:"formulario-crear-usuario-group",children:[c.jsx("label",{htmlFor:"user-username",className:"formulario-crear-usuario-label",children:"Usuario *"}),c.jsxs("div",{className:"formulario-crear-usuario-input-wrapper",children:[c.jsx(xe,{className:"formulario-crear-usuario-input-icon"}),c.jsx("input",{id:"user-username",type:"text",value:i,onChange:j=>{y(j.target.value),w("username")},placeholder:"Ej: usuario123",className:`formulario-crear-usuario-input ${f.username?"formulario-crear-usuario-input-error":""}`,autoFocus:!0,disabled:!!s})]}),f.username&&c.jsx("span",{className:"formulario-crear-usuario-error",children:f.username}),s&&c.jsx("p",{className:"formulario-crear-usuario-hint",children:"El usuario no se puede modificar"})]}),c.jsxs("div",{className:"formulario-crear-usuario-group",children:[c.jsxs("label",{htmlFor:"user-password",className:"formulario-crear-usuario-label",children:["Contrasea ",s?"(dejar vaco para mantener)":"*"]}),c.jsxs("div",{className:"formulario-crear-usuario-input-wrapper",children:[c.jsx(Ar,{className:"formulario-crear-usuario-input-icon"}),c.jsx("input",{id:"user-password",type:"password",value:a,onChange:j=>{x(j.target.value),w("password")},placeholder:s?"Dejar vaco para mantener":"Mnimo 6 caracteres",className:`formulario-crear-usuario-input ${f.password?"formulario-crear-usuario-input-error":""}`})]}),f.password&&c.jsx("span",{className:"formulario-crear-usuario-error",children:f.password})]}),c.jsxs("div",{className:"formulario-crear-usuario-group",children:[c.jsxs("label",{htmlFor:"user-confirm-password",className:"formulario-crear-usuario-label",children:["Confirmar Contrasea ",s?"(dejar vaco para mantener)":"*"]}),c.jsxs("div",{className:"formulario-crear-usuario-input-wrapper",children:[c.jsx(Ar,{className:"formulario-crear-usuario-input-icon"}),c.jsx("input",{id:"user-confirm-password",type:"password",value:o,onChange:j=>{_(j.target.value),w("confirmPassword")},placeholder:s?"Dejar vaco para mantener":"Confirma la contrasea",className:`formulario-crear-usuario-input ${f.confirmPassword?"formulario-crear-usuario-input-error":""}`})]}),f.confirmPassword&&c.jsx("span",{className:"formulario-crear-usuario-error",children:f.confirmPassword})]}),c.jsxs("div",{className:"formulario-crear-usuario-group",children:[c.jsx("label",{htmlFor:"user-name",className:"formulario-crear-usuario-label",children:"Nombre Completo *"}),c.jsxs("div",{className:"formulario-crear-usuario-input-wrapper",children:[c.jsx(xe,{className:"formulario-crear-usuario-input-icon"}),c.jsx("input",{id:"user-name",type:"text",value:l,onChange:j=>{v(j.target.value),w("name")},placeholder:"Ej: Juan Prez",className:`formulario-crear-usuario-input ${f.name?"formulario-crear-usuario-input-error":""}`})]}),f.name&&c.jsx("span",{className:"formulario-crear-usuario-error",children:f.name})]}),c.jsxs("div",{className:"formulario-crear-usuario-group",children:[c.jsx("label",{className:"formulario-crear-usuario-label",children:c.jsxs("div",{className:"formulario-crear-usuario-label-content",children:[c.jsx(cl,{}),"Rol *"]})}),c.jsxs("div",{className:"formulario-crear-usuario-role-buttons formulario-crear-usuario-role-buttons-3",children:[c.jsxs("button",{type:"button",onClick:()=>g("empresarial"),className:`formulario-crear-usuario-role-button ${u==="empresarial"?"formulario-crear-usuario-role-button-active":"formulario-crear-usuario-role-button-inactive"}`,children:[c.jsx(Gh,{}),"CEO"]}),c.jsxs("button",{type:"button",onClick:()=>g("admin"),className:`formulario-crear-usuario-role-button ${u==="admin"?"formulario-crear-usuario-role-button-active":"formulario-crear-usuario-role-button-inactive"}`,children:[c.jsx(cl,{}),"Administrador"]}),c.jsxs("button",{type:"button",onClick:()=>g("local"),className:`formulario-crear-usuario-role-button ${u==="local"?"formulario-crear-usuario-role-button-active":"formulario-crear-usuario-role-button-inactive"}`,children:[c.jsx(Ve,{}),"Local"]})]})]}),u==="local"&&c.jsxs("div",{className:"formulario-crear-usuario-group",children:[c.jsx("label",{className:"formulario-crear-usuario-label",children:c.jsxs("div",{className:"formulario-crear-usuario-label-content",children:[c.jsx(Ve,{}),"Local Asignado *"]})}),h.length===0?c.jsx("div",{className:"formulario-crear-usuario-no-locals",children:c.jsx("p",{className:"formulario-crear-usuario-no-locals-text",children:'No hay locales creados. Por favor, crea locales primero en "Configurar Locales".'})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`formulario-crear-usuario-local-grid ${m}`,children:h.map(j=>c.jsx("button",{type:"button",onClick:()=>p(j),className:`formulario-crear-usuario-local-button ${d===j?"formulario-crear-usuario-local-button-active":"formulario-crear-usuario-local-button-inactive"}`,children:j},j))}),f.local&&c.jsx("span",{className:"formulario-crear-usuario-error",children:f.local})]})]}),c.jsxs("div",{className:"formulario-crear-usuario-actions",children:[c.jsx("button",{type:"button",onClick:e,className:"formulario-crear-usuario-button formulario-crear-usuario-button-secondary",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"formulario-crear-usuario-button formulario-crear-usuario-button-primary",children:s?"Guardar Cambios":"Agregar Usuario"})]})]})]})})}function Ly(t){const[e,r]=b.useState(!1),[n,s]=b.useState(null);return{showCreateForm:e,editingUser:n,setShowCreateForm:r,handleEdit:d=>{if((t==null?void 0:t.role)==="admin"&&d.role==="empresarial")throw new Error("No puedes editar el usuario CEO. Solo el CEO puede modificar su propia cuenta.");s(d),r(!0)},handleDelete:(d,f,h)=>{if(f==="empresarial")throw new Error("No se puede eliminar el usuario CEO. Este usuario es esencial para el sistema.");h(d)},handleCreateSubmit:(d,f,h)=>{n?(h(n.id,d),s(null)):f(d),r(!1)},handleCreateFormClose:()=>{r(!1),s(null)},handleAddNew:()=>{s(null),r(!0)}}}function jc(){const t=b.useCallback(s=>{Ks.success(s,{duration:3e3,position:"top-right",style:{background:"#f0fdf4",color:"#166534",border:"1px solid #86efac"}})},[]),e=b.useCallback(s=>{Ks.error(s,{duration:4e3,position:"top-right",style:{background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca"}})},[]),r=b.useCallback(s=>{Ks(s,{duration:3e3,position:"top-right",icon:"",style:{background:"#eff6ff",color:"#1e40af",border:"1px solid #bfdbfe"}})},[]),n=b.useCallback(s=>{Ks(s,{duration:3e3,position:"top-right",icon:"",style:{background:"#fffbeb",color:"#92400e",border:"1px solid #fde68a"}})},[]);return{showSuccess:t,showError:e,showInfo:r,showWarning:n}}function My({users:t,onCreateUser:e,onUpdateUser:r,onDeleteUser:n,onClose:s,localConfigs:i,currentUser:a}){const{showCreateForm:o,editingUser:l,handleEdit:u,handleDelete:d,handleCreateSubmit:f,handleCreateFormClose:h,handleAddNew:m}=Ly(a),{showError:y}=jc(),x=g=>{try{u(g)}catch(p){y(p.message)}},_=(g,p)=>{try{d(g,p,n)}catch(w){y(w.message)}},v=g=>{f(g,e,r)};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`gestion-usuarios-overlay ${o?"gestion-usuarios-overlay-hidden":""}`,onClick:s,children:c.jsxs("div",{className:"gestion-usuarios-content",onClick:g=>g.stopPropagation(),children:[c.jsxs("div",{className:"gestion-usuarios-header",children:[c.jsxs("div",{className:"gestion-usuarios-header-content",children:[c.jsx("div",{className:"gestion-usuarios-header-icon",children:c.jsx(xe,{})}),c.jsxs("div",{children:[c.jsx("h2",{className:"gestion-usuarios-title",children:"Gestionar Usuarios"}),c.jsx("p",{className:"gestion-usuarios-subtitle",children:"Crea y administra usuarios del sistema"})]})]}),c.jsx("button",{onClick:s,className:"gestion-usuarios-close","aria-label":"Cerrar",children:c.jsx(rt,{})})]}),c.jsx("div",{className:"gestion-usuarios-actions",children:c.jsxs("button",{onClick:m,className:"gestion-usuarios-button gestion-usuarios-button-primary",children:[c.jsx(ba,{}),"Agregar Nuevo Usuario"]})}),c.jsx("div",{className:"gestion-usuarios-list",children:t.length===0?c.jsxs("div",{className:"gestion-usuarios-empty",children:[c.jsx(xe,{className:"gestion-usuarios-empty-icon"}),c.jsx("p",{className:"gestion-usuarios-empty-title",children:"No hay usuarios registrados"}),c.jsx("p",{className:"gestion-usuarios-empty-text",children:'Haz clic en "Agregar Nuevo Usuario" para empezar.'})]}):t.map(g=>c.jsxs("div",{className:"gestion-usuarios-item",children:[c.jsxs("div",{className:"gestion-usuarios-item-info",children:[c.jsx("div",{className:"gestion-usuarios-item-icon",children:g.role==="empresarial"?c.jsx(Gh,{}):g.role==="admin"?c.jsx(cl,{}):c.jsx(Ve,{})}),c.jsxs("div",{className:"gestion-usuarios-item-details",children:[c.jsx("p",{className:"gestion-usuarios-item-name",children:g.name}),c.jsxs("p",{className:"gestion-usuarios-item-username",children:["@",g.username]}),c.jsxs("div",{className:"gestion-usuarios-item-badges",children:[c.jsx("span",{className:`gestion-usuarios-item-badge gestion-usuarios-item-badge-${g.role}`,children:ep(g.role)}),g.local&&c.jsxs("span",{className:"gestion-usuarios-item-badge gestion-usuarios-item-badge-local",children:[c.jsx(Ve,{size:12}),g.local]})]})]})]}),c.jsxs("div",{className:"gestion-usuarios-item-actions",children:[!(a.role==="admin"&&g.role==="empresarial")&&c.jsx("button",{onClick:()=>x(g),className:"gestion-usuarios-item-button gestion-usuarios-item-button-edit",title:"Editar usuario",children:c.jsx(Jh,{size:16})}),g.role!=="empresarial"&&c.jsx("button",{onClick:()=>_(g.id,g.role),className:"gestion-usuarios-item-button gestion-usuarios-item-button-delete",title:"Eliminar usuario",children:c.jsx(Ea,{size:16})})]})]},g.id))})]})}),o&&c.jsx($y,{onSubmit:v,onClose:h,localConfigs:i,existingUsers:t,initialData:l?{id:l.id,username:l.username,name:l.name,role:l.role,local:l.local}:void 0})]})}function Dy({order:t,onClick:e,onDelete:r}){const n=Xh(),s=t.clientName||"Cliente",i=t.clientPhone||"",a=l=>{l.stopPropagation(),r==null||r(t.id)},o=l=>({Pendiente:"pending",Asignado:"in-progress","En camino al retiro":"in-progress","Producto retirado":"in-progress",Entregado:"completed"})[l]||"pending";return c.jsxs("div",{onClick:e,className:"delivery-order-card",children:[c.jsxs("div",{className:"delivery-order-header",children:[c.jsx("span",{className:"delivery-order-id",children:t.id}),c.jsxs("div",{className:"delivery-order-header-right",children:[c.jsx("span",{className:`delivery-order-status ${o(t.status)}`,children:ul(t.status)}),r&&c.jsx("button",{className:"delivery-order-delete",onClick:a,title:"Eliminar pedido",children:c.jsx(Ea,{size:16})})]})]}),c.jsxs("div",{className:"delivery-order-client",children:[c.jsx("div",{className:"delivery-order-client-avatar",children:Yh(s)}),c.jsxs("div",{className:"delivery-order-client-info",children:[c.jsx("h4",{children:s}),i&&c.jsx("p",{children:i})]})]}),c.jsxs("div",{className:"delivery-order-details",children:[c.jsxs("div",{className:"delivery-order-detail-row",children:[c.jsx(ir,{}),c.jsx("span",{children:t.pickupAddress})]}),c.jsxs("div",{className:"delivery-order-detail-row",children:[c.jsx(ir,{}),c.jsx("span",{children:t.deliveryAddress})]})]}),c.jsxs("div",{className:"delivery-order-footer",children:[c.jsxs("div",{className:"delivery-order-time",children:[c.jsx(gs,{size:12}),Qh(t.createdAt,n)]}),c.jsxs("div",{className:"delivery-order-price",children:["$",Zh(t.suggestedPrice)]})]})]})}function Uy({orders:t,onSelectOrder:e,onDeleteOrder:r}){return t.length===0?c.jsx("div",{className:"delivery-empty-state",children:c.jsx("p",{children:"No hay pedidos para mostrar"})}):c.jsx(c.Fragment,{children:t.map(n=>c.jsx(Dy,{order:n,onClick:()=>e(n),onDelete:r},n.id))})}function zy({order:t,onClose:e}){const r=Cy(t.status),n=Xh(),s=i=>({Pendiente:"pending",Asignado:"in-progress","En camino al retiro":"in-progress","Producto retirado":"in-progress",Entregado:"completed"})[i]||"pending";return c.jsxs("div",{className:"detalle-pedido-empresa",children:[c.jsxs("div",{className:"detalle-pedido-empresa-header",children:[c.jsx("div",{className:"detalle-pedido-empresa-header-main",children:c.jsxs("div",{className:"detalle-pedido-empresa-header-top",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"detalle-pedido-empresa-header-title",children:t.id}),c.jsxs("div",{className:"detalle-pedido-empresa-header-time",children:[c.jsx(gs,{}),c.jsx("span",{children:Qh(t.createdAt,n)})]})]}),c.jsx("span",{className:`delivery-order-status ${s(t.status)}`,children:ul(t.status)})]})}),c.jsx("button",{onClick:e,className:"detalle-pedido-empresa-close","aria-label":"Cerrar",children:c.jsx(rt,{})})]}),c.jsxs("div",{className:"detalle-pedido-empresa-content",children:[c.jsxs("div",{className:"detalle-pedido-empresa-item",children:[c.jsx("div",{className:"detalle-pedido-empresa-item-icon detalle-pedido-empresa-item-icon-blue",children:c.jsx(r,{})}),c.jsxs("div",{className:"detalle-pedido-empresa-item-content",children:[c.jsx("p",{className:"detalle-pedido-empresa-item-label",children:"Estado del Pedido"}),c.jsx("p",{className:"detalle-pedido-empresa-item-value",children:ul(t.status)})]})]}),c.jsxs("div",{className:"detalle-pedido-empresa-item",children:[c.jsx("div",{className:"detalle-pedido-empresa-item-icon detalle-pedido-empresa-item-icon-purple",children:c.jsx(xe,{})}),c.jsxs("div",{className:"detalle-pedido-empresa-item-content",children:[c.jsx("p",{className:"detalle-pedido-empresa-item-label",children:"Repartidor"}),c.jsx("p",{className:"detalle-pedido-empresa-item-value",children:t.driverName||"sin asignar"})]})]}),c.jsxs("div",{className:"detalle-pedido-empresa-item",children:[c.jsx("div",{className:"detalle-pedido-empresa-item-icon detalle-pedido-empresa-item-icon-gray",children:c.jsx(Kt,{})}),c.jsxs("div",{className:"detalle-pedido-empresa-item-content",children:[c.jsx("p",{className:"detalle-pedido-empresa-item-label",children:"Local"}),c.jsx("p",{className:"detalle-pedido-empresa-item-value",children:t.local})]})]}),c.jsxs("div",{className:"detalle-pedido-empresa-item detalle-pedido-empresa-item-code",children:[c.jsx("div",{className:"detalle-pedido-empresa-item-icon detalle-pedido-empresa-item-icon-yellow",children:c.jsx(my,{})}),c.jsxs("div",{className:"detalle-pedido-empresa-item-content",children:[c.jsx("p",{className:"detalle-pedido-empresa-item-label",children:"Cdigo de Retiro"}),c.jsx("p",{className:"detalle-pedido-empresa-item-value detalle-pedido-empresa-item-code-value",children:t.pickupCode})]})]}),c.jsxs("div",{className:"detalle-pedido-empresa-item detalle-pedido-empresa-item-start",children:[c.jsx("div",{className:"detalle-pedido-empresa-item-icon detalle-pedido-empresa-item-icon-blue",children:c.jsx(ir,{})}),c.jsxs("div",{className:"detalle-pedido-empresa-item-content",children:[c.jsx("p",{className:"detalle-pedido-empresa-item-label",children:"Direccin de Retiro"}),c.jsx("p",{className:"detalle-pedido-empresa-item-text",children:t.pickupAddress})]})]}),c.jsxs("div",{className:"detalle-pedido-empresa-item detalle-pedido-empresa-item-start",children:[c.jsx("div",{className:"detalle-pedido-empresa-item-icon detalle-pedido-empresa-item-icon-orange",children:c.jsx(_a,{})}),c.jsxs("div",{className:"detalle-pedido-empresa-item-content",children:[c.jsx("p",{className:"detalle-pedido-empresa-item-label",children:"Direccin de Entrega"}),c.jsx("p",{className:"detalle-pedido-empresa-item-text",children:t.deliveryAddress})]})]}),c.jsxs("div",{className:"detalle-pedido-empresa-item detalle-pedido-empresa-item-price",children:[c.jsx("div",{className:"detalle-pedido-empresa-item-icon detalle-pedido-empresa-item-icon-green",children:c.jsx(Kh,{})}),c.jsxs("div",{className:"detalle-pedido-empresa-item-content",children:[c.jsx("p",{className:"detalle-pedido-empresa-item-label detalle-pedido-empresa-item-price-label",children:"Precio del Reparto"}),c.jsxs("p",{className:"detalle-pedido-empresa-item-price-value",children:["$",Zh(t.suggestedPrice)]})]})]})]}),c.jsx("div",{className:"detalle-pedido-empresa-actions",children:c.jsx("button",{onClick:e,className:"detalle-pedido-empresa-button detalle-pedido-empresa-button-primary",children:"Cerrar"})})]})}function Fy(t){const[e,r]=b.useState(t);return{locals:e,handleAddLocal:()=>{const o=e.length+1;r([...e,{name:`Local ${o}`,address:""}])},handleDeleteLocal:o=>{r(e.filter((l,u)=>u!==o))},handleUpdateLocal:(o,l,u)=>{r(e.map((d,f)=>f===o?{...d,[l]:u}:d))},handleSave:(o,l)=>{o(e),l()}}}function tp(){const[t,e]=b.useState(!1),[r,n]=b.useState(null),[s,i]=b.useState(null),a=b.useCallback(u=>new Promise(d=>{n(u),e(!0),i(()=>d)}),[]),o=b.useCallback(()=>{s&&(s(!0),i(null)),e(!1)},[s]),l=b.useCallback(()=>{s&&(s(!1),i(null)),e(!1)},[s]);return{confirm:a,isOpen:t,config:r,onConfirm:o,onCancel:l}}function rp({isOpen:t,onClose:e,onConfirm:r,title:n,message:s,confirmText:i="Confirmar",cancelText:a="Cancelar",type:o="danger"}){if(!t)return null;const l=()=>{r(),e()};return c.jsx("div",{className:"modal-confirmacion-overlay",onClick:e,children:c.jsxs("div",{className:"modal-confirmacion-contenido",onClick:u=>u.stopPropagation(),children:[c.jsxs("div",{className:"modal-confirmacion-header",children:[c.jsx("div",{className:"modal-confirmacion-icono-container",children:c.jsx(uy,{className:`modal-confirmacion-icono modal-confirmacion-icono-${o}`})}),c.jsx("button",{onClick:e,className:"modal-confirmacion-cerrar","aria-label":"Cerrar",children:c.jsx(rt,{})})]}),c.jsxs("div",{className:"modal-confirmacion-cuerpo",children:[c.jsx("h3",{className:"modal-confirmacion-titulo",children:n}),c.jsx("p",{className:"modal-confirmacion-mensaje",children:s})]}),c.jsxs("div",{className:"modal-confirmacion-acciones",children:[c.jsx("button",{onClick:e,className:"modal-confirmacion-boton modal-confirmacion-boton-cancelar",children:a}),c.jsx("button",{onClick:l,className:`modal-confirmacion-boton modal-confirmacion-boton-confirmar modal-confirmacion-boton-${o}`,children:i})]})]})})}function By({onClose:t,onSave:e,initialLocals:r}){const{locals:n,handleAddLocal:s,handleDeleteLocal:i,handleUpdateLocal:a,handleSave:o}=Fy(r),{confirm:l,isOpen:u,config:d,onConfirm:f,onCancel:h}=tp(),m=async y=>{await l({title:"Eliminar Local",message:"Ests seguro de que deseas eliminar este local?",confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"})&&i(y)};return c.jsxs(c.Fragment,{children:[c.jsx(rp,{isOpen:u,onClose:h,onConfirm:f,title:(d==null?void 0:d.title)||"Confirmar",message:(d==null?void 0:d.message)||"",confirmText:(d==null?void 0:d.confirmText)||"Confirmar",cancelText:(d==null?void 0:d.cancelText)||"Cancelar",type:(d==null?void 0:d.type)||"danger"}),c.jsxs("div",{className:"configuracion-locales",children:[c.jsxs("div",{className:"configuracion-locales-header",children:[c.jsxs("div",{className:"configuracion-locales-header-content",children:[c.jsx("h3",{children:"Configuracin de Locales"}),c.jsx("p",{children:"Gestiona los locales y sus direcciones"})]}),c.jsx("button",{onClick:t,className:"configuracion-locales-close",children:c.jsx(rt,{})})]}),c.jsx("div",{className:"configuracion-locales-list",children:n.map((y,x)=>c.jsxs("div",{className:"configuracion-locales-item",children:[c.jsxs("div",{className:"configuracion-locales-item-header",children:[c.jsxs("div",{className:"configuracion-locales-item-title",children:[c.jsx(Ve,{}),c.jsx("span",{className:"configuracion-locales-item-title-text",children:y.name||`Local ${x+1}`})]}),n.length>1&&c.jsx("button",{onClick:()=>m(x),className:"configuracion-locales-item-delete",title:"Eliminar local",children:c.jsx(Ea,{})})]}),c.jsxs("div",{className:"configuracion-locales-item-fields",children:[c.jsxs("div",{className:"configuracion-locales-item-field",children:[c.jsx("label",{className:"configuracion-locales-item-label",children:"Nombre del Local"}),c.jsx("input",{type:"text",value:y.name,onChange:_=>a(x,"name",_.target.value),placeholder:"Ej: Local 1",className:"configuracion-locales-item-input"})]}),c.jsxs("div",{className:"configuracion-locales-item-field",children:[c.jsx("label",{className:"configuracion-locales-item-label",children:c.jsxs("div",{className:"configuracion-locales-item-label-content",children:[c.jsx(ir,{}),"Direccin del Local"]})}),c.jsx("input",{type:"text",value:y.address,onChange:_=>a(x,"address",_.target.value),placeholder:"Ej: Av. Principal 123, Local 1",className:"configuracion-locales-item-input"})]})]})]},x))}),c.jsxs("button",{onClick:s,className:"configuracion-locales-add",children:[c.jsx(ba,{}),"Agregar Nuevo Local"]}),c.jsxs("div",{className:"configuracion-locales-actions",children:[c.jsx("button",{onClick:t,className:"configuracion-locales-button configuracion-locales-button-cancel",children:"Cancelar"}),c.jsx("button",{onClick:()=>o(e,t),className:"configuracion-locales-button configuracion-locales-button-save",children:"Guardar Cambios"})]})]})]})}var Cc={},Hi={},dl=function(t,e){return dl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},dl(t,e)};function np(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Gi=function(){return Gi=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Gi.apply(this,arguments)};function Sn(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function sp(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(i=(s<3?a(i):s>3?a(e,r,i):a(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function ip(t,e){return function(r,n){e(r,n,t)}}function ap(t,e,r,n,s,i){function a(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var o=n.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,m=r.length-1;m>=0;m--){var y={};for(var x in n)y[x]=x==="access"?{}:n[x];for(var x in n.access)y.access[x]=n.access[x];y.addInitializer=function(v){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(v||null))};var _=(0,r[m])(o==="accessor"?{get:d.get,set:d.set}:d[l],y);if(o==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(f=a(_.get))&&(d.get=f),(f=a(_.set))&&(d.set=f),(f=a(_.init))&&s.unshift(f)}else(f=a(_))&&(o==="field"?s.unshift(f):d[l]=f)}u&&Object.defineProperty(u,n.name,d),h=!0}function op(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function lp(t){return typeof t=="symbol"?t:"".concat(t)}function cp(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function up(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function R(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((n=n.apply(t,e||[])).next())})}function dp(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ka=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function fp(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ka(e,t,r)}function Ki(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nc(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function hp(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Nc(arguments[e]));return t}function pp(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],a=0,o=i.length;a<o;a++,s++)n[s]=i[a];return n}function mp(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function wn(t){return this instanceof wn?(this.v=t,this):new wn(t)}function gp(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(m){return function(y){return Promise.resolve(y).then(m,f)}}function o(m,y){n[m]&&(s[m]=function(x){return new Promise(function(_,v){i.push([m,x,_,v])>1||l(m,x)})},y&&(s[m]=y(s[m])))}function l(m,y){try{u(n[m](y))}catch(x){h(i[0][3],x)}}function u(m){m.value instanceof wn?Promise.resolve(m.value.v).then(d,f):h(i[0][2],m)}function d(m){l("next",m)}function f(m){l("throw",m)}function h(m,y){m(y),i.shift(),i.length&&l(i[0][0],i[0][1])}}function vp(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(a){return(r=!r)?{value:wn(t[s](a)),done:!1}:i?i(a):a}:i}}function yp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Ki=="function"?Ki(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(o,l){a=t[i](a),s(o,l,a.done,a.value)})}}function s(i,a,o,l){Promise.resolve(l).then(function(u){i({value:u,done:o})},a)}}function xp(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var qy=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},fl=function(t){return fl=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},fl(t)};function wp(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=fl(t),n=0;n<r.length;n++)r[n]!=="default"&&ka(e,t,r[n]);return qy(e,t),e}function _p(t){return t&&t.__esModule?t:{default:t}}function bp(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Ep(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function kp(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Sp(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var Wy=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function jp(t){function e(i){t.error=t.hasError?new Wy(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(a){return e(a),s()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Cp(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,a){return n?e?".jsx":".js":s&&(!i||!a)?r:s+i+"."+a.toLowerCase()+"js"}):t}const Vy={__extends:np,__assign:Gi,__rest:Sn,__decorate:sp,__param:ip,__esDecorate:ap,__runInitializers:op,__propKey:lp,__setFunctionName:cp,__metadata:up,__awaiter:R,__generator:dp,__createBinding:ka,__exportStar:fp,__values:Ki,__read:Nc,__spread:hp,__spreadArrays:pp,__spreadArray:mp,__await:wn,__asyncGenerator:gp,__asyncDelegator:vp,__asyncValues:yp,__makeTemplateObject:xp,__importStar:wp,__importDefault:_p,__classPrivateFieldGet:bp,__classPrivateFieldSet:Ep,__classPrivateFieldIn:kp,__addDisposableResource:Sp,__disposeResources:jp,__rewriteRelativeImportExtension:Cp},Hy=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Sp,get __assign(){return Gi},__asyncDelegator:vp,__asyncGenerator:gp,__asyncValues:yp,__await:wn,__awaiter:R,__classPrivateFieldGet:bp,__classPrivateFieldIn:kp,__classPrivateFieldSet:Ep,__createBinding:ka,__decorate:sp,__disposeResources:jp,__esDecorate:ap,__exportStar:fp,__extends:np,__generator:dp,__importDefault:_p,__importStar:wp,__makeTemplateObject:xp,__metadata:up,__param:ip,__propKey:lp,__read:Nc,__rest:Sn,__rewriteRelativeImportExtension:Cp,__runInitializers:op,__setFunctionName:cp,__spread:hp,__spreadArray:mp,__spreadArrays:pp,__values:Ki,default:Vy},Symbol.toStringTag,{value:"Module"})),Gy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Sa=class extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}},Np=class extends Sa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},hl=class extends Sa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},pl=class extends Sa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Ji;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ji||(Ji={}));class Ky{constructor(e,{headers:r={},customFetch:n,region:s=Ji.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Gy(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return R(this,arguments,void 0,function*(r,n={}){var s;let i,a;try{const{headers:o,method:l,body:u,signal:d,timeout:f}=n;let h={},{region:m}=n;m||(m=this.region);const y=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,y.searchParams.set("forceFunctionRegion",m));let x;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(h["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(h["Content-Type"]="application/json",x=JSON.stringify(u)):x=u;let _=d;f&&(a=new AbortController,i=setTimeout(()=>a.abort(),f),d?(_=a.signal,d.addEventListener("abort",()=>a.abort())):_=a.signal);const v=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:x,signal:_}).catch(k=>{throw new Np(k)}),g=v.headers.get("x-relay-error");if(g&&g==="true")throw new hl(v);if(!v.ok)throw new pl(v);let p=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return p==="application/json"?w=yield v.json():p==="application/octet-stream"||p==="application/pdf"?w=yield v.blob():p==="text/event-stream"?w=v:p==="multipart/form-data"?w=yield v.formData():w=yield v.text(),{data:w,error:null,response:v}}catch(o){return{data:null,error:o,response:o instanceof pl||o instanceof hl?o.context:void 0}}finally{i&&clearTimeout(i)}})}}const Jy=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Ji},FunctionsClient:Ky,FunctionsError:Sa,FunctionsFetchError:Np,FunctionsHttpError:pl,FunctionsRelayError:hl},Symbol.toStringTag,{value:"Module"})),Tp=_s(Jy);var Ne={};const jn=_s(Hy);var Js={},Qs={},Ys={},Xs={},Zs={},ei={},Xu;function Op(){if(Xu)return ei;Xu=1,Object.defineProperty(ei,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ei.default=t,ei}var Zu;function Pp(){if(Zu)return Zs;Zu=1,Object.defineProperty(Zs,"__esModule",{value:!0});const e=jn.__importDefault(Op());let r=class{constructor(s){var i,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,d,f,h;let m=null,y=null,x=null,_=l.status,v=l.statusText;if(l.ok){if(this.method!=="HEAD"){const k=await l.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?y=k:y=JSON.parse(k))}const p=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),w=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");p&&w&&w.length>1&&(x=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(m={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,x=null,_=406,v="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const p=await l.text();try{m=JSON.parse(p),Array.isArray(m)&&l.status===404&&(y=[],m=null,_=200,v="OK")}catch{l.status===404&&p===""?(_=204,v="No Content"):m={message:p}}if(m&&this.isMaybeSingle&&(!((h=m==null?void 0:m.details)===null||h===void 0)&&h.includes("0 rows"))&&(m=null,_=200,v="OK"),m&&this.shouldThrowOnError)throw new e.default(m)}return{error:m,data:y,count:x,status:_,statusText:v}});return this.shouldThrowOnError||(o=o.catch(l=>{var u,d,f,h,m,y;let x="";const _=l==null?void 0:l.cause;if(_){const v=(u=_==null?void 0:_.message)!==null&&u!==void 0?u:"",g=(d=_==null?void 0:_.code)!==null&&d!==void 0?d:"";x=`${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"FetchError"}: ${l==null?void 0:l.message}`,x+=`

Caused by: ${(h=_==null?void 0:_.name)!==null&&h!==void 0?h:"Error"}: ${v}`,g&&(x+=` (${g})`),_!=null&&_.stack&&(x+=`
${_.stack}`)}else x=(m=l==null?void 0:l.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(y=l==null?void 0:l.name)!==null&&y!==void 0?y:"FetchError"}: ${l==null?void 0:l.message}`,details:x,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(s,i)}returns(){return this}overrideTypes(){return this}};return Zs.default=r,Zs}var ed;function Ap(){if(ed)return Xs;ed=1,Object.defineProperty(Xs,"__esModule",{value:!0});const e=jn.__importDefault(Pp());let r=class extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:o=!1,wal:l=!1,format:u="text"}={}){var d;const f=[s?"analyze":null,i?"verbose":null,a?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};return Xs.default=r,Xs}var td;function Tc(){if(td)return Ys;td=1,Object.defineProperty(Ys,"__esModule",{value:!0});const e=jn.__importDefault(Ap()),r=new RegExp("[,()]");let n=class extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}regexMatch(i,a){return this.url.searchParams.append(i,`match.${a}`),this}regexIMatch(i,a){return this.url.searchParams.append(i,`imatch.${a}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}isDistinct(i,a){return this.url.searchParams.append(i,`isdistinct.${a}`),this}in(i,a){const o=Array.from(new Set(a)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:o,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${u}fts${d}.${a}`),this}match(i){return Object.entries(i).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(i,a,o){return this.url.searchParams.append(i,`not.${a}.${o}`),this}or(i,{foreignTable:a,referencedTable:o=a}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,a,o){return this.url.searchParams.append(i,`${a}.${o}`),this}};return Ys.default=n,Ys}var rd;function Rp(){if(rd)return Qs;rd=1,Object.defineProperty(Qs,"__esModule",{value:!0});const e=jn.__importDefault(Tc());let r=class{constructor(s,{headers:i={},schema:a,fetch:o}){this.url=s,this.headers=new Headers(i),this.schema=a,this.fetch=o}select(s,i){const{head:a=!1,count:o}=i??{},l=a?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:a=!0}={}){var o;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:o,defaultToNull:l=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:i}={}){var a;const o="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var i;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return Qs.default=r,Qs}var nd;function Qy(){if(nd)return Js;nd=1,Object.defineProperty(Js,"__esModule",{value:!0});const t=jn,e=t.__importDefault(Rp()),r=t.__importDefault(Tc());let n=class Ip{constructor(i,{headers:a={},schema:o,fetch:l}={}){this.url=i,this.headers=new Headers(a),this.schemaName=o,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${i}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new Ip(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:o=!1,get:l=!1,count:u}={}){var d;let f;const h=new URL(`${this.url}/rpc/${i}`);let m;o||l?(f=o?"HEAD":"GET",Object.entries(a).filter(([x,_])=>_!==void 0).map(([x,_])=>[x,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([x,_])=>{h.searchParams.append(x,_)})):(f="POST",m=a);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new r.default({method:f,url:h,headers:y,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};return Js.default=n,Js}Object.defineProperty(Ne,"__esModule",{value:!0});Ne.PostgrestError=Ne.PostgrestBuilder=Ne.PostgrestTransformBuilder=Ne.PostgrestFilterBuilder=Ne.PostgrestQueryBuilder=Ne.PostgrestClient=void 0;const Cn=jn,$p=Cn.__importDefault(Qy());Ne.PostgrestClient=$p.default;const Lp=Cn.__importDefault(Rp());Ne.PostgrestQueryBuilder=Lp.default;const Mp=Cn.__importDefault(Tc());Ne.PostgrestFilterBuilder=Mp.default;const Dp=Cn.__importDefault(Ap());Ne.PostgrestTransformBuilder=Dp.default;const Up=Cn.__importDefault(Pp());Ne.PostgrestBuilder=Up.default;const zp=Cn.__importDefault(Op());Ne.PostgrestError=zp.default;Ne.default={PostgrestClient:$p.default,PostgrestQueryBuilder:Lp.default,PostgrestFilterBuilder:Mp.default,PostgrestTransformBuilder:Dp.default,PostgrestBuilder:Up.default,PostgrestError:zp.default};class Fp{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Yy="2.87.1",Xy=`realtime-js/${Yy}`,Bp="1.0.0",Zy="2.0.0",sd=Bp,ml=1e4,ex=1e3,tx=100;var xr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xr||(xr={}));var de;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(de||(de={}));var lt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(lt||(lt={}));var gl;(function(t){t.websocket="websocket"})(gl||(gl={}));var wr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(wr||(wr={}));class rx{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,r,n){var s,i;const a=e.topic,o=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+u.length+f.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(m),x=0;y.setUint8(x++,this.KINDS.userBroadcastPush),y.setUint8(x++,l.length),y.setUint8(x++,o.length),y.setUint8(x++,a.length),y.setUint8(x++,u.length),y.setUint8(x++,f.length),y.setUint8(x++,r),Array.from(l,v=>y.setUint8(x++,v.charCodeAt(0))),Array.from(o,v=>y.setUint8(x++,v.charCodeAt(0))),Array.from(a,v=>y.setUint8(x++,v.charCodeAt(0))),Array.from(u,v=>y.setUint8(x++,v.charCodeAt(0))),Array.from(f,v=>y.setUint8(x++,v.charCodeAt(0)));var _=new Uint8Array(m.byteLength+n.byteLength);return _.set(new Uint8Array(m),0),_.set(new Uint8Array(n),m.byteLength),_.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,i,a,o,l]=n;return r({join_ref:s,ref:i,topic:a,event:o,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),o=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(e.slice(l,l+s));l=l+s;const d=n.decode(e.slice(l,l+i));l=l+i;const f=n.decode(e.slice(l,l+a));l=l+a;const h=e.slice(l,e.byteLength),m=o===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,y={type:this.BROADCAST_EVENT,event:d,payload:m};return a>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class qp{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Z;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Z||(Z={}));const id=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=nx(a,t,e,s),i),{}):{}},nx=(t,e,r,n)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=r[t];return i&&!n.includes(i)?Wp(i,a):vl(a)},Wp=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return ox(e,r)}switch(t){case Z.bool:return sx(e);case Z.float4:case Z.float8:case Z.int2:case Z.int4:case Z.int8:case Z.numeric:case Z.oid:return ix(e);case Z.json:case Z.jsonb:return ax(e);case Z.timestamp:return lx(e);case Z.abstime:case Z.date:case Z.daterange:case Z.int4range:case Z.int8range:case Z.money:case Z.reltime:case Z.text:case Z.time:case Z.timestamptz:case Z.timetz:case Z.tsrange:case Z.tstzrange:return vl(e);default:return vl(e)}},vl=t=>t,sx=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ix=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ax=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ox=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Wp(e,o))}return t},lx=t=>typeof t=="string"?t.replace(" ","T"):t,Vp=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ao{constructor(e,r,n={},s=ml){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yl;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(yl||(yl={}));let Hp=class vi{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vi.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=vi.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=vi.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),a=this.transformState(r),o={},l={};return this.map(i,(u,d)=>{a[u]||(l[u]=d)}),this.map(a,(u,d)=>{const f=i[u];if(f){const h=d.map(_=>_.presence_ref),m=f.map(_=>_.presence_ref),y=d.filter(_=>m.indexOf(_.presence_ref)<0),x=f.filter(_=>h.indexOf(_.presence_ref)<0);y.length>0&&(o[u]=y),x.length>0&&(l[u]=x)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),d.length>0){const f=e[o].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);e[o].unshift(...h)}n(o,d,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var xl;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(xl||(xl={}));var dn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(dn||(dn={}));var vt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(vt||(vt={}));const cx=de;let Gp=class Fn{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=de.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ao(this,lt.join,this.params,this.timeout),this.rejoinTimer=new qp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=de.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=de.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lt.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Hp(this),this.broadcastEndpointURL=Vp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==de.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[dn.PRESENCE]&&this.bindings[dn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(vt.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(vt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e==null||e(vt.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,_=(y=x==null?void 0:x.length)!==null&&y!==void 0?y:0,v=[];for(let g=0;g<_;g++){const p=x[g],{filter:{event:w,schema:k,table:S,filter:j}}=p,E=m&&m[g];if(E&&E.event===w&&Fn.isFilterValueEqual(E.schema,k)&&Fn.isFilterValueEqual(E.table,S)&&Fn.isFilterValueEqual(E.filter,j))v.push(Object.assign(Object.assign({},p),{id:E.id}));else{this.unsubscribe(),this.state=de.errored,e==null||e(vt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(vt.SUBSCRIBED);return}}).receive("error",m=>{this.state=de.errored,e==null||e(vt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(vt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===de.joined&&e===dn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const u=await o.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=de.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ao(this,lt.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=de.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ao(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tx){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:d}=lt;if(n&&[o,l,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,x,_;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(x=m.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(m=>m.callback(h,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var y,x,_,v,g,p;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const w=m.id,k=(y=m.filter)===null||y===void 0?void 0:y.event;return w&&((x=r.ids)===null||x===void 0?void 0:x.includes(w))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const w=(g=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:x,table:_,commit_timestamp:v,type:g,errors:p}=y;h=Object.assign(Object.assign({},{schema:x,table:_,commit_timestamp:v,eventType:g,new:{},old:{},errors:p}),this._getPayloadRecords(y))}m.callback(h,n)})}_isClosed(){return this.state===de.closed}_isJoined(){return this.state===de.joined}_isJoining(){return this.state===de.joining}_isLeaving(){return this.state===de.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Fn.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(lt.close,{},e)}_onError(e){this._on(lt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=de.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=id(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=id(e.columns,e.old_record)),r}};const oo=()=>{},ti={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ux=[1e3,2e3,5e3,1e4],dx=1e4,fx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let hx=class{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ml,this.transport=null,this.heartbeatIntervalMs=ti.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=oo,this.ref=0,this.reconnectTimer=null,this.vsn=sd,this.logger=oo,this.conn=null,this.sendBuffer=[],this.serializer=new rx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${gl.websocket}`,this.httpEndpoint=Vp(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Fp.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case xr.connecting:return wr.Connecting;case xr.open:return wr.Open;case xr.closing:return wr.Closing;default:return wr.Closed}}isConnected(){return this.connectionState()===wr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Gp(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ex,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ti.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:a}=r,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===xr.open||this.conn.readyState===xr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(lt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([fx],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:Xy};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(lt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new qp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ti.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,a,o,l,u,d,f,h,m;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:ml,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ti.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:oo,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:sd,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:y=>ux[y-1]||dx,this.vsn){case Bp:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(y,x)=>x(JSON.stringify(y)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(y,x)=>x(JSON.parse(y));break;case Zy:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const px=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:cx,get REALTIME_LISTEN_TYPES(){return dn},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return xl},get REALTIME_PRESENCE_LISTEN_EVENTS(){return yl},get REALTIME_SUBSCRIBE_STATES(){return vt},RealtimeChannel:Gp,RealtimeClient:hx,RealtimePresence:Hp,WebSocketFactory:Fp},Symbol.toStringTag,{value:"Module"})),Kp=_s(px);class Ns extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function se(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Jp extends Ns{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qi extends Ns{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Oc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mx=()=>Response,wl=t=>{if(Array.isArray(t))return t.map(r=>wl(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=wl(n)}),e},gx=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vx=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),lo=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},yx=(t,e,r)=>R(void 0,void 0,void 0,function*(){const n=yield mx();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new Jp(lo(s),i,a))}).catch(s=>{e(new Qi(lo(s),s))}):e(new Qi(lo(t),t))}),xx=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(gx(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Ts(t,e,r,n,s,i){return R(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,xx(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>yx(l,o,n))})})}function vs(t,e,r,n){return R(this,void 0,void 0,function*(){return Ts(t,"GET",e,r,n)})}function at(t,e,r,n,s){return R(this,void 0,void 0,function*(){return Ts(t,"POST",e,n,s,r)})}function _l(t,e,r,n,s){return R(this,void 0,void 0,function*(){return Ts(t,"PUT",e,n,s,r)})}function wx(t,e,r,n){return R(this,void 0,void 0,function*(){return Ts(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Pc(t,e,r,n,s){return R(this,void 0,void 0,function*(){return Ts(t,"DELETE",e,n,s,r)})}class _x{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return R(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(se(e))return{data:null,error:e};throw e}})}}var Qp;class bx{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Qp]="BlobDownloadBuilder",this.promise=null}asStream(){return new _x(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return R(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(se(e))return{data:null,error:e};throw e}})}}Qp=Symbol.toStringTag;const Ex={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ad={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class kx{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Oc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return R(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},ad),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(e=="PUT"?_l:at)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(se(i))return{data:null,error:i};throw i}})}upload(e,r,n){return R(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return R(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:ad.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield _l(this.fetch,o.toString(),l,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(se(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return R(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield at(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Ns("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}update(e,r,n){return R(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return R(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}copy(e,r,n){return R(this,void 0,void 0,function*(){try{return{data:{path:(yield at(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return R(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield at(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return R(this,void 0,void 0,function*(){try{const s=yield at(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"",o=this._getFinalPath(e),l=()=>vs(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new bx(l,this.shouldThrowOnError)}info(e){return R(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield vs(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:wl(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}exists(e){return R(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield wx(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n)&&n instanceof Qi){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return R(this,void 0,void 0,function*(){try{return{data:yield Pc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}list(e,r,n){return R(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Ex),r),{prefix:e||""});return{data:yield at(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}listV2(e,r){return R(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield at(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Yp="2.87.1",Xp={"X-Client-Info":`storage-js/${Yp}`};class Sx{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xp),r),this.fetch=Oc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return R(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield vs(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}getBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}createBucket(e){return R(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield at(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(se(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return R(this,void 0,void 0,function*(){try{return{data:yield _l(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(se(n))return{data:null,error:n};throw n}})}emptyBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}deleteBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield Pc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var ys=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function jx(t,e,r){const n=new URL(e,t);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function Cx(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Nx(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:a}){const o=jx(t.baseUrl,n,s),l=await Cx(t.auth),u=await e(o,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...a},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),h=f&&d?JSON.parse(d):d;if(!u.ok){const m=f?h:void 0,y=m==null?void 0:m.error;throw new ys((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:m})}return{status:u.status,headers:u.headers,data:h}}}}function ri(t){return t.join("")}var Tx=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ri(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ri(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ri(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ri(t.namespace)}`}),!0}catch(e){if(e instanceof ys&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof ys&&r.status===409)return;throw r}}};function Mr(t){return t.join("")}var Ox=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof ys&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof ys&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},Px=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Nx({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Tx(this.client,e),this.tableOps=new Ox(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class Zp{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xp),r),this.fetch=Oc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}listBuckets(e){return R(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield vs(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}deleteBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield Pc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(se(r))return{data:null,error:r};throw r}})}from(e){if(!vx(e))throw new Ns("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Px({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>R(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,a){const o=i[a];return typeof o!="function"?o:(...l)=>R(this,void 0,void 0,function*(){try{return{data:yield o.apply(i,l),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}})}})}}const Ac={"X-Client-Info":`storage-js/${Yp}`,"Content-Type":"application/json"};class Rc extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Le(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class yi extends Rc{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class em extends Rc{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var bl;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(bl||(bl={}));const ja=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ax=()=>Response,tm=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Rx=t=>Array.from(new Float32Array(t)),Ix=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},od=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),$x=(t,e,r)=>R(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";e(new yi(od(a),s,o))}).catch(()=>{const a=s+"",o=i.statusText||`HTTP ${s} error`;e(new yi(o,s,a))});else{const a=s+"",o=i.statusText||`HTTP ${s} error`;e(new yi(o,s,a))}}else e(new em(od(t),t))}),Lx=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(tm(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function Mx(t,e,r,n,s,i){return R(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,Lx(e,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>$x(l,o,n))})})}function qe(t,e,r,n,s){return R(this,void 0,void 0,function*(){return Mx(t,"POST",e,n,s,r)})}class rm{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ac),r),this.fetch=ja(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return R(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}getIndex(e,r){return R(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}listIndexes(e){return R(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return R(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}}class nm{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ac),r),this.fetch=ja(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return R(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield qe(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}getVectors(e){return R(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}listVectors(e){return R(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield qe(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}queryVectors(e){return R(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}deleteVectors(e){return R(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield qe(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}}class sm{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ac),r),this.fetch=ja(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return R(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}getBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}listBuckets(){return R(this,arguments,void 0,function*(e={}){try{return{data:yield qe(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}deleteBucket(e){return R(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}}class im extends sm{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new am(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return R(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return R(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return R(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return R(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class am extends rm{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return R(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return R(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return R(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return R(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new om(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class om extends nm{constructor(e,r,n,s,i){super(e,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return R(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return R(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return R(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return R(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return R(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Dx extends Sx{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new kx(this.url,this.headers,e,this.fetch)}get vectors(){return new im(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Zp(this.url+"/iceberg",this.headers,this.fetch)}}const Ux=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:Zp,StorageApiError:Jp,StorageClient:Dx,StorageError:Ns,StorageUnknownError:Qi,StorageVectorsApiError:yi,StorageVectorsClient:im,StorageVectorsError:Rc,get StorageVectorsErrorCode(){return bl},StorageVectorsUnknownError:em,VectorBucketApi:sm,VectorBucketScope:am,VectorDataApi:nm,VectorIndexApi:rm,VectorIndexScope:om,isPlainObject:tm,isStorageError:se,isStorageVectorsError:Le,normalizeToFloat32:Rx,resolveFetch:ja,resolveResponse:Ax,validateVectorDimension:Ix},Symbol.toStringTag,{value:"Module"})),zx=_s(Ux);var lm={},Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.version=void 0;Ca.version="2.87.1";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=Ca;let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(lm);var cm={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=s=>s?(...i)=>s(...i):(...i)=>fetch(...i);t.resolveFetch=e;const r=()=>Headers;t.resolveHeadersConstructor=r;const n=(s,i,a)=>{const o=(0,t.resolveFetch)(a),l=(0,t.resolveHeadersConstructor)();return async(u,d)=>{var f;const h=(f=await i())!==null&&f!==void 0?f:s;let m=new l(d==null?void 0:d.headers);return m.has("apikey")||m.set("apikey",s),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),o(u,Object.assign(Object.assign({},d),{headers:m}))}};t.fetchWithAuth=n})(cm);var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.isBrowser=void 0;ur.uuid=Fx;ur.ensureTrailingSlash=um;ur.applySettingDefaults=qx;ur.validateSupabaseUrl=Wx;function Fx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t=="x"?e:e&3|8;return r.toString(16)})}function um(t){return t.endsWith("/")?t:t+"/"}const Bx=()=>typeof window<"u";ur.isBrowser=Bx;function qx(t,e){var r,n;const{db:s,auth:i,realtime:a,global:o}=t,{db:l,auth:u,realtime:d,global:f}=e,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function Wx(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(um(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Na={};const dm="2.87.1",Br=30*1e3,El=3,co=El*Br,Vx="http://localhost:9999",Hx="supabase.auth.token",Gx={"X-Client-Info":`gotrue-js/${dm}`},kl="X-Supabase-Api-Version",fm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Kx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jx=10*60*1e3;let _n=class extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}};function M(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let hm=class extends _n{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}};function pm(t){return M(t)&&t.name==="AuthApiError"}let Wt=class extends _n{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},$t=class extends _n{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}},Ie=class extends $t{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function mm(t){return M(t)&&t.name==="AuthSessionMissingError"}let gr=class extends $t{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Bn=class extends $t{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},qn=class extends $t{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function gm(t){return M(t)&&t.name==="AuthImplicitGrantRedirectError"}let Sl=class extends $t{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Yi=class extends $t{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}};function xi(t){return M(t)&&t.name==="AuthRetryableFetchError"}let jl=class extends $t{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}};function Qx(t){return M(t)&&t.name==="AuthWeakPasswordError"}let Xi=class extends $t{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ld=` 	
\r=`.split(""),Yx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ld.length;e+=1)t[ld[e].charCodeAt(0)]=-2;for(let e=0;e<Zi.length;e+=1)t[Zi[e].charCodeAt(0)]=e;return t})();function cd(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Zi[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Zi[n]),e.queuedBits-=6}}function vm(t,e,r){const n=Yx[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ud(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{ew(a,n,r)};for(let a=0;a<t.length;a+=1)vm(t.charCodeAt(a),s,i);return e.join("")}function Xx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Zx(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Xx(n,e)}}function ew(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function fn(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)vm(t.charCodeAt(s),r,n);return new Uint8Array(e)}function tw(t){const e=[];return Zx(t,r=>e.push(r)),new Uint8Array(e)}function kr(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>cd(s,r,n)),cd(null,r,n),e.join("")}function rw(t){return Math.round(Date.now()/1e3)+t}function nw(){return Symbol("auth-callback")}const _e=()=>typeof window<"u"&&typeof document<"u",fr={tested:!1,writable:!1},ym=()=>{if(!_e())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fr.tested)return fr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),fr.tested=!0,fr.writable=!0}catch{fr.tested=!0,fr.writable=!1}return fr.writable};function sw(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const xm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),iw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",qr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},hr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},we=async(t,e)=>{await t.removeItem(e)};class Ta{constructor(){this.promise=new Ta.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Ta.promiseConstructor=Promise;function uo(t){const e=t.split(".");if(e.length!==3)throw new Xi("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Kx.test(e[n]))throw new Xi("JWT not in base64url format");return{header:JSON.parse(ud(e[0])),payload:JSON.parse(ud(e[1])),signature:fn(e[2]),raw:{header:e[0],payload:e[1]}}}async function aw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ow(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function lw(t){return("0"+t.toString(16)).substr(-2)}function cw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,lw).join("")}async function uw(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function dw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await uw(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dr(t,e,r=!1){const n=cw();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await qr(t,`${e}-code-verifier`,s);const i=await dw(n);return[i,n===i?"plain":"s256"]}const fw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hw(t){const e=t.headers.get(kl);if(!e||!e.match(fw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function pw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ur(t){if(!gw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fo(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vw(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function dd(t){return JSON.parse(JSON.stringify(t))}const vr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yw=[502,503,504];async function fd(t){var e;if(!iw(t))throw new Yi(vr(t),0);if(yw.includes(t.status))throw new Yi(vr(t),t.status);let r;try{r=await t.json()}catch(i){throw new Wt(vr(i),i)}let n;const s=hw(t);if(s&&s.getTime()>=fm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new jl(vr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ie}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new jl(vr(r),t.status,r.weak_password.reasons);throw new hm(vr(r),t.status||500,n)}const xw=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function q(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[kl]||(i[kl]=fm["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await ww(t,e,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function ww(t,e,r,n,s,i){const a=xw(e,n,s,i);let o;try{o=await t(r,Object.assign({},a))}catch(l){throw console.error(l),new Yi(vr(l),0)}if(o.ok||await fd(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await fd(l)}}function st(t){var e;let r=null;Ew(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=rw(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function hd(t){const e=st(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Vt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _w(t){return{data:t,error:null}}function bw(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,a=Sn(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function pd(t){return t}function Ew(t){return t.access_token&&t.refresh_token&&t.expires_in}const wi=["global","local","others"];let Ic=class{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=xm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=wi[0]){if(wi.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wi.join(", ")}`);try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Vt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Sn(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:bw,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(M(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Vt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:pd});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);u[`${_}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(M(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ur(e);try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Vt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Ur(e);try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Vt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Ur(e);try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Vt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ur(e.userId);try{const{data:r,error:n}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Ur(e.userId),Ur(e.id);try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await q(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:pd});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);u[`${_}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(M(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await q(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await q(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await q(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await q(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await q(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}};function md(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const yr={debug:!!(globalThis&&ym()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $c extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let wm=class extends $c{};class kw extends $c{}async function _m(t,e,r){yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),yr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new wm(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(yr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const gd={};async function Sw(t,e,r){var n;const s=(n=gd[t])!==null&&n!==void 0?n:Promise.resolve(),i=Promise.race([s.catch(()=>null),e>=0?new Promise((a,o)=>{setTimeout(()=>{o(new kw(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(a=>a)).catch(a=>{if(a&&a.isAcquireTimeout)throw a;return null}).then(async()=>await r());return gd[t]=i.catch(async a=>{if(a&&a.isAcquireTimeout)return await s,null;throw a}),await i}function jw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function bm(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Cw(t){return parseInt(t,16)}function Nw(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Tw(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:l,resources:u,scheme:d,uri:f,version:h}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=bm(t.address),y=d?`${d}://${n}`:n,x=t.statement?`${t.statement}
`:"",_=`${y} wants you to sign in with your Ethereum account:
${m}

${x}`;let v=`URI: ${f}
Version: ${h}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),o&&(v+=`
Not Before: ${o.toISOString()}`),l&&(v+=`
Request ID: ${l}`),u){let g=`
Resources:`;for(const p of u){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);g+=`
- ${p}`}v+=g}return`${_}
${v}`}class fe extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class ea extends fe{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Ow({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new fe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new fe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new fe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new fe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new fe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new fe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new fe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new fe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Em(a)){if(i.rp.id!==a)return new fe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new fe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new fe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Pw({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new fe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new fe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Em(n)){if(r.rpId!==n)return new fe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new fe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Aw{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Rw=new Aw;function Iw(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=Sn(t,["challenge","user","excludeCredentials"]),i=fn(e).buffer,a=Object.assign(Object.assign({},r),{id:fn(r.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:fn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function $w(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Sn(t,["challenge","allowCredentials"]),s=fn(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const o=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},o),{id:fn(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function Lw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:kr(new Uint8Array(t.response.attestationObject)),clientDataJSON:kr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Mw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:kr(new Uint8Array(s.authenticatorData)),clientDataJSON:kr(new Uint8Array(s.clientDataJSON)),signature:kr(new Uint8Array(s.signature)),userHandle:s.userHandle?kr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Em(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function vd(){var t,e;return!!(_e()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Dw(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ea("Browser returned unexpected credential type",e)}:{data:null,error:new ea("Empty credential response",e)}}catch(e){return{data:null,error:Ow({error:e,options:t})}}}async function Uw(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ea("Browser returned unexpected credential type",e)}:{data:null,error:new ea("Empty credential response",e)}}catch(e){return{data:null,error:Pw({error:e,options:t})}}}const zw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Fw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ta(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(e(a)){const o=n[i];e(o)?n[i]=ta(o,a):n[i]=ta(a)}else n[i]=a}return n}function Bw(t,e){return ta(zw,t,e||{})}function qw(t,e){return ta(Fw,t,e||{})}class Ww{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:o};const l=s??Rw.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=Bw(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await Dw({publicKey:u,signal:l});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=qw(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await Uw(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(a){return M(a)?{data:null,error:a}:{data:null,error:new Wt("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new _n("rpId is required for WebAuthn authentication")};try{if(!vd())return{data:null,error:new Wt("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(a){return M(a)?{data:null,error:a}:{data:null,error:new Wt("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new _n("rpId is required for WebAuthn registration")};try{if(!vd())return{data:null,error:new Wt("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:l,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(a){return M(a)?{data:null,error:a}:{data:null,error:new Wt("Unexpected error in register",a)}}}}jw();const Vw={url:Vx,storageKey:Hx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function yd(t,e,r){return await r()}const zr={};let Lc=class Cl{get jwks(){var e,r;return(r=(e=zr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=zr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Vw),e);if(this.storageKey=i.storageKey,this.instanceID=(r=Cl.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Cl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&_e()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ic({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=xm(i.fetch),this.lock=i.lock||yd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&_e()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=_m:this.lock=yd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ww(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ym()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=md(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=md(this.memoryStorage)),_e()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${dm}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(_e()&&(r=sw(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),_e()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),gm(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return M(r)?this._returnResult({error:r}):this._returnResult({error:new Wt("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:st}),{data:a,error:o}=i;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(M(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:f,options:h}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Dr(this.storage,this.storageKey)),i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:y},xform:st})}else if("phone"in e){const{phone:d,password:f,options:h}=e;i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:st})}else throw new Bn("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return await we(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await we(this.storage,`${this.storageKey}-code-verifier`),M(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:o}=e;r=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hd})}else if("phone"in e){const{phone:i,password:a,options:o}=e;r=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hd})}else throw new Bn("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new gr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,a,o,l,u,d,f,h;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:x,wallet:_,statement:v,options:g}=e;let p;if(_e())if(typeof _=="object")p=_;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")p=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=_}const w=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href),k=await p.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=bm(k[0]);let j=(n=g==null?void 0:g.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const P=await p.request({method:"eth_chainId"});j=Cw(P)}const E={domain:w.host,address:S,statement:v,uri:w.href,version:"1",chainId:j,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=Tw(E),y=await p.request({method:"personal_sign",params:[Nw(m),S]})}try{const{data:x,error:_}=await q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:st});if(_)throw _;if(!x||!x.session||!x.user){const v=new gr;return this._returnResult({data:{user:null,session:null},error:v})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:_})}catch(x){if(M(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var r,n,s,i,a,o,l,u,d,f,h,m;let y,x;if("message"in e)y=e.message,x=e.signature;else{const{chain:_,wallet:v,statement:g,options:p}=e;let w;if(_e())if(typeof v=="object")w=v;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))w=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const k=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const S=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),g?{statement:g}:null));let j;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")j=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)j=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)y=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),x=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((f=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...p.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const S=await w.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=S}}try{const{data:_,error:v}=await q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:kr(x)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:st});if(v)throw v;if(!_||!_.session||!_.user){const g=new gr;return this._returnResult({data:{user:null,session:null},error:g})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:v})}catch(_){if(M(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(e){const r=await hr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:st});if(await we(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const o=new gr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await we(this.storage,`${this.storageKey}-code-verifier`),M(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=e,o=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:st}),{data:l,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new gr;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Dr(this.storage,this.storageKey));const{error:f}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:d}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Bn("You must provide either an email or phone number.")}catch(o){if(await we(this.storage,`${this.storageKey}-code-verifier`),M(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:st});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,i,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Dr(this.storage,this.storageKey));const u=await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:_w});return!((i=u.data)===null||i===void 0)&&i.url&&_e()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await we(this.storage,`${this.storageKey}-code-verifier`),M(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ie;const{error:s}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(M(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await q(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:o}=await q(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new Bn("You must provide either an email or phone number and a type")}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<co:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await hr(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=fo()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=vw(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Vt}):await this._useSession(async r=>{var n,s,i;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ie}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Vt})})}catch(r){if(M(r))return mm(r)&&(await this._removeSession(),await we(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ie;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Dr(this.storage,this.storageKey));const{data:u,error:d}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Vt});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(await we(this.storage,`${this.storageKey}-code-verifier`),M(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ie;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=uo(e.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(M(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:o}=r;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ie;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!_e())throw new qn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Sl("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Sl("No code detected.");const{data:g,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new qn("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;l&&(h=parseInt(l));const m=h-d;m*1e3<=Br&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=h-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:x,error:_}=await this._getUser(i);if(_)throw _;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:a,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(n){if(M(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await hr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(pm(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await we(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=nw(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Dr(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await we(this.storage,`${this.storageKey}-code-verifier`),M(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,o,l,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return _e()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(M(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:o,token:l,access_token:u,nonce:d}=e,f=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:st}),{data:h,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new gr}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(s){if(await we(this.storage,`${this.storageKey}-code-verifier`),M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ow(async s=>(s>0&&await aw(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:st})),(s,i)=>{const a=200*Math.pow(2,s);return i&&xi(i)&&Date.now()+a-n<Br})}catch(n){if(this._debug(r,"error",n),M(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),_e()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await hr(this.storage,this.storageKey);if(s&&this.userStorage){let a=await hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await qr(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:fo()}else if(s&&!s.user&&!s.user){const a=await hr(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await we(this.storage,this.storageKey+"-user"),await qr(this.storage,this.storageKey,s)):s.user=fo()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<co;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${co}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),xi(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ie;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ta;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Ie;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),M(i)){const a={data:null,error:i};return xi(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await we(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await qr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=dd(s);await qr(this.storage,this.storageKey,i)}else{const s=dd(r);await qr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await we(this.storage,this.storageKey),await we(this.storage,this.storageKey+"-code-verifier"),await we(this.storage,this.storageKey+"-user"),this.userStorage&&await we(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_e()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Br);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Br);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Br}ms, refresh threshold is ${El} ticks`),s<=El&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $c)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_e()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Dr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await q(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Lw(e.webauthn.credential_response):Mw(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Iw(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:$w(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=uo(n.access_token);let a=null;i.aal&&(a=i.aal);let o=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await q(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ie})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ie});const a=await q(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&_e()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ie});const a=await q(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&_e()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await q(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ie})})}catch(e){if(M(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await q(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ie})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Jx>s)return n;const{data:i,error:a}=await q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(o=>o.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});n=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=uo(n);r!=null&&r.allowExpired||pw(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const d=mw(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,tw(`${o}.${l}`)))throw new Xi("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}};Lc.nextInstanceID={};const Hw=Ic,Gw=Lc,Kw=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:Hw,AuthApiError:hm,AuthClient:Gw,AuthError:_n,AuthImplicitGrantRedirectError:qn,AuthInvalidCredentialsError:Bn,AuthInvalidJwtError:Xi,AuthInvalidTokenResponseError:gr,AuthPKCEGrantCodeExchangeError:Sl,AuthRetryableFetchError:Yi,AuthSessionMissingError:Ie,AuthUnknownError:Wt,AuthWeakPasswordError:jl,CustomAuthError:$t,GoTrueAdminApi:Ic,GoTrueClient:Lc,NavigatorLockAcquireTimeoutError:wm,SIGN_OUT_SCOPES:wi,isAuthApiError:pm,isAuthError:M,isAuthImplicitGrantRedirectError:gm,isAuthRetryableFetchError:xi,isAuthSessionMissingError:mm,isAuthWeakPasswordError:Qx,lockInternals:yr,navigatorLock:_m,processLock:Sw},Symbol.toStringTag,{value:"Module"})),km=_s(Kw);Object.defineProperty(Na,"__esModule",{value:!0});Na.SupabaseAuthClient=void 0;const Jw=km;class Qw extends Jw.AuthClient{constructor(e){super(e)}}Na.SupabaseAuthClient=Qw;Object.defineProperty(Hi,"__esModule",{value:!0});const Yw=Tp,Xw=Ne,Zw=Kp,e1=zx,ni=lm,t1=cm,xd=ur,r1=Na;let n1=class{constructor(e,r,n){var s,i,a;this.supabaseUrl=e,this.supabaseKey=r;const o=(0,xd.validateSupabaseUrl)(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:ni.DEFAULT_DB_OPTIONS,realtime:ni.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},ni.DEFAULT_AUTH_OPTIONS),{storageKey:l}),global:ni.DEFAULT_GLOBAL_OPTIONS},d=(0,xd.applySettingDefaults)(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=(0,t1.fetchWithAuth)(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new Xw.PostgrestClient(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new e1.StorageClient(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Yw.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:a,flowType:o,lock:l,debug:u,throwOnError:d},f,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new r1.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:o,lock:l,debug:u,throwOnError:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Zw.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};Hi.default=n1;(function(t){var e=$r&&$r.__createBinding||(Object.create?function(d,f,h,m){m===void 0&&(m=h);var y=Object.getOwnPropertyDescriptor(f,h);(!y||("get"in y?!f.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(d,m,y)}:function(d,f,h,m){m===void 0&&(m=h),d[m]=f[h]}),r=$r&&$r.__exportStar||function(d,f){for(var h in d)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&e(f,d,h)},n=$r&&$r.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const s=n(Hi);r(km,t);var i=Ne;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var a=Tp;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return a.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return a.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return a.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return a.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return a.FunctionRegion}}),r(Kp,t);var o=Hi;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return n(o).default}});const l=(d,f,h)=>new s.default(d,f,h);t.createClient=l;function u(){if(typeof window<"u"||typeof process>"u")return!1;const d=process.version;if(d==null)return!1;const f=d.match(/^v(\d+)\./);return f?parseInt(f[1],10)<=18:!1}u()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Cc);const Sm=Sd(Cc),s1=Vm({__proto__:null,default:Sm},[Cc]),{PostgrestError:N_,FunctionsHttpError:T_,FunctionsFetchError:O_,FunctionsRelayError:P_,FunctionsError:A_,FunctionRegion:R_,SupabaseClient:I_,createClient:i1,GoTrueAdminApi:$_,GoTrueClient:L_,AuthAdminApi:M_,AuthClient:D_,navigatorLock:U_,NavigatorLockAcquireTimeoutError:z_,lockInternals:F_,processLock:B_,SIGN_OUT_SCOPES:q_,AuthError:W_,AuthApiError:V_,AuthUnknownError:H_,CustomAuthError:G_,AuthSessionMissingError:K_,AuthInvalidTokenResponseError:J_,AuthInvalidCredentialsError:Q_,AuthImplicitGrantRedirectError:Y_,AuthPKCEGrantCodeExchangeError:X_,AuthRetryableFetchError:Z_,AuthWeakPasswordError:eb,AuthInvalidJwtError:tb,isAuthError:rb,isAuthApiError:nb,isAuthSessionMissingError:sb,isAuthImplicitGrantRedirectError:ib,isAuthRetryableFetchError:ab,isAuthWeakPasswordError:ob,RealtimePresence:lb,RealtimeChannel:cb,RealtimeClient:ub,REALTIME_LISTEN_TYPES:db,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:fb,REALTIME_PRESENCE_LISTEN_EVENTS:hb,REALTIME_SUBSCRIBE_STATES:pb,REALTIME_CHANNEL_STATES:mb}=Sm||s1,a1="https://dexxhmdzkgyrfalggtbn.supabase.co",o1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRleHhobWR6a2d5cmZhbGdndGJuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMzE3MzQsImV4cCI6MjA4MDkwNzczNH0.jfyJiuS15w9LcTKM58tikm5EpPgXeqodji8viqfOQpU",Y=i1(a1,o1);async function l1(t){try{const{data:e,error:r}=await Y.from("driver_locations").select("*").eq("driver_id",t).single();if(r&&r.code!=="PGRST116")throw r;return e}catch(e){return U.error("Error obteniendo ubicacin:",e),null}}async function wd(t){try{const{data:e,error:r}=await Y.from("orders").select("driver_id").eq("id",t).single();if(r)throw r;return!e||!e.driver_id?null:await l1(e.driver_id)}catch(e){return U.error("Error obteniendo ubicacin del repartidor del pedido:",e),null}}function c1(t,e){if(!t)return U.error("subscribeToDriverLocation: driverId es requerido"),()=>{};const r=Y.channel(`driver_location:${t}`).on("postgres_changes",{event:"*",schema:"public",table:"driver_locations",filter:`driver_id=eq.${t}`},n=>{U.log(" Cambio recibido en driver_locations:",{event:n.eventType,driverId:t,hasNew:!!n.new,newData:n.new}),n.new&&n.new.latitude&&n.new.longitude?e(n.new):n.new&&U.warn(" Payload recibido pero sin coordenadas vlidas:",n.new)}).subscribe(n=>{n==="SUBSCRIBED"||n==="CHANNEL_ERROR"&&U.error(` Error en canal de suscripcin para driver ${t}`)});return()=>{Y.removeChannel(r)}}const u1={ApiNotActivatedMapError:"La API de Maps JavaScript no est activada en tu proyecto. Actvala en la consola de Google Cloud.",ApiTargetBlockedMapError:"Esta clave de API no tiene autorizacin para usar este servicio. Verifica las restricciones en la consola de Google Cloud.",BillingNotEnabledMapError:"La facturacin no est habilitada en tu proyecto. Habiltala en Google Cloud.",ClientBillingNotEnabledMapError:"La facturacin no est habilitada para este ID de cliente.",ExpiredKeyMapError:"La clave de API est vencida o no es reconocida. Genera una nueva clave en la consola de Google Cloud.",InvalidKeyMapError:"La clave de API no es vlida. Verifica que est correcta en tu archivo .env.",MissingKeyMapError:"Falta la clave de API. Agrega VITE_API_KEY_MAPS en tu archivo .env.",RefererNotAllowedMapError:"Esta URL no est autorizada. Agrega esta URL a las restricciones de la clave de API en Google Cloud.",RefererDeniedMapError:"Esta aplicacin fue bloqueada por violar las Condiciones del Servicio.",OverQuotaMapError:"Se super el lmite de uso de la API. Las solicitudes funcionarn cuando se restablezca la cuota diaria.",ProjectDeniedMapError:"Tu proyecto fue denegado. Revisa la consola de Google Cloud para ms detalles.",DeletedApiProjectMapError:"El proyecto de API fue eliminado. Crea un nuevo proyecto y genera una nueva clave.",InvalidClientIdMapError:"El ID de cliente no es vlido o est vencido.",ApiProjectMapError:"No se pudo resolver la clave de API o el proyecto asociado. Puede ser temporal.",NotLoadingAPIFromGoogleMapsError:"La API debe cargarse desde los servidores de Google.",TOSViolationMapError:"Este sitio infringe las Condiciones del Servicio de Google Maps.",UnauthorizedURLForClientIdMapError:"Esta URL no est autorizada para usar el ID de cliente proporcionado.",UrlAuthenticationCommonError:"Error de autenticacin. Intenta nuevamente en unos momentos."};function d1(t){return u1[t]}function f1(t){if(typeof window<"u"){const e=r=>{r.target&&r.target.src&&r.target.src.includes("maps.googleapis.com")&&t("Error cargando Google Maps API. Verifica tu clave de API y las restricciones.")};return window.addEventListener("error",e,!0),()=>{window.removeEventListener("error",e,!0)}}return()=>{}}function h1({orders:t,onSelectOrder:e}){const[r,n]=b.useState(!1),[s,i]=b.useState(!1),[a,o]=b.useState(null),[l,u]=b.useState(null),[d,f]=b.useState(new Map),[h,m]=b.useState(!0),y=b.useRef(null),x=b.useRef(null),_=b.useRef([]),v=b.useRef([]),g=b.useRef(new Map),p=b.useRef(new Map),w=b.useRef(new Map),k="AIzaSyA-ouc0xksBpUhCWgndGyTU7dAumOLDCRw",S=t.filter(C=>C.status!=="Entregado"),j=b.useMemo(()=>{const C=new Map;return S.forEach(O=>{if(O.driverId&&O.driverName&&O.status!=="Pendiente"){const z=d.get(O.driverId);z&&z.latitude&&z.longitude&&(C.has(O.driverId)||C.set(O.driverId,{driverId:O.driverId,driverName:O.driverName,orders:[],location:z}),C.get(O.driverId).orders.push(O))}}),Array.from(C.values())},[S,d]);b.useEffect(()=>{if(window.google&&window.google.maps){n(!0);return}const C=document.querySelector('script[src*="maps.googleapis.com"]');if(C){C.addEventListener("load",()=>{n(!0)}),window.google&&window.google.maps&&n(!0);return}const O=document.createElement("script");return O.src=`https://maps.googleapis.com/maps/api/js?key=${k}&libraries=places&loading=async`,O.async=!0,O.defer=!0,O.onload=()=>{n(!0)},O.onerror=K=>{const D=d1("ApiProjectMapError");o(D),i(!1),U.error("Error cargando Google Maps API:",K)},document.head.appendChild(O),f1(K=>{o(K),i(!1)})},[k]),b.useEffect(()=>{if(!r||S.length===0){i(!1);return}(async()=>{i(!0);const O=new Map;for(const z of S){const K=z.id,D=z.pickupAddress||z.localAddress,I=z.deliveryAddress,W={pickup:null,delivery:null};if(D)if(p.current.has(D))W.pickup=p.current.get(D);else{const N=await Yu(D);N&&(W.pickup=N,p.current.set(D,N))}if(I)if(p.current.has(I))W.delivery=p.current.get(I),U.log(` Usando coordenadas de delivery desde cache para ${K}:`,W.delivery);else{const N=await Yu(I);N&&(W.delivery=N,p.current.set(I,N))}O.set(z.id,W),U.log(` Coordenadas guardadas para pedido ${z.id}:`,{hasPickup:!!W.pickup,hasDelivery:!!W.delivery,pickup:W.pickup,delivery:W.delivery}),await new Promise(N=>setTimeout(N,50))}g.current=O,U.log(` Geocodificacin completada. Total de pedidos procesados: ${O.size}, Cache de direcciones: ${p.current.size}`),i(!1)})()},[r,S]);const E=(C,O,z=null)=>{if(!x.current||!window.google)return;const K=window.google,D={lat:O.latitude,lng:O.longitude};if(U.log(" Actualizando marcador del repartidor:",{driverId:C,position:D,hasExistingMarker:w.current.has(C)}),w.current.has(C)){w.current.get(C).setPosition(D);return}const I=new K.maps.Marker({position:D,map:x.current,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
					<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg">
						<defs>
							<filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
								<feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.3"/>
							</filter>
						</defs>
						<g filter="url(#shadow)">
							<circle cx="20" cy="20" r="18" fill="#ef4444" stroke="#ffffff" stroke-width="2"/>
							<text x="20" y="28" font-size="24" text-anchor="middle"></text>
						</g>
					</svg>
				`),scaledSize:new K.maps.Size(40,40),anchor:new K.maps.Point(20,40)},title:`Repartidor: ${(z==null?void 0:z.driverName)||"Sin nombre"}`,zIndex:1e3}),W=new K.maps.InfoWindow({content:`
				<div style="padding: 0.5rem;">
					<h3 style="margin: 0 0 0.25rem 0; font-size: 0.875rem; font-weight: 600;">Repartidor</h3>
					<p style="margin: 0; font-size: 0.75rem; color: #6b7280;">${(z==null?void 0:z.driverName)||"Sin nombre"}</p>
					${z?`<p style="margin: 0.25rem 0 0 0; font-size: 0.75rem; color: #6b7280;">Pedido: ${z.id}</p>`:""}
				</div>
			`});I.addListener("click",()=>{W.open(x.current,I),z&&e&&e(z)}),w.current.set(C,I),_.current.push(I)},P=b.useCallback(async C=>{if(C.driverId)try{U.log(" Cargando ubicacin del repartidor:",{driverId:C.driverId,orderId:C.id,orderDbId:C._dbId});const O=await wd(C._dbId);if(O&&O.latitude&&O.longitude){const z={latitude:parseFloat(O.latitude),longitude:parseFloat(O.longitude),updated_at:O.updated_at};U.log(" Ubicacin del repartidor cargada:",{driverId:C.driverId,orderId:C.id,location:z}),f(I=>{const W=new Map(I);return W.set(C.driverId,z),W}),x.current&&window.google&&E(C.driverId,z,C);const K=c1(C.driverId,I=>{if(U.log(" Nueva ubicacin recibida via realtime:",{driverId:C.driverId,orderId:C.id,location:I}),I&&I.latitude&&I.longitude){const W={latitude:parseFloat(I.latitude),longitude:parseFloat(I.longitude),updated_at:I.updated_at};f(N=>{const $=new Map(N);return $.set(C.driverId,W),$}),x.current&&window.google&&E(C.driverId,W,C)}});v.current.push(K);const D=setInterval(async()=>{try{const I=await wd(C._dbId);if(I&&I.latitude&&I.longitude){const W={latitude:parseFloat(I.latitude),longitude:parseFloat(I.longitude),updated_at:I.updated_at};f(N=>{const $=new Map(N);return $.set(C.driverId,W),$}),x.current&&window.google&&E(C.driverId,W,C)}}catch(I){U.error("Error en polling de ubicacin:",I)}},1e4);v.current.push(()=>clearInterval(D))}else U.warn(" No se encontr ubicacin para el repartidor:",{driverId:C.driverId,orderId:C.id})}catch(O){U.error("Error cargando ubicacin del repartidor:",O)}},[e]);b.useEffect(()=>{S.length!==0&&S.forEach(C=>{C.driverId&&C.status!=="Pendiente"&&(d.get(C.driverId)||(U.log(" Cargando ubicacin inicial del repartidor para sidebar:",{driverId:C.driverId,orderId:C.id}),P(C)))})},[S,P,d]),b.useEffect(()=>{if(!r||!y.current)return;const C=setTimeout(()=>{if(!window.google||!window.google.maps){U.error("Google Maps no est disponible");return}if(!x.current){const O=window.google,z={lat:-33.4489,lng:-70.6693};x.current=new O.maps.Map(y.current,{zoom:12,center:z,mapTypeControl:!1,fullscreenControl:!0,streetViewControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]})}},100);return()=>clearTimeout(C)},[r]),b.useEffect(()=>{if(!x.current||!window.google||S.length===0||s)return;const C=setTimeout(()=>{const O=window.google,z=new O.maps.LatLngBounds,K=[];S.forEach(D=>{const I=g.current.get(D.id);I&&(I.pickup&&(K.push({lat:I.pickup.lat,lng:I.pickup.lon}),z.extend(new O.maps.LatLng(I.pickup.lat,I.pickup.lon))),I.delivery&&(K.push({lat:I.delivery.lat,lng:I.delivery.lon}),z.extend(new O.maps.LatLng(I.delivery.lat,I.delivery.lon))));const W=d.get(D.driverId);W&&W.latitude&&W.longitude&&(K.push({lat:W.latitude,lng:W.longitude}),z.extend(new O.maps.LatLng(W.latitude,W.longitude)))}),K.length>0&&(K.length>1?x.current.fitBounds(z,{padding:50}):(x.current.setCenter(K[0]),x.current.setZoom(15))),_.current.forEach(D=>D.setMap(null)),_.current=[],S.forEach(D=>{const I=g.current.get(D.id);if(!I){U.log(` Pedido ${D.id}: Esperando coordenadas...`,{hasDeliveryAddress:!!D.deliveryAddress,deliveryAddress:D.deliveryAddress,hasPickupAddress:!!(D.pickupAddress||D.localAddress),allOrderIds:Array.from(g.current.keys())});return}U.log(` Creando marcadores para pedido ${D.id}:`,{hasPickup:!!I.pickup,hasDelivery:!!I.delivery,pickupCoords:I.pickup,deliveryCoords:I.delivery});const W=x.current;if(I.pickup){const N=new O.maps.Marker({position:{lat:I.pickup.lat,lng:I.pickup.lon},map:W,icon:{path:O.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#3b82f6",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},title:`Local: ${D.local||"Sin local"}`}),$=new O.maps.InfoWindow({content:`
							<div style="padding: 0.5rem;">
								<h3 style="margin: 0 0 0.25rem 0; font-size: 0.875rem; font-weight: 600;">${D.local||"Local"}</h3>
								<p style="margin: 0; font-size: 0.75rem; color: #6b7280;">Pedido: ${D.id}</p>
								<p style="margin: 0.25rem 0 0 0; font-size: 0.75rem; color: #6b7280;">Cliente: ${D.clientName||"Sin cliente"}</p>
							</div>
						`});N.addListener("click",()=>{$.open(W,N),e&&e(D)}),_.current.push(N)}if(I.delivery){const N=new O.maps.Marker({position:{lat:I.delivery.lat,lng:I.delivery.lon},map:W,icon:{path:O.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#10b981",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},title:`Entrega: ${D.clientName||"Sin cliente"}`}),$=new O.maps.InfoWindow({content:`
							<div style="padding: 0.5rem;">
								<h3 style="margin: 0 0 0.25rem 0; font-size: 0.875rem; font-weight: 600;">Entrega</h3>
								<p style="margin: 0; font-size: 0.75rem; color: #6b7280;">Pedido: ${D.id}</p>
								<p style="margin: 0.25rem 0 0 0; font-size: 0.75rem; color: #6b7280;">Cliente: ${D.clientName||"Sin cliente"}</p>
								<p style="margin: 0.25rem 0 0 0; font-size: 0.75rem; color: #6b7280;">Estado: ${D.status}</p>
							</div>
						`});N.addListener("click",()=>{$.open(W,N),e&&e(D)}),_.current.push(N)}if(D.driverId&&D.status!=="Pendiente"){const N=d.get(D.driverId);N?(U.log(" Usando ubicacin existente del repartidor:",{driverId:D.driverId,location:N}),x.current&&window.google&&E(D.driverId,N,D)):(U.log(" Cargando ubicacin del repartidor desde Supabase:",{driverId:D.driverId,orderId:D.id}),P(D))}})},100);return()=>clearTimeout(C)},[s,S,e,d]);const B=C=>{if(!x.current||!C.location)return;const O={lat:C.location.latitude,lng:C.location.longitude};x.current.setCenter(O),x.current.setZoom(15);const z=w.current.get(C.driverId);z&&new window.google.maps.InfoWindow({content:`
					<div style="padding: 0.5rem;">
						<h3 style="margin: 0 0 0.25rem 0; font-size: 0.875rem; font-weight: 600;">${C.driverName}</h3>
						<p style="margin: 0; font-size: 0.75rem; color: #6b7280;">${C.orders.length} pedido${C.orders.length!==1?"s":""}</p>
					</div>
				`}).open(x.current,z),u(C.driverId)};return b.useEffect(()=>()=>{v.current.forEach(C=>{C&&C()}),_.current.forEach(C=>C.setMap(null))},[]),r?a?c.jsxs("div",{className:"tracking-panel-error",children:[c.jsx(cy,{}),c.jsx("h3",{children:a})]}):S.length===0?c.jsxs("div",{className:"tracking-panel-empty",children:[c.jsx(Kt,{}),c.jsx("h3",{children:"No hay pedidos activos"}),c.jsx("p",{children:"Los pedidos activos aparecern en el mapa"})]}):c.jsxs("div",{className:"tracking-panel",children:[c.jsxs("div",{className:"tracking-panel-header",children:[c.jsxs("div",{className:"tracking-panel-legend",children:[c.jsxs("div",{className:"tracking-legend-item",children:[c.jsx("div",{className:"tracking-legend-marker tracking-legend-pickup"}),c.jsx("span",{children:"Local (Retiro)"})]}),c.jsxs("div",{className:"tracking-legend-item",children:[c.jsx("div",{className:"tracking-legend-marker tracking-legend-delivery"}),c.jsx("span",{children:"Entrega"})]}),c.jsxs("div",{className:"tracking-legend-item",children:[c.jsx("div",{className:"tracking-legend-marker tracking-legend-driver"}),c.jsx("span",{children:"Repartidor"})]})]}),c.jsxs("div",{className:"tracking-panel-stats",children:[c.jsxs("span",{children:[S.length," pedido",S.length!==1?"s":""," activo",S.length!==1?"s":""]}),j.length>0&&c.jsxs("span",{className:"tracking-panel-drivers-count",children:[" ",j.length," repartidor",j.length!==1?"es":""]})]})]}),c.jsxs("div",{className:"tracking-panel-content",children:[h&&j.length>0&&c.jsxs("div",{className:"tracking-sidebar",children:[c.jsxs("div",{className:"tracking-sidebar-header",children:[c.jsxs("div",{className:"tracking-sidebar-header-content",children:[c.jsx("h3",{children:"Repartidores Conectados"}),c.jsxs("p",{className:"tracking-sidebar-header-subtitle",children:[j.filter(C=>C.location).length," con ubicacin"]})]}),c.jsx("button",{className:"tracking-sidebar-close",onClick:()=>m(!1),"aria-label":"Cerrar panel",children:c.jsx(rt,{size:18})})]}),c.jsx("div",{className:"tracking-sidebar-content",children:j.map(C=>c.jsxs("div",{className:`tracking-driver-card ${l===C.driverId?"selected":""}`,onClick:()=>B(C),children:[c.jsxs("div",{className:"tracking-driver-header",children:[c.jsx("div",{className:"tracking-driver-icon",children:c.jsx(Ju,{size:20})}),c.jsxs("div",{className:"tracking-driver-info",children:[c.jsx("h4",{className:"tracking-driver-name",children:C.driverName}),c.jsxs("p",{className:"tracking-driver-orders",children:[C.orders.length," pedido",C.orders.length!==1?"s":""]})]}),C.location&&c.jsx("div",{className:"tracking-driver-status",children:c.jsx("div",{className:"tracking-driver-status-dot"})})]}),C.orders.length>0&&c.jsx("div",{className:"tracking-driver-orders-list",children:C.orders.map(O=>c.jsxs("div",{className:"tracking-driver-order-item",children:[c.jsx("span",{className:"tracking-driver-order-id",children:O.id}),c.jsx("span",{className:"tracking-driver-order-status",children:O.status})]},O.id))}),C.location&&c.jsxs("div",{className:"tracking-driver-location",children:[c.jsx(ir,{size:14}),c.jsxs("div",{className:"tracking-driver-location-info",children:[c.jsx("span",{className:"tracking-driver-location-status",children:"En ruta"}),c.jsxs("span",{className:"tracking-driver-location-coords",children:[C.location.latitude.toFixed(6),", ",C.location.longitude.toFixed(6)]})]})]})]},C.driverId))})]}),!h&&j.length>0&&c.jsxs("button",{className:"tracking-sidebar-toggle",onClick:()=>m(!0),"aria-label":"Abrir panel de repartidores",children:[c.jsx(Ju,{size:20}),c.jsx("span",{children:j.length})]}),c.jsx("div",{ref:y,className:`tracking-panel-map ${h&&j.length>0?"with-sidebar":""}`})]})]}):c.jsxs("div",{className:"tracking-panel-loading",children:[c.jsx(_a,{}),c.jsx("p",{children:"Cargando mapa..."})]})}const p1={};var Nl=null;function m1(t){try{return crypto.getRandomValues(new Uint8Array(t))}catch{}try{return p1.randomBytes(t)}catch{}if(!Nl)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Nl(t)}function g1(t){Nl=t}function Mc(t,e){if(t=t||Dc,typeof t!="number")throw Error("Illegal arguments: "+typeof t+", "+typeof e);t<4?t=4:t>31&&(t=31);var r=[];return r.push("$2b$"),t<10&&r.push("0"),r.push(t.toString()),r.push("$"),r.push(ra(m1(xs),xs)),r.join("")}function jm(t,e,r){if(typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),typeof t>"u")t=Dc;else if(typeof t!="number")throw Error("illegal arguments: "+typeof t);function n(s){ut(function(){try{s(null,Mc(t))}catch(i){s(i)}})}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);n(r)}else return new Promise(function(s,i){n(function(a,o){if(a){i(a);return}s(o)})})}function Cm(t,e){if(typeof e>"u"&&(e=Dc),typeof e=="number"&&(e=Mc(e)),typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return Tl(t,e)}function Nm(t,e,r,n){function s(i){typeof t=="string"&&typeof e=="number"?jm(e,function(a,o){Tl(t,o,i,n)}):typeof t=="string"&&typeof e=="string"?Tl(t,e,i,n):ut(i.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)))}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);s(r)}else return new Promise(function(i,a){s(function(o,l){if(o){a(o);return}i(l)})})}function Tm(t,e){for(var r=t.length^e.length,n=0;n<t.length;++n)r|=t.charCodeAt(n)^e.charCodeAt(n);return r===0}function v1(t,e){if(typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return e.length!==60?!1:Tm(Cm(t,e.substring(0,e.length-31)),e)}function y1(t,e,r,n){function s(i){if(typeof t!="string"||typeof e!="string"){ut(i.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)));return}if(e.length!==60){ut(i.bind(this,null,!1));return}Nm(t,e.substring(0,29),function(a,o){a?i(a):i(null,Tm(o,e))},n)}if(r){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);s(r)}else return new Promise(function(i,a){s(function(o,l){if(o){a(o);return}i(l)})})}function x1(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return parseInt(t.split("$")[2],10)}function w1(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);if(t.length!==60)throw Error("Illegal hash length: "+t.length+" != 60");return t.substring(0,29)}function _1(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return Om(t)>72}var ut=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;function Om(t){for(var e=0,r=0,n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function b1(t){for(var e=0,r,n,s=new Array(Om(t)),i=0,a=t.length;i<a;++i)r=t.charCodeAt(i),r<128?s[e++]=r:r<2048?(s[e++]=r>>6|192,s[e++]=r&63|128):(r&64512)===55296&&((n=t.charCodeAt(i+1))&64512)===56320?(r=65536+((r&1023)<<10)+(n&1023),++i,s[e++]=r>>18|240,s[e++]=r>>12&63|128,s[e++]=r>>6&63|128,s[e++]=r&63|128):(s[e++]=r>>12|224,s[e++]=r>>6&63|128,s[e++]=r&63|128);return s}var Fr="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Mt=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function ra(t,e){var r=0,n=[],s,i;if(e<=0||e>t.length)throw Error("Illegal len: "+e);for(;r<e;){if(s=t[r++]&255,n.push(Fr[s>>2&63]),s=(s&3)<<4,r>=e){n.push(Fr[s&63]);break}if(i=t[r++]&255,s|=i>>4&15,n.push(Fr[s&63]),s=(i&15)<<2,r>=e){n.push(Fr[s&63]);break}i=t[r++]&255,s|=i>>6&3,n.push(Fr[s&63]),n.push(Fr[i&63])}return n.join("")}function Pm(t,e){var r=0,n=t.length,s=0,i=[],a,o,l,u,d,f;if(e<=0)throw Error("Illegal len: "+e);for(;r<n-1&&s<e&&(f=t.charCodeAt(r++),a=f<Mt.length?Mt[f]:-1,f=t.charCodeAt(r++),o=f<Mt.length?Mt[f]:-1,!(a==-1||o==-1||(d=a<<2>>>0,d|=(o&48)>>4,i.push(String.fromCharCode(d)),++s>=e||r>=n)||(f=t.charCodeAt(r++),l=f<Mt.length?Mt[f]:-1,l==-1)||(d=(o&15)<<4>>>0,d|=(l&60)>>2,i.push(String.fromCharCode(d)),++s>=e||r>=n)));)f=t.charCodeAt(r++),u=f<Mt.length?Mt[f]:-1,d=(l&3)<<6>>>0,d|=u,i.push(String.fromCharCode(d)),++s;var h=[];for(r=0;r<s;r++)h.push(i[r].charCodeAt(0));return h}var xs=16,Dc=10,E1=16,k1=100,_d=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],bd=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],Am=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function ws(t,e,r,n){var s,i=t[e],a=t[e+1];return i^=r[0],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],a^=s^r[1],s=n[a>>>24],s+=n[256|a>>16&255],s^=n[512|a>>8&255],s+=n[768|a&255],i^=s^r[2],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],a^=s^r[3],s=n[a>>>24],s+=n[256|a>>16&255],s^=n[512|a>>8&255],s+=n[768|a&255],i^=s^r[4],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],a^=s^r[5],s=n[a>>>24],s+=n[256|a>>16&255],s^=n[512|a>>8&255],s+=n[768|a&255],i^=s^r[6],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],a^=s^r[7],s=n[a>>>24],s+=n[256|a>>16&255],s^=n[512|a>>8&255],s+=n[768|a&255],i^=s^r[8],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],a^=s^r[9],s=n[a>>>24],s+=n[256|a>>16&255],s^=n[512|a>>8&255],s+=n[768|a&255],i^=s^r[10],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],a^=s^r[11],s=n[a>>>24],s+=n[256|a>>16&255],s^=n[512|a>>8&255],s+=n[768|a&255],i^=s^r[12],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],a^=s^r[13],s=n[a>>>24],s+=n[256|a>>16&255],s^=n[512|a>>8&255],s+=n[768|a&255],i^=s^r[14],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],a^=s^r[15],s=n[a>>>24],s+=n[256|a>>16&255],s^=n[512|a>>8&255],s+=n[768|a&255],i^=s^r[16],t[e]=a^r[E1+1],t[e+1]=i,t}function Wr(t,e){for(var r=0,n=0;r<4;++r)n=n<<8|t[e]&255,e=(e+1)%t.length;return{key:n,offp:e}}function Ed(t,e,r){for(var n=0,s=[0,0],i=e.length,a=r.length,o,l=0;l<i;l++)o=Wr(t,n),n=o.offp,e[l]=e[l]^o.key;for(l=0;l<i;l+=2)s=ws(s,0,e,r),e[l]=s[0],e[l+1]=s[1];for(l=0;l<a;l+=2)s=ws(s,0,e,r),r[l]=s[0],r[l+1]=s[1]}function S1(t,e,r,n){for(var s=0,i=[0,0],a=r.length,o=n.length,l,u=0;u<a;u++)l=Wr(e,s),s=l.offp,r[u]=r[u]^l.key;for(s=0,u=0;u<a;u+=2)l=Wr(t,s),s=l.offp,i[0]^=l.key,l=Wr(t,s),s=l.offp,i[1]^=l.key,i=ws(i,0,r,n),r[u]=i[0],r[u+1]=i[1];for(u=0;u<o;u+=2)l=Wr(t,s),s=l.offp,i[0]^=l.key,l=Wr(t,s),s=l.offp,i[1]^=l.key,i=ws(i,0,r,n),n[u]=i[0],n[u+1]=i[1]}function kd(t,e,r,n,s){var i=Am.slice(),a=i.length,o;if(r<4||r>31)if(o=Error("Illegal number of rounds (4-31): "+r),n){ut(n.bind(this,o));return}else throw o;if(e.length!==xs)if(o=Error("Illegal salt length: "+e.length+" != "+xs),n){ut(n.bind(this,o));return}else throw o;r=1<<r>>>0;var l,u,d=0,f;typeof Int32Array=="function"?(l=new Int32Array(_d),u=new Int32Array(bd)):(l=_d.slice(),u=bd.slice()),S1(e,t,l,u);function h(){if(s&&s(d/r),d<r)for(var y=Date.now();d<r&&(d=d+1,Ed(t,l,u),Ed(e,l,u),!(Date.now()-y>k1)););else{for(d=0;d<64;d++)for(f=0;f<a>>1;f++)ws(i,f<<1,l,u);var x=[];for(d=0;d<a;d++)x.push((i[d]>>24&255)>>>0),x.push((i[d]>>16&255)>>>0),x.push((i[d]>>8&255)>>>0),x.push((i[d]&255)>>>0);if(n){n(null,x);return}else return x}n&&ut(h)}if(typeof n<"u")h();else for(var m;;)if(typeof(m=h())<"u")return m||[]}function Tl(t,e,r,n){var s;if(typeof t!="string"||typeof e!="string")if(s=Error("Invalid string / salt: Not a string"),r){ut(r.bind(this,s));return}else throw s;var i,a;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(s=Error("Invalid salt version: "+e.substring(0,2)),r){ut(r.bind(this,s));return}else throw s;if(e.charAt(2)==="$")i="\0",a=3;else{if(i=e.charAt(2),i!=="a"&&i!=="b"&&i!=="y"||e.charAt(3)!=="$")if(s=Error("Invalid salt revision: "+e.substring(2,4)),r){ut(r.bind(this,s));return}else throw s;a=4}if(e.charAt(a+2)>"$")if(s=Error("Missing salt rounds"),r){ut(r.bind(this,s));return}else throw s;var o=parseInt(e.substring(a,a+1),10)*10,l=parseInt(e.substring(a+1,a+2),10),u=o+l,d=e.substring(a+3,a+25);t+=i>="a"?"\0":"";var f=b1(t),h=Pm(d,xs);function m(y){var x=[];return x.push("$2"),i>="a"&&x.push(i),x.push("$"),u<10&&x.push("0"),x.push(u.toString()),x.push("$"),x.push(ra(h,h.length)),x.push(ra(y,Am.length*4-1)),x.join("")}if(typeof r>"u")return m(kd(f,h,u));kd(f,h,u,function(y,x){y?r(y,null):r(null,m(x))},n)}function j1(t,e){return ra(t,e)}function C1(t,e){return Pm(t,e)}const Rm={setRandomFallback:g1,genSaltSync:Mc,genSalt:jm,hashSync:Cm,hash:Nm,compareSync:v1,compare:y1,getRounds:x1,getSalt:w1,truncates:_1,encodeBase64:j1,decodeBase64:C1};async function Oa(t){if(!t||typeof t!="string")throw new Error("La contrasea debe ser un string no vaco");return await Rm.hash(t,10)}async function N1(t,e){return!t||!e?!1:e.startsWith("$2")?await Rm.compare(t,e):(console.error(" Intento de autenticacin con contrasea en texto plano en produccin"),!1)}function T1({currentUser:t,onClose:e,onUpdateUser:r}){const[n,s]=b.useState(t.name||""),[i,a]=b.useState(""),[o,l]=b.useState(""),[u,d]=b.useState(t.profile_photo_url||null),[f,h]=b.useState(null),[m,y]=b.useState(!1),[x,_]=b.useState({}),v=b.useRef(null),{showSuccess:g,showError:p}=jc(),w=()=>{const E={};return n.trim()||(E.name="El nombre es requerido"),i.trim()&&(i.length<6&&(E.password="La contrasea debe tener al menos 6 caracteres"),i!==o&&(E.confirmPassword="Las contraseas no coinciden")),_(E),Object.keys(E).length===0},k=E=>{const P=E.target.files[0];if(!P)return;if(!P.type.startsWith("image/")){p("Por favor selecciona una imagen vlida");return}if(P.size>5*1024*1024){p("La imagen debe ser menor a 5MB");return}h(P);const B=new FileReader;B.onloadend=()=>{d(B.result)},B.readAsDataURL(P)},S=async E=>{try{const P=E.name.split(".").pop(),C=`profile_photos/${`${t._dbId}_${Date.now()}.${P}`}`,{data:O,error:z}=await Y.storage.from("avatars").upload(C,E,{cacheControl:"3600",upsert:!0});if(z)throw z;const{data:{publicUrl:K}}=Y.storage.from("avatars").getPublicUrl(C);return K}catch(P){throw U.error("Error subiendo foto de perfil:",P),new Error("Error al subir la foto de perfil")}},j=async E=>{if(E.preventDefault(),!!w()){y(!0);try{const P={name:n.trim()};if(i.trim()&&(P.password=await Oa(i)),f)try{const O=await S(f);P.profile_photo_url=O}catch(O){p(O.message||"Error al subir la foto"),y(!1);return}const{error:B}=await Y.from("company_users").update(P).eq("id",t._dbId);if(B)throw B;const C={...t,name:P.name,profile_photo_url:P.profile_photo_url||t.profile_photo_url};r&&r(C),g("Cuenta actualizada exitosamente"),e()}catch(P){U.error("Error actualizando cuenta:",P),p("Error al actualizar la cuenta: "+(P.message||"Error desconocido"))}finally{y(!1)}}};return c.jsxs("div",{className:"account-settings",children:[c.jsxs("div",{className:"account-settings-header",children:[c.jsx("h2",{className:"account-settings-title",children:"Configuracin de Cuenta"}),c.jsx("button",{type:"button",onClick:e,className:"account-settings-close","aria-label":"Cerrar",children:c.jsx(rt,{})})]}),c.jsxs("form",{onSubmit:j,className:"account-settings-form",children:[c.jsxs("div",{className:"account-settings-section",children:[c.jsx("label",{className:"account-settings-label",children:"Foto de Perfil"}),c.jsxs("div",{className:"account-settings-photo-container",children:[c.jsxs("div",{className:"account-settings-photo-preview",children:[u?c.jsx("img",{src:u,alt:"Foto de perfil"}):c.jsx("div",{className:"account-settings-photo-placeholder",children:c.jsx(xe,{size:48})}),c.jsx("button",{type:"button",onClick:()=>{var E;return(E=v.current)==null?void 0:E.click()},className:"account-settings-photo-button",title:"Cambiar foto",children:c.jsx(fy,{size:20})})]}),c.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:k,className:"account-settings-file-input"}),c.jsx("p",{className:"account-settings-hint",children:"Formatos: JPG, PNG, GIF. Tamao mximo: 5MB"})]})]}),c.jsxs("div",{className:"account-settings-section",children:[c.jsx("label",{htmlFor:"account-name",className:"account-settings-label",children:"Nombre Completo *"}),c.jsxs("div",{className:"account-settings-input-wrapper",children:[c.jsx(xe,{className:"account-settings-input-icon"}),c.jsx("input",{id:"account-name",type:"text",value:n,onChange:E=>{s(E.target.value),_({...x,name:""})},className:`account-settings-input ${x.name?"account-settings-input-error":""}`,placeholder:"Tu nombre completo",required:!0,disabled:m})]}),x.name&&c.jsx("span",{className:"account-settings-error",children:x.name})]}),c.jsxs("div",{className:"account-settings-section",children:[c.jsx("label",{htmlFor:"account-password",className:"account-settings-label",children:"Nueva Contrasea (opcional)"}),c.jsxs("div",{className:"account-settings-input-wrapper",children:[c.jsx(Ar,{className:"account-settings-input-icon"}),c.jsx("input",{id:"account-password",type:"password",value:i,onChange:E=>{a(E.target.value),_({...x,password:""})},className:`account-settings-input ${x.password?"account-settings-input-error":""}`,placeholder:"Dejar vaco para no cambiar",disabled:m})]}),x.password&&c.jsx("span",{className:"account-settings-error",children:x.password})]}),i.trim()&&c.jsxs("div",{className:"account-settings-section",children:[c.jsx("label",{htmlFor:"account-confirm-password",className:"account-settings-label",children:"Confirmar Nueva Contrasea *"}),c.jsxs("div",{className:"account-settings-input-wrapper",children:[c.jsx(Ar,{className:"account-settings-input-icon"}),c.jsx("input",{id:"account-confirm-password",type:"password",value:o,onChange:E=>{l(E.target.value),_({...x,confirmPassword:""})},className:`account-settings-input ${x.confirmPassword?"account-settings-input-error":""}`,placeholder:"Confirma tu nueva contrasea",disabled:m})]}),x.confirmPassword&&c.jsx("span",{className:"account-settings-error",children:x.confirmPassword})]}),c.jsxs("div",{className:"account-settings-actions",children:[c.jsx("button",{type:"button",onClick:e,className:"account-settings-button account-settings-button-cancel",disabled:m,children:"Cancelar"}),c.jsx("button",{type:"submit",className:"account-settings-button account-settings-button-save",disabled:m,children:m?c.jsx(c.Fragment,{children:"Guardando..."}):c.jsxs(c.Fragment,{children:[c.jsx(wy,{size:18}),"Guardar Cambios"]})})]})]})]})}function Vr({children:t,onClose:e,maxWidth:r="2xl"}){return c.jsx("div",{className:"superposicion-modal",onClick:e,children:c.jsx("div",{className:`contenido-modal contenido-modal-${r}`,onClick:n=>n.stopPropagation(),children:t})})}function O1(t,e,r,n,s,i,a,o){const[l,u]=b.useState(null),[d,f]=b.useState(!1),[h,m]=b.useState(!1),[y,x]=b.useState(!1),[_,v]=b.useState(!1),[g,p]=b.useState(!1),[w,k]=b.useState(!1),[S,j]=b.useState("active"),[E,P]=b.useState("Todos"),[B,C]=b.useState(!1),[O,z]=b.useState(!1),[K,D]=b.useState(!1);b.useEffect(()=>{(t==null?void 0:t.role)==="local"&&t.local&&P(t.local)},[t]);const I=async(F,X)=>{try{await i(F,X,n),f(!1)}catch(Fe){throw Fe}},W=async F=>{try{await a(F),(l==null?void 0:l.id)===F&&u(null)}catch(X){throw X}},N=async F=>{try{await o(F)}catch(X){throw X}},$=b.useMemo(()=>(t==null?void 0:t.role)==="local"&&t.local?e.filter(F=>F.local===t.local):e,[e,t]),L=b.useMemo(()=>{let F=$;return S==="active"?F=F.filter(X=>X.status!=="Entregado"):S==="completed"&&(F=F.filter(X=>X.status==="Entregado")),zn(t==null?void 0:t.role)&&E!=="Todos"&&(F=F.filter(X=>X.local===E)),F},[$,S,E,t==null?void 0:t.role]),V=["Todos",...n.map(F=>F.name)];return{selectedOrder:l,showCreateForm:d,showClientManagement:h,showUserManagement:y,showLocalSettings:_,showSettingsModal:g,showAccountSettings:w,activeTab:S,selectedLocal:E,showLocalDropdown:B,sidebarOpen:O,showTrackingPanel:K,userFilteredOrders:$,filteredOrders:L,locales:V,setSelectedOrder:u,setShowCreateForm:f,setShowClientManagement:m,setShowUserManagement:x,setShowLocalSettings:v,setShowSettingsModal:p,setShowAccountSettings:k,setActiveTab:j,setSelectedLocal:P,setShowLocalDropdown:C,setSidebarOpen:z,setShowTrackingPanel:D,handleCreateOrder:I,handleDeleteOrder:W,handleSaveLocalConfigs:N}}function P1({currentUser:t,orders:e,setOrders:r,onReloadOrders:n,localConfigs:s,setLocalConfigs:i,clients:a,onCreateClient:o,onUpdateClient:l,onDeleteClient:u,users:d,onCreateUser:f,onUpdateUser:h,onDeleteUser:m,onCreateOrder:y,onDeleteOrder:x,onSaveLocalConfigs:_,onLogout:v,onUpdateCurrentUser:g}){const{selectedOrder:p,showCreateForm:w,showClientManagement:k,showUserManagement:S,showLocalSettings:j,showSettingsModal:E,showAccountSettings:P,activeTab:B,selectedLocal:C,showLocalDropdown:O,sidebarOpen:z,showTrackingPanel:K,userFilteredOrders:D,filteredOrders:I,locales:W,setSelectedOrder:N,setShowCreateForm:$,setShowClientManagement:L,setShowUserManagement:V,setShowLocalSettings:F,setShowSettingsModal:X,setShowAccountSettings:Fe,setActiveTab:dr,setSelectedLocal:pt,setShowLocalDropdown:bt,setSidebarOpen:Pa,setShowTrackingPanel:Aa,handleCreateOrder:Um,handleDeleteOrder:zm,handleSaveLocalConfigs:Fm}=O1(t,e,r,s,i,y,x,_),Bm=ne=>Um(ne,a),qm=zm,Wm=Fm;return c.jsxs("div",{className:"panel-empresa",children:[c.jsxs("header",{className:"encabezado-superior-empresa",children:[c.jsxs("div",{className:"encabezado-superior-empresa-izquierda",children:[c.jsx("button",{className:"boton-hamburguesa-empresa",onClick:()=>Pa(!z),"aria-label":"Abrir men",children:c.jsx(xy,{})}),c.jsxs("div",{className:"logo-empresa",children:[c.jsx("div",{className:"logo-icono-empresa",children:c.jsx(Kt,{})}),c.jsx("span",{children:t.companyName||"DeliveryApp"})]}),c.jsx("div",{className:"divisor-encabezado-empresa"}),zn(t.role)&&c.jsxs("div",{className:"selector-local-encabezado-empresa",children:[c.jsxs("button",{className:"boton-local-encabezado-empresa",onClick:()=>bt(!O),children:[c.jsx(Ve,{}),c.jsx("span",{children:C}),c.jsx(Qu,{style:{transform:O?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"}})]}),O&&c.jsx("div",{className:"menu-local-encabezado-empresa",children:W.map(ne=>c.jsxs("button",{className:`opcion-local-encabezado-empresa ${C===ne?"activa":""}`,onClick:()=>{pt(ne),bt(!1)},children:[c.jsx(Ve,{size:16}),ne]},ne))})]})]}),c.jsxs("div",{className:"encabezado-superior-empresa-derecha",children:[c.jsxs("div",{className:"info-usuario-encabezado-empresa",children:[c.jsx("div",{className:"avatar-usuario-encabezado-empresa",children:Yh(t.name)}),c.jsxs("div",{className:"detalles-usuario-encabezado-empresa",children:[c.jsx("div",{className:"nombre-usuario-encabezado-empresa",children:t.name}),c.jsx("div",{className:"rol-usuario-encabezado-empresa",children:ep(t.role)})]})]}),c.jsx("button",{className:"boton-encabezado-empresa",title:"Notificaciones",onClick:()=>{},children:c.jsx(dy,{})}),zn(t.role)&&c.jsx("button",{className:"boton-encabezado-empresa",title:"Configuracin",onClick:()=>X(!0),children:c.jsx(by,{})}),c.jsx("button",{className:"boton-encabezado-empresa",onClick:v,title:"Salir",children:c.jsx(vy,{})})]})]}),z&&c.jsx("div",{className:"superposicion-empresa",onClick:()=>Pa(!1)}),c.jsxs("div",{className:"contenedor-empresa",children:[c.jsxs("aside",{className:`barra-lateral-empresa ${z?"barra-lateral-empresa-abierta":""}`,children:[c.jsx("button",{className:"cerrar-barra-lateral-empresa",onClick:()=>Pa(!1),"aria-label":"Cerrar men",children:c.jsx(rt,{})}),zn(t.role)&&c.jsxs("div",{className:"selector-local-sidebar-mobile",children:[c.jsx("label",{className:"selector-local-sidebar-mobile-label",children:"Seleccionar Local"}),c.jsxs("div",{className:"selector-local-sidebar-mobile-dropdown",children:[c.jsxs("button",{className:"boton-local-sidebar-mobile",onClick:()=>bt(!O),children:[c.jsx(Ve,{}),c.jsx("span",{children:C}),c.jsx(Qu,{style:{transform:O?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"}})]}),O&&c.jsx("div",{className:"menu-local-sidebar-mobile",children:W.map(ne=>c.jsxs("button",{className:`opcion-local-sidebar-mobile ${C===ne?"activa":""}`,onClick:()=>{pt(ne),bt(!1)},children:[c.jsx(Ve,{size:16}),ne]},ne))})]})]}),c.jsxs("div",{className:"delivery-stats-grid",children:[c.jsxs("div",{className:"delivery-stat-card blue",children:[c.jsxs("div",{className:"delivery-stat-header",children:[c.jsx("span",{className:"delivery-stat-label",children:"Total de Pedidos"}),c.jsx("div",{className:"delivery-stat-icon",children:c.jsx(Kt,{})})]}),c.jsx("div",{className:"delivery-stat-value",children:D.length})]}),c.jsxs("div",{className:"delivery-stat-card orange",children:[c.jsxs("div",{className:"delivery-stat-header",children:[c.jsx("span",{className:"delivery-stat-label",children:"Pendientes"}),c.jsx("div",{className:"delivery-stat-icon",children:c.jsx(gs,{})})]}),c.jsx("div",{className:"delivery-stat-value",children:D.filter(ne=>ne.status==="Pendiente").length})]}),c.jsxs("div",{className:"delivery-stat-card blue",children:[c.jsxs("div",{className:"delivery-stat-header",children:[c.jsx("span",{className:"delivery-stat-label",children:"En Progreso"}),c.jsx("div",{className:"delivery-stat-icon",children:c.jsx(Kt,{})})]}),c.jsx("div",{className:"delivery-stat-value",children:D.filter(ne=>ne.status!=="Pendiente"&&ne.status!=="Entregado").length})]}),c.jsxs("div",{className:"delivery-stat-card green",children:[c.jsxs("div",{className:"delivery-stat-header",children:[c.jsx("span",{className:"delivery-stat-label",children:"Completados"}),c.jsx("div",{className:"delivery-stat-icon",children:c.jsx(Kt,{})})]}),c.jsx("div",{className:"delivery-stat-value",children:D.filter(ne=>ne.status==="Entregado").length})]})]})]}),c.jsxs("main",{className:"delivery-main",children:[c.jsxs("div",{className:"delivery-main-header",children:[c.jsxs("div",{className:"delivery-main-title-row",children:[c.jsx("h2",{className:"delivery-main-title",children:"Panel de Pedidos"}),c.jsxs("div",{className:"delivery-main-actions",children:[c.jsxs("button",{onClick:()=>$(!0),className:"delivery-button-primary",title:"Crear nuevo pedido",children:[c.jsx(ba,{size:20}),c.jsx("span",{children:"Nuevo Pedido"})]}),c.jsxs("div",{className:"delivery-search-bar",children:[c.jsx(_y,{className:"delivery-search-icon"}),c.jsx("input",{type:"text",className:"delivery-search-input",placeholder:"Buscar pedidos..."})]})]})]}),c.jsxs("div",{className:"delivery-tabs",children:[c.jsxs("button",{onClick:()=>{dr("active"),Aa(!1)},className:`delivery-tab ${B==="active"&&!K?"active":""}`,children:["Activos (",D.filter(ne=>ne.status!=="Entregado").length,")"]}),c.jsxs("button",{onClick:()=>{dr("completed"),Aa(!1)},className:`delivery-tab ${B==="completed"&&!K?"active":""}`,children:["Completados (",D.filter(ne=>ne.status==="Entregado").length,")"]}),c.jsxs("button",{onClick:()=>{Aa(!0),dr(null)},className:`delivery-tab ${K?"active":""}`,children:[c.jsx(_a,{style:{width:"1rem",height:"1rem",marginRight:"0.5rem"}}),"Trackeo"]})]})]}),K?c.jsx("div",{className:"delivery-orders-container",children:c.jsx(h1,{orders:D.filter(ne=>ne.status!=="Entregado"),onSelectOrder:N})}):c.jsx("div",{className:"delivery-orders-container",children:c.jsx("div",{className:"delivery-orders-grid",children:c.jsx(Uy,{orders:I,onSelectOrder:N,onDeleteOrder:qm})})})]})]}),w&&c.jsx(Vr,{onClose:()=>$(!1),maxWidth:"2xl",children:c.jsx(Ty,{onSubmit:Bm,onCancel:()=>$(!1),currentUser:t,localConfigs:s,clients:a})}),k&&c.jsx(Ry,{clients:a,currentUser:t,localConfigs:s,onCreateClient:o,onUpdateClient:l,onDeleteClient:u,onClose:()=>L(!1)}),p&&c.jsx(Vr,{onClose:()=>N(null),maxWidth:"2xl",children:c.jsx(zy,{order:p,onClose:()=>N(null)})}),S&&c.jsx(My,{users:d,onCreateUser:f,onUpdateUser:h,onDeleteUser:m,onClose:()=>V(!1),localConfigs:s,currentUser:t}),E&&c.jsx(Vr,{onClose:()=>X(!1),maxWidth:"md",children:c.jsxs("div",{className:"modal-configuracion",children:[c.jsx("h2",{className:"modal-configuracion-titulo",children:"Configuracin"}),c.jsxs("div",{className:"modal-configuracion-grid",children:[zn(t.role)&&c.jsxs("button",{className:"modal-configuracion-item",onClick:()=>{X(!1),Fe(!0)},children:[c.jsx("div",{className:"modal-configuracion-icono modal-configuracion-icono-orange",children:c.jsx(xe,{})}),c.jsxs("div",{className:"modal-configuracion-contenido",children:[c.jsx("h3",{className:"modal-configuracion-nombre",children:"Mi Cuenta"}),c.jsx("p",{className:"modal-configuracion-descripcion",children:"Configurar nombre, contrasea y foto de perfil"})]})]}),c.jsxs("button",{className:"modal-configuracion-item",onClick:()=>{X(!1),F(!0)},children:[c.jsx("div",{className:"modal-configuracion-icono modal-configuracion-icono-blue",children:c.jsx(ll,{})}),c.jsxs("div",{className:"modal-configuracion-contenido",children:[c.jsx("h3",{className:"modal-configuracion-nombre",children:"Locales"}),c.jsx("p",{className:"modal-configuracion-descripcion",children:"Gestionar locales y sucursales"})]})]}),c.jsxs("button",{className:"modal-configuracion-item",onClick:()=>{X(!1),V(!0)},children:[c.jsx("div",{className:"modal-configuracion-icono modal-configuracion-icono-purple",children:c.jsx(ky,{})}),c.jsxs("div",{className:"modal-configuracion-contenido",children:[c.jsx("h3",{className:"modal-configuracion-nombre",children:"Usuarios"}),c.jsx("p",{className:"modal-configuracion-descripcion",children:"Gestionar usuarios empresariales"})]})]}),c.jsxs("button",{className:"modal-configuracion-item",onClick:()=>{X(!1),L(!0)},children:[c.jsx("div",{className:"modal-configuracion-icono modal-configuracion-icono-green",children:c.jsx(Sy,{})}),c.jsxs("div",{className:"modal-configuracion-contenido",children:[c.jsx("h3",{className:"modal-configuracion-nombre",children:"Clientes"}),c.jsx("p",{className:"modal-configuracion-descripcion",children:"Gestionar clientes"})]})]})]})]})}),j&&c.jsx(Vr,{onClose:()=>F(!1),maxWidth:"xl",children:c.jsx(By,{onClose:()=>F(!1),onSave:Wm,initialLocals:s})}),P&&c.jsx(Vr,{onClose:()=>Fe(!1),maxWidth:"md",children:c.jsx(T1,{currentUser:t,onClose:()=>Fe(!1),onUpdateUser:g})})]})}async function Im(t,e){try{const{data:r,error:n}=await Y.from("company_users").select("*").eq("username",t).single();if(n||!r)throw new Error("Usuario o contrasea incorrectos");if(!await N1(e,r.password))throw new Error("Usuario o contrasea incorrectos");let i=null;if(r.company_id){const{data:o,error:l}=await Y.from("companies").select("id, name").eq("id",r.company_id).single();l||(i=o)}let a=null;if(r.local_id){const{data:o,error:l}=await Y.from("locals").select("id, name").eq("id",r.local_id).single();l||(a=o)}return{id:r.id,username:r.username,name:r.name,role:r.role,companyId:r.company_id,company_id:r.company_id,companyName:(i==null?void 0:i.name)||"",local:r.role==="local"?a==null?void 0:a.name:null,localId:r.local_id,_dbId:r.id}}catch(r){throw U.error("Error en autenticacin:",r),r}}function A1(t){const[e,r]=b.useState(""),[n,s]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(!1),u=()=>e.trim()?n.trim()?n.length<6?(a("La contrasea debe tener al menos 6 caracteres"),!1):!0:(a("La contrasea es requerida"),!1):(a("El usuario es requerido"),!1);return{username:e,password:n,error:i,loading:o,setUsername:r,setPassword:s,handleSubmit:async f=>{if(f.preventDefault(),a(""),!!u()){l(!0);try{const h=await Im(e.trim(),n);t(h)}catch(h){a(h.message||"Error al iniciar sesin. Intenta nuevamente."),U.error("Error en login:",h)}finally{l(!1)}}}}}async function R1(t){try{const{data:e,error:r}=await Y.from("company_users").select("id").eq("username",t.username).single();if(e)throw new Error("El nombre de usuario ya est en uso");const{data:n,error:s}=await Y.from("registration_requests").select("id, status").eq("username",t.username).in("status",["pending"]).single();if(n)throw new Error("Ya existe una solicitud pendiente con este nombre de usuario");const i=await Oa(t.password),{data:a,error:o}=await Y.from("registration_requests").insert({company_name:t.companyName,username:t.username,password:i,name:t.name,email:t.email||null,phone:t.phone||null,status:"pending"}).select().single();if(o)throw U.error("Error creando solicitud de registro:",o),new Error("Error al enviar la solicitud. Intenta nuevamente.");return a}catch(e){throw U.error("Error en createRegistrationRequest:",e),e}}function I1(){const[t,e]=b.useState({companyName:"",username:"",password:"",confirmPassword:"",name:"",email:"",phone:""}),[r,n]=b.useState(""),[s,i]=b.useState(!1),[a,o]=b.useState(!1),l=(h,m)=>{e(y=>({...y,[h]:m})),n("")},u=()=>t.companyName.trim()?t.username.trim()?t.username.length<3?(n("El nombre de usuario debe tener al menos 3 caracteres"),!1):t.password?t.password.length<6?(n("La contrasea debe tener al menos 6 caracteres"),!1):t.password!==t.confirmPassword?(n("Las contraseas no coinciden"),!1):t.name.trim()?!0:(n("El nombre completo es requerido"),!1):(n("La contrasea es requerida"),!1):(n("El nombre de usuario es requerido"),!1):(n("El nombre de la empresa es requerido"),!1);return{formData:t,error:r,loading:s,success:a,updateField:l,handleSubmit:async h=>{if(h.preventDefault(),n(""),o(!1),!!u()){i(!0);try{await R1({companyName:t.companyName.trim(),username:t.username.trim().toLowerCase(),password:t.password,name:t.name.trim(),email:t.email.trim()||null,phone:t.phone.trim()||null}),o(!0),e({companyName:"",username:"",password:"",confirmPassword:"",name:"",email:"",phone:""})}catch(m){n(m.message||"Error al enviar la solicitud. Intenta nuevamente."),U.error("Error en registro:",m)}finally{i(!1)}}},resetForm:()=>{e({companyName:"",username:"",password:"",confirmPassword:"",name:"",email:"",phone:""}),n(""),o(!1)}}}function $1({isOpen:t,onClose:e}){const{formData:r,error:n,loading:s,success:i,updateField:a,handleSubmit:o,resetForm:l}=I1(),u=()=>{l(),e()};return t?c.jsx(Vr,{onClose:u,maxWidth:"md",children:c.jsxs("div",{className:"registration-form-container",children:[c.jsxs("div",{className:"registration-form-header",children:[c.jsxs("div",{className:"registration-form-header-content",children:[c.jsx(ll,{className:"registration-form-icon"}),c.jsx("h2",{className:"registration-form-title",children:"Solicitar Registro"})]}),c.jsx("button",{type:"button",onClick:u,className:"registration-form-close","aria-label":"Cerrar",children:c.jsx(rt,{style:{width:"1.25rem",height:"1.25rem"}})})]}),i?c.jsxs("div",{className:"registration-form-success",children:[c.jsx(Hh,{className:"registration-form-success-icon"}),c.jsx("h3",{className:"registration-form-success-title",children:"Solicitud Enviada!"}),c.jsx("p",{className:"registration-form-success-message",children:"Tu solicitud de registro ha sido enviada exitosamente. Un administrador revisar tu solicitud y te notificar cuando sea aprobada."}),c.jsx("button",{type:"button",onClick:u,className:"registration-form-success-button",children:"Cerrar"})]}):c.jsxs("form",{onSubmit:o,className:"registration-form",children:[c.jsx("p",{className:"registration-form-description",children:"Completa el formulario para solicitar el registro de tu empresa. Un administrador revisar tu solicitud y te notificar cuando sea aprobada."}),n&&c.jsx("div",{className:"registration-form-error",children:n}),c.jsxs("div",{className:"registration-form-group",children:[c.jsx("label",{className:"registration-form-label",children:c.jsxs("div",{className:"registration-form-label-content",children:[c.jsx(ll,{style:{width:"1rem",height:"1rem"}}),"Nombre de la Empresa *"]})}),c.jsx("input",{type:"text",value:r.companyName,onChange:d=>a("companyName",d.target.value),className:"registration-form-input",placeholder:"Ej: Mi Empresa S.A.",required:!0,disabled:s})]}),c.jsxs("div",{className:"registration-form-group",children:[c.jsx("label",{className:"registration-form-label",children:c.jsxs("div",{className:"registration-form-label-content",children:[c.jsx(xe,{style:{width:"1rem",height:"1rem"}}),"Nombre de Usuario *"]})}),c.jsx("input",{type:"text",value:r.username,onChange:d=>a("username",d.target.value.toLowerCase()),className:"registration-form-input",placeholder:"usuario123",required:!0,disabled:s,minLength:3})]}),c.jsxs("div",{className:"registration-form-row",children:[c.jsxs("div",{className:"registration-form-group",children:[c.jsx("label",{className:"registration-form-label",children:c.jsxs("div",{className:"registration-form-label-content",children:[c.jsx(Ar,{style:{width:"1rem",height:"1rem"}}),"Contrasea *"]})}),c.jsx("input",{type:"password",value:r.password,onChange:d=>a("password",d.target.value),className:"registration-form-input",placeholder:"Mnimo 6 caracteres",required:!0,disabled:s,minLength:6})]}),c.jsxs("div",{className:"registration-form-group",children:[c.jsx("label",{className:"registration-form-label",children:c.jsxs("div",{className:"registration-form-label-content",children:[c.jsx(Ar,{style:{width:"1rem",height:"1rem"}}),"Confirmar Contrasea *"]})}),c.jsx("input",{type:"password",value:r.confirmPassword,onChange:d=>a("confirmPassword",d.target.value),className:"registration-form-input",placeholder:"Repite la contrasea",required:!0,disabled:s,minLength:6})]})]}),c.jsxs("div",{className:"registration-form-group",children:[c.jsx("label",{className:"registration-form-label",children:c.jsxs("div",{className:"registration-form-label-content",children:[c.jsx(xe,{style:{width:"1rem",height:"1rem"}}),"Nombre Completo *"]})}),c.jsx("input",{type:"text",value:r.name,onChange:d=>a("name",d.target.value),className:"registration-form-input",placeholder:"Juan Prez",required:!0,disabled:s})]}),c.jsxs("div",{className:"registration-form-row",children:[c.jsxs("div",{className:"registration-form-group",children:[c.jsx("label",{className:"registration-form-label",children:c.jsxs("div",{className:"registration-form-label-content",children:[c.jsx(yy,{style:{width:"1rem",height:"1rem"}}),"Email"]})}),c.jsx("input",{type:"email",value:r.email,onChange:d=>a("email",d.target.value),className:"registration-form-input",placeholder:"correo@ejemplo.com",disabled:s})]}),c.jsxs("div",{className:"registration-form-group",children:[c.jsx("label",{className:"registration-form-label",children:c.jsxs("div",{className:"registration-form-label-content",children:[c.jsx(Sc,{style:{width:"1rem",height:"1rem"}}),"Telfono"]})}),c.jsx("input",{type:"tel",value:r.phone,onChange:d=>a("phone",d.target.value),className:"registration-form-input",placeholder:"+1234567890",disabled:s})]})]}),c.jsxs("div",{className:"registration-form-actions",children:[c.jsx("button",{type:"button",onClick:u,className:"registration-form-button-cancel",disabled:s,children:"Cancelar"}),c.jsx("button",{type:"submit",className:"registration-form-button-submit",disabled:s,children:s?"Enviando...":"Enviar Solicitud"})]})]})]})}):null}function L1({onLogin:t}){const[e,r]=b.useState(!1),{username:n,password:s,error:i,loading:a,setUsername:o,setPassword:l,handleSubmit:u}=A1(t);return c.jsxs("div",{className:"login-contenedor",children:[c.jsxs("div",{className:"login-envoltorio",children:[c.jsxs("div",{className:"login-marca-lado",children:[c.jsx("div",{className:"login-ilustracion",children:c.jsxs("div",{className:"login-ilustracion-escena",children:[c.jsx("div",{className:"login-montana-atras"}),c.jsx("div",{className:"login-montana"}),c.jsx("div",{className:"login-nube"}),c.jsx("div",{className:"login-nube"}),c.jsxs("div",{className:"login-estrellas",children:[c.jsx("div",{className:"login-estrella"}),c.jsx("div",{className:"login-estrella"}),c.jsx("div",{className:"login-estrella"}),c.jsx("div",{className:"login-estrella"}),c.jsx("div",{className:"login-estrella"})]}),c.jsx("div",{className:"login-celestial"})]})}),c.jsxs("div",{className:"login-ilustracion-texto",children:[c.jsx("p",{className:"login-ilustracion-titulo",children:"Que tengas unas excelentes ventas."}),c.jsx("p",{className:"login-ilustracion-subtitulo",children:"Planifica tus pedidos con dash"})]})]}),c.jsxs("div",{className:"login-formulario-lado",children:[c.jsxs("div",{className:"login-encabezado",children:[c.jsxs("h1",{className:"login-saludo",children:["Hola!",c.jsx("span",{className:"login-saludo-destacado",children:"Buen da"})]}),c.jsx("p",{className:"login-subtitulo",children:"Ingresa tus credenciales para acceder"})]}),c.jsxs("div",{className:"login-formulario-contenedor",children:[c.jsxs("form",{onSubmit:u,className:"login-formulario",children:[c.jsxs("div",{className:"login-formulario-grupo",children:[c.jsx("label",{className:"login-etiqueta",children:c.jsxs("div",{className:"login-etiqueta-contenido",children:[c.jsx(xe,{style:{width:"1rem",height:"1rem"}}),"Usuario"]})}),c.jsx("input",{type:"text",value:n,onChange:d=>o(d.target.value),className:"login-entrada",placeholder:"Ingresa tu usuario",required:!0})]}),c.jsxs("div",{className:"login-formulario-grupo",children:[c.jsx("label",{className:"login-etiqueta",children:c.jsxs("div",{className:"login-etiqueta-contenido",children:[c.jsx(Ar,{style:{width:"1rem",height:"1rem"}}),"Contrasea"]})}),c.jsx("input",{type:"password",value:s,onChange:d=>l(d.target.value),className:"login-entrada",placeholder:"Ingresa tu contrasea",required:!0})]}),c.jsx("div",{className:"login-olvidaste-contrasea",children:c.jsx("a",{href:"#",children:"Olvidaste tu contrasea?"})}),i&&c.jsx("div",{className:"login-error",children:i}),c.jsxs("button",{type:"submit",className:"login-boton",disabled:a,children:[c.jsx(gy,{style:{width:"1.25rem",height:"1.25rem"}}),a?"Iniciando sesin...":"Iniciar Sesin"]})]}),c.jsxs("div",{className:"login-crear-cuenta",children:[c.jsx("span",{className:"login-crear-cuenta-texto",children:"No tienes cuenta?"}),c.jsx("button",{type:"button",onClick:()=>r(!0),className:"login-crear-cuenta-enlace",children:"Crear cuenta"})]})]})]})]}),c.jsx($1,{isOpen:e,onClose:()=>r(!1)})]})}const Dt="delivery_app_session",M1=13*60*60*1e3;function D1(){const[t,e]=b.useState(null),[r,n]=b.useState(!0),[s,i]=b.useState("");b.useEffect(()=>{try{const u=localStorage.getItem(Dt);if(u){const{user:d,timestamp:f}=JSON.parse(u);Date.now()-f<M1?(e(d),n(!1)):(localStorage.removeItem(Dt),n(!1))}else n(!1)}catch{localStorage.removeItem(Dt),n(!1)}},[]);const a=b.useCallback(async(u,d)=>{n(!0),i("");try{if(typeof u=="object"&&u!==null)return e(u),localStorage.setItem(Dt,JSON.stringify({user:u,timestamp:Date.now()})),n(!1),u;if(typeof u!="string")throw new Error("Username debe ser un string");const f=await Im(u,d);return e(f),localStorage.setItem(Dt,JSON.stringify({user:f,timestamp:Date.now()})),f}catch(f){throw i(f.message||"Error al iniciar sesin. Intenta nuevamente."),f}finally{n(!1)}},[]),o=b.useCallback(()=>{e(null),i(""),localStorage.removeItem(Dt)},[]),l=b.useCallback(u=>{e(u);const d=localStorage.getItem(Dt);if(d){const{timestamp:f}=JSON.parse(d);localStorage.setItem(Dt,JSON.stringify({user:u,timestamp:f}))}},[]);return{currentUser:t,loading:r,error:s,login:a,logout:o,updateUser:l}}function $m(t){var e,r,n,s,i;return{id:`ORD-${t.id}`,clientName:((e=t.clients)==null?void 0:e.name)||"",clientPhone:((r=t.clients)==null?void 0:r.phone)||"",pickupAddress:t.pickup_address,deliveryAddress:t.delivery_address,local:((n=t.locals)==null?void 0:n.name)||"",localAddress:((s=t.locals)==null?void 0:s.address)||t.pickup_address||"",suggestedPrice:parseFloat(t.suggested_price),notes:t.notes||"",status:t.status,pickupCode:t.pickup_code,driverName:((i=t.drivers)==null?void 0:i.name)||null,driverId:t.driver_id,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at),_dbId:t.id,_dbClientId:t.client_id,_dbLocalId:t.local_id,_dbUserId:t.user_id}}async function U1(t,e=null){try{let r=Y.from("orders").select(`
				*,
				clients(name, phone, address),
				locals(name, address),
				company_users(name, username),
				drivers(name, phone)
			`).eq("company_id",t).order("created_at",{ascending:!1});e&&(r=r.eq("local_id",e));const{data:n,error:s}=await r;if(s)throw s;return(n||[]).map($m)}catch(r){throw U.error("Error cargando pedidos:",r),r}}async function z1(t,e,r){try{const{data:n,error:s}=await Y.from("orders").insert({company_id:e,client_id:t.clientId,local_id:t.localId,user_id:r,pickup_address:t.pickupAddress,delivery_address:t.deliveryAddress,suggested_price:t.suggestedPrice,notes:t.notes||null,status:"Pendiente",pickup_code:t.pickupCode}).select(`
				*,
				clients(name, phone, address),
				locals(name, address),
				company_users(name, username),
				drivers(name, phone)
			`).single();if(s)throw s;return $m(n)}catch(n){throw U.error("Error creando pedido:",n),n}}async function F1(t){try{const{error:e}=await Y.from("orders").delete().eq("id",t);if(e)throw e;return!0}catch(e){throw U.error("Error eliminando pedido:",e),e}}function B1(t){const[e,r]=b.useState([]),[n,s]=b.useState(!1),i=b.useCallback(async()=>{if(t){s(!0);try{const l=t.companyId||t.company_id,u=t.role==="local"?t.localId:null,d=await U1(l,u);r(d)}catch(l){U.error("Error cargando pedidos:",l)}finally{s(!1)}}},[t]);b.useEffect(()=>{t&&i()},[t,i]),b.useEffect(()=>{if(!t)return;const l=t.companyId||t.company_id;if(!l)return;i();const u=Y.channel(`orders-company-${l}`).on("postgres_changes",{event:"*",schema:"public",table:"orders",filter:`company_id=eq.${l}`},()=>{i()}).subscribe(),d=setInterval(()=>{i()},6e4);return()=>{clearInterval(d),Y.removeChannel(u)}},[t,i]);const a=b.useCallback(async(l,u,d)=>{if(t)try{let f=null;if(l.selectedClientId&&(f=u.find(x=>{var _;return x.id===l.selectedClientId||((_=x._dbId)==null?void 0:_.toString())===l.selectedClientId})),!f&&l.clientName&&(f=u.find(x=>x.name===l.clientName)),!f)throw new Error("Cliente no encontrado. Por favor selecciona un cliente de la lista.");const h=d.find(x=>x.name===l.local);if(!h)throw new Error("Local no encontrado");const m=jy(),y=await z1({clientId:f._dbId||f.id,localId:h.id,pickupAddress:l.pickupAddress,deliveryAddress:l.deliveryAddress,suggestedPrice:l.suggestedPrice,notes:l.notes,pickupCode:m},t.companyId,t.id);return r(x=>[y,...x]),y}catch(f){throw U.error("Error creando pedido:",f),f}},[t]),o=b.useCallback(async l=>{try{const u=e.find(d=>d.id===l);return u?(await F1(u._dbId),r(d=>d.filter(f=>f.id!==l)),!0):void 0}catch(u){throw U.error("Error eliminando pedido:",u),u}},[e]);return{orders:e,setOrders:r,loading:n,createOrder:a,deleteOrder:o,reloadOrders:i}}function Lm(t){var e;return{...t,id:`CLI-${t.id}`,local:((e=t.locals)==null?void 0:e.name)||"",_dbId:t.id,_dbLocalId:t.local_id}}async function q1(t){try{const{data:e,error:r}=await Y.from("clients").select("*, locals(name)").eq("company_id",t).order("created_at",{ascending:!1});if(r)throw r;return(e||[]).map(Lm)}catch(e){throw U.error("Error cargando clientes:",e),e}}async function W1(t,e,r){try{const{data:n,error:s}=await Y.from("clients").insert({company_id:e,name:t.name,phone:t.phone,address:t.address,local_id:r}).select().single();if(s)throw s;return Lm(n)}catch(n){throw U.error("Error creando cliente:",n),n}}async function V1(t,e,r){try{const{error:n}=await Y.from("clients").update({name:e.name,phone:e.phone,address:e.address,local_id:r}).eq("id",t);if(n)throw n;return!0}catch(n){throw U.error("Error actualizando cliente:",n),n}}async function H1(t){try{const{error:e}=await Y.from("clients").delete().eq("id",t);if(e)throw e;return!0}catch(e){throw U.error("Error eliminando cliente:",e),e}}function G1(t,e){const[r,n]=b.useState([]),[s,i]=b.useState(!1),a=b.useCallback(async()=>{if(t){i(!0);try{const d=t.companyId||t.company_id,f=await q1(d);n(f)}catch(d){U.error("Error cargando clientes:",d)}finally{i(!1)}}},[t]);b.useEffect(()=>{t&&a()},[t,a]);const o=b.useCallback(async d=>{if(t)try{const f=e.find(m=>m.name===d.local);if(!f)throw new Error("Local no encontrado");const h=await W1(d,t.companyId,f.id);return n(m=>[h,...m]),h}catch(f){throw U.error("Error creando cliente:",f),f}},[t,e]),l=b.useCallback(async(d,f)=>{if(t)try{const h=r.find(y=>y.id===d);if(!h)return;const m=e.find(y=>y.name===f.local);if(!m)throw new Error("Local no encontrado");return await V1(h._dbId||h.id,f,m.id),await a(),!0}catch(h){throw U.error("Error actualizando cliente:",h),h}},[t,r,e,a]),u=b.useCallback(async d=>{if(t)try{const f=r.find(h=>h.id===d);return f?(await H1(f._dbId||f.id),n(h=>h.filter(m=>m.id!==d)),!0):void 0}catch(f){throw U.error("Error eliminando cliente:",f),f}},[t,r]);return{clients:r,setClients:n,loading:s,createClient:o,updateClient:l,deleteClient:u,reloadClients:a}}function Mm(t){var n;const{password:e,...r}=t;return{...r,id:`USR-${t.id}`,local:t.role==="local"?(n=t.locals)==null?void 0:n.name:null,_dbId:t.id,_dbLocalId:t.local_id}}async function K1(t){try{const{data:e,error:r}=await Y.from("company_users").select("*, locals(name)").eq("company_id",t).order("created_at",{ascending:!1});if(r)throw r;return(e||[]).map(Mm)}catch(e){throw U.error("Error cargando usuarios:",e),e}}async function J1(t,e,r=null){try{const n=await Oa(t.password),{data:s,error:i}=await Y.from("company_users").insert({company_id:e,username:t.username,password:n,role:t.role,name:t.name,local_id:r}).select("*, locals(name)").single();if(i)throw i;return Mm(s)}catch(n){throw U.error("Error creando usuario:",n),n}}async function Q1(t,e,r=null){try{const n={username:e.username,role:e.role,name:e.name,local_id:r};e.password&&e.password.trim()&&(n.password=await Oa(e.password));const{error:s}=await Y.from("company_users").update(n).eq("id",t);if(s)throw s;return!0}catch(n){throw U.error("Error actualizando usuario:",n),n}}async function Y1(t){try{const{error:e}=await Y.from("company_users").delete().eq("id",t);if(e)throw e;return!0}catch(e){throw U.error("Error eliminando usuario:",e),e}}function X1(t,e){const[r,n]=b.useState([]),[s,i]=b.useState(!1),a=b.useCallback(async()=>{if(t){i(!0);try{const d=t.companyId||t.company_id,f=await K1(d);n(f)}catch(d){U.error("Error cargando usuarios:",d)}finally{i(!1)}}},[t]);b.useEffect(()=>{t&&a()},[t,a]);const o=b.useCallback(async d=>{if(t)try{const f=d.local?e.find(m=>m.name===d.local):null,h=await J1(d,t.companyId,(f==null?void 0:f.id)||null);return n(m=>[h,...m]),h}catch(f){throw U.error("Error creando usuario:",f),f}},[t,e]),l=b.useCallback(async(d,f)=>{if(t){if(t.role==="admin"){const h=r.find(m=>m.id===d);if(h&&h.role==="empresarial")throw new Error("No puedes editar el usuario CEO. Solo el CEO puede modificar su propia cuenta.")}try{const h=r.find(y=>y.id===d);if(!h)return;const m=f.local?e.find(y=>y.name===f.local):null;return await Q1(h._dbId||h.id,f,(m==null?void 0:m.id)||null),await a(),!0}catch(h){throw U.error("Error actualizando usuario:",h),h}}},[t,r,e,a]),u=b.useCallback(async d=>{if(!t)return;const f=r.find(h=>h.id===d);if(f&&f.role==="empresarial")throw new Error("No se puede eliminar el usuario CEO. Este usuario es esencial para el sistema.");try{const h=r.find(m=>m.id===d);return h?(await Y1(h._dbId||h.id),n(m=>m.filter(y=>y.id!==d)),!0):void 0}catch(h){throw U.error("Error eliminando usuario:",h),h}},[t,r]);return{users:r,setUsers:n,loading:s,createUser:o,updateUser:l,deleteUser:u,reloadUsers:a}}async function Dm(t){try{const{data:e,error:r}=await Y.from("locals").select("*").eq("company_id",t).order("name");if(r)throw r;return e||[]}catch(e){throw U.error("Error cargando locales:",e),e}}async function Z1(t,e){try{const r=t.map(s=>({company_id:e,name:s.name,address:s.address})),{error:n}=await Y.from("locals").insert(r);if(n)throw n;return!0}catch(r){throw U.error("Error creando locales:",r),r}}async function e_(t,e){try{const{error:r}=await Y.from("locals").update({name:e.name,address:e.address}).eq("id",t);if(r)throw r;return!0}catch(r){throw U.error("Error actualizando local:",r),r}}async function t_(t,e){try{const r=t.filter(s=>s.id),n=t.filter(s=>!s.id);for(const s of r){const i=t.find(a=>a.id===s.id);i&&(i.name!==s.name||i.address!==s.address)&&await e_(s.id,i)}return n.length>0&&await Z1(n,e),await Dm(e)}catch(r){throw U.error("Error guardando locales:",r),r}}function r_(t){const[e,r]=b.useState([]),[n,s]=b.useState(!1),i=b.useCallback(async()=>{if(t){s(!0);try{const o=t.companyId||t.company_id,l=await Dm(o);r(l)}catch(o){U.error("Error cargando locales:",o)}finally{s(!1)}}},[t]);b.useEffect(()=>{t&&i()},[t,i]);const a=b.useCallback(async o=>{if(t)try{const l=t.companyId||t.company_id,u=await t_(o,l);return r(u),u}catch(l){throw U.error("Error guardando locales:",l),l}},[t]);return{localConfigs:e,setLocalConfigs:r,loading:n,saveLocalConfigs:a,reloadLocals:i}}function n_(){const{currentUser:t,login:e,logout:r,updateUser:n}=D1(),{localConfigs:s,setLocalConfigs:i,saveLocalConfigs:a}=r_(t),{clients:o,createClient:l,updateClient:u,deleteClient:d}=G1(t,s),{users:f,createUser:h,updateUser:m,deleteUser:y}=X1(t,s),{orders:x,setOrders:_,createOrder:v,deleteOrder:g,reloadOrders:p}=B1(t),{showSuccess:w,showError:k}=jc(),{confirm:S,isOpen:j,config:E,onConfirm:P,onCancel:B}=tp(),C=async L=>{try{await l(L),w("Cliente creado exitosamente")}catch(V){k("Error al crear cliente: "+V.message)}},O=async(L,V)=>{try{await u(L,V),w("Cliente actualizado exitosamente")}catch(F){k("Error al actualizar cliente: "+F.message)}},z=async L=>{if(await S({title:"Eliminar Cliente",message:"Ests seguro de que deseas eliminar este cliente?",confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"}))try{await d(L),w("Cliente eliminado exitosamente")}catch(F){k("Error al eliminar cliente: "+F.message)}},K=async L=>{try{await h(L),w("Usuario creado exitosamente")}catch(V){k("Error al crear usuario: "+V.message)}},D=async(L,V)=>{try{await m(L,V),w("Usuario actualizado exitosamente")}catch(F){k("Error al actualizar usuario: "+F.message)}},I=async L=>{if(await S({title:"Eliminar Usuario",message:"Ests seguro de que deseas eliminar este usuario?",confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"}))try{await y(L),w("Usuario eliminado exitosamente")}catch(F){k("Error al eliminar usuario: "+F.message)}},W=async(L,V,F)=>{try{await v(L,V,F),w("Pedido creado exitosamente")}catch(X){throw k("Error al crear pedido: "+X.message),X}},N=async L=>{if(await S({title:"Eliminar Pedido",message:"Ests seguro de que deseas eliminar este pedido?",confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"}))try{await g(L),w("Pedido eliminado exitosamente")}catch(F){throw k("Error al eliminar pedido: "+F.message),F}},$=async L=>{try{await a(L),w("Locales guardados exitosamente")}catch(V){throw k("Error al guardar locales: "+V.message),V}};return t?c.jsxs(c.Fragment,{children:[c.jsx(ay,{}),c.jsx(rp,{isOpen:j,onClose:B,onConfirm:P,title:(E==null?void 0:E.title)||"Confirmar",message:(E==null?void 0:E.message)||"",confirmText:(E==null?void 0:E.confirmText)||"Confirmar",cancelText:(E==null?void 0:E.cancelText)||"Cancelar",type:(E==null?void 0:E.type)||"danger"}),c.jsx(P1,{currentUser:t,orders:x,setOrders:_,onReloadOrders:p,localConfigs:s,setLocalConfigs:i,clients:o,onCreateClient:C,onUpdateClient:O,onDeleteClient:z,users:f,onCreateUser:K,onUpdateUser:D,onDeleteUser:I,onCreateOrder:W,onDeleteOrder:N,onSaveLocalConfigs:$,onLogout:r,onUpdateCurrentUser:n})]}):c.jsx(L1,{onLogin:e})}ho.createRoot(document.getElementById("root")).render(c.jsx(o0.StrictMode,{children:c.jsx(n_,{})}));
